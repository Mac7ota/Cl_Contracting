var q2=Object.defineProperty,Y2=Object.defineProperties;var Z2=Object.getOwnPropertyDescriptors;var Yh=Object.getOwnPropertySymbols;var CT=Object.prototype.hasOwnProperty,AT=Object.prototype.propertyIsEnumerable;var TT=(n,e,t)=>e in n?q2(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,me=(n,e)=>{for(var t in e||={})CT.call(e,t)&&TT(n,t,e[t]);if(Yh)for(var t of Yh(e))AT.call(e,t)&&TT(n,t,e[t]);return n},vt=(n,e)=>Y2(n,Z2(e));var IT=(n,e)=>{var t={};for(var i in n)CT.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&Yh)for(var i of Yh(n))e.indexOf(i)<0&&AT.call(n,i)&&(t[i]=n[i]);return t};var ji=(n,e,t)=>new Promise((i,r)=>{var s=l=>{try{a(t.next(l))}catch(c){r(c)}},o=l=>{try{a(t.throw(l))}catch(c){r(c)}},a=l=>l.done?i(l.value):Promise.resolve(l.value).then(s,o);a((t=t.apply(n,e)).next())});function hv(n,e){return Object.is(n,e)}var yn=null,Zh=!1,fv=1,Ei=Symbol("SIGNAL");function Rt(n){let e=yn;return yn=n,e}function DT(){return yn}var Nu={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Jh(n){if(Zh)throw new Error("");if(yn===null)return;yn.consumerOnSignalRead(n);let e=yn.nextProducerIndex++;if(tf(yn),e<yn.producerNode.length&&yn.producerNode[e]!==n&&Pu(yn)){let t=yn.producerNode[e];ef(t,yn.producerIndexOfThis[e])}yn.producerNode[e]!==n&&(yn.producerNode[e]=n,yn.producerIndexOfThis[e]=Pu(yn)?NT(n,yn,e):0),yn.producerLastReadVersion[e]=n.version}function K2(){fv++}function pv(n){if(!(Pu(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===fv)){if(!n.producerMustRecompute(n)&&!gv(n)){dv(n);return}n.producerRecomputeValue(n),dv(n)}}function RT(n){if(n.liveConsumerNode===void 0)return;let e=Zh;Zh=!0;try{for(let t of n.liveConsumerNode)t.dirty||J2(t)}finally{Zh=e}}function PT(){return yn?.consumerAllowSignalWrites!==!1}function J2(n){n.dirty=!0,RT(n),n.consumerMarkedDirty?.(n)}function dv(n){n.dirty=!1,n.lastCleanEpoch=fv}function Qh(n){return n&&(n.nextProducerIndex=0),Rt(n)}function mv(n,e){if(Rt(e),!(!n||n.producerNode===void 0||n.producerIndexOfThis===void 0||n.producerLastReadVersion===void 0)){if(Pu(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)ef(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function gv(n){tf(n);for(let e=0;e<n.producerNode.length;e++){let t=n.producerNode[e],i=n.producerLastReadVersion[e];if(i!==t.version||(pv(t),i!==t.version))return!0}return!1}function yv(n){if(tf(n),Pu(n))for(let e=0;e<n.producerNode.length;e++)ef(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function NT(n,e,t){if(OT(n),n.liveConsumerNode.length===0&&LT(n))for(let i=0;i<n.producerNode.length;i++)n.producerIndexOfThis[i]=NT(n.producerNode[i],n,i);return n.liveConsumerIndexOfThis.push(t),n.liveConsumerNode.push(e)-1}function ef(n,e){if(OT(n),n.liveConsumerNode.length===1&&LT(n))for(let i=0;i<n.producerNode.length;i++)ef(n.producerNode[i],n.producerIndexOfThis[i]);let t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){let i=n.liveConsumerIndexOfThis[e],r=n.liveConsumerNode[e];tf(r),r.producerIndexOfThis[i]=e}}function Pu(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function tf(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}function OT(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}function LT(n){return n.producerNode!==void 0}function FT(n){let e=Object.create(Q2);e.computation=n;let t=()=>{if(pv(e),Jh(e),e.value===Kh)throw e.error;return e.value};return t[Ei]=e,t}var cv=Symbol("UNSET"),uv=Symbol("COMPUTING"),Kh=Symbol("ERRORED"),Q2=vt(me({},Nu),{value:cv,dirty:!0,error:null,equal:hv,producerMustRecompute(n){return n.value===cv||n.value===uv},producerRecomputeValue(n){if(n.value===uv)throw new Error("Detected cycle in computations.");let e=n.value;n.value=uv;let t=Qh(n),i;try{i=n.computation()}catch(r){i=Kh,n.error=r}finally{mv(n,t)}if(e!==cv&&e!==Kh&&i!==Kh&&n.equal(e,i)){n.value=e;return}n.value=i,n.version++}});function ek(){throw new Error}var kT=ek;function UT(){kT()}function BT(n){kT=n}var tk=null;function VT(n){let e=Object.create(vv);e.value=n;let t=()=>(Jh(e),e.value);return t[Ei]=e,t}function nf(n,e){PT()||UT(),n.equal(n.value,e)||(n.value=e,nk(n))}function zT(n,e){PT()||UT(),nf(n,e(n.value))}var vv=vt(me({},Nu),{equal:hv,value:void 0});function nk(n){n.version++,K2(),RT(n),tk?.()}function nt(n){return typeof n=="function"}function dl(n){let t=n(i=>{Error.call(i),i.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var rf=dl(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((i,r)=>`${r+1}) ${i.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function Ou(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var hn=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let s of t)s.remove(this);else t.remove(this);let{initialTeardown:i}=this;if(nt(i))try{i()}catch(s){e=s instanceof rf?s.errors:[s]}let{_finalizers:r}=this;if(r){this._finalizers=null;for(let s of r)try{HT(s)}catch(o){e=e??[],o instanceof rf?e=[...e,...o.errors]:e.push(o)}}if(e)throw new rf(e)}}add(e){var t;if(e&&e!==this)if(this.closed)HT(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&Ou(t,e)}remove(e){let{_finalizers:t}=this;t&&Ou(t,e),e instanceof n&&e._removeParent(this)}};hn.EMPTY=(()=>{let n=new hn;return n.closed=!0,n})();var _v=hn.EMPTY;function sf(n){return n instanceof hn||n&&"closed"in n&&nt(n.remove)&&nt(n.add)&&nt(n.unsubscribe)}function HT(n){nt(n)?n():n.unsubscribe()}var fr={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var hl={setTimeout(n,e,...t){let{delegate:i}=hl;return i?.setTimeout?i.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=hl;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function of(n){hl.setTimeout(()=>{let{onUnhandledError:e}=fr;if(e)e(n);else throw n})}function Lu(){}var GT=xv("C",void 0,void 0);function jT(n){return xv("E",void 0,n)}function WT(n){return xv("N",n,void 0)}function xv(n,e,t){return{kind:n,value:e,error:t}}var na=null;function fl(n){if(fr.useDeprecatedSynchronousErrorHandling){let e=!na;if(e&&(na={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:i}=na;if(na=null,t)throw i}}else n()}function $T(n){fr.useDeprecatedSynchronousErrorHandling&&na&&(na.errorThrown=!0,na.error=n)}var ia=class extends hn{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,sf(e)&&e.add(this)):this.destination=sk}static create(e,t,i){return new pl(e,t,i)}next(e){this.isStopped?Mv(WT(e),this):this._next(e)}error(e){this.isStopped?Mv(jT(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Mv(GT,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},ik=Function.prototype.bind;function Ev(n,e){return ik.call(n,e)}var wv=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(i){af(i)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(i){af(i)}else af(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){af(t)}}},pl=class extends ia{constructor(e,t,i){super();let r;if(nt(e)||!e)r={next:e??void 0,error:t??void 0,complete:i??void 0};else{let s;this&&fr.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),r={next:e.next&&Ev(e.next,s),error:e.error&&Ev(e.error,s),complete:e.complete&&Ev(e.complete,s)}):r=e}this.destination=new wv(r)}};function af(n){fr.useDeprecatedSynchronousErrorHandling?$T(n):of(n)}function rk(n){throw n}function Mv(n,e){let{onStoppedNotification:t}=fr;t&&hl.setTimeout(()=>t(n,e))}var sk={closed:!0,next:Lu,error:rk,complete:Lu};var ml=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Mi(n){return n}function bv(...n){return Sv(n)}function Sv(n){return n.length===0?Mi:n.length===1?n[0]:function(t){return n.reduce((i,r)=>r(i),t)}}var Ft=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let i=new n;return i.source=this,i.operator=t,i}subscribe(t,i,r){let s=ak(t)?t:new pl(t,i,r);return fl(()=>{let{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(t){try{return this._subscribe(t)}catch(i){t.error(i)}}forEach(t,i){return i=XT(i),new i((r,s)=>{let o=new pl({next:a=>{try{t(a)}catch(l){s(l),o.unsubscribe()}},error:s,complete:r});this.subscribe(o)})}_subscribe(t){var i;return(i=this.source)===null||i===void 0?void 0:i.subscribe(t)}[ml](){return this}pipe(...t){return Sv(t)(this)}toPromise(t){return t=XT(t),new t((i,r)=>{let s;this.subscribe(o=>s=o,o=>r(o),()=>i(s))})}}return n.create=e=>new n(e),n})();function XT(n){var e;return(e=n??fr.Promise)!==null&&e!==void 0?e:Promise}function ok(n){return n&&nt(n.next)&&nt(n.error)&&nt(n.complete)}function ak(n){return n&&n instanceof ia||ok(n)&&sf(n)}function Tv(n){return nt(n?.lift)}function Ct(n){return e=>{if(Tv(e))return e.lift(function(t){try{return n(t,this)}catch(i){this.error(i)}});throw new TypeError("Unable to lift unknown Observable type")}}function Mt(n,e,t,i,r){return new Cv(n,e,t,i,r)}var Cv=class extends ia{constructor(e,t,i,r,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=t?function(a){try{t(a)}catch(l){e.error(l)}}:super._next,this._error=r?function(a){try{r(a)}catch(l){e.error(l)}finally{this.unsubscribe()}}:super._error,this._complete=i?function(){try{i()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function gl(){return Ct((n,e)=>{let t=null;n._refCount++;let i=Mt(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){t=null;return}let r=n._connection,s=t;t=null,r&&(!s||r===s)&&r.unsubscribe(),e.unsubscribe()});n.subscribe(i),i.closed||(t=n.connect())})}var yl=class extends Ft{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,Tv(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new hn;let t=this.getSubject();e.add(this.source.subscribe(Mt(t,void 0,()=>{this._teardown(),t.complete()},i=>{this._teardown(),t.error(i)},()=>this._teardown()))),e.closed&&(this._connection=null,e=hn.EMPTY)}return e}refCount(){return gl()(this)}};var qT=dl(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var vn=(()=>{class n extends Ft{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let i=new lf(this,this);return i.operator=t,i}_throwIfClosed(){if(this.closed)throw new qT}next(t){fl(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let i of this.currentObservers)i.next(t)}})}error(t){fl(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:i}=this;for(;i.length;)i.shift().error(t)}})}complete(){fl(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:i,isStopped:r,observers:s}=this;return i||r?_v:(this.currentObservers=null,s.push(t),new hn(()=>{this.currentObservers=null,Ou(s,t)}))}_checkFinalizedStatuses(t){let{hasError:i,thrownError:r,isStopped:s}=this;i?t.error(r):s&&t.complete()}asObservable(){let t=new Ft;return t.source=this,t}}return n.create=(e,t)=>new lf(e,t),n})(),lf=class extends vn{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,i;(i=(t=this.destination)===null||t===void 0?void 0:t.next)===null||i===void 0||i.call(t,e)}error(e){var t,i;(i=(t=this.destination)===null||t===void 0?void 0:t.error)===null||i===void 0||i.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,i;return(i=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&i!==void 0?i:_v}};var On=class extends vn{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:i}=this;if(e)throw t;return this._throwIfClosed(),i}next(e){super.next(this._value=e)}};var wi=new Ft(n=>n.complete());function YT(n){return n&&nt(n.schedule)}function ZT(n){return n[n.length-1]}function cf(n){return nt(ZT(n))?n.pop():void 0}function io(n){return YT(ZT(n))?n.pop():void 0}function JT(n,e,t,i){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{c(i.next(u))}catch(d){o(d)}}function l(u){try{c(i.throw(u))}catch(d){o(d)}}function c(u){u.done?s(u.value):r(u.value).then(a,l)}c((i=i.apply(n,e||[])).next())})}function KT(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],i=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&i>=n.length&&(n=void 0),{value:n&&n[i++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function ra(n){return this instanceof ra?(this.v=n,this):new ra(n)}function QT(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=t.apply(n,e||[]),r,s=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",o),r[Symbol.asyncIterator]=function(){return this},r;function o(f){return function(p){return Promise.resolve(p).then(f,d)}}function a(f,p){i[f]&&(r[f]=function(y){return new Promise(function(g,m){s.push([f,y,g,m])>1||l(f,y)})},p&&(r[f]=p(r[f])))}function l(f,p){try{c(i[f](p))}catch(y){h(s[0][3],y)}}function c(f){f.value instanceof ra?Promise.resolve(f.value.v).then(u,d):h(s[0][2],f)}function u(f){l("next",f)}function d(f){l("throw",f)}function h(f,p){f(p),s.shift(),s.length&&l(s[0][0],s[0][1])}}function eC(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof KT=="function"?KT(n):n[Symbol.iterator](),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(s){t[s]=n[s]&&function(o){return new Promise(function(a,l){o=n[s](o),r(a,l,o.done,o.value)})}}function r(s,o,a,l){Promise.resolve(l).then(function(c){s({value:c,done:a})},o)}}var uf=n=>n&&typeof n.length=="number"&&typeof n!="function";function df(n){return nt(n?.then)}function hf(n){return nt(n[ml])}function ff(n){return Symbol.asyncIterator&&nt(n?.[Symbol.asyncIterator])}function pf(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function lk(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var mf=lk();function gf(n){return nt(n?.[mf])}function yf(n){return QT(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:i,done:r}=yield ra(t.read());if(r)return yield ra(void 0);yield yield ra(i)}}finally{t.releaseLock()}})}function vf(n){return nt(n?.getReader)}function fn(n){if(n instanceof Ft)return n;if(n!=null){if(hf(n))return ck(n);if(uf(n))return uk(n);if(df(n))return dk(n);if(ff(n))return tC(n);if(gf(n))return hk(n);if(vf(n))return fk(n)}throw pf(n)}function ck(n){return new Ft(e=>{let t=n[ml]();if(nt(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function uk(n){return new Ft(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function dk(n){return new Ft(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,of)})}function hk(n){return new Ft(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function tC(n){return new Ft(e=>{pk(n,e).catch(t=>e.error(t))})}function fk(n){return tC(yf(n))}function pk(n,e){var t,i,r,s;return JT(this,void 0,void 0,function*(){try{for(t=eC(n);i=yield t.next(),!i.done;){let o=i.value;if(e.next(o),e.closed)return}}catch(o){r={error:o}}finally{try{i&&!i.done&&(s=t.return)&&(yield s.call(t))}finally{if(r)throw r.error}}e.complete()})}function ai(n,e,t,i=0,r=!1){let s=e.schedule(function(){t(),r?n.add(this.schedule(null,i)):this.unsubscribe()},i);if(n.add(s),!r)return s}function _f(n,e=0){return Ct((t,i)=>{t.subscribe(Mt(i,r=>ai(i,n,()=>i.next(r),e),()=>ai(i,n,()=>i.complete(),e),r=>ai(i,n,()=>i.error(r),e)))})}function xf(n,e=0){return Ct((t,i)=>{i.add(n.schedule(()=>t.subscribe(i),e))})}function nC(n,e){return fn(n).pipe(xf(e),_f(e))}function iC(n,e){return fn(n).pipe(xf(e),_f(e))}function rC(n,e){return new Ft(t=>{let i=0;return e.schedule(function(){i===n.length?t.complete():(t.next(n[i++]),t.closed||this.schedule())})})}function sC(n,e){return new Ft(t=>{let i;return ai(t,e,()=>{i=n[mf](),ai(t,e,()=>{let r,s;try{({value:r,done:s}=i.next())}catch(o){t.error(o);return}s?t.complete():t.next(r)},0,!0)}),()=>nt(i?.return)&&i.return()})}function Ef(n,e){if(!n)throw new Error("Iterable cannot be null");return new Ft(t=>{ai(t,e,()=>{let i=n[Symbol.asyncIterator]();ai(t,e,()=>{i.next().then(r=>{r.done?t.complete():t.next(r.value)})},0,!0)})})}function oC(n,e){return Ef(yf(n),e)}function aC(n,e){if(n!=null){if(hf(n))return nC(n,e);if(uf(n))return rC(n,e);if(df(n))return iC(n,e);if(ff(n))return Ef(n,e);if(gf(n))return sC(n,e);if(vf(n))return oC(n,e)}throw pf(n)}function ln(n,e){return e?aC(n,e):fn(n)}function Qe(...n){let e=io(n);return ln(n,e)}function vl(n,e){let t=nt(n)?n:()=>n,i=r=>r.error(t());return new Ft(e?r=>e.schedule(i,0,r):i)}function Av(n){return!!n&&(n instanceof Ft||nt(n.lift)&&nt(n.subscribe))}var cs=dl(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function _t(n,e){return Ct((t,i)=>{let r=0;t.subscribe(Mt(i,s=>{i.next(n.call(e,s,r++))}))})}var{isArray:mk}=Array;function gk(n,e){return mk(e)?n(...e):n(e)}function Mf(n){return _t(e=>gk(n,e))}var{isArray:yk}=Array,{getPrototypeOf:vk,prototype:_k,keys:xk}=Object;function wf(n){if(n.length===1){let e=n[0];if(yk(e))return{args:e,keys:null};if(Ek(e)){let t=xk(e);return{args:t.map(i=>e[i]),keys:t}}}return{args:n,keys:null}}function Ek(n){return n&&typeof n=="object"&&vk(n)===_k}function bf(n,e){return n.reduce((t,i,r)=>(t[i]=e[r],t),{})}function Sf(...n){let e=io(n),t=cf(n),{args:i,keys:r}=wf(n);if(i.length===0)return ln([],e);let s=new Ft(Mk(i,e,r?o=>bf(r,o):Mi));return t?s.pipe(Mf(t)):s}function Mk(n,e,t=Mi){return i=>{lC(e,()=>{let{length:r}=n,s=new Array(r),o=r,a=r;for(let l=0;l<r;l++)lC(e,()=>{let c=ln(n[l],e),u=!1;c.subscribe(Mt(i,d=>{s[l]=d,u||(u=!0,a--),a||i.next(t(s.slice()))},()=>{--o||i.complete()}))},i)},i)}}function lC(n,e,t){n?ai(t,n,e):e()}function cC(n,e,t,i,r,s,o,a){let l=[],c=0,u=0,d=!1,h=()=>{d&&!l.length&&!c&&e.complete()},f=y=>c<i?p(y):l.push(y),p=y=>{s&&e.next(y),c++;let g=!1;fn(t(y,u++)).subscribe(Mt(e,m=>{r?.(m),s?f(m):e.next(m)},()=>{g=!0},void 0,()=>{if(g)try{for(c--;l.length&&c<i;){let m=l.shift();o?ai(e,o,()=>p(m)):p(m)}h()}catch(m){e.error(m)}}))};return n.subscribe(Mt(e,f,()=>{d=!0,h()})),()=>{a?.()}}function _n(n,e,t=1/0){return nt(e)?_n((i,r)=>_t((s,o)=>e(i,s,r,o))(fn(n(i,r))),t):(typeof e=="number"&&(t=e),Ct((i,r)=>cC(i,r,n,t)))}function Iv(n=1/0){return _n(Mi,n)}function uC(){return Iv(1)}function _l(...n){return uC()(ln(n,io(n)))}function Tf(n){return new Ft(e=>{fn(n()).subscribe(e)})}function Dv(...n){let e=cf(n),{args:t,keys:i}=wf(n),r=new Ft(s=>{let{length:o}=t;if(!o){s.complete();return}let a=new Array(o),l=o,c=o;for(let u=0;u<o;u++){let d=!1;fn(t[u]).subscribe(Mt(s,h=>{d||(d=!0,c--),a[u]=h},()=>l--,void 0,()=>{(!l||!d)&&(c||s.next(i?bf(i,a):a),s.complete())}))}});return e?r.pipe(Mf(e)):r}function Wi(n,e){return Ct((t,i)=>{let r=0;t.subscribe(Mt(i,s=>n.call(e,s,r++)&&i.next(s)))})}function ro(n){return Ct((e,t)=>{let i=null,r=!1,s;i=e.subscribe(Mt(t,void 0,void 0,o=>{s=fn(n(o,ro(n)(e))),i?(i.unsubscribe(),i=null,s.subscribe(t)):r=!0})),r&&(i.unsubscribe(),i=null,s.subscribe(t))})}function dC(n,e,t,i,r){return(s,o)=>{let a=t,l=e,c=0;s.subscribe(Mt(o,u=>{let d=c++;l=a?n(l,u,d):(a=!0,u),i&&o.next(l)},r&&(()=>{a&&o.next(l),o.complete()})))}}function sa(n,e){return nt(e)?_n(n,e,1):_n(n,1)}function so(n){return Ct((e,t)=>{let i=!1;e.subscribe(Mt(t,r=>{i=!0,t.next(r)},()=>{i||t.next(n),t.complete()}))})}function us(n){return n<=0?()=>wi:Ct((e,t)=>{let i=0;e.subscribe(Mt(t,r=>{++i<=n&&(t.next(r),n<=i&&t.complete())}))})}function Rv(n){return _t(()=>n)}function Cf(n=wk){return Ct((e,t)=>{let i=!1;e.subscribe(Mt(t,r=>{i=!0,t.next(r)},()=>i?t.complete():t.error(n())))})}function wk(){return new cs}function xl(n){return Ct((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function pr(n,e){let t=arguments.length>=2;return i=>i.pipe(n?Wi((r,s)=>n(r,s,i)):Mi,us(1),t?so(e):Cf(()=>new cs))}function El(n){return n<=0?()=>wi:Ct((e,t)=>{let i=[];e.subscribe(Mt(t,r=>{i.push(r),n<i.length&&i.shift()},()=>{for(let r of i)t.next(r);t.complete()},void 0,()=>{i=null}))})}function Pv(n,e){let t=arguments.length>=2;return i=>i.pipe(n?Wi((r,s)=>n(r,s,i)):Mi,El(1),t?so(e):Cf(()=>new cs))}function Nv(n,e){return Ct(dC(n,e,arguments.length>=2,!0))}function Ov(...n){let e=io(n);return Ct((t,i)=>{(e?_l(n,t,e):_l(n,t)).subscribe(i)})}function $i(n,e){return Ct((t,i)=>{let r=null,s=0,o=!1,a=()=>o&&!r&&i.complete();t.subscribe(Mt(i,l=>{r?.unsubscribe();let c=0,u=s++;fn(n(l,u)).subscribe(r=Mt(i,d=>i.next(e?e(l,d,u,c++):d),()=>{r=null,a()}))},()=>{o=!0,a()}))})}function Lv(n){return Ct((e,t)=>{fn(n).subscribe(Mt(t,()=>t.complete(),Lu)),!t.closed&&e.subscribe(t)})}function xn(n,e,t){let i=nt(n)||e||t?{next:n,error:e,complete:t}:n;return i?Ct((r,s)=>{var o;(o=i.subscribe)===null||o===void 0||o.call(i);let a=!0;r.subscribe(Mt(s,l=>{var c;(c=i.next)===null||c===void 0||c.call(i,l),s.next(l)},()=>{var l;a=!1,(l=i.complete)===null||l===void 0||l.call(i),s.complete()},l=>{var c;a=!1,(c=i.error)===null||c===void 0||c.call(i,l),s.error(l)},()=>{var l,c;a&&((l=i.unsubscribe)===null||l===void 0||l.call(i)),(c=i.finalize)===null||c===void 0||c.call(i)}))}):Mi}var Vv={JSACTION:"jsaction"},zv={JSACTION:"__jsaction",OWNER:"__owner"},mC={};function bk(n){return n[zv.JSACTION]}function hC(n,e){n[zv.JSACTION]=e}function Sk(n){return mC[n]}function Tk(n,e){mC[n]=e}var Be={AUXCLICK:"auxclick",CHANGE:"change",CLICK:"click",CLICKMOD:"clickmod",CLICKONLY:"clickonly",DBLCLICK:"dblclick",FOCUS:"focus",FOCUSIN:"focusin",BLUR:"blur",FOCUSOUT:"focusout",SUBMIT:"submit",KEYDOWN:"keydown",KEYPRESS:"keypress",KEYUP:"keyup",MOUSEUP:"mouseup",MOUSEDOWN:"mousedown",MOUSEOVER:"mouseover",MOUSEOUT:"mouseout",MOUSEENTER:"mouseenter",MOUSELEAVE:"mouseleave",MOUSEMOVE:"mousemove",POINTERUP:"pointerup",POINTERDOWN:"pointerdown",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERMOVE:"pointermove",POINTERCANCEL:"pointercancel",GOTPOINTERCAPTURE:"gotpointercapture",LOSTPOINTERCAPTURE:"lostpointercapture",ERROR:"error",LOAD:"load",UNLOAD:"unload",TOUCHSTART:"touchstart",TOUCHEND:"touchend",TOUCHMOVE:"touchmove",INPUT:"input",SCROLL:"scroll",TOGGLE:"toggle",CUSTOM:"_custom"},Ck=[Be.MOUSEENTER,Be.MOUSELEAVE,"pointerenter","pointerleave"],mte=[Be.CLICK,Be.DBLCLICK,Be.FOCUSIN,Be.FOCUSOUT,Be.KEYDOWN,Be.KEYUP,Be.KEYPRESS,Be.MOUSEOVER,Be.MOUSEOUT,Be.SUBMIT,Be.TOUCHSTART,Be.TOUCHEND,Be.TOUCHMOVE,"touchcancel","auxclick","change","compositionstart","compositionupdate","compositionend","beforeinput","input","select","copy","cut","paste","mousedown","mouseup","wheel","contextmenu","dragover","dragenter","dragleave","drop","dragstart","dragend","pointerdown","pointermove","pointerup","pointercancel","pointerover","pointerout","gotpointercapture","lostpointercapture","ended","loadedmetadata","pagehide","pageshow","visibilitychange","beforematch"],Ak=[Be.FOCUS,Be.BLUR,Be.ERROR,Be.LOAD,Be.TOGGLE],Hv=n=>Ak.indexOf(n)>=0;var Ik=3,Dk=13,Rk=32,bi={MAC_ENTER:Ik,ENTER:Dk,SPACE:Rk};function Pk(n){return n===Be.MOUSEENTER?Be.MOUSEOVER:n===Be.MOUSELEAVE?Be.MOUSEOUT:n===Be.POINTERENTER?Be.POINTEROVER:n===Be.POINTERLEAVE?Be.POINTEROUT:n}function Nk(n,e,t,i){let r=!1;Hv(e)&&(r=!0);let s=typeof i=="boolean"?{capture:r,passive:i}:r;return n.addEventListener(e,t,s),{eventType:e,handler:t,capture:r,passive:i}}function Ok(n,e){if(n.removeEventListener){let t=typeof e.passive=="boolean"?{capture:e.capture}:e.capture;n.removeEventListener(e.eventType,e.handler,t)}else n.detachEvent&&n.detachEvent(`on${e.eventType}`,e.handler)}function Lk(n){n.preventDefault?n.preventDefault():n.returnValue=!1}var fC=typeof navigator<"u"&&/Macintosh/.test(navigator.userAgent);function Fk(n){return n.which===2||n.which==null&&n.button===4}function kk(n){return fC&&n.metaKey||!fC&&n.ctrlKey||Fk(n)||n.shiftKey}var gte=typeof navigator<"u"&&!/Opera/.test(navigator.userAgent)&&/WebKit/.test(navigator.userAgent),yte=typeof navigator<"u"&&(/MSIE/.test(navigator.userAgent)||/Trident/.test(navigator.userAgent)),vte=typeof navigator<"u"&&!/Opera|WebKit/.test(navigator.userAgent)&&/Gecko/.test(navigator.product);function Uk(n,e,t){let i=n.relatedTarget;return(n.type===Be.MOUSEOVER&&e===Be.MOUSEENTER||n.type===Be.MOUSEOUT&&e===Be.MOUSELEAVE||n.type===Be.POINTEROVER&&e===Be.POINTERENTER||n.type===Be.POINTEROUT&&e===Be.POINTERLEAVE)&&(!i||i!==t&&!t.contains(i))}function Bk(n,e){let t={};for(let i in n){if(i==="srcElement"||i==="target")continue;let r=i,s=n[r];typeof s!="function"&&(t[r]=s)}return n.type===Be.MOUSEOVER?t.type=Be.MOUSEENTER:n.type===Be.MOUSEOUT?t.type=Be.MOUSELEAVE:n.type===Be.POINTEROVER?t.type=Be.POINTERENTER:t.type=Be.POINTERLEAVE,t.target=t.srcElement=e,t.bubbles=!1,t}var _te={Enter:bi.ENTER," ":bi.SPACE},xte={A:bi.ENTER,BUTTON:0,CHECKBOX:bi.SPACE,COMBOBOX:bi.ENTER,FILE:0,GRIDCELL:bi.ENTER,LINK:bi.ENTER,LISTBOX:bi.ENTER,MENU:0,MENUBAR:0,MENUITEM:0,MENUITEMCHECKBOX:0,MENUITEMRADIO:0,OPTION:0,RADIO:bi.SPACE,RADIOGROUP:bi.SPACE,RESET:0,SUBMIT:0,SWITCH:bi.SPACE,TAB:0,TREE:bi.ENTER,TREEITEM:bi.ENTER};var Vk=typeof navigator<"u"&&/iPhone|iPad|iPod/.test(navigator.userAgent),Rf=class{element;handlerInfos=[];constructor(e){this.element=e}addEventListener(e,t,i){Vk&&(this.element.style.cursor="pointer"),this.handlerInfos.push(Nk(this.element,e,t(this.element),i))}cleanUp(){for(let e=0;e<this.handlerInfos.length;e++)Ok(this.element,this.handlerInfos[e]);this.handlerInfos=[]}},zk={NAMESPACE_ACTION_SEPARATOR:".",EVENT_ACTION_SEPARATOR:":"};function oo(n){return n.eventType}function Gv(n,e){n.eventType=e}function If(n){return n.event}function gC(n,e){n.event=e}function yC(n){return n.targetElement}function vC(n,e){n.targetElement=e}function _C(n){return n.eic}function Hk(n,e){n.eic=e}function Gk(n){return n.timeStamp}function jk(n,e){n.timeStamp=e}function Df(n){return n.eia}function xC(n,e,t){n.eia=[e,t]}function Fv(n){n.eia=void 0}function Af(n){return n[1]}function Wk(n){return n.eirp}function EC(n,e){n.eirp=e}function MC(n){return n.eir}function wC(n,e){n.eir=e}function bC(n){return{eventType:n.eventType,event:n.event,targetElement:n.targetElement,eic:n.eic,eia:n.eia,timeStamp:n.timeStamp,eirp:n.eirp,eiack:n.eiack,eir:n.eir}}function $k(n,e,t,i,r,s,o,a){return{eventType:n,event:e,targetElement:t,eic:i,timeStamp:r,eia:s,eirp:o,eiack:a}}var kv=class n{eventInfo;constructor(e){this.eventInfo=e}getEventType(){return oo(this.eventInfo)}setEventType(e){Gv(this.eventInfo,e)}getEvent(){return If(this.eventInfo)}setEvent(e){gC(this.eventInfo,e)}getTargetElement(){return yC(this.eventInfo)}setTargetElement(e){vC(this.eventInfo,e)}getContainer(){return _C(this.eventInfo)}setContainer(e){Hk(this.eventInfo,e)}getTimestamp(){return Gk(this.eventInfo)}setTimestamp(e){jk(this.eventInfo,e)}getAction(){let e=Df(this.eventInfo);if(e)return{name:e[0],element:e[1]}}setAction(e){if(!e){Fv(this.eventInfo);return}xC(this.eventInfo,e.name,e.element)}getIsReplay(){return Wk(this.eventInfo)}setIsReplay(e){EC(this.eventInfo,e)}getResolved(){return MC(this.eventInfo)}setResolved(e){wC(this.eventInfo,e)}clone(){return new n(bC(this.eventInfo))}},Xk={},qk=/\s*;\s*/,Yk=Be.CLICK,Uv=class{a11yClickSupport=!1;clickModSupport=!0;syntheticMouseEventSupport;updateEventInfoForA11yClick=void 0;preventDefaultForA11yClick=void 0;populateClickOnlyAction=void 0;constructor({syntheticMouseEventSupport:e=!1,clickModSupport:t=!0}={}){this.syntheticMouseEventSupport=e,this.clickModSupport=t}resolveEventType(e){this.clickModSupport&&oo(e)===Be.CLICK&&kk(If(e))?Gv(e,Be.CLICKMOD):this.a11yClickSupport&&this.updateEventInfoForA11yClick(e)}resolveAction(e){MC(e)||(this.populateAction(e,yC(e)),wC(e,!0))}resolveParentAction(e){let t=Df(e),i=t&&Af(t);Fv(e);let r=i&&this.getParentNode(i);r&&this.populateAction(e,r)}populateAction(e,t){let i=t;for(;i&&i!==_C(e)&&(i.nodeType===Node.ELEMENT_NODE&&this.populateActionOnElement(i,e),!Df(e));)i=this.getParentNode(i);let r=Df(e);if(r&&(this.a11yClickSupport&&this.preventDefaultForA11yClick(e),this.syntheticMouseEventSupport&&(oo(e)===Be.MOUSEENTER||oo(e)===Be.MOUSELEAVE||oo(e)===Be.POINTERENTER||oo(e)===Be.POINTERLEAVE)))if(Uk(If(e),oo(e),Af(r))){let s=Bk(If(e),Af(r));gC(e,s),vC(e,Af(r))}else Fv(e)}getParentNode(e){let t=e[zv.OWNER];if(t)return t;let i=e.parentNode;return i?.nodeName==="#document-fragment"?i?.host??null:i}populateActionOnElement(e,t){let i=this.parseActions(e),r=i[oo(t)];r!==void 0&&xC(t,r,e),this.a11yClickSupport&&this.populateClickOnlyAction(e,t,i)}parseActions(e){let t=bk(e);if(!t){let i=e.getAttribute(Vv.JSACTION);if(!i)t=Xk,hC(e,t);else{if(t=Sk(i),!t){t={};let r=i.split(qk);for(let s=0;s<r.length;s++){let o=r[s];if(!o)continue;let a=o.indexOf(zk.EVENT_ACTION_SEPARATOR),l=a!==-1,c=l?o.substr(0,a).trim():Yk,u=l?o.substr(a+1).trim():o;t[c]=u}Tk(i,t)}hC(e,t)}}return t}addA11yClickSupport(e,t,i){this.a11yClickSupport=!0,this.updateEventInfoForA11yClick=e,this.preventDefaultForA11yClick=t,this.populateClickOnlyAction=i}},SC=function(n){return n[n.I_AM_THE_JSACTION_FRAMEWORK=0]="I_AM_THE_JSACTION_FRAMEWORK",n}(SC||{}),Bv=class{dispatchDelegate;actionResolver;eventReplayer;eventReplayScheduled=!1;replayEventInfoWrappers=[];constructor(e,{actionResolver:t,eventReplayer:i}={}){this.dispatchDelegate=e,this.actionResolver=t,this.eventReplayer=i}dispatch(e){let t=new kv(e);this.actionResolver?.resolveEventType(e),this.actionResolver?.resolveAction(e);let i=t.getAction();if(i&&Zk(i.element,t)&&Lk(t.getEvent()),this.eventReplayer&&t.getIsReplay()){this.scheduleEventInfoWrapperReplay(t);return}this.dispatchDelegate(t)}scheduleEventInfoWrapperReplay(e){this.replayEventInfoWrappers.push(e),!this.eventReplayScheduled&&(this.eventReplayScheduled=!0,Promise.resolve().then(()=>{this.eventReplayScheduled=!1,this.eventReplayer(this.replayEventInfoWrappers)}))}};function Zk(n,e){return n.tagName==="A"&&(e.getEventType()===Be.CLICK||e.getEventType()===Be.CLICKMOD)}var TC=Symbol.for("propagationStopped"),jv={REPLAY:101};var Kk="`preventDefault` called during event replay.";var Jk="`composedPath` called during event replay.",Pf=class{dispatchDelegate;clickModSupport;actionResolver;dispatcher;constructor(e,t=!0){this.dispatchDelegate=e,this.clickModSupport=t,this.actionResolver=new Uv({clickModSupport:t}),this.dispatcher=new Bv(i=>{this.dispatchToDelegate(i)},{actionResolver:this.actionResolver})}dispatch(e){this.dispatcher.dispatch(e)}dispatchToDelegate(e){for(e.getIsReplay()&&tU(e),Qk(e);e.getAction();){if(nU(e),Hv(e.getEventType())&&e.getAction().element!==e.getTargetElement()||(this.dispatchDelegate(e.getEvent(),e.getAction().name),eU(e)))return;this.actionResolver.resolveParentAction(e.eventInfo)}}};function Qk(n){let e=n.getEvent(),t=n.getEvent().stopPropagation.bind(e),i=()=>{e[TC]=!0,t()};oa(e,"stopPropagation",i),oa(e,"stopImmediatePropagation",i)}function eU(n){return!!n.getEvent()[TC]}function tU(n){let e=n.getEvent(),t=n.getTargetElement(),i=e.preventDefault.bind(e);oa(e,"target",t),oa(e,"eventPhase",jv.REPLAY),oa(e,"preventDefault",()=>{throw i(),new Error(Kk+"")}),oa(e,"composedPath",()=>{throw new Error(Jk+"")})}function nU(n){let e=n.getEvent(),t=n.getAction()?.element;t&&oa(e,"currentTarget",t,{configurable:!0})}function oa(n,e,t,{configurable:i=!1}={}){Object.defineProperty(n,e,{value:t,configurable:i})}function CC(n,e){n.ecrd(t=>{e.dispatch(t)},SC.I_AM_THE_JSACTION_FRAMEWORK)}function iU(n){return n?.q??[]}function rU(n){n&&(pC(n.c,n.et,n.h),pC(n.c,n.etc,n.h,!0))}function pC(n,e,t,i){for(let r=0;r<e.length;r++)n.removeEventListener(e[r],t,i)}var sU=!1,AC=(()=>{class n{static MOUSE_SPECIAL_SUPPORT=sU;containerManager;eventHandlers={};browserEventTypeToExtraEventTypes={};dispatcher=null;queuedEventInfos=[];constructor(t){this.containerManager=t}handleEvent(t,i,r){let s=$k(t,i,i.target,r,Date.now());this.handleEventInfo(s)}handleEventInfo(t){if(!this.dispatcher){EC(t,!0),this.queuedEventInfos?.push(t);return}this.dispatcher(t)}addEvent(t,i,r){if(t in this.eventHandlers||!this.containerManager||!n.MOUSE_SPECIAL_SUPPORT&&Ck.indexOf(t)>=0)return;let s=(a,l,c)=>{this.handleEvent(a,l,c)};this.eventHandlers[t]=s;let o=Pk(i||t);if(o!==t){let a=this.browserEventTypeToExtraEventTypes[o]||[];a.push(t),this.browserEventTypeToExtraEventTypes[o]=a}this.containerManager.addEventListener(o,a=>l=>{s(t,l,a)},r)}replayEarlyEvents(t=window._ejsa){t&&(this.replayEarlyEventInfos(t.q),rU(t),delete window._ejsa)}replayEarlyEventInfos(t){for(let i=0;i<t.length;i++){let r=t[i],s=this.getEventTypesForBrowserEventType(r.eventType);for(let o=0;o<s.length;o++){let a=bC(r);Gv(a,s[o]),this.handleEventInfo(a)}}}getEventTypesForBrowserEventType(t){let i=[];return this.eventHandlers[t]&&i.push(t),this.browserEventTypeToExtraEventTypes[t]&&i.push(...this.browserEventTypeToExtraEventTypes[t]),i}handler(t){return this.eventHandlers[t]}cleanUp(){this.containerManager?.cleanUp(),this.containerManager=null,this.eventHandlers={},this.browserEventTypeToExtraEventTypes={},this.dispatcher=null,this.queuedEventInfos=[]}registerDispatcher(t,i){this.ecrd(t,i)}ecrd(t,i){if(this.dispatcher=t,this.queuedEventInfos?.length){for(let r=0;r<this.queuedEventInfos.length;r++)this.handleEventInfo(this.queuedEventInfos[r]);this.queuedEventInfos=null}}}return n})();function IC(n,e=window){return iU(e._ejsas?.[n])}function DC(n,e=window){e._ejsas&&(e._ejsas[n]=void 0)}var bA="https://g.co/ng/security#xss",Re=class extends Error{code;constructor(e,t){super(Ep(e,t)),this.code=e}};function Ep(n,e){return`${`NG0${Math.abs(n)}`}${e?": "+e:""}`}var SA=Symbol("InputSignalNode#UNSET"),oU=vt(me({},vv),{transformFn:void 0,applyValueToInputSignal(n,e){nf(n,e)}});function TA(n,e){let t=Object.create(oU);t.value=n,t.transformFn=e?.transform;function i(){if(Jh(t),t.value===SA)throw new Re(-950,!1);return t.value}return i[Ei]=t,i}function $u(n){return{toString:n}.toString()}var Nf="__parameters__";function aU(n){return function(...t){if(n){let i=n(...t);for(let r in i)this[r]=i[r]}}}function CA(n,e,t){return $u(()=>{let i=aU(e);function r(...s){if(this instanceof r)return i.apply(this,s),this;let o=new r(...s);return a.annotation=o,a;function a(l,c,u){let d=l.hasOwnProperty(Nf)?l[Nf]:Object.defineProperty(l,Nf,{value:[]})[Nf];for(;d.length<=u;)d.push(null);return(d[u]=d[u]||[]).push(o),l}}return t&&(r.prototype=Object.create(t.prototype)),r.prototype.ngMetadataName=n,r.annotationCls=r,r})}function qt(n){for(let e in n)if(n[e]===qt)return e;throw Error("Could not find renamed property on target object.")}function lU(n,e){for(let t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function Kn(n){if(typeof n=="string")return n;if(Array.isArray(n))return"["+n.map(Kn).join(", ")+"]";if(n==null)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;let e=n.toString();if(e==null)return""+e;let t=e.indexOf(`
`);return t===-1?e:e.substring(0,t)}function RC(n,e){return n==null||n===""?e===null?"":e:e==null||e===""?n:n+" "+e}var cU=qt({__forward_ref__:qt});function mo(n){return n.__forward_ref__=mo,n.toString=function(){return Kn(this())},n}function Zn(n){return AA(n)?n():n}function AA(n){return typeof n=="function"&&n.hasOwnProperty(cU)&&n.__forward_ref__===mo}function Xe(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function ga(n){return{providers:n.providers||[],imports:n.imports||[]}}function Mp(n){return PC(n,DA)||PC(n,RA)}function IA(n){return Mp(n)!==null}function PC(n,e){return n.hasOwnProperty(e)?n[e]:null}function uU(n){let e=n&&(n[DA]||n[RA]);return e||null}function NC(n){return n&&(n.hasOwnProperty(OC)||n.hasOwnProperty(dU))?n[OC]:null}var DA=qt({\u0275prov:qt}),OC=qt({\u0275inj:qt}),RA=qt({ngInjectableDef:qt}),dU=qt({ngInjectorDef:qt}),Le=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,t){this._desc=e,this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=Xe({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function PA(n){return n&&!!n.\u0275providers}var hU=qt({\u0275cmp:qt}),fU=qt({\u0275dir:qt}),pU=qt({\u0275pipe:qt}),mU=qt({\u0275mod:qt}),qf=qt({\u0275fac:qt}),Uu=qt({__NG_ELEMENT_ID__:qt}),LC=qt({__NG_ENV_ID__:qt});function i0(n){return typeof n=="string"?n:n==null?"":String(n)}function gU(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():i0(n)}function yU(n,e){let t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new Re(-200,n)}function r0(n,e){throw new Re(-201,!1)}var mt=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(mt||{}),o_;function NA(){return o_}function Xi(n){let e=o_;return o_=n,e}function OA(n,e,t){let i=Mp(n);if(i&&i.providedIn=="root")return i.value===void 0?i.value=i.factory():i.value;if(t&mt.Optional)return null;if(e!==void 0)return e;r0(n,"Injector")}var vU={},Bu=vU,a_="__NG_DI_FLAG__",Yf="ngTempTokenPath",_U="ngTokenPath",xU=/\n/gm,EU="\u0275",FC="__source",Cl;function MU(){return Cl}function ao(n){let e=Cl;return Cl=n,e}function wU(n,e=mt.Default){if(Cl===void 0)throw new Re(-203,!1);return Cl===null?OA(n,void 0,e):Cl.get(n,e&mt.Optional?null:void 0,e)}function Tt(n,e=mt.Default){return(NA()||wU)(Zn(n),e)}function ae(n,e=mt.Default){return Tt(n,wp(e))}function wp(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function l_(n){let e=[];for(let t=0;t<n.length;t++){let i=Zn(n[t]);if(Array.isArray(i)){if(i.length===0)throw new Re(900,!1);let r,s=mt.Default;for(let o=0;o<i.length;o++){let a=i[o],l=bU(a);typeof l=="number"?l===-1?r=a.token:s|=l:r=a}e.push(Tt(r,s))}else e.push(Tt(i))}return e}function LA(n,e){return n[a_]=e,n.prototype[a_]=e,n}function bU(n){return n[a_]}function SU(n,e,t,i){let r=n[Yf];throw e[FC]&&r.unshift(e[FC]),n.message=TU(`
`+n.message,r,t,i),n[_U]=r,n[Yf]=null,n}function TU(n,e,t,i=null){n=n&&n.charAt(0)===`
`&&n.charAt(1)==EU?n.slice(2):n;let r=Kn(e);if(Array.isArray(e))r=e.map(Kn).join(" -> ");else if(typeof e=="object"){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+(typeof a=="string"?JSON.stringify(a):Kn(a)))}r=`{${s.join(", ")}}`}return`${t}${i?"("+i+")":""}[${r}]: ${n.replace(xU,`
  `)}`}var s0=LA(CA("Optional"),8);var FA=LA(CA("SkipSelf"),4);function Dl(n,e){let t=n.hasOwnProperty(qf);return t?n[qf]:null}function CU(n,e,t){if(n.length!==e.length)return!1;for(let i=0;i<n.length;i++){let r=n[i],s=e[i];if(t&&(r=t(r),s=t(s)),s!==r)return!1}return!0}function AU(n){return n.flat(Number.POSITIVE_INFINITY)}function o0(n,e){n.forEach(t=>Array.isArray(t)?o0(t,e):e(t))}function kA(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function Zf(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function IU(n,e,t,i){let r=n.length;if(r==e)n.push(t,i);else if(r===1)n.push(i,n[0]),n[0]=t;else{for(r--,n.push(n[r-1],n[r]);r>e;){let s=r-2;n[r]=n[s],r--}n[e]=t,n[e+1]=i}}function DU(n,e,t){let i=Xu(n,e);return i>=0?n[i|1]=t:(i=~i,IU(n,i,e,t)),i}function Wv(n,e){let t=Xu(n,e);if(t>=0)return n[t|1]}function Xu(n,e){return RU(n,e,1)}function RU(n,e,t){let i=0,r=n.length>>t;for(;r!==i;){let s=i+(r-i>>1),o=n[s<<t];if(e===o)return s<<t;o>e?r=s:i=s+1}return~(r<<t)}var Rl={},qi=[],co=new Le(""),UA=new Le("",-1),BA=new Le(""),Kf=class{get(e,t=Bu){if(t===Bu){let i=new Error(`NullInjectorError: No provider for ${Kn(e)}!`);throw i.name="NullInjectorError",i}return t}};function VA(n,e){let t=n[mU]||null;if(!t&&e===!0)throw new Error(`Type ${Kn(n)} does not have '\u0275mod' property.`);return t}function uo(n){return n[hU]||null}function a0(n){return n[fU]||null}function l0(n){return n[pU]||null}function zA(n){let e=uo(n)||a0(n)||l0(n);return e!==null?e.standalone:!1}function ya(n){return{\u0275providers:n}}function PU(...n){return{\u0275providers:c0(!0,n),\u0275fromNgModule:!0}}function c0(n,...e){let t=[],i=new Set,r,s=o=>{t.push(o)};return o0(e,o=>{let a=o;c_(a,s,[],i)&&(r||=[],r.push(a))}),r!==void 0&&HA(r,s),t}function HA(n,e){for(let t=0;t<n.length;t++){let{ngModule:i,providers:r}=n[t];u0(r,s=>{e(s,i)})}}function c_(n,e,t,i){if(n=Zn(n),!n)return!1;let r=null,s=NC(n),o=!s&&uo(n);if(!s&&!o){let l=n.ngModule;if(s=NC(l),s)r=l;else return!1}else{if(o&&!o.standalone)return!1;r=n}let a=i.has(r);if(o){if(a)return!1;if(i.add(r),o.dependencies){let l=typeof o.dependencies=="function"?o.dependencies():o.dependencies;for(let c of l)c_(c,e,t,i)}}else if(s){if(s.imports!=null&&!a){i.add(r);let c;try{o0(s.imports,u=>{c_(u,e,t,i)&&(c||=[],c.push(u))})}finally{}c!==void 0&&HA(c,e)}if(!a){let c=Dl(r)||(()=>new r);e({provide:r,useFactory:c,deps:qi},r),e({provide:BA,useValue:r,multi:!0},r),e({provide:co,useValue:()=>Tt(r),multi:!0},r)}let l=s.providers;if(l!=null&&!a){let c=n;u0(l,u=>{e(u,c)})}}else return!1;return r!==n&&n.providers!==void 0}function u0(n,e){for(let t of n)PA(t)&&(t=t.\u0275providers),Array.isArray(t)?u0(t,e):e(t)}var NU=qt({provide:String,useValue:qt});function GA(n){return n!==null&&typeof n=="object"&&NU in n}function OU(n){return!!(n&&n.useExisting)}function LU(n){return!!(n&&n.useFactory)}function Pl(n){return typeof n=="function"}function FU(n){return!!n.useClass}var bp=new Le(""),Vf={},kU={},$v;function d0(){return $v===void 0&&($v=new Kf),$v}var Ci=class{},Vu=class extends Ci{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,t,i,r){super(),this.parent=t,this.source=i,this.scopes=r,d_(e,o=>this.processProvider(o)),this.records.set(UA,Ml(void 0,this)),r.has("environment")&&this.records.set(Ci,Ml(void 0,this));let s=this.records.get(bp);s!=null&&typeof s.value=="string"&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(BA,qi,mt.Self))}destroy(){Fu(this),this._destroyed=!0;let e=Rt(null);try{for(let i of this._ngOnDestroyHooks)i.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let i of t)i()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),Rt(e)}}onDestroy(e){return Fu(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){Fu(this);let t=ao(this),i=Xi(void 0),r;try{return e()}finally{ao(t),Xi(i)}}get(e,t=Bu,i=mt.Default){if(Fu(this),e.hasOwnProperty(LC))return e[LC](this);i=wp(i);let r,s=ao(this),o=Xi(void 0);try{if(!(i&mt.SkipSelf)){let l=this.records.get(e);if(l===void 0){let c=HU(e)&&Mp(e);c&&this.injectableDefInScope(c)?l=Ml(u_(e),Vf):l=null,this.records.set(e,l)}if(l!=null)return this.hydrate(e,l)}let a=i&mt.Self?d0():this.parent;return t=i&mt.Optional&&t===Bu?null:t,a.get(e,t)}catch(a){if(a.name==="NullInjectorError"){if((a[Yf]=a[Yf]||[]).unshift(Kn(e)),s)throw a;return SU(a,e,"R3InjectorError",this.source)}else throw a}finally{Xi(o),ao(s)}}resolveInjectorInitializers(){let e=Rt(null),t=ao(this),i=Xi(void 0),r;try{let s=this.get(co,qi,mt.Self);for(let o of s)o()}finally{ao(t),Xi(i),Rt(e)}}toString(){let e=[],t=this.records;for(let i of t.keys())e.push(Kn(i));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=Zn(e);let t=Pl(e)?e:Zn(e&&e.provide),i=BU(e);if(!Pl(e)&&e.multi===!0){let r=this.records.get(t);r||(r=Ml(void 0,Vf,!0),r.factory=()=>l_(r.multi),this.records.set(t,r)),t=e,r.multi.push(e)}this.records.set(t,i)}hydrate(e,t){let i=Rt(null);try{return t.value===Vf&&(t.value=kU,t.value=t.factory()),typeof t.value=="object"&&t.value&&zU(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{Rt(i)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=Zn(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function u_(n){let e=Mp(n),t=e!==null?e.factory:Dl(n);if(t!==null)return t;if(n instanceof Le)throw new Re(204,!1);if(n instanceof Function)return UU(n);throw new Re(204,!1)}function UU(n){if(n.length>0)throw new Re(204,!1);let t=uU(n);return t!==null?()=>t.factory(n):()=>new n}function BU(n){if(GA(n))return Ml(void 0,n.useValue);{let e=jA(n);return Ml(e,Vf)}}function jA(n,e,t){let i;if(Pl(n)){let r=Zn(n);return Dl(r)||u_(r)}else if(GA(n))i=()=>Zn(n.useValue);else if(LU(n))i=()=>n.useFactory(...l_(n.deps||[]));else if(OU(n))i=()=>Tt(Zn(n.useExisting));else{let r=Zn(n&&(n.useClass||n.provide));if(VU(n))i=()=>new r(...l_(n.deps));else return Dl(r)||u_(r)}return i}function Fu(n){if(n.destroyed)throw new Re(205,!1)}function Ml(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function VU(n){return!!n.deps}function zU(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function HU(n){return typeof n=="function"||typeof n=="object"&&n instanceof Le}function d_(n,e){for(let t of n)Array.isArray(t)?d_(t,e):t&&PA(t)?d_(t.\u0275providers,e):e(t)}function Zi(n,e){n instanceof Vu&&Fu(n);let t,i=ao(n),r=Xi(void 0);try{return e()}finally{ao(i),Xi(r)}}function WA(){return NA()!==void 0||MU()!=null}function GU(n){if(!WA())throw new Re(-203,!1)}function jU(n){return typeof n=="function"}var Ai=0,We=1,je=2,An=3,gr=4,xr=5,Br=6,Jf=7,vr=8,fs=9,ps=10,nn=11,zu=12,kC=13,Bl=14,Yi=15,la=16,wl=17,ms=18,Sp=19,$A=20,lo=21,Xv=22,Qf=23,Ti=24,Hn=25,XA=1,hs=6,gs=7,ep=8,Nl=9,li=10,tp=function(n){return n[n.None=0]="None",n[n.HasTransplantedViews=2]="HasTransplantedViews",n}(tp||{});function yr(n){return Array.isArray(n)&&typeof n[XA]=="object"}function Hr(n){return Array.isArray(n)&&n[XA]===!0}function qA(n){return(n.flags&4)!==0}function qu(n){return n.componentOffset>-1}function h0(n){return(n.flags&1)===1}function ho(n){return!!n.template}function np(n){return(n[je]&512)!==0}function WU(n){return(n[je]&256)===256}var h_=class{previousValue;currentValue;firstChange;constructor(e,t,i){this.previousValue=e,this.currentValue=t,this.firstChange=i}isFirstChange(){return this.firstChange}};function YA(n,e,t,i){e!==null?e.applyValueToInputSignal(e,i):n[t]=i}var Yu=(()=>{let n=()=>ZA;return n.ngInherit=!0,n})();function ZA(n){return n.type.prototype.ngOnChanges&&(n.setInput=XU),$U}function $U(){let n=JA(this),e=n?.current;if(e){let t=n.previous;if(t===Rl)n.previous=e;else for(let i in e)t[i]=e[i];n.current=null,this.ngOnChanges(e)}}function XU(n,e,t,i,r){let s=this.declaredInputs[i],o=JA(n)||qU(n,{previous:Rl,current:null}),a=o.current||(o.current={}),l=o.previous,c=l[s];a[s]=new h_(c&&c.currentValue,t,l===Rl),YA(n,e,r,t)}var KA="__ngSimpleChanges__";function JA(n){return n[KA]||null}function qU(n,e){return n[KA]=e}var UC=null;var kr=function(n,e,t){UC?.(n,e,t)},YU="svg",ZU="math";function _r(n){for(;Array.isArray(n);)n=n[Ai];return n}function QA(n,e){return _r(e[n])}function Ki(n,e){return _r(e[n.index])}function Tp(n,e){return n.data[e]}function go(n,e){let t=e[n];return yr(t)?t:t[Ai]}function KU(n){return(n[je]&4)===4}function f0(n){return(n[je]&128)===128}function JU(n){return Hr(n[An])}function ip(n,e){return e==null?null:n[e]}function eI(n){n[wl]=0}function p0(n){n[je]&1024||(n[je]|=1024,f0(n)&&Ap(n))}function QU(n,e){for(;n>0;)e=e[Bl],n--;return e}function Cp(n){return!!(n[je]&9216||n[Ti]?.dirty)}function f_(n){n[ps].changeDetectionScheduler?.notify(9),n[je]&64&&(n[je]|=1024),Cp(n)&&Ap(n)}function Ap(n){n[ps].changeDetectionScheduler?.notify(0);let e=ca(n);for(;e!==null&&!(e[je]&8192||(e[je]|=8192,!f0(e)));)e=ca(e)}function tI(n,e){if((n[je]&256)===256)throw new Re(911,!1);n[lo]===null&&(n[lo]=[]),n[lo].push(e)}function e3(n,e){if(n[lo]===null)return;let t=n[lo].indexOf(e);t!==-1&&n[lo].splice(t,1)}function ca(n){let e=n[An];return Hr(e)?e[An]:e}var gt={lFrame:cI(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var p_=!1;function t3(){return gt.lFrame.elementDepthCount}function n3(){gt.lFrame.elementDepthCount++}function i3(){gt.lFrame.elementDepthCount--}function nI(){return gt.bindingsEnabled}function Zu(){return gt.skipHydrationRootTNode!==null}function r3(n){return gt.skipHydrationRootTNode===n}function s3(n){gt.skipHydrationRootTNode=n}function o3(){gt.skipHydrationRootTNode=null}function $t(){return gt.lFrame.lView}function ui(){return gt.lFrame.tView}function yo(n){return gt.lFrame.contextLView=n,n[vr]}function vo(n){return gt.lFrame.contextLView=null,n}function di(){let n=iI();for(;n!==null&&n.type===64;)n=n.parent;return n}function iI(){return gt.lFrame.currentTNode}function a3(){let n=gt.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function Ku(n,e){let t=gt.lFrame;t.currentTNode=n,t.isParent=e}function rI(){return gt.lFrame.isParent}function l3(){gt.lFrame.isParent=!1}function sI(){return p_}function BC(n){let e=p_;return p_=n,e}function c3(){let n=gt.lFrame,e=n.bindingRootIndex;return e===-1&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function u3(n){return gt.lFrame.bindingIndex=n}function m0(){return gt.lFrame.bindingIndex++}function d3(n){let e=gt.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function h3(){return gt.lFrame.inI18n}function f3(n,e){let t=gt.lFrame;t.bindingIndex=t.bindingRootIndex=n,m_(e)}function p3(){return gt.lFrame.currentDirectiveIndex}function m_(n){gt.lFrame.currentDirectiveIndex=n}function m3(n){let e=gt.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function oI(){return gt.lFrame.currentQueryIndex}function g0(n){gt.lFrame.currentQueryIndex=n}function g3(n){let e=n[We];return e.type===2?e.declTNode:e.type===1?n[xr]:null}function aI(n,e,t){if(t&mt.SkipSelf){let r=e,s=n;for(;r=r.parent,r===null&&!(t&mt.Host);)if(r=g3(s),r===null||(s=s[Bl],r.type&10))break;if(r===null)return!1;e=r,n=s}let i=gt.lFrame=lI();return i.currentTNode=e,i.lView=n,!0}function y0(n){let e=lI(),t=n[We];gt.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function lI(){let n=gt.lFrame,e=n===null?null:n.child;return e===null?cI(n):e}function cI(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function uI(){let n=gt.lFrame;return gt.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var dI=uI;function v0(){let n=uI();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function y3(n){return(gt.lFrame.contextLView=QU(n,gt.lFrame.contextLView))[vr]}function Vl(){return gt.lFrame.selectedIndex}function ua(n){gt.lFrame.selectedIndex=n}function hI(){let n=gt.lFrame;return Tp(n.tView,n.selectedIndex)}function fI(){return gt.lFrame.currentNamespace}var pI=!0;function _0(){return pI}function _o(n){pI=n}function v3(n,e,t){let{ngOnChanges:i,ngOnInit:r,ngDoCheck:s}=e.type.prototype;if(i){let o=ZA(e);(t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o)}r&&(t.preOrderHooks??=[]).push(0-n,r),s&&((t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s))}function x0(n,e){for(let t=e.directiveStart,i=e.directiveEnd;t<i;t++){let s=n.data[t].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:l,ngAfterViewChecked:c,ngOnDestroy:u}=s;o&&(n.contentHooks??=[]).push(-t,o),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),l&&(n.viewHooks??=[]).push(-t,l),c&&((n.viewHooks??=[]).push(t,c),(n.viewCheckHooks??=[]).push(t,c)),u!=null&&(n.destroyHooks??=[]).push(t,u)}}function zf(n,e,t){mI(n,e,3,t)}function Hf(n,e,t,i){(n[je]&3)===t&&mI(n,e,t,i)}function qv(n,e){let t=n[je];(t&3)===e&&(t&=16383,t+=1,n[je]=t)}function mI(n,e,t,i){let r=i!==void 0?n[wl]&65535:0,s=i??-1,o=e.length-1,a=0;for(let l=r;l<o;l++)if(typeof e[l+1]=="number"){if(a=e[l],i!=null&&a>=i)break}else e[l]<0&&(n[wl]+=65536),(a<s||s==-1)&&(_3(n,t,e,l),n[wl]=(n[wl]&4294901760)+l+2),l++}function VC(n,e){kr(4,n,e);let t=Rt(null);try{e.call(n)}finally{Rt(t),kr(5,n,e)}}function _3(n,e,t,i){let r=t[i]<0,s=t[i+1],o=r?-t[i]:t[i],a=n[o];r?n[je]>>14<n[wl]>>16&&(n[je]&3)===e&&(n[je]+=16384,VC(a,s)):VC(a,s)}var Al=-1,da=class{factory;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,t,i){this.factory=e,this.canSeeViewProviders=t,this.injectImpl=i}};function x3(n){return n instanceof da}function E3(n){return(n.flags&8)!==0}function M3(n){return(n.flags&16)!==0}function g_(n,e,t){let i=0;for(;i<t.length;){let r=t[i];if(typeof r=="number"){if(r!==0)break;i++;let s=t[i++],o=t[i++],a=t[i++];n.setAttribute(e,o,a,s)}else{let s=r,o=t[++i];b3(s)?n.setProperty(e,s,o):n.setAttribute(e,s,o),i++}}return i}function w3(n){return n===3||n===4||n===6}function b3(n){return n.charCodeAt(0)===64}function Hu(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let i=0;i<e.length;i++){let r=e[i];typeof r=="number"?t=r:t===0||(t===-1||t===2?zC(n,t,r,null,e[++i]):zC(n,t,r,null,null))}}return n}function zC(n,e,t,i,r){let s=0,o=n.length;if(e===-1)o=-1;else for(;s<n.length;){let a=n[s++];if(typeof a=="number"){if(a===e){o=-1;break}else if(a>e){o=s-1;break}}}for(;s<n.length;){let a=n[s];if(typeof a=="number")break;if(a===t){if(i===null){r!==null&&(n[s+1]=r);return}else if(i===n[s+1]){n[s+2]=r;return}}s++,i!==null&&s++,r!==null&&s++}o!==-1&&(n.splice(o,0,e),s=o+1),n.splice(s++,0,t),i!==null&&n.splice(s++,0,i),r!==null&&n.splice(s++,0,r)}var Yv={},Il=class{injector;parentInjector;constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,i){i=wp(i);let r=this.injector.get(e,Yv,i);return r!==Yv||t===Yv?r:this.parentInjector.get(e,t,i)}};function gI(n){return n!==Al}function rp(n){return n&32767}function S3(n){return n>>16}function sp(n,e){let t=S3(n),i=e;for(;t>0;)i=i[Bl],t--;return i}var y_=!0;function HC(n){let e=y_;return y_=n,e}var T3=256,yI=T3-1,vI=5,C3=0,Ur={};function A3(n,e,t){let i;typeof t=="string"?i=t.charCodeAt(0)||0:t.hasOwnProperty(Uu)&&(i=t[Uu]),i==null&&(i=t[Uu]=C3++);let r=i&yI,s=1<<r;e.data[n+(r>>vI)]|=s}function op(n,e){let t=_I(n,e);if(t!==-1)return t;let i=e[We];i.firstCreatePass&&(n.injectorIndex=e.length,Zv(i.data,n),Zv(e,null),Zv(i.blueprint,null));let r=E0(n,e),s=n.injectorIndex;if(gI(r)){let o=rp(r),a=sp(r,e),l=a[We].data;for(let c=0;c<8;c++)e[s+c]=a[o+c]|l[o+c]}return e[s+8]=r,s}function Zv(n,e){n.push(0,0,0,0,0,0,0,0,e)}function _I(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function E0(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,i=null,r=e;for(;r!==null;){if(i=bI(r),i===null)return Al;if(t++,r=r[Bl],i.injectorIndex!==-1)return i.injectorIndex|t<<16}return Al}function v_(n,e,t){A3(n,e,t)}function xI(n,e,t){if(t&mt.Optional||n!==void 0)return n;r0(e,"NodeInjector")}function EI(n,e,t,i){if(t&mt.Optional&&i===void 0&&(i=null),!(t&(mt.Self|mt.Host))){let r=n[fs],s=Xi(void 0);try{return r?r.get(e,i,t&mt.Optional):OA(e,i,t&mt.Optional)}finally{Xi(s)}}return xI(i,e,t)}function MI(n,e,t,i=mt.Default,r){if(n!==null){if(e[je]&2048&&!(i&mt.Self)){let o=P3(n,e,t,i,Ur);if(o!==Ur)return o}let s=wI(n,e,t,i,Ur);if(s!==Ur)return s}return EI(e,t,i,r)}function wI(n,e,t,i,r){let s=D3(t);if(typeof s=="function"){if(!aI(e,n,i))return i&mt.Host?xI(r,t,i):EI(e,t,i,r);try{let o;if(o=s(i),o==null&&!(i&mt.Optional))r0(t);else return o}finally{dI()}}else if(typeof s=="number"){let o=null,a=_I(n,e),l=Al,c=i&mt.Host?e[Yi][xr]:null;for((a===-1||i&mt.SkipSelf)&&(l=a===-1?E0(n,e):e[a+8],l===Al||!jC(i,!1)?a=-1:(o=e[We],a=rp(l),e=sp(l,e)));a!==-1;){let u=e[We];if(GC(s,a,u.data)){let d=I3(a,e,t,o,i,c);if(d!==Ur)return d}l=e[a+8],l!==Al&&jC(i,e[We].data[a+8]===c)&&GC(s,a,e)?(o=u,a=rp(l),e=sp(l,e)):a=-1}}return r}function I3(n,e,t,i,r,s){let o=e[We],a=o.data[n+8],l=i==null?qu(a)&&y_:i!=o&&(a.type&3)!==0,c=r&mt.Host&&s===a,u=Gf(a,o,t,l,c);return u!==null?ha(e,o,u,a):Ur}function Gf(n,e,t,i,r){let s=n.providerIndexes,o=e.data,a=s&1048575,l=n.directiveStart,c=n.directiveEnd,u=s>>20,d=i?a:a+u,h=r?a+u:c;for(let f=d;f<h;f++){let p=o[f];if(f<l&&t===p||f>=l&&p.type===t)return f}if(r){let f=o[l];if(f&&ho(f)&&f.type===t)return l}return null}function ha(n,e,t,i){let r=n[t],s=e.data;if(x3(r)){let o=r;o.resolving&&yU(gU(s[t]));let a=HC(o.canSeeViewProviders);o.resolving=!0;let l,c=o.injectImpl?Xi(o.injectImpl):null,u=aI(n,i,mt.Default);try{r=n[t]=o.factory(void 0,s,n,i),e.firstCreatePass&&t>=i.directiveStart&&v3(t,s[t],e)}finally{c!==null&&Xi(c),HC(a),o.resolving=!1,dI()}}return r}function D3(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(Uu)?n[Uu]:void 0;return typeof e=="number"?e>=0?e&yI:R3:e}function GC(n,e,t){let i=1<<n;return!!(t[e+(n>>vI)]&i)}function jC(n,e){return!(n&mt.Self)&&!(n&mt.Host&&e)}var aa=class{_tNode;_lView;constructor(e,t){this._tNode=e,this._lView=t}get(e,t,i){return MI(this._tNode,this._lView,e,wp(i),t)}};function R3(){return new aa(di(),$t())}function va(n){return $u(()=>{let e=n.prototype.constructor,t=e[qf]||__(e),i=Object.prototype,r=Object.getPrototypeOf(n.prototype).constructor;for(;r&&r!==i;){let s=r[qf]||__(r);if(s&&s!==t)return s;r=Object.getPrototypeOf(r)}return s=>new s})}function __(n){return AA(n)?()=>{let e=__(Zn(n));return e&&e()}:Dl(n)}function P3(n,e,t,i,r){let s=n,o=e;for(;s!==null&&o!==null&&o[je]&2048&&!(o[je]&512);){let a=wI(s,o,t,i|mt.Self,Ur);if(a!==Ur)return a;let l=s.parent;if(!l){let c=o[$A];if(c){let u=c.get(t,Ur,i);if(u!==Ur)return u}l=bI(o),o=o[Bl]}s=l}return r}function bI(n){let e=n[We],t=e.type;return t===2?e.declTNode:t===1?n[xr]:null}function WC(n,e=null,t=null,i){let r=SI(n,e,t,i);return r.resolveInjectorInitializers(),r}function SI(n,e=null,t=null,i,r=new Set){let s=[t||qi,PU(n)];return i=i||(typeof n=="object"?void 0:Kn(n)),new Vu(s,e||d0(),i||null,r)}var Ii=class n{static THROW_IF_NOT_FOUND=Bu;static NULL=new Kf;static create(e,t){if(Array.isArray(e))return WC({name:""},t,e,"");{let i=e.name??"";return WC({name:i},e.parent,e.providers,i)}}static \u0275prov=Xe({token:n,providedIn:"any",factory:()=>Tt(UA)});static __NG_ELEMENT_ID__=-1};var N3=new Le("");N3.__NG_ELEMENT_ID__=n=>{let e=di();if(e===null)throw new Re(204,!1);if(e.type&2)return e.value;if(n&mt.Optional)return null;throw new Re(204,!1)};var TI=!1,M0=(()=>{class n{static __NG_ELEMENT_ID__=O3;static __NG_ENV_ID__=t=>t}return n})(),x_=class extends M0{_lView;constructor(e){super(),this._lView=e}onDestroy(e){return tI(this._lView,e),()=>e3(this._lView,e)}};function O3(){return new x_($t())}var Ol=class{},Ip=new Le("",{providedIn:"root",factory:()=>!1});var CI=new Le(""),AI=new Le(""),xo=(()=>{class n{taskId=0;pendingTasks=new Set;get _hasPendingTasks(){return this.hasPendingTasks.value}hasPendingTasks=new On(!1);add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}has(t){return this.pendingTasks.has(t)}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static \u0275prov=Xe({token:n,providedIn:"root",factory:()=>new n})}return n})();var E_=class extends vn{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,WA()&&(this.destroyRef=ae(M0,{optional:!0})??void 0,this.pendingTasks=ae(xo,{optional:!0})??void 0)}emit(e){let t=Rt(null);try{super.next(e)}finally{Rt(t)}}subscribe(e,t,i){let r=e,s=t||(()=>null),o=i;if(e&&typeof e=="object"){let l=e;r=l.next?.bind(l),s=l.error?.bind(l),o=l.complete?.bind(l)}this.__isAsync&&(s=this.wrapInTimeout(s),r&&(r=this.wrapInTimeout(r)),o&&(o=this.wrapInTimeout(o)));let a=super.subscribe({next:r,error:s,complete:o});return e instanceof hn&&e.add(a),a}wrapInTimeout(e){return t=>{let i=this.pendingTasks?.add();setTimeout(()=>{e(t),i!==void 0&&this.pendingTasks?.remove(i)})}}},Tn=E_;function ap(...n){}function II(n){let e,t;function i(){n=ap;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),i()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),i()})),()=>i()}function $C(n){return queueMicrotask(()=>n()),()=>{n=ap}}var w0="isAngularZone",lp=w0+"_ID",L3=0,dn=class n{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new Tn(!1);onMicrotaskEmpty=new Tn(!1);onStable=new Tn(!1);onError=new Tn(!1);constructor(e){let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:i=!1,shouldCoalesceRunChangeDetection:r=!1,scheduleInRootZone:s=TI}=e;if(typeof Zone>"u")throw new Re(908,!1);Zone.assertZonePatched();let o=this;o._nesting=0,o._outer=o._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(o._inner=o._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(o._inner=o._inner.fork(Zone.longStackTraceZoneSpec)),o.shouldCoalesceEventChangeDetection=!r&&i,o.shouldCoalesceRunChangeDetection=r,o.callbackScheduled=!1,o.scheduleInRootZone=s,U3(o)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(w0)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new Re(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new Re(909,!1)}run(e,t,i){return this._inner.run(e,t,i)}runTask(e,t,i,r){let s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+r,e,F3,ap,ap);try{return s.runTask(o,t,i)}finally{s.cancelTask(o)}}runGuarded(e,t,i){return this._inner.runGuarded(e,t,i)}runOutsideAngular(e){return this._outer.run(e)}},F3={};function b0(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function k3(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){II(()=>{n.callbackScheduled=!1,M_(n),n.isCheckStableRunning=!0,b0(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),M_(n)}function U3(n){let e=()=>{k3(n)},t=L3++;n._inner=n._inner.fork({name:"angular",properties:{[w0]:!0,[lp]:t,[lp+t]:!0},onInvokeTask:(i,r,s,o,a,l)=>{if(B3(l))return i.invokeTask(s,o,a,l);try{return XC(n),i.invokeTask(s,o,a,l)}finally{(n.shouldCoalesceEventChangeDetection&&o.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),qC(n)}},onInvoke:(i,r,s,o,a,l,c)=>{try{return XC(n),i.invoke(s,o,a,l,c)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!V3(l)&&e(),qC(n)}},onHasTask:(i,r,s,o)=>{i.hasTask(s,o),r===s&&(o.change=="microTask"?(n._hasPendingMicrotasks=o.microTask,M_(n),b0(n)):o.change=="macroTask"&&(n.hasPendingMacrotasks=o.macroTask))},onHandleError:(i,r,s,o)=>(i.handleError(s,o),n.runOutsideAngular(()=>n.onError.emit(o)),!1)})}function M_(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function XC(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function qC(n){n._nesting--,b0(n)}var w_=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new Tn;onMicrotaskEmpty=new Tn;onStable=new Tn;onError=new Tn;run(e,t,i){return e.apply(t,i)}runGuarded(e,t,i){return e.apply(t,i)}runOutsideAngular(e){return e()}runTask(e,t,i,r){return e.apply(t,i)}};function B3(n){return DI(n,"__ignore_ng_zone__")}function V3(n){return DI(n,"__scheduler_tick__")}function DI(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}var ys=class{_console=console;handleError(e){this._console.error("ERROR",e)}},z3=new Le("",{providedIn:"root",factory:()=>{let n=ae(dn),e=ae(ys);return t=>n.runOutsideAngular(()=>e.handleError(t))}});function YC(n,e){return TA(n,e)}function H3(n){return TA(SA,n)}var RI=(YC.required=H3,YC);function G3(){return zl(di(),$t())}function zl(n,e){return new hi(Ki(n,e))}var hi=(()=>{class n{nativeElement;constructor(t){this.nativeElement=t}static __NG_ELEMENT_ID__=G3}return n})();function j3(n){return n instanceof hi?n.nativeElement:n}function W3(){return this._results[Symbol.iterator]()}var b_=class{_emitDistinctChangesOnly;dirty=!0;_onDirty=void 0;_results=[];_changesDetected=!1;_changes=void 0;length=0;first=void 0;last=void 0;get changes(){return this._changes??=new vn}constructor(e=!1){this._emitDistinctChangesOnly=e}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){this.dirty=!1;let i=AU(e);(this._changesDetected=!CU(this._results,i,t))&&(this._results=i,this.length=i.length,this.last=i[this.length-1],this.first=i[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.next(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}[Symbol.iterator]=W3},$3="ngSkipHydration",X3="ngskiphydration";function PI(n){let e=n.mergedAttrs;if(e===null)return!1;for(let t=0;t<e.length;t+=2){let i=e[t];if(typeof i=="number")return!1;if(typeof i=="string"&&i.toLowerCase()===X3)return!0}return!1}function NI(n){return n.hasAttribute($3)}function cp(n){return(n.flags&128)===128}function q3(n){if(cp(n))return!0;let e=n.parent;for(;e;){if(cp(n)||PI(e))return!0;e=e.parent}return!1}var OI=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(OI||{}),LI=new Map,Y3=0;function Z3(){return Y3++}function K3(n){LI.set(n[Sp],n)}function S_(n){LI.delete(n[Sp])}var ZC="__ngContext__";function fa(n,e){yr(e)?(n[ZC]=e[Sp],K3(e)):n[ZC]=e}function FI(n){return UI(n[zu])}function kI(n){return UI(n[gr])}function UI(n){for(;n!==null&&!Hr(n);)n=n[gr];return n}var T_;function BI(n){T_=n}function Dp(){if(T_!==void 0)return T_;if(typeof document<"u")return document;throw new Re(210,!1)}var Hl=new Le("",{providedIn:"root",factory:()=>J3}),J3="ng",S0=new Le(""),vs=new Le("",{providedIn:"platform",factory:()=>"unknown"});var T0=new Le("",{providedIn:"root",factory:()=>Dp().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});function Q3(){let n=new _a;return ae(vs)==="browser"&&(n.store=eB(Dp(),ae(Hl))),n}var _a=(()=>{class n{static \u0275prov=Xe({token:n,providedIn:"root",factory:Q3});store={};onSerializeCallbacks={};get(t,i){return this.store[t]!==void 0?this.store[t]:i}set(t,i){this.store[t]=i}remove(t){delete this.store[t]}hasKey(t){return this.store.hasOwnProperty(t)}get isEmpty(){return Object.keys(this.store).length===0}onSerialize(t,i){this.onSerializeCallbacks[t]=i}toJson(){for(let t in this.onSerializeCallbacks)if(this.onSerializeCallbacks.hasOwnProperty(t))try{this.store[t]=this.onSerializeCallbacks[t]()}catch(i){console.warn("Exception in onSerialize callback: ",i)}return JSON.stringify(this.store).replace(/</g,"\\u003C")}}return n})();function eB(n,e){let t=n.getElementById(e+"-state");if(t?.textContent)try{return JSON.parse(t.textContent)}catch(i){console.warn("Exception while restoring TransferState for app "+e,i)}return{}}var VI="h",zI="b",C_=function(n){return n.FirstChild="f",n.NextSibling="n",n}(C_||{}),tB="e",nB="t",C0="c",HI="x",up="r",iB="i",rB="n",GI="d";var sB="di",oB="s",aB="p";var Of=new Le(""),jI=!1,WI=new Le("",{providedIn:"root",factory:()=>jI});var $I=new Le(""),lB=!1,cB=new Le(""),KC=new Le("",{providedIn:"root",factory:()=>new Map}),JC=new Set;function Gr(n){JC.has(n)||(JC.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}var bl=function(n){return n[n.EarlyRead=0]="EarlyRead",n[n.Write=1]="Write",n[n.MixedReadWrite=2]="MixedReadWrite",n[n.Read=3]="Read",n}(bl||{}),XI=(()=>{class n{impl=null;execute(){this.impl?.execute()}static \u0275prov=Xe({token:n,providedIn:"root",factory:()=>new n})}return n})(),uB=[bl.EarlyRead,bl.Write,bl.MixedReadWrite,bl.Read],dB=(()=>{class n{ngZone=ae(dn);scheduler=ae(Ol);errorHandler=ae(ys,{optional:!0});sequences=new Set;deferredRegistrations=new Set;executing=!1;execute(){this.executing=!0;for(let t of uB)for(let i of this.sequences)if(!(i.erroredOrDestroyed||!i.hooks[t]))try{i.pipelinedValue=this.ngZone.runOutsideAngular(()=>i.hooks[t](i.pipelinedValue))}catch(r){i.erroredOrDestroyed=!0,this.errorHandler?.handleError(r)}this.executing=!1;for(let t of this.sequences)t.afterRun(),t.once&&(this.sequences.delete(t),t.destroy());for(let t of this.deferredRegistrations)this.sequences.add(t);this.deferredRegistrations.size>0&&this.scheduler.notify(8),this.deferredRegistrations.clear()}register(t){this.executing?this.deferredRegistrations.add(t):(this.sequences.add(t),this.scheduler.notify(7))}unregister(t){this.executing&&this.sequences.has(t)?(t.erroredOrDestroyed=!0,t.pipelinedValue=void 0,t.once=!0):(this.sequences.delete(t),this.deferredRegistrations.delete(t))}static \u0275prov=Xe({token:n,providedIn:"root",factory:()=>new n})}return n})(),A_=class{impl;hooks;once;erroredOrDestroyed=!1;pipelinedValue=void 0;unregisterOnDestroy;constructor(e,t,i,r){this.impl=e,this.hooks=t,this.once=i,this.unregisterOnDestroy=r?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.()}};function A0(n,e){!e?.injector&&GU(A0);let t=e?.injector??ae(Ii);return Gr("NgAfterNextRender"),fB(n,t,e,!0)}function hB(n,e){if(n instanceof Function){let t=[void 0,void 0,void 0,void 0];return t[e]=n,t}else return[n.earlyRead,n.write,n.mixedReadWrite,n.read]}function fB(n,e,t,i){let r=e.get(XI);r.impl??=e.get(dB);let s=t?.phase??bl.MixedReadWrite,o=t?.manualCleanup!==!0?e.get(M0):null,a=new A_(r.impl,hB(n,s),i,o);return r.impl.register(a),a}var Si=function(n){return n[n.NOT_STARTED=0]="NOT_STARTED",n[n.IN_PROGRESS=1]="IN_PROGRESS",n[n.COMPLETE=2]="COMPLETE",n[n.FAILED=3]="FAILED",n}(Si||{}),QC=0,pB=1,Cn=function(n){return n[n.Placeholder=0]="Placeholder",n[n.Loading=1]="Loading",n[n.Complete=2]="Complete",n[n.Error=3]="Error",n}(Cn||{});var mB=0,I0=1;var gB=4,yB=5;var vB=7,ds=8,_B=9,qI=function(n){return n[n.Manual=0]="Manual",n[n.Playthrough=1]="Playthrough",n}(qI||{});function jf(n,e){let t=EB(n),i=e[t];if(i!==null){for(let r of i)r();e[t]=null}}function xB(n){jf(1,n),jf(0,n),jf(2,n)}function EB(n){let e=gB;return n===1?e=yB:n===2&&(e=_B),e}function YI(n){return n+1}function Rp(n,e){let t=n[We],i=YI(e.index);return n[i]}function Pp(n,e){let t=YI(e.index);return n.data[t]}function MB(n,e,t){let i=e[We],r=Pp(i,t);switch(n){case Cn.Complete:return r.primaryTmplIndex;case Cn.Loading:return r.loadingTmplIndex;case Cn.Error:return r.errorTmplIndex;case Cn.Placeholder:return r.placeholderTmplIndex;default:return null}}function eA(n,e){return e===Cn.Placeholder?n.placeholderBlockConfig?.[QC]??null:e===Cn.Loading?n.loadingBlockConfig?.[QC]??null:null}function wB(n){return n.loadingBlockConfig?.[pB]??null}function tA(n,e){if(!n||n.length===0)return e;let t=new Set(n);for(let i of e)t.add(i);return n.length===t.size?n:Array.from(t)}function bB(n,e){let t=e.primaryTmplIndex+Hn;return Tp(n,t)}var Np="ngb";var SB=(n,e,t)=>{let i=n,r=i.__jsaction_fns??new Map,s=r.get(e)??[];s.push(t),r.set(e,s),i.__jsaction_fns=r},TB=(n,e)=>{let t=n.getAttribute(Np)??"",i=n,r=e.get(t)??new Set;r.has(i)||r.add(i),e.set(t,r)};var CB=n=>{n.removeAttribute(Vv.JSACTION),n.removeAttribute(Np),n.__jsaction_fns=void 0},AB=new Le("",{providedIn:"root",factory:()=>({})});function ZI(n,e){let t=e?.__jsaction_fns?.get(n.type);if(t)for(let i of t)i(n)}var D0=new Le("");var IB="__nghData__",KI=IB,DB="__nghDeferData__",JI=DB,Kv="ngh",RB="nghm",QI=()=>null;function PB(n,e,t=!1){let i=n.getAttribute(Kv);if(i==null)return null;let[r,s]=i.split("|");if(i=t?s:r,!i)return null;let o=s?`|${s}`:"",a=t?r:o,l={},c;if(i!==""){let d=e.get(_a,null,{optional:!0});if(d!==null){let h=d.get(KI,[]);c=d.get(JI,{}),l=h[Number(i)]}}let u={data:l,firstChild:n.firstChild??null};return t&&(u.firstChild=n,Op(u,0,n.nextSibling)),a?n.setAttribute(Kv,a):n.removeAttribute(Kv),u}function NB(){QI=PB}function R0(n,e,t=!1){return QI(n,e,t)}function OB(n){let e=n._lView;return e[We].type===2?null:(np(e)&&(e=e[Hn]),e)}function LB(n){return n.textContent?.replace(/\s/gm,"")}function FB(n){let e=Dp(),t=e.createNodeIterator(n,NodeFilter.SHOW_COMMENT,{acceptNode(s){let o=LB(s);return o==="ngetn"||o==="ngtns"?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT}}),i,r=[];for(;i=t.nextNode();)r.push(i);for(let s of r)s.textContent==="ngetn"?s.replaceWith(e.createTextNode("")):s.remove()}function Op(n,e,t){n.segmentHeads??={},n.segmentHeads[e]=t}function I_(n,e){return n.segmentHeads?.[e]??null}function kB(n){return n.get(cB,!1,{optional:!0})}function UB(n,e){let t=n.data,i=t[tB]?.[e]??null;return i===null&&t[C0]?.[e]&&(i=P0(n,e)),i}function eD(n,e){return n.data[C0]?.[e]??null}function P0(n,e){let t=eD(n,e)??[],i=0;for(let r of t)i+=r[up]*(r[HI]??1);return i}function BB(n){if(typeof n.disconnectedNodes>"u"){let e=n.data[GI];n.disconnectedNodes=e?new Set(e):null}return n.disconnectedNodes}function Ju(n,e){if(typeof n.disconnectedNodes>"u"){let t=n.data[GI];n.disconnectedNodes=t?new Set(t):null}return!!BB(n)?.has(e)}function VB(n,e){let t=e.get(D0),r=e.get(_a).get(JI,{}),s=!1,o=n,a=[];for(;!s&&o;)a.unshift(o),s=t.has(o),o=r[o][aB];return a}var Vr=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(Vr||{});var dp=class{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${bA})`}};function Lp(n){return n instanceof dp?n.changingThisBreaksApplicationSecurity:n}function tD(n,e){let t=zB(n);if(t!=null&&t!==e){if(t==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${bA})`)}return t===e}function zB(n){return n instanceof dp&&n.getTypeName()||null}var HB=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function nD(n){return n=String(n),n.match(HB)?n:"unsafe:"+n}var N0=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(N0||{});function Qu(n){let e=GB();return e?e.sanitize(N0.URL,n)||"":tD(n,"URL")?Lp(n):nD(i0(n))}function GB(){let n=$t();return n&&n[ps].sanitizer}var jB=/^>|^->|<!--|-->|--!>|<!-$/g,WB=/(<|>)/g,$B="\u200B$1\u200B";function XB(n){return n.replace(jB,e=>e.replace(WB,$B))}function iD(n){return n.ownerDocument.defaultView}function qB(n){return n.ownerDocument.body}function rD(n){return n instanceof Function?n():n}var fo=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}(fo||{}),zr=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(zr||{}),YB;function O0(n,e){return YB(n,e)}function Sl(n,e,t,i,r){if(i!=null){let s,o=!1;Hr(i)?s=i:yr(i)&&(o=!0,i=i[Ai]);let a=_r(i);n===0&&t!==null?r==null?cD(e,t,a):fp(e,t,a,r||null,!0):n===1&&t!==null?fp(e,t,a,r||null,!0):n===2?B0(e,a,o):n===3&&e.destroyNode(a),s!=null&&uV(e,n,s,t,r)}}function sD(n,e){return n.createText(e)}function ZB(n,e,t){n.setValue(e,t)}function oD(n,e){return n.createComment(XB(e))}function L0(n,e,t){return n.createElement(e,t)}function KB(n,e){aD(n,e),e[Ai]=null,e[xr]=null}function JB(n,e,t,i,r,s){i[Ai]=r,i[xr]=e,Fp(n,i,t,1,r,s)}function aD(n,e){e[ps].changeDetectionScheduler?.notify(10),Fp(n,e,e[nn],2,null,null)}function QB(n){let e=n[zu];if(!e)return Jv(n[We],n);for(;e;){let t=null;if(yr(e))t=e[zu];else{let i=e[li];i&&(t=i)}if(!t){for(;e&&!e[gr]&&e!==n;)yr(e)&&Jv(e[We],e),e=e[An];e===null&&(e=n),yr(e)&&Jv(e[We],e),t=e&&e[gr]}e=t}}function eV(n,e,t,i){let r=li+i,s=t.length;i>0&&(t[r-1][gr]=e),i<s-li?(e[gr]=t[r],kA(t,li+i,e)):(t.push(e),e[gr]=null),e[An]=t;let o=e[la];o!==null&&t!==o&&lD(o,e);let a=e[ms];a!==null&&a.insertView(n),f_(e),e[je]|=128}function lD(n,e){let t=n[Nl],i=e[An];if(yr(i))n[je]|=tp.HasTransplantedViews;else{let r=i[An][Yi];e[Yi]!==r&&(n[je]|=tp.HasTransplantedViews)}t===null?n[Nl]=[e]:t.push(e)}function F0(n,e){let t=n[Nl],i=t.indexOf(e);t.splice(i,1)}function hp(n,e){if(n.length<=li)return;let t=li+e,i=n[t];if(i){let r=i[la];r!==null&&r!==n&&F0(r,i),e>0&&(n[t-1][gr]=i[gr]);let s=Zf(n,li+e);KB(i[We],i);let o=s[ms];o!==null&&o.detachView(s[We]),i[An]=null,i[gr]=null,i[je]&=-129}return i}function k0(n,e){if(!(e[je]&256)){let t=e[nn];t.destroyNode&&Fp(n,e,t,3,null,null),QB(e)}}function Jv(n,e){if(e[je]&256)return;let t=Rt(null);try{e[je]&=-129,e[je]|=256,e[Ti]&&yv(e[Ti]),nV(n,e),tV(n,e),e[We].type===1&&e[nn].destroy();let i=e[la];if(i!==null&&Hr(e[An])){i!==e[An]&&F0(i,e);let r=e[ms];r!==null&&r.detachView(n)}S_(e)}finally{Rt(t)}}function tV(n,e){let t=n.cleanup,i=e[Jf];if(t!==null)for(let o=0;o<t.length-1;o+=2)if(typeof t[o]=="string"){let a=t[o+3];a>=0?i[a]():i[-a].unsubscribe(),o+=2}else{let a=i[t[o+1]];t[o].call(a)}i!==null&&(e[Jf]=null);let r=e[lo];if(r!==null){e[lo]=null;for(let o=0;o<r.length;o++){let a=r[o];a()}}let s=e[Qf];if(s!==null){e[Qf]=null;for(let o of s)o.destroy()}}function nV(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let i=0;i<t.length;i+=2){let r=e[t[i]];if(!(r instanceof da)){let s=t[i+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){let a=r[s[o]],l=s[o+1];kr(4,a,l);try{l.call(a)}finally{kr(5,a,l)}}else{kr(4,r,s);try{s.call(r)}finally{kr(5,r,s)}}}}}function iV(n,e,t){return rV(n,e.parent,t)}function rV(n,e,t){let i=e;for(;i!==null&&i.type&168;)e=i,i=e.parent;if(i===null)return t[Ai];{let{componentOffset:r}=i;if(r>-1){let{encapsulation:s}=n.data[i.directiveStart+r];if(s===Vr.None||s===Vr.Emulated)return null}return Ki(i,t)}}function fp(n,e,t,i,r){n.insertBefore(e,t,i,r)}function cD(n,e,t){n.appendChild(e,t)}function nA(n,e,t,i,r){i!==null?fp(n,e,t,i,r):cD(n,e,t)}function uD(n,e){return n.parentNode(e)}function sV(n,e){return n.nextSibling(e)}function oV(n,e,t){return lV(n,e,t)}function aV(n,e,t){return n.type&40?Ki(n,t):null}var lV=aV,iA;function U0(n,e,t,i){let r=iV(n,i,e),s=e[nn],o=i.parent||e[xr],a=oV(o,i,e);if(r!=null)if(Array.isArray(t))for(let l=0;l<t.length;l++)nA(s,r,t[l],a,!1);else nA(s,r,t,a,!1);iA!==void 0&&iA(s,i,e,t,r)}function ku(n,e){if(e!==null){let t=e.type;if(t&3)return Ki(e,n);if(t&4)return D_(-1,n[e.index]);if(t&8){let i=e.child;if(i!==null)return ku(n,i);{let r=n[e.index];return Hr(r)?D_(-1,r):_r(r)}}else{if(t&128)return ku(n,e.next);if(t&32)return O0(e,n)()||_r(n[e.index]);{let i=dD(n,e);if(i!==null){if(Array.isArray(i))return i[0];let r=ca(n[Yi]);return ku(r,i)}else return ku(n,e.next)}}}return null}function dD(n,e){if(e!==null){let i=n[Yi][xr],r=e.projection;return i.projection[r]}return null}function D_(n,e){let t=li+n+1;if(t<e.length){let i=e[t],r=i[We].firstChild;if(r!==null)return ku(i,r)}return e[gs]}function B0(n,e,t){n.removeChild(null,e,t)}function hD(n){n.textContent=""}function V0(n,e,t,i,r,s,o){for(;t!=null;){if(t.type===128){t=t.next;continue}let a=i[t.index],l=t.type;if(o&&e===0&&(a&&fa(_r(a),i),t.flags|=2),(t.flags&32)!==32)if(l&8)V0(n,e,t.child,i,r,s,!1),Sl(e,n,r,a,s);else if(l&32){let c=O0(t,i),u;for(;u=c();)Sl(e,n,r,u,s);Sl(e,n,r,a,s)}else l&16?cV(n,e,i,t,r,s):Sl(e,n,r,a,s);t=o?t.projectionNext:t.next}}function Fp(n,e,t,i,r,s){V0(t,i,n.firstChild,e,r,s,!1)}function cV(n,e,t,i,r,s){let o=t[Yi],l=o[xr].projection[i.projection];if(Array.isArray(l))for(let c=0;c<l.length;c++){let u=l[c];Sl(e,n,r,u,s)}else{let c=l,u=o[An];cp(i)&&(c.flags|=128),V0(n,e,c,u,r,s,!0)}}function uV(n,e,t,i,r){let s=t[gs],o=_r(t);s!==o&&Sl(e,n,i,s,r);for(let a=li;a<t.length;a++){let l=t[a];Fp(l[We],l,n,e,i,s)}}function dV(n,e,t,i,r){if(e)r?n.addClass(t,i):n.removeClass(t,i);else{let s=i.indexOf("-")===-1?void 0:zr.DashCase;r==null?n.removeStyle(t,i,s):(typeof r=="string"&&r.endsWith("!important")&&(r=r.slice(0,-10),s|=zr.Important),n.setStyle(t,i,r,s))}}function hV(n,e,t){n.setAttribute(e,"style",t)}function fD(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function pD(n,e,t){let{mergedAttrs:i,classes:r,styles:s}=t;i!==null&&g_(n,e,i),r!==null&&fD(n,e,r),s!==null&&hV(n,e,s)}function fV(n,e,t){let i=n.length;for(;;){let r=n.indexOf(e,t);if(r===-1)return r;if(r===0||n.charCodeAt(r-1)<=32){let s=e.length;if(r+s===i||n.charCodeAt(r+s)<=32)return r}t=r+1}}var mD="ng-template";function pV(n,e,t,i){let r=0;if(i){for(;r<e.length&&typeof e[r]=="string";r+=2)if(e[r]==="class"&&fV(e[r+1].toLowerCase(),t,0)!==-1)return!0}else if(z0(n))return!1;if(r=e.indexOf(1,r),r>-1){let s;for(;++r<e.length&&typeof(s=e[r])=="string";)if(s.toLowerCase()===t)return!0}return!1}function z0(n){return n.type===4&&n.value!==mD}function mV(n,e,t){let i=n.type===4&&!t?mD:n.value;return e===i}function gV(n,e,t){let i=4,r=n.attrs,s=r!==null?_V(r):0,o=!1;for(let a=0;a<e.length;a++){let l=e[a];if(typeof l=="number"){if(!o&&!mr(i)&&!mr(l))return!1;if(o&&mr(l))continue;o=!1,i=l|i&1;continue}if(!o)if(i&4){if(i=2|i&1,l!==""&&!mV(n,l,t)||l===""&&e.length===1){if(mr(i))return!1;o=!0}}else if(i&8){if(r===null||!pV(n,r,l,t)){if(mr(i))return!1;o=!0}}else{let c=e[++a],u=yV(l,r,z0(n),t);if(u===-1){if(mr(i))return!1;o=!0;continue}if(c!==""){let d;if(u>s?d="":d=r[u+1].toLowerCase(),i&2&&c!==d){if(mr(i))return!1;o=!0}}}}return mr(i)||o}function mr(n){return(n&1)===0}function yV(n,e,t,i){if(e===null)return-1;let r=0;if(i||!t){let s=!1;for(;r<e.length;){let o=e[r];if(o===n)return r;if(o===3||o===6)s=!0;else if(o===1||o===2){let a=e[++r];for(;typeof a=="string";)a=e[++r];continue}else{if(o===4)break;if(o===0){r+=4;continue}}r+=s?1:2}return-1}else return xV(e,n)}function vV(n,e,t=!1){for(let i=0;i<e.length;i++)if(gV(n,e[i],t))return!0;return!1}function _V(n){for(let e=0;e<n.length;e++){let t=n[e];if(w3(t))return e}return n.length}function xV(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let i=n[t];if(typeof i=="number")return-1;if(i===e)return t;t++}return-1}function rA(n,e){return n?":not("+e.trim()+")":e}function EV(n){let e=n[0],t=1,i=2,r="",s=!1;for(;t<n.length;){let o=n[t];if(typeof o=="string")if(i&2){let a=n[++t];r+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else i&8?r+="."+o:i&4&&(r+=" "+o);else r!==""&&!mr(o)&&(e+=rA(s,r),r=""),i=o,s=s||!mr(i);t++}return r!==""&&(e+=rA(s,r)),e}function MV(n){return n.map(EV).join(",")}function wV(n){let e=[],t=[],i=1,r=2;for(;i<n.length;){let s=n[i];if(typeof s=="string")r===2?s!==""&&e.push(s,n[++i]):r===8&&t.push(s);else{if(!mr(r))break;r=s}i++}return{attrs:e,classes:t}}var xa={};function et(n=1){gD(ui(),$t(),Vl()+n,!1)}function gD(n,e,t,i){if(!i)if((e[je]&3)===3){let s=n.preOrderCheckHooks;s!==null&&zf(e,s,t)}else{let s=n.preOrderHooks;s!==null&&Hf(e,s,0,t)}ua(t)}function xt(n,e=mt.Default){let t=$t();if(t===null)return Tt(n,e);let i=di();return MI(i,t,Zn(n),e)}function yD(n,e,t,i,r,s){let o=Rt(null);try{let a=null;r&fo.SignalBased&&(a=e[i][Ei]),a!==null&&a.transformFn!==void 0&&(s=a.transformFn(s)),r&fo.HasDecoratorInputTransform&&(s=n.inputTransforms[i].call(e,s)),n.setInput!==null?n.setInput(e,a,s,t,i):YA(e,a,i,s)}finally{Rt(o)}}function bV(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let i=0;i<t.length;i++){let r=t[i];if(r<0)ua(~r);else{let s=r,o=t[++i],a=t[++i];f3(o,s);let l=e[s];a(2,l)}}}finally{ua(-1)}}function kp(n,e,t,i,r,s,o,a,l,c,u){let d=e.blueprint.slice();return d[Ai]=r,d[je]=i|4|128|8|64|1024,(c!==null||n&&n[je]&2048)&&(d[je]|=2048),eI(d),d[An]=d[Bl]=n,d[vr]=t,d[ps]=o||n&&n[ps],d[nn]=a||n&&n[nn],d[fs]=l||n&&n[fs]||null,d[xr]=s,d[Sp]=Z3(),d[Br]=u,d[$A]=c,d[Yi]=e.type==2?n[Yi]:d,d}function Up(n,e,t,i,r){let s=n.data[e];if(s===null)s=SV(n,e,t,i,r),h3()&&(s.flags|=32);else if(s.type&64){s.type=t,s.value=i,s.attrs=r;let o=a3();s.injectorIndex=o===null?-1:o.injectorIndex}return Ku(s,!0),s}function SV(n,e,t,i,r){let s=iI(),o=rI(),a=o?s:s&&s.parent,l=n.data[e]=PV(n,a,t,e,i,r);return n.firstChild===null&&(n.firstChild=l),s!==null&&(o?s.child==null&&l.parent!==null&&(s.child=l):s.next===null&&(s.next=l,l.prev=s)),l}function vD(n,e,t,i){if(t===0)return-1;let r=e.length;for(let s=0;s<t;s++)e.push(i),n.blueprint.push(i),n.data.push(null);return r}function _D(n,e,t,i,r){let s=Vl(),o=i&2;try{ua(-1),o&&e.length>Hn&&gD(n,e,Hn,!1),kr(o?2:0,r),t(i,r)}finally{ua(s),kr(o?3:1,r)}}function xD(n,e,t){if(qA(e)){let i=Rt(null);try{let r=e.directiveStart,s=e.directiveEnd;for(let o=r;o<s;o++){let a=n.data[o];if(a.contentQueries){let l=t[o];a.contentQueries(1,l,o)}}}finally{Rt(i)}}}function ED(n,e,t){nI()&&(UV(n,e,t,Ki(t,e)),(t.flags&64)===64&&AD(n,e,t))}function MD(n,e,t=Ki){let i=e.localNames;if(i!==null){let r=e.index+1;for(let s=0;s<i.length;s+=2){let o=i[s+1],a=o===-1?t(e,n):n[o];n[r++]=a}}}function wD(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=H0(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function H0(n,e,t,i,r,s,o,a,l,c,u){let d=Hn+i,h=d+r,f=TV(d,h),p=typeof c=="function"?c():c;return f[We]={type:n,blueprint:f,template:t,queries:null,viewQuery:a,declTNode:e,data:f.slice().fill(null,d),bindingStartIndex:d,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof s=="function"?s():s,pipeRegistry:typeof o=="function"?o():o,firstChild:null,schemas:l,consts:p,incompleteFirstPass:!1,ssrId:u}}function TV(n,e){let t=[];for(let i=0;i<e;i++)t.push(i<n?null:xa);return t}function CV(n,e,t,i){let s=i.get(WI,jI)||t===Vr.ShadowDom,o=n.selectRootElement(e,s);return AV(o),o}function AV(n){bD(n)}var bD=()=>null;function IV(n){NI(n)?hD(n):FB(n)}function DV(){bD=IV}function RV(n,e,t,i){let r=PD(e);r.push(t),n.firstCreatePass&&ND(n).push(i,r.length-1)}function PV(n,e,t,i,r,s){let o=e?e.injectorIndex:-1,a=0;return Zu()&&(a|=128),{type:t,index:i,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:r,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function sA(n,e,t,i,r){for(let s in e){if(!e.hasOwnProperty(s))continue;let o=e[s];if(o===void 0)continue;i??={};let a,l=fo.None;Array.isArray(o)?(a=o[0],l=o[1]):a=o;let c=s;if(r!==null){if(!r.hasOwnProperty(s))continue;c=r[s]}n===0?oA(i,t,c,a,l):oA(i,t,c,a)}return i}function oA(n,e,t,i,r){let s;n.hasOwnProperty(t)?(s=n[t]).push(e,i):s=n[t]=[e,i],r!==void 0&&s.push(r)}function NV(n,e,t){let i=e.directiveStart,r=e.directiveEnd,s=n.data,o=e.attrs,a=[],l=null,c=null;for(let u=i;u<r;u++){let d=s[u],h=t?t.get(d):null,f=h?h.inputs:null,p=h?h.outputs:null;l=sA(0,d.inputs,u,l,f),c=sA(1,d.outputs,u,c,p);let y=l!==null&&o!==null&&!z0(e)?XV(l,u,o):null;a.push(y)}l!==null&&(l.hasOwnProperty("class")&&(e.flags|=8),l.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=l,e.outputs=c}function OV(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function SD(n,e,t,i,r,s,o,a){let l=Ki(e,t),c=e.inputs,u;!a&&c!=null&&(u=c[i])?(G0(n,t,u,i,r),qu(e)&&LV(t,e.index)):e.type&3?(i=OV(i),r=o!=null?o(r,e.value||"",i):r,s.setProperty(l,i,r)):e.type&12}function LV(n,e){let t=go(e,n);t[je]&16||(t[je]|=64)}function TD(n,e,t,i){if(nI()){let r=i===null?null:{"":-1},s=VV(n,t),o,a;s===null?o=a=null:[o,a]=s,o!==null&&CD(n,e,t,o,r,a),r&&zV(t,i,r)}t.mergedAttrs=Hu(t.mergedAttrs,t.attrs)}function CD(n,e,t,i,r,s){for(let c=0;c<i.length;c++)v_(op(t,e),n,i[c].type);GV(t,n.data.length,i.length);for(let c=0;c<i.length;c++){let u=i[c];u.providersResolver&&u.providersResolver(u)}let o=!1,a=!1,l=vD(n,e,i.length,null);for(let c=0;c<i.length;c++){let u=i[c];t.mergedAttrs=Hu(t.mergedAttrs,u.hostAttrs),jV(n,t,e,l,u),HV(l,u,r),u.contentQueries!==null&&(t.flags|=4),(u.hostBindings!==null||u.hostAttrs!==null||u.hostVars!==0)&&(t.flags|=64);let d=u.type.prototype;!o&&(d.ngOnChanges||d.ngOnInit||d.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),o=!0),!a&&(d.ngOnChanges||d.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),a=!0),l++}NV(n,t,s)}function FV(n,e,t,i,r){let s=r.hostBindings;if(s){let o=n.hostBindingOpCodes;o===null&&(o=n.hostBindingOpCodes=[]);let a=~e.index;kV(o)!=a&&o.push(a),o.push(t,i,s)}}function kV(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function UV(n,e,t,i){let r=t.directiveStart,s=t.directiveEnd;qu(t)&&WV(e,t,n.data[r+t.componentOffset]),n.firstCreatePass||op(t,e),fa(i,e);let o=t.initialInputs;for(let a=r;a<s;a++){let l=n.data[a],c=ha(e,n,a,t);if(fa(c,e),o!==null&&$V(e,a-r,c,l,t,o),ho(l)){let u=go(t.index,e);u[vr]=ha(e,n,a,t)}}}function AD(n,e,t){let i=t.directiveStart,r=t.directiveEnd,s=t.index,o=p3();try{ua(s);for(let a=i;a<r;a++){let l=n.data[a],c=e[a];m_(a),(l.hostBindings!==null||l.hostVars!==0||l.hostAttrs!==null)&&BV(l,c)}}finally{ua(-1),m_(o)}}function BV(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function VV(n,e){let t=n.directiveRegistry,i=null,r=null;if(t)for(let s=0;s<t.length;s++){let o=t[s];if(vV(e,o.selectors,!1))if(i||(i=[]),ho(o))if(o.findHostDirectiveDefs!==null){let a=[];r=r||new Map,o.findHostDirectiveDefs(o,a,r),i.unshift(...a,o);let l=a.length;R_(n,e,l)}else i.unshift(o),R_(n,e,0);else r=r||new Map,o.findHostDirectiveDefs?.(o,i,r),i.push(o)}return i===null?null:[i,r]}function R_(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function zV(n,e,t){if(e){let i=n.localNames=[];for(let r=0;r<e.length;r+=2){let s=t[e[r+1]];if(s==null)throw new Re(-301,!1);i.push(e[r],s)}}}function HV(n,e,t){if(t){if(e.exportAs)for(let i=0;i<e.exportAs.length;i++)t[e.exportAs[i]]=n;ho(e)&&(t[""]=n)}}function GV(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function jV(n,e,t,i,r){n.data[i]=r;let s=r.factory||(r.factory=Dl(r.type,!0)),o=new da(s,ho(r),xt);n.blueprint[i]=o,t[i]=o,FV(n,e,i,vD(n,t,r.hostVars,xa),r)}function ID(n){let e=16;return n.signals?e=4096:n.onPush&&(e=64),e}function WV(n,e,t){let i=Ki(e,n),r=wD(t),s=n[ps].rendererFactory,o=Bp(n,kp(n,r,null,ID(t),i,e,null,s.createRenderer(i,t),null,null,null));n[e.index]=o}function $V(n,e,t,i,r,s){let o=s[e];if(o!==null)for(let a=0;a<o.length;){let l=o[a++],c=o[a++],u=o[a++],d=o[a++];yD(i,t,l,c,u,d)}}function XV(n,e,t){let i=null,r=0;for(;r<t.length;){let s=t[r];if(s===0){r+=4;continue}else if(s===5){r+=2;continue}if(typeof s=="number")break;if(n.hasOwnProperty(s)){i===null&&(i=[]);let o=n[s];for(let a=0;a<o.length;a+=3)if(o[a]===e){i.push(s,o[a+1],o[a+2],t[r+1]);break}}r+=2}return i}function DD(n,e,t,i){return[n,!0,0,e,null,i,null,t,null,null]}function RD(n,e){let t=n.contentQueries;if(t!==null){let i=Rt(null);try{for(let r=0;r<t.length;r+=2){let s=t[r],o=t[r+1];if(o!==-1){let a=n.data[o];g0(s),a.contentQueries(2,e[o],o)}}}finally{Rt(i)}}}function Bp(n,e){return n[zu]?n[kC][gr]=e:n[zu]=e,n[kC]=e,e}function P_(n,e,t){g0(0);let i=Rt(null);try{e(n,t)}finally{Rt(i)}}function PD(n){return n[Jf]??=[]}function ND(n){return n.cleanup??=[]}function Vp(n,e){let t=n[fs],i=t?t.get(ys,null):null;i&&i.handleError(e)}function G0(n,e,t,i,r){for(let s=0;s<t.length;){let o=t[s++],a=t[s++],l=t[s++],c=e[o],u=n.data[o];yD(u,c,i,a,l,r)}}function qV(n,e,t){let i=QA(e,n);ZB(n[nn],i,t)}function YV(n,e){let t=go(e,n),i=t[We];ZV(i,t);let r=t[Ai];r!==null&&t[Br]===null&&(t[Br]=R0(r,t[fs])),j0(i,t,t[vr])}function ZV(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function j0(n,e,t){y0(e);try{let i=n.viewQuery;i!==null&&P_(1,i,t);let r=n.template;r!==null&&_D(n,e,r,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[ms]?.finishViewCreation(n),n.staticContentQueries&&RD(n,e),n.staticViewQueries&&P_(2,n.viewQuery,t);let s=n.components;s!==null&&KV(e,s)}catch(i){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),i}finally{e[je]&=-5,v0()}}function KV(n,e){for(let t=0;t<e.length;t++)YV(n,e[t])}function OD(n,e,t,i){let r=Rt(null);try{let s=e.tView,a=n[je]&4096?4096:16,l=kp(n,s,t,a,null,e,null,null,i?.injector??null,i?.embeddedViewInjector??null,i?.dehydratedView??null),c=n[e.index];l[la]=c;let u=n[ms];return u!==null&&(l[ms]=u.createEmbeddedView(s)),j0(s,l,t),l}finally{Rt(r)}}function N_(n,e){return!e||e.firstChild===null||cp(n)}function LD(n,e,t,i=!0){let r=e[We];if(eV(r,e,n,t),i){let o=D_(t,n),a=e[nn],l=uD(a,n[gs]);l!==null&&JB(r,n[xr],a,e,l,o)}let s=e[Br];s!==null&&s.firstChild!==null&&(s.firstChild=null)}function JV(n,e){let t=hp(n,e);return t!==void 0&&k0(t[We],t),t}function pp(n,e,t,i,r=!1){for(;t!==null;){if(t.type===128){t=r?t.projectionNext:t.next;continue}let s=e[t.index];s!==null&&i.push(_r(s)),Hr(s)&&QV(s,i);let o=t.type;if(o&8)pp(n,e,t.child,i);else if(o&32){let a=O0(t,e),l;for(;l=a();)i.push(l)}else if(o&16){let a=dD(e,t);if(Array.isArray(a))i.push(...a);else{let l=ca(e[Yi]);pp(l[We],l,a,i,!0)}}t=r?t.projectionNext:t.next}return i}function QV(n,e){for(let t=li;t<n.length;t++){let i=n[t],r=i[We].firstChild;r!==null&&pp(i[We],i,r,e)}n[gs]!==n[Ai]&&e.push(n[gs])}var FD=[];function ez(n){return n[Ti]??tz(n)}function tz(n){let e=FD.pop()??Object.create(iz);return e.lView=n,e}function nz(n){n.lView[Ti]!==n&&(n.lView=null,FD.push(n))}var iz=vt(me({},Nu),{consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{Ap(n.lView)},consumerOnSignalRead(){this.lView[Ti]=this}});function rz(n){let e=n[Ti]??Object.create(sz);return e.lView=n,e}var sz=vt(me({},Nu),{consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{let e=ca(n.lView);for(;e&&!kD(e[We]);)e=ca(e);e&&p0(e)},consumerOnSignalRead(){this.lView[Ti]=this}});function kD(n){return n.type!==2}function UD(n){if(n[Qf]===null)return;let e=!0;for(;e;){let t=!1;for(let i of n[Qf])i.dirty&&(t=!0,i.zone===null||Zone.current===i.zone?i.run():i.zone.run(()=>i.run()));e=t&&!!(n[je]&8192)}}var oz=100;function BD(n,e=!0,t=0){let r=n[ps].rendererFactory,s=!1;s||r.begin?.();try{az(n,t)}catch(o){throw e&&Vp(n,o),o}finally{s||r.end?.()}}function az(n,e){let t=sI();try{BC(!0),O_(n,e);let i=0;for(;Cp(n);){if(i===oz)throw new Re(103,!1);i++,O_(n,1)}}finally{BC(t)}}function lz(n,e,t,i){let r=e[je];if((r&256)===256)return;let s=!1,o=!1;y0(e);let a=!0,l=null,c=null;s||(kD(n)?(c=ez(e),l=Qh(c)):DT()===null?(a=!1,c=rz(e),l=Qh(c)):e[Ti]&&(yv(e[Ti]),e[Ti]=null));try{eI(e),u3(n.bindingStartIndex),t!==null&&_D(n,e,t,2,i);let u=(r&3)===3;if(!s)if(u){let f=n.preOrderCheckHooks;f!==null&&zf(e,f,null)}else{let f=n.preOrderHooks;f!==null&&Hf(e,f,0,null),qv(e,0)}if(o||cz(e),UD(e),VD(e,0),n.contentQueries!==null&&RD(n,e),!s)if(u){let f=n.contentCheckHooks;f!==null&&zf(e,f)}else{let f=n.contentHooks;f!==null&&Hf(e,f,1),qv(e,1)}bV(n,e);let d=n.components;d!==null&&HD(e,d,0);let h=n.viewQuery;if(h!==null&&P_(2,h,i),!s)if(u){let f=n.viewCheckHooks;f!==null&&zf(e,f)}else{let f=n.viewHooks;f!==null&&Hf(e,f,2),qv(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[Xv]){for(let f of e[Xv])f();e[Xv]=null}s||(e[je]&=-73)}catch(u){throw s||Ap(e),u}finally{c!==null&&(mv(c,l),a&&nz(c)),v0()}}function VD(n,e){for(let t=FI(n);t!==null;t=kI(t))for(let i=li;i<t.length;i++){let r=t[i];zD(r,e)}}function cz(n){for(let e=FI(n);e!==null;e=kI(e)){if(!(e[je]&tp.HasTransplantedViews))continue;let t=e[Nl];for(let i=0;i<t.length;i++){let r=t[i];p0(r)}}}function uz(n,e,t){let i=go(e,n);zD(i,t)}function zD(n,e){f0(n)&&O_(n,e)}function O_(n,e){let i=n[We],r=n[je],s=n[Ti],o=!!(e===0&&r&16);if(o||=!!(r&64&&e===0),o||=!!(r&1024),o||=!!(s?.dirty&&gv(s)),o||=!1,s&&(s.dirty=!1),n[je]&=-9217,o)lz(i,n,i.template,n[vr]);else if(r&8192){UD(n),VD(n,1);let a=i.components;a!==null&&HD(n,a,1)}}function HD(n,e,t){for(let i=0;i<e.length;i++)uz(n,e[i],t)}function zp(n,e){let t=sI()?64:1088;for(n[ps].changeDetectionScheduler?.notify(e);n;){n[je]|=t;let i=ca(n);if(np(n)&&!i)return n;n=i}return null}var pa=class{_lView;_cdRefInjectingView;notifyErrorHandler;_appRef=null;_attachedToViewContainer=!1;get rootNodes(){let e=this._lView,t=e[We];return pp(t,e,t.firstChild,[])}constructor(e,t,i=!0){this._lView=e,this._cdRefInjectingView=t,this.notifyErrorHandler=i}get context(){return this._lView[vr]}get dirty(){return!!(this._lView[je]&9280)||!!this._lView[Ti]?.dirty}set context(e){this._lView[vr]=e}get destroyed(){return(this._lView[je]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[An];if(Hr(e)){let t=e[ep],i=t?t.indexOf(this):-1;i>-1&&(hp(e,i),Zf(t,i))}this._attachedToViewContainer=!1}k0(this._lView[We],this._lView)}onDestroy(e){tI(this._lView,e)}markForCheck(){zp(this._cdRefInjectingView||this._lView,4)}markForRefresh(){p0(this._cdRefInjectingView||this._lView)}detach(){this._lView[je]&=-129}reattach(){f_(this._lView),this._lView[je]|=128}detectChanges(){this._lView[je]|=1024,BD(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Re(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=np(this._lView),t=this._lView[la];t!==null&&!e&&F0(t,this._lView),aD(this._lView[We],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new Re(902,!1);this._appRef=e;let t=np(this._lView),i=this._lView[la];i!==null&&!t&&lD(i,this._lView),f_(this._lView)}},Ll=(()=>{class n{static __NG_ELEMENT_ID__=fz}return n})(),dz=Ll,hz=class extends dz{_declarationLView;_declarationTContainer;elementRef;constructor(e,t,i){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,i){let r=OD(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:t,dehydratedView:i});return new pa(r)}};function fz(){return W0(di(),$t())}function W0(n,e){return n.type&4?new hz(e,n,zl(n,e)):null}var L_=class{resolveComponentFactory(e){throw Error(`No component factory found for ${Kn(e)}.`)}},Fl=class{static NULL=new L_},po=class{},Gu=class{},F_=class{},mp=class{},kl=class{},Ji=(()=>{class n{destroyNode=null;static __NG_ELEMENT_ID__=()=>pz()}return n})();function pz(){let n=$t(),e=di(),t=go(e.index,n);return(yr(t)?t:n)[nn]}var mz=(()=>{class n{static \u0275prov=Xe({token:n,providedIn:"root",factory:()=>null})}return n})();function k_(n,e,t){let i=t?n.styles:null,r=t?n.classes:null,s=0;if(e!==null)for(let o=0;o<e.length;o++){let a=e[o];if(typeof a=="number")s=a;else if(s==1)r=RC(r,a);else if(s==2){let l=a,c=e[++o];i=RC(i,l+": "+c+";")}}t?n.styles=i:n.stylesWithoutHost=i,t?n.classes=r:n.classesWithoutHost=r}var gp=class extends Fl{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=uo(e);return new ju(t,this.ngModule)}};function aA(n,e){let t=[];for(let i in n){if(!n.hasOwnProperty(i))continue;let r=n[i];if(r===void 0)continue;let s=Array.isArray(r),o=s?r[0]:r,a=s?r[1]:fo.None;e?t.push({propName:o,templateName:i,isSignal:(a&fo.SignalBased)!==0}):t.push({propName:o,templateName:i})}return t}function gz(n){let e=n.toLowerCase();return e==="svg"?YU:e==="math"?ZU:null}var ju=class extends mp{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;get inputs(){let e=this.componentDef,t=e.inputTransforms,i=aA(e.inputs,!0);if(t!==null)for(let r of i)t.hasOwnProperty(r.propName)&&(r.transform=t[r.propName]);return i}get outputs(){return aA(this.componentDef.outputs,!1)}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=MV(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}create(e,t,i,r){let s=Rt(null);try{r=r||this.ngModule;let o=r instanceof Ci?r:r?.injector;o&&this.componentDef.getStandaloneInjector!==null&&(o=this.componentDef.getStandaloneInjector(o)||o);let a=o?new Il(e,o):e,l=a.get(kl,null);if(l===null)throw new Re(407,!1);let c=a.get(mz,null),u=a.get(Ol,null),d={rendererFactory:l,sanitizer:c,changeDetectionScheduler:u},h=l.createRenderer(null,this.componentDef),f=this.componentDef.selectors[0][0]||"div",p=i?CV(h,i,this.componentDef.encapsulation,a):L0(h,f,gz(f)),y=512;this.componentDef.signals?y|=4096:this.componentDef.onPush||(y|=16);let g=null;p!==null&&(g=R0(p,a,!0));let m=H0(0,null,null,1,0,null,null,null,null,null,null),x=kp(null,m,null,y,null,null,d,h,a,null,g);y0(x);let M,v,S=null;try{let T=this.componentDef,A,I=null;T.findHostDirectiveDefs?(A=[],I=new Map,T.findHostDirectiveDefs(T,A,I),A.push(T)):A=[T];let w=yz(x,p);S=vz(w,p,T,A,x,d,h),v=Tp(m,Hn),p&&Ez(h,T,p,i),t!==void 0&&Mz(v,this.ngContentSelectors,t),M=xz(S,T,A,I,x,[wz]),j0(m,x,null)}catch(T){throw S!==null&&S_(S),S_(x),T}finally{v0()}return new U_(this.componentType,M,zl(v,x),x,v)}finally{Rt(s)}}},U_=class extends F_{location;_rootLView;_tNode;instance;hostView;changeDetectorRef;componentType;previousInputValues=null;constructor(e,t,i,r,s){super(),this.location=i,this._rootLView=r,this._tNode=s,this.instance=t,this.hostView=this.changeDetectorRef=new pa(r,void 0,!1),this.componentType=e}setInput(e,t){let i=this._tNode.inputs,r;if(i!==null&&(r=i[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let s=this._rootLView;G0(s[We],s,r,e,t),this.previousInputValues.set(e,t);let o=go(this._tNode.index,s);zp(o,1)}}get injector(){return new aa(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function yz(n,e){let t=n[We],i=Hn;return n[i]=e,Up(t,i,2,"#host",null)}function vz(n,e,t,i,r,s,o){let a=r[We];_z(i,n,e,o);let l=null;e!==null&&(l=R0(e,r[fs]));let c=s.rendererFactory.createRenderer(e,t),u=kp(r,wD(t),null,ID(t),r[n.index],n,s,c,null,null,l);return a.firstCreatePass&&R_(a,n,i.length-1),Bp(r,u),r[n.index]=u}function _z(n,e,t,i){for(let r of n)e.mergedAttrs=Hu(e.mergedAttrs,r.hostAttrs);e.mergedAttrs!==null&&(k_(e,e.mergedAttrs,!0),t!==null&&pD(i,t,e))}function xz(n,e,t,i,r,s){let o=di(),a=r[We],l=Ki(o,r);CD(a,r,o,t,null,i);for(let u=0;u<t.length;u++){let d=o.directiveStart+u,h=ha(r,a,d,o);fa(h,r)}AD(a,r,o),l&&fa(l,r);let c=ha(r,a,o.directiveStart+o.componentOffset,o);if(n[vr]=r[vr]=c,s!==null)for(let u of s)u(c,e);return xD(a,o,r),c}function Ez(n,e,t,i){if(i)g_(n,t,["ng-version","19.0.0"]);else{let{attrs:r,classes:s}=wV(e.selectors[0]);r&&g_(n,t,r),s&&s.length>0&&fD(n,t,s.join(" "))}}function Mz(n,e,t){let i=n.projection=[];for(let r=0;r<e.length;r++){let s=t[r];i.push(s!=null&&s.length?Array.from(s):null)}}function wz(){let n=di();x0($t()[We],n)}var B_=class extends po{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new gp(this);constructor(e,t,i,r=!0){super(),this.ngModuleType=e,this._parent=t;let s=VA(e);this._bootstrapComponents=rD(s.bootstrap),this._r3Injector=SI(e,t,[{provide:po,useValue:this},{provide:Fl,useValue:this.componentFactoryResolver},...i],Kn(e),new Set(["environment"])),r&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},V_=class extends Gu{moduleType;constructor(e){super(),this.moduleType=e}create(e){return new B_(this.moduleType,e,[])}};var yp=class extends po{injector;componentFactoryResolver=new gp(this);instance=null;constructor(e){super();let t=new Vu([...e.providers,{provide:po,useValue:this},{provide:Fl,useValue:this.componentFactoryResolver}],e.parent||d0(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function Hp(n,e,t=null){return new yp({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}var bz=(()=>{class n{_injector;cachedInjectors=new Map;constructor(t){this._injector=t}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let i=c0(!1,t.type),r=i.length>0?Hp([i],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,r)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=Xe({token:n,providedIn:"environment",factory:()=>new n(Tt(Ci))})}return n})();function pn(n){return $u(()=>{let e=GD(n),t=vt(me({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===OI.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:e.standalone?r=>r.get(bz).getOrCreateStandaloneInjector(t):null,getExternalStyles:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||Vr.Emulated,styles:n.styles||qi,_:null,schemas:n.schemas||null,tView:null,id:""});e.standalone&&Gr("NgStandalone"),jD(t);let i=n.dependencies;return t.directiveDefs=cA(i,!1),t.pipeDefs=cA(i,!0),t.id=Cz(t),t})}function Sz(n){return uo(n)||a0(n)}function Tz(n){return n!==null}function Ea(n){return $u(()=>({type:n.type,bootstrap:n.bootstrap||qi,declarations:n.declarations||qi,imports:n.imports||qi,exports:n.exports||qi,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function lA(n,e){if(n==null)return Rl;let t={};for(let i in n)if(n.hasOwnProperty(i)){let r=n[i],s,o,a=fo.None;Array.isArray(r)?(a=r[0],s=r[1],o=r[2]??s):(s=r,o=r),e?(t[s]=a!==fo.None?[i,a]:i,e[s]=o):t[s]=i}return t}function En(n){return $u(()=>{let e=GD(n);return jD(e),e})}function GD(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:n.inputs||Rl,exportAs:n.exportAs||null,standalone:n.standalone??!0,signals:n.signals===!0,selectors:n.selectors||qi,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:lA(n.inputs,e),outputs:lA(n.outputs),debugInfo:null}}function jD(n){n.features?.forEach(e=>e(n))}function cA(n,e){if(!n)return null;let t=e?l0:Sz;return()=>(typeof n=="function"?n():n).map(i=>t(i)).filter(Tz)}function Cz(n){let e=0,t=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,n.consts,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery].join("|");for(let r of t)e=Math.imul(31,e)+r.charCodeAt(0)<<0;return e+=2147483648,"c"+e}var Gp=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static \u0275fac=function(i){return new(i||n)};static \u0275prov=Xe({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();function Az(n){return typeof n=="function"&&n[Ei]!==void 0}var WD=new Le("");function Ma(n){return!!n&&typeof n.then=="function"}function $D(n){return!!n&&typeof n.subscribe=="function"}var XD=new Le("");var qD=(()=>{class n{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((t,i)=>{this.resolve=t,this.reject=i});appInits=ae(XD,{optional:!0})??[];injector=ae(Ii);constructor(){}runInitializers(){if(this.initialized)return;let t=[];for(let r of this.appInits){let s=Zi(this.injector,r);if(Ma(s))t.push(s);else if($D(s)){let o=new Promise((a,l)=>{s.subscribe({complete:a,error:l})});t.push(o)}}let i=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{i()}).catch(r=>{this.reject(r)}),t.length===0&&i(),this.initialized=!0}static \u0275fac=function(i){return new(i||n)};static \u0275prov=Xe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Iz=(()=>{class n{static \u0275prov=Xe({token:n,providedIn:"root",factory:()=>new z_})}return n})(),z_=class{queuedEffectCount=0;queues=new Map;schedule(e){this.enqueue(e)}enqueue(e){let t=e.zone;this.queues.has(t)||this.queues.set(t,new Set);let i=this.queues.get(t);i.has(e)||(this.queuedEffectCount++,i.add(e))}flush(){for(;this.queuedEffectCount>0;)for(let[e,t]of this.queues)e===null?this.flushQueue(t):e.run(()=>this.flushQueue(t))}flushQueue(e){for(let t of e)e.delete(t),this.queuedEffectCount--,t.run()}},wa=new Le("");function Dz(){BT(()=>{throw new Re(600,!1)})}function Rz(n){return n.isBoundToModule}var Pz=10;function Nz(n,e,t){try{let i=t();return Ma(i)?i.catch(r=>{throw e.runOutsideAngular(()=>n.handleError(r)),r}):i}catch(i){throw e.runOutsideAngular(()=>n.handleError(i)),i}}var ci=(()=>{class n{_bootstrapListeners=[];_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=ae(z3);afterRenderManager=ae(XI);zonelessEnabled=ae(Ip);rootEffectScheduler=ae(Iz);dirtyFlags=0;deferredDirtyFlags=0;externalTestViews=new Set;afterTick=new vn;get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];isStable=ae(xo).hasPendingTasks.pipe(_t(t=>!t));whenStable(){let t;return new Promise(i=>{t=this.isStable.subscribe({next:r=>{r&&i()}})}).finally(()=>{t.unsubscribe()})}_injector=ae(Ci);get injector(){return this._injector}bootstrap(t,i){let r=t instanceof mp;if(!this._injector.get(qD).done){let h=!r&&zA(t),f=!1;throw new Re(405,f)}let o;r?o=t:o=this._injector.get(Fl).resolveComponentFactory(t),this.componentTypes.push(o.componentType);let a=Rz(o)?void 0:this._injector.get(po),l=i||o.selector,c=o.create(Ii.NULL,[],l,a),u=c.location.nativeElement,d=c.injector.get(WD,null);return d?.registerApplication(u),c.onDestroy(()=>{this.detachView(c.hostView),Wf(this.components,c),d?.unregisterApplication(u)}),this._loadComponent(c),c}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){if(this._runningTick)throw new Re(101,!1);let t=Rt(null);try{this._runningTick=!0,this.synchronize()}catch(i){this.internalErrorHandler(i)}finally{this._runningTick=!1,Rt(t),this.afterTick.next()}}synchronize(){let t=null;this._injector.destroyed||(t=this._injector.get(kl,null,{optional:!0})),this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0;let i=0;for(;this.dirtyFlags!==0&&i++<Pz;)this.synchronizeOnce(t)}synchronizeOnce(t){if(this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0,this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush()),this.dirtyFlags&7){let i=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:r,notifyErrorHandler:s}of this.allViews)Oz(r,s,i,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}else t?.begin?.(),t?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>Cp(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let i=t;this._views.push(i),i.attachToAppRef(this)}detachView(t){let i=t;Wf(this._views,i),i.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t);let i=this._injector.get(wa,[]);[...this._bootstrapListeners,...i].forEach(r=>r(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>Wf(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new Re(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static \u0275fac=function(i){return new(i||n)};static \u0275prov=Xe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Wf(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}var Lf;function Gl(n){Lf??=new WeakMap;let e=Lf.get(n);if(e)return e;let t=n.isStable.pipe(pr(i=>i)).toPromise().then(()=>{});return Lf.set(n,t),n.onDestroy(()=>Lf?.delete(n)),t}function Oz(n,e,t,i){if(!t&&!Cp(n))return;BD(n,e,t&&!i?0:1)}var Lz=new RegExp(`^(\\d+)*(${zI}|${VI})*(.*)`);function Fz(n){let e=n.match(Lz),[t,i,r,s]=e,o=i?parseInt(i,10):r,a=[];for(let[l,c,u]of s.matchAll(/(f|n)(\d*)/g)){let d=parseInt(u,10)||1;a.push(c,d)}return[o,...a]}function kz(n){return!n.prev&&n.parent?.type===8}function Qv(n){return n.index-Hn}function Uz(n,e){let t=n.i18nNodes;if(t)return t.get(e)}function jp(n,e,t,i){let r=Qv(i),s=Uz(n,r);if(s===void 0){let o=n.data[rB];if(o?.[r])s=Vz(o[r],t);else if(e.firstChild===i)s=n.firstChild;else{let a=i.prev===null,l=i.prev??i.parent;if(kz(i)){let c=Qv(i.parent);s=I_(n,c)}else{let c=Ki(l,t);if(a)s=c.firstChild;else{let u=Qv(l),d=I_(n,u);if(l.type===2&&d){let f=P0(n,u)+1;s=Wp(f,d)}else s=c.nextSibling}}}}return s}function Wp(n,e){let t=e;for(let i=0;i<n;i++)t=t.nextSibling;return t}function Bz(n,e){let t=n;for(let i=0;i<e.length;i+=2){let r=e[i],s=e[i+1];for(let o=0;o<s;o++)switch(r){case C_.FirstChild:t=t.firstChild;break;case C_.NextSibling:t=t.nextSibling;break}}return t}function Vz(n,e){let[t,...i]=Fz(n),r;if(t===VI)r=e[Yi][Ai];else if(t===zI)r=qB(e[Yi][Ai]);else{let s=Number(t);r=_r(e[s+Hn])}return Bz(r,i)}var zz=!1;function Hz(n){zz=n}function Gz(n){let e=n[Br];if(e){let{i18nNodes:t,dehydratedIcuData:i}=e;if(t&&i){let r=n[nn];for(let s of i.values())jz(r,t,s)}e.i18nNodes=void 0,e.dehydratedIcuData=void 0}}function jz(n,e,t){for(let i of t.node.cases[t.case]){let r=e.get(i.index-Hn);r&&B0(n,r,!1)}}function YD(n){let e=n[hs]??[],i=n[An][nn],r=[];for(let s of e)s.data[sB]!==void 0?r.push(s):Wz(s,i);n[hs]=r}function Wz(n,e){let t=0,i=n.firstChild;if(i){let r=n.data[up];for(;t<r;){let s=i.nextSibling;B0(e,i,!1),i=s,t++}}}function $0(n){YD(n);let e=n[Ai];yr(e)&&vp(e);for(let t=li;t<n.length;t++)vp(n[t])}function vp(n){Gz(n);let e=n[We];for(let t=Hn;t<e.bindingStartIndex;t++)if(Hr(n[t])){let i=n[t];$0(i)}else yr(n[t])&&vp(n[t])}function ZD(n){let e=n._views;for(let t of e){let i=OB(t);i!==null&&i[Ai]!==null&&(yr(i)?vp(i):$0(i))}}function $z(n,e,t){return ji(this,null,function*(){return n!==null&&(t.get(D0).cleanup([...e]),$0(n.lContainer),ZD(t.get(ci))),Gl(t.get(ci))})}function Xz(n,e){let t=[];for(let i of e)for(let r=0;r<(i[HI]??1);r++){let s={data:i,firstChild:null};i[up]>0&&(s.firstChild=n,n=Wp(i[up],n)),t.push(s)}return[n,t]}var KD=()=>null;function qz(n,e){let t=n[hs];return!e||t===null||t.length===0?null:t[0].data[iB]===e?t.shift():(YD(n),null)}function Yz(){KD=qz}function uA(n,e){return KD(n,e)}var ba=(()=>{class n{static __NG_ELEMENT_ID__=Zz}return n})();function Zz(){let n=di();return QD(n,$t())}var Kz=ba,JD=class extends Kz{_lContainer;_hostTNode;_hostLView;constructor(e,t,i){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=i}get element(){return zl(this._hostTNode,this._hostLView)}get injector(){return new aa(this._hostTNode,this._hostLView)}get parentInjector(){let e=E0(this._hostTNode,this._hostLView);if(gI(e)){let t=sp(e,this._hostLView),i=rp(e),r=t[We].data[i+8];return new aa(r,t)}else return new aa(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=dA(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-li}createEmbeddedView(e,t,i){let r,s;typeof i=="number"?r=i:i!=null&&(r=i.index,s=i.injector);let o=uA(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},s,o);return this.insertImpl(a,r,N_(this._hostTNode,o)),a}createComponent(e,t,i,r,s){let o=e&&!jU(e),a;if(o)a=t;else{let p=t||{};a=p.index,i=p.injector,r=p.projectableNodes,s=p.environmentInjector||p.ngModuleRef}let l=o?e:new ju(uo(e)),c=i||this.parentInjector;if(!s&&l.ngModule==null){let y=(o?c:this.parentInjector).get(Ci,null);y&&(s=y)}let u=uo(l.componentType??{}),d=uA(this._lContainer,u?.id??null),h=d?.firstChild??null,f=l.create(c,r,h,s);return this.insertImpl(f.hostView,a,N_(this._hostTNode,d)),f}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,i){let r=e._lView;if(JU(r)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let l=r[An],c=new JD(l,l[xr],l[An]);c.detach(c.indexOf(e))}}let s=this._adjustIndex(t),o=this._lContainer;return LD(o,r,s,i),e.attachToViewContainerRef(),kA(e_(o),s,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=dA(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),i=hp(this._lContainer,t);i&&(Zf(e_(this._lContainer),t),k0(i[We],i))}detach(e){let t=this._adjustIndex(e,-1),i=hp(this._lContainer,t);return i&&Zf(e_(this._lContainer),t)!=null?new pa(i):null}_adjustIndex(e,t=0){return e??this.length+t}};function dA(n){return n[ep]}function e_(n){return n[ep]||(n[ep]=[])}function QD(n,e){let t,i=e[n.index];return Hr(i)?t=i:(t=DD(i,e,null,n),e[n.index]=t,Bp(e,t)),e1(t,e,n,i),new JD(t,n,e)}function Jz(n,e){let t=n[nn],i=t.createComment(""),r=Ki(e,n),s=uD(t,r);return fp(t,s,i,sV(t,r),!1),i}var e1=t1,X0=()=>!1;function Qz(n,e,t){return X0(n,e,t)}function t1(n,e,t,i){if(n[gs])return;let r;t.type&8?r=_r(i):r=Jz(e,t),n[gs]=r}function eH(n,e,t){if(n[gs]&&n[hs])return!0;let i=t[Br],r=e.index-Hn;if(!i||q3(e)||Ju(i,r))return!1;let o=I_(i,r),a=i.data[C0]?.[r],[l,c]=Xz(o,a);return n[gs]=l,n[hs]=c,!0}function tH(n,e,t,i){X0(n,t,e)||t1(n,e,t,i)}function nH(){e1=tH,X0=eH}var H_=class n{queryList;matches=null;constructor(e){this.queryList=e}clone(){return new n(this.queryList)}setDirty(){this.queryList.setDirty()}},G_=class n{queries;constructor(e=[]){this.queries=e}createEmbeddedView(e){let t=e.queries;if(t!==null){let i=e.contentQueries!==null?e.contentQueries[0]:t.length,r=[];for(let s=0;s<i;s++){let o=t.getByIndex(s),a=this.queries[o.indexInDeclarationView];r.push(a.clone())}return new n(r)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)q0(e,t).matches!==null&&this.queries[t].setDirty()}},j_=class{flags;read;predicate;constructor(e,t,i=null){this.flags=t,this.read=i,typeof e=="string"?this.predicate=uH(e):this.predicate=e}},W_=class n{queries;constructor(e=[]){this.queries=e}elementStart(e,t){for(let i=0;i<this.queries.length;i++)this.queries[i].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let i=0;i<this.length;i++){let r=t!==null?t.length:0,s=this.getByIndex(i).embeddedTView(e,r);s&&(s.indexInDeclarationView=i,t!==null?t.push(s):t=[s])}return t!==null?new n(t):null}template(e,t){for(let i=0;i<this.queries.length;i++)this.queries[i].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},$_=class n{metadata;matches=null;indexInDeclarationView=-1;crossesNgTemplate=!1;_declarationNodeIndex;_appliesToNextNode=!0;constructor(e,t=-1){this.metadata=e,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new n(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let t=this._declarationNodeIndex,i=e.parent;for(;i!==null&&i.type&8&&i.index!==t;)i=i.parent;return t===(i!==null?i.index:-1)}return this._appliesToNextNode}matchTNode(e,t){let i=this.metadata.predicate;if(Array.isArray(i))for(let r=0;r<i.length;r++){let s=i[r];this.matchTNodeWithReadOption(e,t,iH(t,s)),this.matchTNodeWithReadOption(e,t,Gf(t,e,s,!1,!1))}else i===Ll?t.type&4&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,Gf(t,e,i,!1,!1))}matchTNodeWithReadOption(e,t,i){if(i!==null){let r=this.metadata.read;if(r!==null)if(r===hi||r===ba||r===Ll&&t.type&4)this.addMatch(t.index,-2);else{let s=Gf(t,e,r,!1,!1);s!==null&&this.addMatch(t.index,s)}else this.addMatch(t.index,i)}}addMatch(e,t){this.matches===null?this.matches=[e,t]:this.matches.push(e,t)}};function iH(n,e){let t=n.localNames;if(t!==null){for(let i=0;i<t.length;i+=2)if(t[i]===e)return t[i+1]}return null}function rH(n,e){return n.type&11?zl(n,e):n.type&4?W0(n,e):null}function sH(n,e,t,i){return t===-1?rH(e,n):t===-2?oH(n,e,i):ha(n,n[We],t,e)}function oH(n,e,t){if(t===hi)return zl(e,n);if(t===Ll)return W0(e,n);if(t===ba)return QD(e,n)}function n1(n,e,t,i){let r=e[ms].queries[i];if(r.matches===null){let s=n.data,o=t.matches,a=[];for(let l=0;o!==null&&l<o.length;l+=2){let c=o[l];if(c<0)a.push(null);else{let u=s[c];a.push(sH(e,u,o[l+1],t.metadata.read))}}r.matches=a}return r.matches}function X_(n,e,t,i){let r=n.queries.getByIndex(t),s=r.matches;if(s!==null){let o=n1(n,e,r,t);for(let a=0;a<s.length;a+=2){let l=s[a];if(l>0)i.push(o[a/2]);else{let c=s[a+1],u=e[-l];for(let d=li;d<u.length;d++){let h=u[d];h[la]===h[An]&&X_(h[We],h,c,i)}if(u[Nl]!==null){let d=u[Nl];for(let h=0;h<d.length;h++){let f=d[h];X_(f[We],f,c,i)}}}}}return i}function aH(n,e){return n[ms].queries[e].queryList}function lH(n,e,t){let i=new b_((t&4)===4);return RV(n,e,i,i.destroy),(e[ms]??=new G_).queries.push(new H_(i))-1}function cH(n,e,t){let i=ui();return i.firstCreatePass&&(dH(i,new j_(n,e,t),-1),(e&2)===2&&(i.staticViewQueries=!0)),lH(i,$t(),e)}function uH(n){return n.split(",").map(e=>e.trim())}function dH(n,e,t){n.queries===null&&(n.queries=new W_),n.queries.track(new $_(e,t))}function q0(n,e){return n.queries.getByIndex(e)}function hH(n,e){let t=n[We],i=q0(t,e);return i.crossesNgTemplate?X_(t,n,e,[]):n1(t,n,i,e)}function ed(n,e){Gr("NgSignals");let t=VT(n),i=t[Ei];return e?.equal&&(i.equal=e.equal),t.set=r=>nf(i,r),t.update=r=>zT(i,r),t.asReadonly=fH.bind(t),t}function fH(){let n=this[Ei];if(n.readonlyFn===void 0){let e=()=>this();e[Ei]=n,n.readonlyFn=e}return n.readonlyFn}function i1(n){return Az(n)&&typeof n.set=="function"}function pH(n){return Object.getPrototypeOf(n.prototype).constructor}function jr(n){let e=pH(n.type),t=!0,i=[n];for(;e;){let r;if(ho(n))r=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new Re(903,!1);r=e.\u0275dir}if(r){if(t){i.push(r);let o=n;o.inputs=Ff(n.inputs),o.inputTransforms=Ff(n.inputTransforms),o.declaredInputs=Ff(n.declaredInputs),o.outputs=Ff(n.outputs);let a=r.hostBindings;a&&_H(n,a);let l=r.viewQuery,c=r.contentQueries;if(l&&yH(n,l),c&&vH(n,c),mH(n,r),lU(n.outputs,r.outputs),ho(r)&&r.data.animation){let u=n.data;u.animation=(u.animation||[]).concat(r.data.animation)}}let s=r.features;if(s)for(let o=0;o<s.length;o++){let a=s[o];a&&a.ngInherit&&a(n),a===jr&&(t=!1)}}e=Object.getPrototypeOf(e)}gH(i)}function mH(n,e){for(let t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;let i=e.inputs[t];if(i!==void 0&&(n.inputs[t]=i,n.declaredInputs[t]=e.declaredInputs[t],e.inputTransforms!==null)){let r=Array.isArray(i)?i[0]:i;if(!e.inputTransforms.hasOwnProperty(r))continue;n.inputTransforms??={},n.inputTransforms[r]=e.inputTransforms[r]}}}function gH(n){let e=0,t=null;for(let i=n.length-1;i>=0;i--){let r=n[i];r.hostVars=e+=r.hostVars,r.hostAttrs=Hu(r.hostAttrs,t=Hu(t,r.hostAttrs))}}function Ff(n){return n===Rl?{}:n===qi?[]:n}function yH(n,e){let t=n.viewQuery;t?n.viewQuery=(i,r)=>{e(i,r),t(i,r)}:n.viewQuery=e}function vH(n,e){let t=n.contentQueries;t?n.contentQueries=(i,r,s)=>{e(i,r,s),t(i,r,s)}:n.contentQueries=e}function _H(n,e){let t=n.hostBindings;t?n.hostBindings=(i,r)=>{e(i,r),t(i,r)}:n.hostBindings=e}function r1(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function xH(n,e,t){return n[e]=t}function td(n,e,t){let i=n[e];return Object.is(i,t)?!1:(n[e]=t,!0)}function nd(n){return(n.flags&32)===32}function EH(n,e,t,i,r,s,o,a,l){let c=e.consts,u=Up(e,n,4,o||null,a||null);TD(e,t,u,ip(c,l)),x0(e,u);let d=u.tView=H0(2,u,i,r,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,c,null);return e.queries!==null&&(e.queries.template(e,u),d.queries=e.queries.embeddedTView(u)),u}function MH(n,e,t,i,r,s,o,a,l,c){let u=t+Hn,d=e.firstCreatePass?EH(u,e,n,i,r,s,o,a,l):e.data[u];Ku(d,!1);let h=s1(e,n,d,t);_0()&&U0(e,n,h,d),fa(h,n);let f=DD(h,n,h,d);return n[u]=f,Bp(n,f),Qz(f,d,n),h0(d)&&ED(e,n,d),l!=null&&MD(n,d,c),d}function Ln(n,e,t,i,r,s,o,a){let l=$t(),c=ui(),u=ip(c.consts,s);return MH(l,c,n,e,t,i,r,u,o,a),Ln}var s1=o1;function o1(n,e,t,i){return _o(!0),e[nn].createComment("")}function wH(n,e,t,i){let r=e[Br],s=!r||Zu()||nd(t)||Ju(r,i);if(_o(s),s)return o1(n,e,t,i);let o=r.data[nB]?.[i]??null;o!==null&&t.tView!==null&&t.tView.ssrId===null&&(t.tView.ssrId=o);let a=jp(r,n,e,t);Op(r,i,a);let l=P0(r,i);return Wp(l,a)}function bH(){s1=wH}var SH=(()=>{class n{cachedInjectors=new Map;getOrCreateInjector(t,i,r,s){if(!this.cachedInjectors.has(t)){let o=r.length>0?Hp(r,i,s):null;this.cachedInjectors.set(t,o)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=Xe({token:n,providedIn:"environment",factory:()=>new n})}return n})();var TH=new Le("");function t_(n,e,t){return n.get(SH).getOrCreateInjector(e,n,t,"")}function CH(n,e,t){if(n instanceof Il){let r=n.injector,s=n.parentInjector,o=t_(s,e,t);return new Il(r,o)}let i=n.get(Ci);if(i!==n){let r=t_(i,e,t);return new Il(n,r)}return t_(n,e,t)}function Tl(n,e,t,i=!1){let r=t[An],s=r[We];if(WU(r))return;let o=Rp(r,e),a=o[I0],l=o[vB];if(!(l!==null&&n<l)&&hA(a,n)&&hA(o[mB]??-1,n)){let c=Pp(s,e),d=!i&&!0&&(wB(c)!==null||eA(c,Cn.Loading)!==null||eA(c,Cn.Placeholder))?DH:IH;try{d(n,o,t,e,r)}catch(h){Vp(r,h)}}}function AH(n,e){let t=n[hs];return t===null||t.length===0?null:t.find(i=>i.data[oB]===e[I0])??null}function IH(n,e,t,i,r){let s=MB(n,r,i);if(s!==null){e[I0]=n;let o=r[We],a=s+Hn,l=Tp(o,a),c=0;JV(t,c);let u;if(n===Cn.Complete){let f=Pp(o,i),p=f.providers;p&&p.length>0&&(u=CH(r[fs],f,p))}let d=AH(t,e);if(t[hs]===null||t[hs].length===0||d){t[hs]=null;let f=OD(r,l,null,{injector:u,dehydratedView:d});LD(t,f,c,N_(l,d)),zp(f,2)}if(n===Cn.Complete&&Array.isArray(e[ds])){for(let f of e[ds])f();e[ds]=null}}if(n===Cn.Complete&&Array.isArray(e[ds])){for(let o of e[ds])o();e[ds]=null}}function hA(n,e){return n<e}function fA(n,e,t){n.loadingPromise.then(()=>{n.loadingState===Si.COMPLETE?Tl(Cn.Complete,e,t):n.loadingState===Si.FAILED&&Tl(Cn.Error,e,t)})}var DH=null;function RH(n,e,t){let i=e[fs],r=e[We];if(n.loadingState!==Si.NOT_STARTED)return n.loadingPromise??Promise.resolve();let s=Rp(e,t),o=bB(r,n);n.loadingState=Si.IN_PROGRESS,jf(1,s);let a=n.dependencyResolverFn,l=i.get(xo),c=l.add();return a?(n.loadingPromise=Promise.allSettled(a()).then(u=>{let d=!1,h=[],f=[];for(let p of u)if(p.status==="fulfilled"){let y=p.value,g=uo(y)||a0(y);if(g)h.push(g);else{let m=l0(y);m&&f.push(m)}}else{d=!0;break}if(n.loadingPromise=null,l.remove(c),d){if(n.loadingState=Si.FAILED,n.errorTmplIndex===null){let p="",y=new Re(750,!1);Vp(e,y)}}else{n.loadingState=Si.COMPLETE;let p=o.tView;if(h.length>0){p.directiveRegistry=tA(p.directiveRegistry,h);let y=h.map(m=>m.type),g=c0(!1,...y);n.providers=g}f.length>0&&(p.pipeRegistry=tA(p.pipeRegistry,f))}}),n.loadingPromise):(n.loadingPromise=Promise.resolve().then(()=>{n.loadingPromise=null,n.loadingState=Si.COMPLETE,l.remove(c)}),n.loadingPromise)}function PH(n,e){let t=n[We],i=n[e.index],r=n[fs],s=Rp(n,e),o=Pp(t,e);if(kH(r,o))switch(xB(s),o.loadingState){case Si.NOT_STARTED:Tl(Cn.Loading,e,i),RH(o,n,e),o.loadingState===Si.IN_PROGRESS&&fA(o,e,i);break;case Si.IN_PROGRESS:Tl(Cn.Loading,e,i),fA(o,e,i);break;case Si.COMPLETE:Tl(Cn.Complete,e,i);break;case Si.FAILED:Tl(Cn.Error,e,i);break;default:}}function NH(n,e,t=()=>{}){return ji(this,null,function*(){let{deferBlock:i,hydratedBlocks:r}=yield FH(n,e);t(r),yield $z(i,r,n)})}function OH(n,e,t){let i,r=new Promise(s=>{i=s});return A0(()=>{let s=e.get(n);if(s!==null){let{tNode:o,lView:a}=s,l=Rp(a,o);LH(l,i),PH(a,o)}},{injector:t}),r}function LH(n,e){Array.isArray(n[ds])||(n[ds]=[]),n[ds].push(e)}function FH(n,e){return ji(this,null,function*(){let t=n.get(D0);if(t.hydrating.has(e))return{deferBlock:null,hydratedBlocks:new Set};let i=VB(e,n);i.forEach(a=>t.hydrating.add(a));for(let a of i)yield OH(a,t,n);let r=new Set(i),s=i.slice(-1)[0];return{deferBlock:t.get(s),hydratedBlocks:r}})}function kH(n,e){return n.get(TH,null,{optional:!0})?.behavior!==qI.Manual}function UH(n,e,t,i){return td(n,m0(),t)?e+i0(t)+i:xa}function kf(n,e){return n<<17|e<<2}function ma(n){return n>>17&32767}function BH(n){return(n&2)==2}function VH(n,e){return n&131071|e<<17}function q_(n){return n|2}function Ul(n){return(n&131068)>>2}function n_(n,e){return n&-131069|e<<2}function zH(n){return(n&1)===1}function Y_(n){return n|1}function HH(n,e,t,i,r,s){let o=s?e.classBindings:e.styleBindings,a=ma(o),l=Ul(o);n[i]=t;let c=!1,u;if(Array.isArray(t)){let d=t;u=d[1],(u===null||Xu(d,u)>0)&&(c=!0)}else u=t;if(r)if(l!==0){let h=ma(n[a+1]);n[i+1]=kf(h,a),h!==0&&(n[h+1]=n_(n[h+1],i)),n[a+1]=VH(n[a+1],i)}else n[i+1]=kf(a,0),a!==0&&(n[a+1]=n_(n[a+1],i)),a=i;else n[i+1]=kf(l,0),a===0?a=i:n[l+1]=n_(n[l+1],i),l=i;c&&(n[i+1]=q_(n[i+1])),pA(n,u,i,!0),pA(n,u,i,!1),GH(e,u,n,i,s),o=kf(a,l),s?e.classBindings=o:e.styleBindings=o}function GH(n,e,t,i,r){let s=r?n.residualClasses:n.residualStyles;s!=null&&typeof e=="string"&&Xu(s,e)>=0&&(t[i+1]=Y_(t[i+1]))}function pA(n,e,t,i){let r=n[t+1],s=e===null,o=i?ma(r):Ul(r),a=!1;for(;o!==0&&(a===!1||s);){let l=n[o],c=n[o+1];jH(l,e)&&(a=!0,n[o+1]=i?Y_(c):q_(c)),o=i?ma(c):Ul(c)}a&&(n[t+1]=i?q_(r):Y_(r))}function jH(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?Xu(n,e)>=0:!1}function Zt(n,e,t){let i=$t(),r=m0();if(td(i,r,e)){let s=ui(),o=hI();SD(s,o,i,n,e,i[nn],t,!1)}return Zt}function mA(n,e,t,i,r){let s=e.inputs,o=r?"class":"style";G0(n,t,s[o],o,i)}function $p(n,e){return WH(n,e,null,!0),$p}function WH(n,e,t,i){let r=$t(),s=ui(),o=d3(2);if(s.firstUpdatePass&&XH(s,n,o,i),e!==xa&&td(r,o,e)){let a=s.data[Vl()];JH(s,a,r,r[nn],n,r[o+1]=QH(e,t),i,o)}}function $H(n,e){return e>=n.expandoStartIndex}function XH(n,e,t,i){let r=n.data;if(r[t+1]===null){let s=r[Vl()],o=$H(n,t);eG(s,i)&&e===null&&!o&&(e=!1),e=qH(r,s,e,i),HH(r,s,e,t,o,i)}}function qH(n,e,t,i){let r=m3(n),s=i?e.residualClasses:e.residualStyles;if(r===null)(i?e.classBindings:e.styleBindings)===0&&(t=i_(null,n,e,t,i),t=Wu(t,e.attrs,i),s=null);else{let o=e.directiveStylingLast;if(o===-1||n[o]!==r)if(t=i_(r,n,e,t,i),s===null){let l=YH(n,e,i);l!==void 0&&Array.isArray(l)&&(l=i_(null,n,e,l[1],i),l=Wu(l,e.attrs,i),ZH(n,e,i,l))}else s=KH(n,e,i)}return s!==void 0&&(i?e.residualClasses=s:e.residualStyles=s),t}function YH(n,e,t){let i=t?e.classBindings:e.styleBindings;if(Ul(i)!==0)return n[ma(i)]}function ZH(n,e,t,i){let r=t?e.classBindings:e.styleBindings;n[ma(r)]=i}function KH(n,e,t){let i,r=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<r;s++){let o=n[s].hostAttrs;i=Wu(i,o,t)}return Wu(i,e.attrs,t)}function i_(n,e,t,i,r){let s=null,o=t.directiveEnd,a=t.directiveStylingLast;for(a===-1?a=t.directiveStart:a++;a<o&&(s=e[a],i=Wu(i,s.hostAttrs,r),s!==n);)a++;return n!==null&&(t.directiveStylingLast=a),i}function Wu(n,e,t){let i=t?1:2,r=-1;if(e!==null)for(let s=0;s<e.length;s++){let o=e[s];typeof o=="number"?r=o:r===i&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),DU(n,o,t?!0:e[++s]))}return n===void 0?null:n}function JH(n,e,t,i,r,s,o,a){if(!(e.type&3))return;let l=n.data,c=l[a+1],u=zH(c)?gA(l,e,t,r,Ul(c),o):void 0;if(!_p(u)){_p(s)||BH(c)&&(s=gA(l,null,t,r,a,o));let d=QA(Vl(),t);dV(i,o,d,r,s)}}function gA(n,e,t,i,r,s){let o=e===null,a;for(;r>0;){let l=n[r],c=Array.isArray(l),u=c?l[1]:l,d=u===null,h=t[r+1];h===xa&&(h=d?qi:void 0);let f=d?Wv(h,i):u===i?h:void 0;if(c&&!_p(f)&&(f=Wv(l,i)),_p(f)&&(a=f,o))return a;let p=n[r+1];r=o?ma(p):Ul(p)}if(e!==null){let l=s?e.residualClasses:e.residualStyles;l!=null&&(a=Wv(l,i))}return a}function _p(n){return n!==void 0}function QH(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=Kn(Lp(n)))),n}function eG(n,e){return(n.flags&(e?8:16))!==0}function tG(n,e,t,i,r,s){let o=e.consts,a=ip(o,r),l=Up(e,n,2,i,a);return TD(e,t,l,ip(o,s)),l.attrs!==null&&k_(l,l.attrs,!1),l.mergedAttrs!==null&&k_(l,l.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,l),l}function Y(n,e,t,i){let r=$t(),s=ui(),o=Hn+n,a=r[nn],l=s.firstCreatePass?tG(o,s,r,e,t,i):s.data[o],c=a1(s,r,l,a,e,n);r[o]=c;let u=h0(l);return Ku(l,!0),pD(a,c,l),!nd(l)&&_0()&&U0(s,r,c,l),t3()===0&&fa(c,r),n3(),u&&(ED(s,r,l),xD(s,l,r)),i!==null&&MD(r,l),Y}function Q(){let n=di();rI()?l3():(n=n.parent,Ku(n,!1));let e=n;r3(e)&&o3(),i3();let t=ui();return t.firstCreatePass&&(x0(t,n),qA(n)&&t.queries.elementEnd(n)),e.classesWithoutHost!=null&&E3(e)&&mA(t,e,$t(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&M3(e)&&mA(t,e,$t(),e.stylesWithoutHost,!1),Q}function tt(n,e,t,i){return Y(n,e,t,i),Q(),tt}var a1=(n,e,t,i,r,s)=>(_o(!0),L0(i,r,fI()));function nG(n,e,t,i,r,s){let o=e[Br],a=!o||Zu()||nd(t)||Ju(o,s);if(_o(a),a)return L0(i,r,fI());let l=jp(o,n,e,t);return eD(o,s)&&Op(o,s,l.nextSibling),o&&(PI(t)||NI(l))&&qu(t)&&(s3(t),hD(l)),l}function iG(){a1=nG}var rG=(n,e,t,i)=>(_o(!0),oD(e[nn],""));function sG(n,e,t,i){let r,s=e[Br],o=!s||Zu()||Ju(s,i)||nd(t);if(_o(o),o)return oD(e[nn],"");let a=jp(s,n,e,t),l=UB(s,i);return Op(s,i,a),r=Wp(l,a),r}function oG(){rG=sG}function Eo(){return $t()}var xp="en-US";var aG=xp;function lG(n){typeof n=="string"&&(aG=n.toLowerCase().replace(/_/g,"-"))}var l1=(n,e,t)=>{};function cG(n){l1=n}function At(n,e,t,i){let r=$t(),s=ui(),o=di();return c1(s,r,r[nn],o,n,e,i),At}function uG(n,e,t,i){let r=n.cleanup;if(r!=null)for(let s=0;s<r.length-1;s+=2){let o=r[s];if(o===t&&r[s+1]===i){let a=e[Jf],l=r[s+2];return a.length>l?a[l]:null}typeof o=="string"&&(s+=2)}return null}function c1(n,e,t,i,r,s,o){let a=h0(i),c=n.firstCreatePass&&ND(n),u=e[vr],d=PD(e),h=!0;if(i.type&3||o){let y=Ki(i,e),g=o?o(y):y,m=d.length,x=o?v=>o(_r(v[i.index])):i.index,M=null;if(!o&&a&&(M=uG(n,e,r,i.index)),M!==null){let v=M.__ngLastListenerFn__||M;v.__ngNextListenerFn__=s,M.__ngLastListenerFn__=s,h=!1}else{s=vA(i,e,u,s),l1(y,r,s);let v=t.listen(g,r,s);d.push(s,v),c&&c.push(r,x,m,m+1)}}else s=vA(i,e,u,s);let f=i.outputs,p;if(h&&f!==null&&(p=f[r])){let y=p.length;if(y)for(let g=0;g<y;g+=2){let m=p[g],x=p[g+1],S=e[m][x].subscribe(s),T=d.length;d.push(s,S),c&&c.push(r,i.index,T,-(T+1))}}}function yA(n,e,t,i){let r=Rt(null);try{return kr(6,e,t),t(i)!==!1}catch(s){return Vp(n,s),!1}finally{kr(7,e,t),Rt(r)}}function vA(n,e,t,i){return function r(s){if(s===Function)return i;let o=n.componentOffset>-1?go(n.index,e):e;zp(o,5);let a=yA(e,t,i,s),l=r.__ngNextListenerFn__;for(;l;)a=yA(e,t,l,s)&&a,l=l.__ngNextListenerFn__;return a}}function Mn(n=1){return y3(n)}function u1(n,e,t){cH(n,e,t)}function Y0(n){let e=$t(),t=ui(),i=oI();g0(i+1);let r=q0(t,i);if(n.dirty&&KU(e)===((r.metadata.flags&2)===2)){if(r.matches===null)n.reset([]);else{let s=hH(e,i);n.reset(s,j3),n.notifyOnChanges()}return!0}return!1}function Z0(){return aH($t(),oI())}function he(n,e=""){let t=$t(),i=ui(),r=n+Hn,s=i.firstCreatePass?Up(i,r,1,e,null):i.data[r],o=d1(i,t,s,e,n);t[r]=o,_0()&&U0(i,t,o,s),Ku(s,!1)}var d1=(n,e,t,i,r)=>(_o(!0),sD(e[nn],i));function dG(n,e,t,i,r){let s=e[Br],o=!s||Zu()||nd(t)||Ju(s,r);return _o(o),o?sD(e[nn],i):jp(s,n,e,t)}function hG(){d1=dG}function Gn(n){return h1("",n,""),Gn}function h1(n,e,t){let i=$t(),r=UH(i,n,e,t);return r!==xa&&qV(i,Vl(),r),h1}function Sa(n,e,t){i1(e)&&(e=e());let i=$t(),r=m0();if(td(i,r,e)){let s=ui(),o=hI();SD(s,o,i,n,e,i[nn],t,!1)}return Sa}function jl(n,e){let t=i1(n);return t&&n.set(e),t}function Ta(n,e){let t=$t(),i=ui(),r=di();return c1(i,t,t[nn],r,n,e),Ta}function fG(n,e,t){let i=ui();if(i.firstCreatePass){let r=ho(n);Z_(t,i.data,i.blueprint,r,!0),Z_(e,i.data,i.blueprint,r,!1)}}function Z_(n,e,t,i,r){if(n=Zn(n),Array.isArray(n))for(let s=0;s<n.length;s++)Z_(n[s],e,t,i,r);else{let s=ui(),o=$t(),a=di(),l=Pl(n)?n:Zn(n.provide),c=jA(n),u=a.providerIndexes&1048575,d=a.directiveStart,h=a.providerIndexes>>20;if(Pl(n)||!n.multi){let f=new da(c,r,xt),p=s_(l,e,r?u:u+h,d);p===-1?(v_(op(a,o),s,l),r_(s,n,e.length),e.push(l),a.directiveStart++,a.directiveEnd++,r&&(a.providerIndexes+=1048576),t.push(f),o.push(f)):(t[p]=f,o[p]=f)}else{let f=s_(l,e,u+h,d),p=s_(l,e,u,u+h),y=f>=0&&t[f],g=p>=0&&t[p];if(r&&!g||!r&&!y){v_(op(a,o),s,l);let m=gG(r?mG:pG,t.length,r,i,c);!r&&g&&(t[p].providerFactory=m),r_(s,n,e.length,0),e.push(l),a.directiveStart++,a.directiveEnd++,r&&(a.providerIndexes+=1048576),t.push(m),o.push(m)}else{let m=f1(t[r?p:f],c,!r&&i);r_(s,n,f>-1?f:p,m)}!r&&i&&g&&t[p].componentProviders++}}}function r_(n,e,t,i){let r=Pl(e),s=FU(e);if(r||s){let l=(s?Zn(e.useClass):e).prototype.ngOnDestroy;if(l){let c=n.destroyHooks||(n.destroyHooks=[]);if(!r&&e.multi){let u=c.indexOf(t);u===-1?c.push(t,[i,l]):c[u+1].push(i,l)}else c.push(t,l)}}}function f1(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function s_(n,e,t,i){for(let r=t;r<i;r++)if(e[r]===n)return r;return-1}function pG(n,e,t,i){return K_(this.multi,[])}function mG(n,e,t,i){let r=this.multi,s;if(this.providerFactory){let o=this.providerFactory.componentProviders,a=ha(t,t[We],this.providerFactory.index,i);s=a.slice(0,o),K_(r,s);for(let l=o;l<a.length;l++)s.push(a[l])}else s=[],K_(r,s);return s}function K_(n,e){for(let t=0;t<n.length;t++){let i=n[t];e.push(i())}return e}function gG(n,e,t,i,r){let s=new da(n,t,xt);return s.multi=[],s.index=e,s.componentProviders=0,f1(s,r,i&&!t),s}function Wl(n,e=[]){return t=>{t.providersResolver=(i,r)=>fG(i,r?r(n):n,e)}}function _s(n,e,t,i){return vG($t(),c3(),n,e,t,i)}function yG(n,e){let t=n[e];return t===xa?void 0:t}function vG(n,e,t,i,r,s){let o=e+t;return td(n,o,r)?xH(n,o+1,s?i.call(s,r):i(r)):yG(n,o+1)}var J_=class{ngModuleFactory;componentFactories;constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},K0=(()=>{class n{compileModuleSync(t){return new V_(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let i=this.compileModuleSync(t),r=VA(t),s=rD(r.declarations).reduce((o,a)=>{let l=uo(a);return l&&o.push(new ju(l)),o},[]);return new J_(i,s)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static \u0275fac=function(i){return new(i||n)};static \u0275prov=Xe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var _G=(()=>{class n{zone=ae(dn);changeDetectionScheduler=ae(Ol);applicationRef=ae(ci);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(i){return new(i||n)};static \u0275prov=Xe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),xG=new Le("",{factory:()=>!1});function p1({ngZoneFactory:n,ignoreChangesOutsideZone:e,scheduleInRootZone:t}){return n??=()=>new dn(vt(me({},g1()),{scheduleInRootZone:t})),[{provide:dn,useFactory:n},{provide:co,multi:!0,useFactory:()=>{let i=ae(_G,{optional:!0});return()=>i.initialize()}},{provide:co,multi:!0,useFactory:()=>{let i=ae(EG);return()=>{i.initialize()}}},e===!0?{provide:CI,useValue:!0}:[],{provide:AI,useValue:t??TI}]}function m1(n){let e=n?.ignoreChangesOutsideZone,t=n?.scheduleInRootZone,i=p1({ngZoneFactory:()=>{let r=g1(n);return r.scheduleInRootZone=t,r.shouldCoalesceEventChangeDetection&&Gr("NgZone_CoalesceEvent"),new dn(r)},ignoreChangesOutsideZone:e,scheduleInRootZone:t});return ya([{provide:xG,useValue:!0},{provide:Ip,useValue:!1},i])}function g1(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var EG=(()=>{class n{subscription=new hn;initialized=!1;zone=ae(dn);pendingTasks=ae(xo);initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{dn.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{dn.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(i){return new(i||n)};static \u0275prov=Xe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var MG=(()=>{class n{appRef=ae(ci);taskService=ae(xo);ngZone=ae(dn);zonelessEnabled=ae(Ip);disableScheduling=ae(CI,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new hn;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(lp):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(ae(AI,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof w_||!this.zoneIsDefined)}notify(t){if(!this.zonelessEnabled&&t===5)return;let i=!1;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 8:{this.appRef.deferredDirtyFlags|=8;break}case 6:{this.appRef.dirtyFlags|=2,i=!0;break}case 13:{this.appRef.dirtyFlags|=16,i=!0;break}case 14:{this.appRef.dirtyFlags|=2,i=!0;break}case 12:{i=!0;break}case 10:case 9:case 7:case 11:default:this.appRef.dirtyFlags|=8}if(!this.shouldScheduleTick(i))return;let r=this.useMicrotaskScheduler?$C:II;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>r(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>r(()=>this.tick()))}shouldScheduleTick(t){return!(this.disableScheduling&&!t||this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(lp+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(i){throw this.taskService.remove(t),i}finally{this.cleanup()}this.useMicrotaskScheduler=!0,$C(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static \u0275fac=function(i){return new(i||n)};static \u0275prov=Xe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function wG(){return typeof $localize<"u"&&$localize.locale||xp}var J0=new Le("",{providedIn:"root",factory:()=>ae(J0,mt.Optional|mt.SkipSelf)||wG()});var Q_=new Le("");function Uf(n){return!n.moduleRef}function bG(n){let e=Uf(n)?n.r3Injector:n.moduleRef.injector,t=e.get(dn);return t.run(()=>{Uf(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let i=e.get(ys,null),r;if(t.runOutsideAngular(()=>{r=t.onError.subscribe({next:s=>{i.handleError(s)}})}),Uf(n)){let s=()=>e.destroy(),o=n.platformInjector.get(Q_);o.add(s),e.onDestroy(()=>{r.unsubscribe(),o.delete(s)})}else{let s=()=>n.moduleRef.destroy(),o=n.platformInjector.get(Q_);o.add(s),n.moduleRef.onDestroy(()=>{Wf(n.allPlatformModules,n.moduleRef),r.unsubscribe(),o.delete(s)})}return Nz(i,t,()=>{let s=e.get(qD);return s.runInitializers(),s.donePromise.then(()=>{let o=e.get(J0,xp);if(lG(o||xp),Uf(n)){let a=e.get(ci);return n.rootComponent!==void 0&&a.bootstrap(n.rootComponent),a}else return SG(n.moduleRef,n.allPlatformModules),n.moduleRef})})})}function SG(n,e){let t=n.injector.get(ci);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(i=>t.bootstrap(i));else if(n.instance.ngDoBootstrap)n.instance.ngDoBootstrap(t);else throw new Re(-403,!1);e.push(n)}var $f=null;function TG(n=[],e){return Ii.create({name:e,providers:[{provide:bp,useValue:"platform"},{provide:Q_,useValue:new Set([()=>$f=null])},...n]})}function CG(n=[]){if($f)return $f;let e=TG(n);return $f=e,Dz(),AG(e),e}function AG(n){let e=n.get(S0,null);Zi(n,()=>{e?.forEach(t=>t())})}var Ca=(()=>{class n{static __NG_ELEMENT_ID__=IG}return n})();function IG(n){return DG(di(),$t(),(n&16)===16)}function DG(n,e,t){if(qu(n)&&!t){let i=go(n.index,e);return new pa(i,i)}else if(n.type&175){let i=e[Yi];return new pa(i,e)}return null}var e0=class{constructor(){}supports(e){return e instanceof Map||r1(e)}create(){return new t0}},t0=class{_records=new Map;_mapHead=null;_appendAfter=null;_previousMapHead=null;_changesHead=null;_changesTail=null;_additionsHead=null;_additionsTail=null;_removalsHead=null;_removalsTail=null;get isDirty(){return this._additionsHead!==null||this._changesHead!==null||this._removalsHead!==null}forEachItem(e){let t;for(t=this._mapHead;t!==null;t=t._next)e(t)}forEachPreviousItem(e){let t;for(t=this._previousMapHead;t!==null;t=t._nextPrevious)e(t)}forEachChangedItem(e){let t;for(t=this._changesHead;t!==null;t=t._nextChanged)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}diff(e){if(!e)e=new Map;else if(!(e instanceof Map||r1(e)))throw new Re(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._mapHead;if(this._appendAfter=null,this._forEach(e,(i,r)=>{if(t&&t.key===r)this._maybeAddToChanges(t,i),this._appendAfter=t,t=t._next;else{let s=this._getOrCreateRecordForKey(r,i);t=this._insertBeforeOrAppend(t,s)}}),t){t._prev&&(t._prev._next=null),this._removalsHead=t;for(let i=t;i!==null;i=i._nextRemoved)i===this._mapHead&&(this._mapHead=null),this._records.delete(i.key),i._nextRemoved=i._next,i.previousValue=i.currentValue,i.currentValue=null,i._prev=null,i._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,t){if(e){let i=e._prev;return t._next=e,t._prev=i,e._prev=t,i&&(i._next=t),e===this._mapHead&&(this._mapHead=t),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=t,t._prev=this._appendAfter):this._mapHead=t,this._appendAfter=t,null}_getOrCreateRecordForKey(e,t){if(this._records.has(e)){let r=this._records.get(e);this._maybeAddToChanges(r,t);let s=r._prev,o=r._next;return s&&(s._next=o),o&&(o._prev=s),r._next=null,r._prev=null,r}let i=new n0(e);return this._records.set(e,i),i.currentValue=t,this._addToAdditions(i),i}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;e!==null;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;e!=null;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,t){Object.is(t,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=t,this._addToChanges(e))}_addToAdditions(e){this._additionsHead===null?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){this._changesHead===null?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,t){e instanceof Map?e.forEach(t):Object.keys(e).forEach(i=>t(e[i],i))}},n0=class{key;previousValue=null;currentValue=null;_nextPrevious=null;_next=null;_prev=null;_nextAdded=null;_nextRemoved=null;_nextChanged=null;constructor(e){this.key=e}};function _A(){return new Q0([new e0])}var Q0=(()=>{class n{static \u0275prov=Xe({token:n,providedIn:"root",factory:_A});factories;constructor(t){this.factories=t}static create(t,i){if(i){let r=i.factories.slice();t=t.concat(r)}return new n(t)}static extend(t){return{provide:n,useFactory:i=>n.create(t,i||_A()),deps:[[n,new FA,new s0]]}}find(t){let i=this.factories.find(r=>r.supports(t));if(i)return i;throw new Re(901,!1)}}return n})();function y1(n){try{let{rootComponent:e,appProviders:t,platformProviders:i}=n,r=CG(i),s=[p1({}),{provide:Ol,useExisting:MG},...t||[]],o=new yp({providers:s,parent:r,debugName:"",runEnvironmentInitializers:!1});return bG({r3Injector:o.injector,platformInjector:r,rootComponent:e})}catch(e){return Promise.reject(e)}}var Bf=new WeakSet,xA="",Xf=[];function EA(n){return n.get($I,lB)}function v1(){let n=[{provide:$I,useFactory:()=>{let e=!0;{let t=ae(Hl);e=!!window._ejsas?.[t]}return e&&Gr("NgEventReplay"),e}}];return n.push({provide:co,useValue:()=>{let e=ae(Ii),t=e.get(ci);if(!Bf.has(t)){let i=ae(KC);EA(e)&&cG((r,s,o)=>{SB(r,s,o),TB(r,i)})}},multi:!0},{provide:wa,useFactory:()=>{let e=ae(Ii),t=ae(ci);return()=>{!EA(e)||Bf.has(t)||(Bf.add(t),t.onDestroy(()=>Bf.delete(t)),Gl(t).then(()=>{let i=e.get(AB);RG(i,e);let r=e.get(KC);r.get(xA)?.forEach(CB),r.delete(xA);let s=i.instance;kB(e)?t.onDestroy(()=>s.cleanUp()):s.cleanUp()}))}},multi:!0}),n}var RG=(n,e)=>{let t=e.get(Hl),i=window._ejsas[t],r=n.instance=new AC(new Rf(i.c));for(let a of i.et)r.addEvent(a);for(let a of i.etc)r.addEvent(a);let s=IC(t);r.replayEarlyEventInfos(s),DC(t);let o=new Pf(a=>{PG(e,a,a.currentTarget)});CC(r,o)};function PG(n,e,t){let i=(t&&t.getAttribute(Np))??"";/d\d+/.test(i)?NG(i,n,e,t):e.eventPhase===jv.REPLAY&&ZI(e,t)}function NG(n,e,t,i){return ji(this,null,function*(){Xf.push({event:t,currentTarget:i}),yield NH(e,n,OG)})}function OG(n){let e=[...Xf];Xf=[];for(let{event:t,currentTarget:i}of e){let r=i.getAttribute(Np);n.has(r)?ZI(t,i):Xf.push({event:t,currentTarget:i})}}var MA=!1;function LG(){MA||(MA=!0,NB(),iG(),hG(),oG(),bH(),nH(),Yz(),DV())}function FG(n,e){return Gl(n)}function _1(){let n=[{provide:Of,useFactory:()=>{let e=!0;return e=!!ae(_a,{optional:!0})?.get(KI,null),e&&Gr("NgHydration"),e}},{provide:co,useValue:()=>{Hz(!1),ae(Of)&&(kG(),LG())},multi:!0}];return n.push({provide:WI,useFactory:()=>ae(Of)},{provide:wa,useFactory:()=>{if(ae(Of)){let e=ae(ci),t=ae(Ii);return()=>{FG(e,t).then(()=>{ZD(e)})}}return()=>{}},multi:!0}),ya(n)}function kG(){let n=Dp(),e;for(let t of n.body.childNodes)if(t.nodeType===Node.COMMENT_NODE&&t.textContent?.trim()===RB){e=t;break}if(!e)throw new Re(-507,!1)}function Xp(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}function id(n,e){Gr("NgSignals");let t=FT(n);return e?.equal&&(t[Ei].equal=e.equal),t}function xs(n){let e=Rt(null);try{return n()}finally{Rt(e)}}var wA=class{[Ei];constructor(e){this[Ei]=e}destroy(){this[Ei].destroy()}};var b1=null;function Es(){return b1}function S1(n){b1??=n}var qp=class{};var Ri=new Le(""),T1=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(i){return new(i||n)};static \u0275prov=Xe({token:n,factory:()=>ae(VG),providedIn:"platform"})}return n})();var VG=(()=>{class n extends T1{_location;_history;_doc=ae(Ri);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Es().getBaseHref(this._doc)}onPopState(t){let i=Es().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",t,!1),()=>i.removeEventListener("popstate",t)}onHashChange(t){let i=Es().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",t,!1),()=>i.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,i,r){this._history.pushState(t,i,r)}replaceState(t,i,r){this._history.replaceState(t,i,r)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static \u0275fac=function(i){return new(i||n)};static \u0275prov=Xe({token:n,factory:()=>new n,providedIn:"platform"})}return n})();function C1(n,e){if(n.length==0)return e;if(e.length==0)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,t==2?n+e.substring(1):t==1?n+e:n+"/"+e}function x1(n){let e=n.match(/#|\?|$/),t=e&&e.index||n.length,i=t-(n[t-1]==="/"?1:0);return n.slice(0,i)+n.slice(t)}function Aa(n){return n&&n[0]!=="?"?"?"+n:n}var Zp=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(i){return new(i||n)};static \u0275prov=Xe({token:n,factory:()=>ae(A1),providedIn:"root"})}return n})(),zG=new Le(""),A1=(()=>{class n extends Zp{_platformLocation;_baseHref;_removeListenerFns=[];constructor(t,i){super(),this._platformLocation=t,this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??ae(Ri).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return C1(this._baseHref,t)}path(t=!1){let i=this._platformLocation.pathname+Aa(this._platformLocation.search),r=this._platformLocation.hash;return r&&t?`${i}${r}`:i}pushState(t,i,r,s){let o=this.prepareExternalUrl(r+Aa(s));this._platformLocation.pushState(t,i,o)}replaceState(t,i,r,s){let o=this.prepareExternalUrl(r+Aa(s));this._platformLocation.replaceState(t,i,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(i){return new(i||n)(Tt(T1),Tt(zG,8))};static \u0275prov=Xe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var rd=(()=>{class n{_subject=new vn;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(t){this._locationStrategy=t;let i=this._locationStrategy.getBaseHref();this._basePath=jG(x1(E1(i))),this._locationStrategy.onPopState(r=>{this._subject.next({url:this.path(!0),pop:!0,state:r.state,type:r.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,i=""){return this.path()==this.normalize(t+Aa(i))}normalize(t){return n.stripTrailingSlash(GG(this._basePath,E1(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,i="",r=null){this._locationStrategy.pushState(r,"",t,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Aa(i)),r)}replaceState(t,i="",r=null){this._locationStrategy.replaceState(r,"",t,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Aa(i)),r)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)}),()=>{let i=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(i,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",i){this._urlChangeListeners.forEach(r=>r(t,i))}subscribe(t,i,r){return this._subject.subscribe({next:t,error:i??void 0,complete:r??void 0})}static normalizeQueryParams=Aa;static joinWithSlash=C1;static stripTrailingSlash=x1;static \u0275fac=function(i){return new(i||n)(Tt(Zp))};static \u0275prov=Xe({token:n,factory:()=>HG(),providedIn:"root"})}return n})();function HG(){return new rd(Tt(Zp))}function GG(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function E1(n){return n.replace(/\/index.html$/,"")}function jG(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}function ix(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let i=t.indexOf("="),[r,s]=i==-1?[t,""]:[t.slice(0,i),t.slice(i+1)];if(r.trim()===e)return decodeURIComponent(s)}return null}var ex=/\s+/,M1=[],I1=(()=>{class n{_ngEl;_renderer;initialClasses=M1;rawClass;stateMap=new Map;constructor(t,i){this._ngEl=t,this._renderer=i}set klass(t){this.initialClasses=t!=null?t.trim().split(ex):M1}set ngClass(t){this.rawClass=typeof t=="string"?t.trim().split(ex):t}ngDoCheck(){for(let i of this.initialClasses)this._updateState(i,!0);let t=this.rawClass;if(Array.isArray(t)||t instanceof Set)for(let i of t)this._updateState(i,!0);else if(t!=null)for(let i of Object.keys(t))this._updateState(i,!!t[i]);this._applyStateDiff()}_updateState(t,i){let r=this.stateMap.get(t);r!==void 0?(r.enabled!==i&&(r.changed=!0,r.enabled=i),r.touched=!0):this.stateMap.set(t,{enabled:i,changed:!0,touched:!0})}_applyStateDiff(){for(let t of this.stateMap){let i=t[0],r=t[1];r.changed?(this._toggleClass(i,r.enabled),r.changed=!1):r.touched||(r.enabled&&this._toggleClass(i,!1),this.stateMap.delete(i)),r.touched=!1}}_toggleClass(t,i){t=t.trim(),t.length>0&&t.split(ex).forEach(r=>{i?this._renderer.addClass(this._ngEl.nativeElement,r):this._renderer.removeClass(this._ngEl.nativeElement,r)})}static \u0275fac=function(i){return new(i||n)(xt(hi),xt(Ji))};static \u0275dir=En({type:n,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"}})}return n})();var $l=(()=>{class n{_viewContainer;_context=new tx;_thenTemplateRef=null;_elseTemplateRef=null;_thenViewRef=null;_elseViewRef=null;constructor(t,i){this._viewContainer=t,this._thenTemplateRef=i}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){w1("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){w1("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngIfUseIfTypeGuard;static ngTemplateGuard_ngIf;static ngTemplateContextGuard(t,i){return!0}static \u0275fac=function(i){return new(i||n)(xt(ba),xt(Ll))};static \u0275dir=En({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}})}return n})(),tx=class{$implicit=null;ngIf=null};function w1(n,e){if(!!!(!e||e.createEmbeddedView))throw new Error(`${n} must be a TemplateRef, but received '${Kn(e)}'.`)}var D1=(()=>{class n{_ngEl;_differs;_renderer;_ngStyle=null;_differ=null;constructor(t,i,r){this._ngEl=t,this._differs=i,this._renderer=r}set ngStyle(t){this._ngStyle=t,!this._differ&&t&&(this._differ=this._differs.find(t).create())}ngDoCheck(){if(this._differ){let t=this._differ.diff(this._ngStyle);t&&this._applyChanges(t)}}_setStyle(t,i){let[r,s]=t.split("."),o=r.indexOf("-")===-1?void 0:zr.DashCase;i!=null?this._renderer.setStyle(this._ngEl.nativeElement,r,s?`${i}${s}`:i,o):this._renderer.removeStyle(this._ngEl.nativeElement,r,o)}_applyChanges(t){t.forEachRemovedItem(i=>this._setStyle(i.key,null)),t.forEachAddedItem(i=>this._setStyle(i.key,i.currentValue)),t.forEachChangedItem(i=>this._setStyle(i.key,i.currentValue))}static \u0275fac=function(i){return new(i||n)(xt(hi),xt(Q0),xt(Ji))};static \u0275dir=En({type:n,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"}})}return n})();var Er=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=Ea({type:n});static \u0275inj=ga({})}return n})(),R1="browser",WG="server";function sd(n){return n===WG}var Yp=class{};var Jp=class n{headers;normalizedNames=new Map;lazyInit;lazyUpdate=null;constructor(e){e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(t=>{let i=t.indexOf(":");if(i>0){let r=t.slice(0,i),s=t.slice(i+1).trim();this.addHeaderEntry(r,s)}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((t,i)=>{this.addHeaderEntry(i,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([t,i])=>{this.setHeaderEntries(t,i)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof n?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){let t=new n;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof n?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){let t=e.name.toLowerCase();switch(e.op){case"a":case"s":let i=e.value;if(typeof i=="string"&&(i=[i]),i.length===0)return;this.maybeSetNormalizedName(e.name,t);let r=(e.op==="a"?this.headers.get(t):void 0)||[];r.push(...i),this.headers.set(t,r);break;case"d":let s=e.value;if(!s)this.headers.delete(t),this.normalizedNames.delete(t);else{let o=this.headers.get(t);if(!o)return;o=o.filter(a=>s.indexOf(a)===-1),o.length===0?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,o)}break}}addHeaderEntry(e,t){let i=e.toLowerCase();this.maybeSetNormalizedName(e,i),this.headers.has(i)?this.headers.get(i).push(t):this.headers.set(i,[t])}setHeaderEntries(e,t){let i=(Array.isArray(t)?t:[t]).map(s=>s.toString()),r=e.toLowerCase();this.headers.set(r,i),this.maybeSetNormalizedName(e,r)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}};var B1=function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n}(B1||{}),sx=class{headers;status;statusText;url;ok;type;constructor(e,t=200,i="OK"){this.headers=e.headers||new Jp,this.status=e.status!==void 0?e.status:t,this.statusText=e.statusText||i,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}};var Qp=class n extends sx{body;constructor(e={}){super(e),this.body=e.body!==void 0?e.body:null}type=B1.Response;clone(e={}){return new n({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}};var $G=new Le("");var XG=new Le(""),P1="b",N1="h",O1="s",L1="st",F1="u",k1="rt",Kp=new Le(""),qG=["GET","HEAD"];function YG(n,e){let f=ae(Kp),{isCacheActive:t}=f,i=IT(f,["isCacheActive"]),{transferCache:r,method:s}=n;if(!t||r===!1||s==="POST"&&!i.includePostRequests&&!r||s!=="POST"&&!qG.includes(s)||!i.includeRequestsWithAuthHeaders&&ZG(n)||i.filter?.(n)===!1)return e(n);let o=ae(_a),a=ae(XG,{optional:!0}),l=sd(ae(vs));if(a&&!l)throw new Re(2803,!1);let c=l&&a?e4(n.url,a):n.url,u=JG(n,c),d=o.get(u,null),h=i.includeHeaders;if(typeof r=="object"&&r.includeHeaders&&(h=r.includeHeaders),d){let{[P1]:p,[k1]:y,[N1]:g,[O1]:m,[L1]:x,[F1]:M}=d,v=p;switch(y){case"arraybuffer":v=new TextEncoder().encode(p).buffer;break;case"blob":v=new Blob([p]);break}let S=new Jp(g);return Qe(new Qp({body:v,headers:S,status:m,statusText:x,url:M}))}return e(n).pipe(xn(p=>{p instanceof Qp&&l&&o.set(u,{[P1]:p.body,[N1]:KG(p.headers,h),[O1]:p.status,[L1]:p.statusText,[F1]:c,[k1]:n.responseType})}))}function ZG(n){return n.headers.has("authorization")||n.headers.has("proxy-authorization")}function KG(n,e){if(!e)return{};let t={};for(let i of e){let r=n.getAll(i);r!==null&&(t[i]=r)}return t}function U1(n){return[...n.keys()].sort().map(e=>`${e}=${n.getAll(e)}`).join("&")}function JG(n,e){let{params:t,method:i,responseType:r}=n,s=U1(t),o=n.serializeBody();o instanceof URLSearchParams?o=U1(o):typeof o!="string"&&(o="");let a=[i,r,e,o,s].join("|"),l=QG(a);return l}function QG(n){let e=0;for(let t of n)e=Math.imul(31,e)+t.charCodeAt(0)<<0;return e+=2147483648,e.toString()}function V1(n){return[{provide:Kp,useFactory:()=>(Gr("NgHttpTransferCache"),me({isCacheActive:!0},n))},{provide:$G,useValue:YG,multi:!0,deps:[_a,Kp]},{provide:wa,multi:!0,useFactory:()=>{let e=ae(ci),t=ae(Kp);return()=>{Gl(e).then(()=>{t.isCacheActive=!1})}}}]}function e4(n,e){let t=new URL(n,"resolve://").origin,i=e[t];return i?n.replace(t,i):n}var ax=class extends qp{supportsDOMEvents=!0},lx=class n extends ax{static makeCurrent(){S1(new n)}onAndCancel(e,t,i){return e.addEventListener(t,i),()=>{e.removeEventListener(t,i)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=t4();return t==null?null:n4(t)}resetBaseElement(){od=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return ix(document.cookie,e)}},od=null;function t4(){return od=od||document.querySelector("base"),od?od.getAttribute("href"):null}function n4(n){return new URL(n,document.baseURI).pathname}var i4=(()=>{class n{build(){return new XMLHttpRequest}static \u0275fac=function(i){return new(i||n)};static \u0275prov=Xe({token:n,factory:n.\u0275fac})}return n})(),cx=new Le(""),$1=(()=>{class n{_zone;_plugins;_eventNameToPlugin=new Map;constructor(t,i){this._zone=i,t.forEach(r=>{r.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,i,r){return this._findPluginFor(i).addEventListener(t,i,r)}getZone(){return this._zone}_findPluginFor(t){let i=this._eventNameToPlugin.get(t);if(i)return i;if(i=this._plugins.find(s=>s.supports(t)),!i)throw new Re(5101,!1);return this._eventNameToPlugin.set(t,i),i}static \u0275fac=function(i){return new(i||n)(Tt(cx),Tt(dn))};static \u0275prov=Xe({token:n,factory:n.\u0275fac})}return n})(),em=class{_doc;constructor(e){this._doc=e}manager},ux="ng-app-id";function z1(n){for(let e of n)e.remove()}function H1(n,e){let t=e.createElement("style");return t.textContent=n,t}function r4(n,e,t){let i=n.head?.querySelectorAll(`style[${ux}="${e}"]`);if(i)for(let r of i)r.textContent&&(r.removeAttribute(ux),t.set(r.textContent,{usage:0,elements:[r]}))}function dx(n,e){let t=e.createElement("link");return t.setAttribute("rel","stylesheet"),t.setAttribute("href",n),t}var X1=(()=>{class n{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;isServer;constructor(t,i,r,s={}){this.doc=t,this.appId=i,this.nonce=r,this.isServer=sd(s),r4(t,i,this.inline),this.hosts.add(t.head)}addStyles(t,i){for(let r of t)this.addUsage(r,this.inline,H1);i?.forEach(r=>this.addUsage(r,this.external,dx))}removeStyles(t,i){for(let r of t)this.removeUsage(r,this.inline);i?.forEach(r=>this.removeUsage(r,this.external))}addUsage(t,i,r){let s=i.get(t);s?s.usage++:i.set(t,{usage:1,elements:[...this.hosts].map(o=>this.addElement(o,r(t,this.doc)))})}removeUsage(t,i){let r=i.get(t);r&&(r.usage--,r.usage<=0&&(z1(r.elements),i.delete(t)))}ngOnDestroy(){for(let[,{elements:t}]of[...this.inline,...this.external])z1(t);this.hosts.clear()}addHost(t){this.hosts.add(t);for(let[i,{elements:r}]of this.inline)r.push(this.addElement(t,H1(i,this.doc)));for(let[i,{elements:r}]of this.external)r.push(this.addElement(t,dx(i,this.doc)))}removeHost(t){this.hosts.delete(t)}addElement(t,i){return this.nonce&&i.setAttribute("nonce",this.nonce),this.isServer&&i.setAttribute(ux,this.appId),t.appendChild(i)}static \u0275fac=function(i){return new(i||n)(Tt(Ri),Tt(Hl),Tt(T0,8),Tt(vs))};static \u0275prov=Xe({token:n,factory:n.\u0275fac})}return n})(),ox={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},fx=/%COMP%/g,q1="%COMP%",s4=`_nghost-${q1}`,o4=`_ngcontent-${q1}`,a4=!0,l4=new Le("",{providedIn:"root",factory:()=>a4});function c4(n){return o4.replace(fx,n)}function u4(n){return s4.replace(fx,n)}function Y1(n,e){return e.map(t=>t.replace(fx,n))}var G1=(()=>{class n{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;platformId;ngZone;nonce;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(t,i,r,s,o,a,l,c=null){this.eventManager=t,this.sharedStylesHost=i,this.appId=r,this.removeStylesOnCompDestroy=s,this.doc=o,this.platformId=a,this.ngZone=l,this.nonce=c,this.platformIsServer=sd(a),this.defaultRenderer=new ad(t,o,l,this.platformIsServer)}createRenderer(t,i){if(!t||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===Vr.ShadowDom&&(i=vt(me({},i),{encapsulation:Vr.Emulated}));let r=this.getOrCreateRenderer(t,i);return r instanceof tm?r.applyToHost(t):r instanceof ld&&r.applyStyles(),r}getOrCreateRenderer(t,i){let r=this.rendererByCompId,s=r.get(i.id);if(!s){let o=this.doc,a=this.ngZone,l=this.eventManager,c=this.sharedStylesHost,u=this.removeStylesOnCompDestroy,d=this.platformIsServer;switch(i.encapsulation){case Vr.Emulated:s=new tm(l,c,i,this.appId,u,o,a,d);break;case Vr.ShadowDom:return new hx(l,c,t,i,o,a,this.nonce,d);default:s=new ld(l,c,i,u,o,a,d);break}r.set(i.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}static \u0275fac=function(i){return new(i||n)(Tt($1),Tt(X1),Tt(Hl),Tt(l4),Tt(Ri),Tt(vs),Tt(dn),Tt(T0))};static \u0275prov=Xe({token:n,factory:n.\u0275fac})}return n})(),ad=class{eventManager;doc;ngZone;platformIsServer;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,t,i,r){this.eventManager=e,this.doc=t,this.ngZone=i,this.platformIsServer=r}destroy(){}destroyNode=null;createElement(e,t){return t?this.doc.createElementNS(ox[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(j1(e)?e.content:e).appendChild(t)}insertBefore(e,t,i){e&&(j1(e)?e.content:e).insertBefore(t,i)}removeChild(e,t){t.remove()}selectRootElement(e,t){let i=typeof e=="string"?this.doc.querySelector(e):e;if(!i)throw new Re(-5104,!1);return t||(i.textContent=""),i}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,i,r){if(r){t=r+":"+t;let s=ox[r];s?e.setAttributeNS(s,t,i):e.setAttribute(t,i)}else e.setAttribute(t,i)}removeAttribute(e,t,i){if(i){let r=ox[i];r?e.removeAttributeNS(r,t):e.removeAttribute(`${i}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,i,r){r&(zr.DashCase|zr.Important)?e.style.setProperty(t,i,r&zr.Important?"important":""):e.style[t]=i}removeStyle(e,t,i){i&zr.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,i){e!=null&&(e[t]=i)}setValue(e,t){e.nodeValue=t}listen(e,t,i){if(typeof e=="string"&&(e=Es().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(i))}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))===!1&&t.preventDefault()}}};function j1(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var hx=class extends ad{sharedStylesHost;hostEl;shadowRoot;constructor(e,t,i,r,s,o,a,l){super(e,s,o,l),this.sharedStylesHost=t,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let c=Y1(r.id,r.styles);for(let d of c){let h=document.createElement("style");a&&h.setAttribute("nonce",a),h.textContent=d,this.shadowRoot.appendChild(h)}let u=r.getExternalStyles?.();if(u)for(let d of u){let h=dx(d,s);a&&h.setAttribute("nonce",a),this.shadowRoot.appendChild(h)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,i){return super.insertBefore(this.nodeOrShadowRoot(e),t,i)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},ld=class extends ad{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,t,i,r,s,o,a,l){super(e,s,o,a),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=r,this.styles=l?Y1(l,i.styles):i.styles,this.styleUrls=i.getExternalStyles?.(l)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},tm=class extends ld{contentAttr;hostAttr;constructor(e,t,i,r,s,o,a,l){let c=r+"-"+i.id;super(e,t,i,s,o,a,l,c),this.contentAttr=c4(c),this.hostAttr=u4(c)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let i=super.createElement(e,t);return super.setAttribute(i,this.contentAttr,""),i}},d4=(()=>{class n extends em{constructor(t){super(t)}supports(t){return!0}addEventListener(t,i,r){return t.addEventListener(i,r,!1),()=>this.removeEventListener(t,i,r)}removeEventListener(t,i,r){return t.removeEventListener(i,r)}static \u0275fac=function(i){return new(i||n)(Tt(Ri))};static \u0275prov=Xe({token:n,factory:n.\u0275fac})}return n})(),W1=["alt","control","meta","shift"],h4={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},f4={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},p4=(()=>{class n extends em{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,i,r){let s=n.parseEventName(i),o=n.eventCallback(s.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Es().onAndCancel(t,s.domEventName,o))}static parseEventName(t){let i=t.toLowerCase().split("."),r=i.shift();if(i.length===0||!(r==="keydown"||r==="keyup"))return null;let s=n._normalizeKey(i.pop()),o="",a=i.indexOf("code");if(a>-1&&(i.splice(a,1),o="code."),W1.forEach(c=>{let u=i.indexOf(c);u>-1&&(i.splice(u,1),o+=c+".")}),o+=s,i.length!=0||s.length===0)return null;let l={};return l.domEventName=r,l.fullKey=o,l}static matchEventFullKeyCode(t,i){let r=h4[t.key]||t.key,s="";return i.indexOf("code.")>-1&&(r=t.code,s="code."),r==null||!r?!1:(r=r.toLowerCase(),r===" "?r="space":r==="."&&(r="dot"),W1.forEach(o=>{if(o!==r){let a=f4[o];a(t)&&(s+=o+".")}}),s+=r,s===i)}static eventCallback(t,i,r){return s=>{n.matchEventFullKeyCode(s,t)&&r.runGuarded(()=>i(s))}}static _normalizeKey(t){return t==="esc"?"escape":t}static \u0275fac=function(i){return new(i||n)(Tt(Ri))};static \u0275prov=Xe({token:n,factory:n.\u0275fac})}return n})();function Z1(n,e){return y1(me({rootComponent:n},m4(e)))}function m4(n){return{appProviders:[...x4,...n?.providers??[]],platformProviders:_4}}function g4(){lx.makeCurrent()}function y4(){return new ys}function v4(){return BI(document),document}var _4=[{provide:vs,useValue:R1},{provide:S0,useValue:g4,multi:!0},{provide:Ri,useFactory:v4,deps:[]}];var x4=[{provide:bp,useValue:"root"},{provide:ys,useFactory:y4,deps:[]},{provide:cx,useClass:d4,multi:!0,deps:[Ri,dn,vs]},{provide:cx,useClass:p4,multi:!0,deps:[Ri]},G1,X1,$1,{provide:kl,useExisting:G1},{provide:Yp,useClass:i4,deps:[]},[]];var K1=(()=>{class n{_doc;constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static \u0275fac=function(i){return new(i||n)(Tt(Ri))};static \u0275prov=Xe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var nm=function(n){return n[n.NoHttpTransferCache=0]="NoHttpTransferCache",n[n.HttpTransferCacheOptions=1]="HttpTransferCacheOptions",n[n.I18nSupport=2]="I18nSupport",n[n.EventReplay=3]="EventReplay",n[n.IncrementalHydration=4]="IncrementalHydration",n}(nm||{});function E4(n,e=[],t={}){return{\u0275kind:n,\u0275providers:e}}function J1(){return E4(nm.EventReplay,v1())}function Q1(...n){let e=[],t=new Set,i=t.has(nm.HttpTransferCacheOptions);for(let{\u0275providers:r,\u0275kind:s}of n)t.add(s),r.length&&e.push(r);return ya([[],_1(),t.has(nm.NoHttpTransferCache)||i?[]:V1({}),e])}var ot="primary",Sd=Symbol("RouteTitle"),vx=class{params;constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function Jl(n){return new vx(n)}function b4(n,e,t){let i=t.path.split("/");if(i.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||i.length<n.length))return null;let r={};for(let s=0;s<i.length;s++){let o=i[s],a=n[s];if(o[0]===":")r[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:n.slice(0,i.length),posParams:r}}function S4(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Wr(n[t],e[t]))return!1;return!0}function Wr(n,e){let t=n?_x(n):void 0,i=e?_x(e):void 0;if(!t||!i||t.length!=i.length)return!1;let r;for(let s=0;s<t.length;s++)if(r=t[s],!aR(n[r],e[r]))return!1;return!0}function _x(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function aR(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),i=[...e].sort();return t.every((r,s)=>i[s]===r)}else return n===e}function lR(n){return n.length>0?n[n.length-1]:null}function Mo(n){return Av(n)?n:Ma(n)?ln(Promise.resolve(n)):Qe(n)}var T4={exact:uR,subset:dR},cR={exact:C4,subset:A4,ignored:()=>!0};function eR(n,e,t){return T4[t.paths](n.root,e.root,t.matrixParams)&&cR[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function C4(n,e){return Wr(n,e)}function uR(n,e,t){if(!Da(n.segments,e.segments)||!sm(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let i in e.children)if(!n.children[i]||!uR(n.children[i],e.children[i],t))return!1;return!0}function A4(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>aR(n[t],e[t]))}function dR(n,e,t){return hR(n,e,e.segments,t)}function hR(n,e,t,i){if(n.segments.length>t.length){let r=n.segments.slice(0,t.length);return!(!Da(r,t)||e.hasChildren()||!sm(r,t,i))}else if(n.segments.length===t.length){if(!Da(n.segments,t)||!sm(n.segments,t,i))return!1;for(let r in e.children)if(!n.children[r]||!dR(n.children[r],e.children[r],i))return!1;return!0}else{let r=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!Da(n.segments,r)||!sm(n.segments,r,i)||!n.children[ot]?!1:hR(n.children[ot],e,s,i)}}function sm(n,e,t){return e.every((i,r)=>cR[t](n[r].parameters,i.parameters))}var ws=class{root;queryParams;fragment;_queryParamMap;constructor(e=new Ht([],{}),t={},i=null){this.root=e,this.queryParams=t,this.fragment=i}get queryParamMap(){return this._queryParamMap??=Jl(this.queryParams),this._queryParamMap}toString(){return R4.serialize(this)}},Ht=class{segments;children;parent=null;constructor(e,t){this.segments=e,this.children=t,Object.values(t).forEach(i=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return om(this)}},Ia=class{path;parameters;_parameterMap;constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=Jl(this.parameters),this._parameterMap}toString(){return pR(this)}};function I4(n,e){return Da(n,e)&&n.every((t,i)=>Wr(t.parameters,e[i].parameters))}function Da(n,e){return n.length!==e.length?!1:n.every((t,i)=>t.path===e[i].path)}function D4(n,e){let t=[];return Object.entries(n.children).forEach(([i,r])=>{i===ot&&(t=t.concat(e(r,i)))}),Object.entries(n.children).forEach(([i,r])=>{i!==ot&&(t=t.concat(e(r,i)))}),t}var Wx=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275prov=Xe({token:n,factory:()=>new md,providedIn:"root"})}return n})(),md=class{parse(e){let t=new Ex(e);return new ws(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${cd(e.root,!0)}`,i=O4(e.queryParams),r=typeof e.fragment=="string"?`#${P4(e.fragment)}`:"";return`${t}${i}${r}`}},R4=new md;function om(n){return n.segments.map(e=>pR(e)).join("/")}function cd(n,e){if(!n.hasChildren())return om(n);if(e){let t=n.children[ot]?cd(n.children[ot],!1):"",i=[];return Object.entries(n.children).forEach(([r,s])=>{r!==ot&&i.push(`${r}:${cd(s,!1)}`)}),i.length>0?`${t}(${i.join("//")})`:t}else{let t=D4(n,(i,r)=>r===ot?[cd(n.children[ot],!1)]:[`${r}:${cd(i,!1)}`]);return Object.keys(n.children).length===1&&n.children[ot]!=null?`${om(n)}/${t[0]}`:`${om(n)}/(${t.join("//")})`}}function fR(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function im(n){return fR(n).replace(/%3B/gi,";")}function P4(n){return encodeURI(n)}function xx(n){return fR(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function am(n){return decodeURIComponent(n)}function tR(n){return am(n.replace(/\+/g,"%20"))}function pR(n){return`${xx(n.path)}${N4(n.parameters)}`}function N4(n){return Object.entries(n).map(([e,t])=>`;${xx(e)}=${xx(t)}`).join("")}function O4(n){let e=Object.entries(n).map(([t,i])=>Array.isArray(i)?i.map(r=>`${im(t)}=${im(r)}`).join("&"):`${im(t)}=${im(i)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var L4=/^[^\/()?;#]+/;function px(n){let e=n.match(L4);return e?e[0]:""}var F4=/^[^\/()?;=#]+/;function k4(n){let e=n.match(F4);return e?e[0]:""}var U4=/^[^=?&#]+/;function B4(n){let e=n.match(U4);return e?e[0]:""}var V4=/^[^&#]+/;function z4(n){let e=n.match(V4);return e?e[0]:""}var Ex=class{url;remaining;constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Ht([],{}):new Ht([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(i[ot]=new Ht(e,t)),i}parseSegment(){let e=px(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new Re(4009,!1);return this.capture(e),new Ia(am(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=k4(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){let r=px(this.remaining);r&&(i=r,this.capture(i))}e[am(t)]=am(i)}parseQueryParam(e){let t=B4(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){let o=z4(this.remaining);o&&(i=o,this.capture(i))}let r=tR(t),s=tR(i);if(e.hasOwnProperty(r)){let o=e[r];Array.isArray(o)||(o=[o],e[r]=o),o.push(s)}else e[r]=s}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let i=px(this.remaining),r=this.remaining[i.length];if(r!=="/"&&r!==")"&&r!==";")throw new Re(4010,!1);let s;i.indexOf(":")>-1?(s=i.slice(0,i.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=ot);let o=this.parseChildren();t[s]=Object.keys(o).length===1?o[ot]:new Ht([],o),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new Re(4011,!1)}};function mR(n){return n.segments.length>0?new Ht([],{[ot]:n}):n}function gR(n){let e={};for(let[i,r]of Object.entries(n.children)){let s=gR(r);if(i===ot&&s.segments.length===0&&s.hasChildren())for(let[o,a]of Object.entries(s.children))e[o]=a;else(s.segments.length>0||s.hasChildren())&&(e[i]=s)}let t=new Ht(n.segments,e);return H4(t)}function H4(n){if(n.numberOfChildren===1&&n.children[ot]){let e=n.children[ot];return new Ht(n.segments.concat(e.segments),e.children)}return n}function gd(n){return n instanceof ws}function G4(n,e,t=null,i=null){let r=yR(n);return vR(r,e,t,i)}function yR(n){let e;function t(s){let o={};for(let l of s.children){let c=t(l);o[l.outlet]=c}let a=new Ht(s.url,o);return s===n&&(e=a),a}let i=t(n.root),r=mR(i);return e??r}function vR(n,e,t,i){let r=n;for(;r.parent;)r=r.parent;if(e.length===0)return mx(r,r,r,t,i);let s=j4(e);if(s.toRoot())return mx(r,r,new Ht([],{}),t,i);let o=W4(s,r,n),a=o.processChildren?hd(o.segmentGroup,o.index,s.commands):xR(o.segmentGroup,o.index,s.commands);return mx(r,o.segmentGroup,a,t,i)}function lm(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function yd(n){return typeof n=="object"&&n!=null&&n.outlets}function mx(n,e,t,i,r){let s={};i&&Object.entries(i).forEach(([l,c])=>{s[l]=Array.isArray(c)?c.map(u=>`${u}`):`${c}`});let o;n===e?o=t:o=_R(n,e,t);let a=mR(gR(o));return new ws(a,s,r)}function _R(n,e,t){let i={};return Object.entries(n.children).forEach(([r,s])=>{s===e?i[r]=t:i[r]=_R(s,e,t)}),new Ht(n.segments,i)}var cm=class{isAbsolute;numberOfDoubleDots;commands;constructor(e,t,i){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=i,e&&i.length>0&&lm(i[0]))throw new Re(4003,!1);let r=i.find(yd);if(r&&r!==lR(i))throw new Re(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function j4(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new cm(!0,0,n);let e=0,t=!1,i=n.reduce((r,s,o)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let a={};return Object.entries(s.outlets).forEach(([l,c])=>{a[l]=typeof c=="string"?c.split("/"):c}),[...r,{outlets:a}]}if(s.segmentPath)return[...r,s.segmentPath]}return typeof s!="string"?[...r,s]:o===0?(s.split("/").forEach((a,l)=>{l==0&&a==="."||(l==0&&a===""?t=!0:a===".."?e++:a!=""&&r.push(a))}),r):[...r,s]},[]);return new cm(t,e,i)}var Yl=class{segmentGroup;processChildren;index;constructor(e,t,i){this.segmentGroup=e,this.processChildren=t,this.index=i}};function W4(n,e,t){if(n.isAbsolute)return new Yl(e,!0,0);if(!t)return new Yl(e,!1,NaN);if(t.parent===null)return new Yl(t,!0,0);let i=lm(n.commands[0])?0:1,r=t.segments.length-1+i;return $4(t,r,n.numberOfDoubleDots)}function $4(n,e,t){let i=n,r=e,s=t;for(;s>r;){if(s-=r,i=i.parent,!i)throw new Re(4005,!1);r=i.segments.length}return new Yl(i,!1,r-s)}function X4(n){return yd(n[0])?n[0].outlets:{[ot]:n}}function xR(n,e,t){if(n??=new Ht([],{}),n.segments.length===0&&n.hasChildren())return hd(n,e,t);let i=q4(n,e,t),r=t.slice(i.commandIndex);if(i.match&&i.pathIndex<n.segments.length){let s=new Ht(n.segments.slice(0,i.pathIndex),{});return s.children[ot]=new Ht(n.segments.slice(i.pathIndex),n.children),hd(s,0,r)}else return i.match&&r.length===0?new Ht(n.segments,{}):i.match&&!n.hasChildren()?Mx(n,e,t):i.match?hd(n,0,r):Mx(n,e,t)}function hd(n,e,t){if(t.length===0)return new Ht(n.segments,{});{let i=X4(t),r={};if(Object.keys(i).some(s=>s!==ot)&&n.children[ot]&&n.numberOfChildren===1&&n.children[ot].segments.length===0){let s=hd(n.children[ot],e,t);return new Ht(n.segments,s.children)}return Object.entries(i).forEach(([s,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(r[s]=xR(n.children[s],e,o))}),Object.entries(n.children).forEach(([s,o])=>{i[s]===void 0&&(r[s]=o)}),new Ht(n.segments,r)}}function q4(n,e,t){let i=0,r=e,s={match:!1,pathIndex:0,commandIndex:0};for(;r<n.segments.length;){if(i>=t.length)return s;let o=n.segments[r],a=t[i];if(yd(a))break;let l=`${a}`,c=i<t.length-1?t[i+1]:null;if(r>0&&l===void 0)break;if(l&&c&&typeof c=="object"&&c.outlets===void 0){if(!iR(l,c,o))return s;i+=2}else{if(!iR(l,{},o))return s;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}function Mx(n,e,t){let i=n.segments.slice(0,e),r=0;for(;r<t.length;){let s=t[r];if(yd(s)){let l=Y4(s.outlets);return new Ht(i,l)}if(r===0&&lm(t[0])){let l=n.segments[e];i.push(new Ia(l.path,nR(t[0]))),r++;continue}let o=yd(s)?s.outlets[ot]:`${s}`,a=r<t.length-1?t[r+1]:null;o&&a&&lm(a)?(i.push(new Ia(o,nR(a))),r+=2):(i.push(new Ia(o,{})),r++)}return new Ht(i,{})}function Y4(n){let e={};return Object.entries(n).forEach(([t,i])=>{typeof i=="string"&&(i=[i]),i!==null&&(e[t]=Mx(new Ht([],{}),0,i))}),e}function nR(n){let e={};return Object.entries(n).forEach(([t,i])=>e[t]=`${i}`),e}function iR(n,e,t){return n==t.path&&Wr(e,t.parameters)}var fd="imperative",Fn=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(Fn||{}),Qi=class{id;url;constructor(e,t){this.id=e,this.url=t}},vd=class extends Qi{type=Fn.NavigationStart;navigationTrigger;restoredState;constructor(e,t,i="imperative",r=null){super(e,t),this.navigationTrigger=i,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Ra=class extends Qi{urlAfterRedirects;type=Fn.NavigationEnd;constructor(e,t,i){super(e,t),this.urlAfterRedirects=i}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Ni=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}(Ni||{}),wx=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(wx||{}),Ms=class extends Qi{reason;code;type=Fn.NavigationCancel;constructor(e,t,i,r){super(e,t),this.reason=i,this.code=r}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Pa=class extends Qi{reason;code;type=Fn.NavigationSkipped;constructor(e,t,i,r){super(e,t),this.reason=i,this.code=r}},_d=class extends Qi{error;target;type=Fn.NavigationError;constructor(e,t,i,r){super(e,t),this.error=i,this.target=r}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},um=class extends Qi{urlAfterRedirects;state;type=Fn.RoutesRecognized;constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},bx=class extends Qi{urlAfterRedirects;state;type=Fn.GuardsCheckStart;constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Sx=class extends Qi{urlAfterRedirects;state;shouldActivate;type=Fn.GuardsCheckEnd;constructor(e,t,i,r,s){super(e,t),this.urlAfterRedirects=i,this.state=r,this.shouldActivate=s}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Tx=class extends Qi{urlAfterRedirects;state;type=Fn.ResolveStart;constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Cx=class extends Qi{urlAfterRedirects;state;type=Fn.ResolveEnd;constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Ax=class{route;type=Fn.RouteConfigLoadStart;constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Ix=class{route;type=Fn.RouteConfigLoadEnd;constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Dx=class{snapshot;type=Fn.ChildActivationStart;constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Rx=class{snapshot;type=Fn.ChildActivationEnd;constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Px=class{snapshot;type=Fn.ActivationStart;constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Nx=class{snapshot;type=Fn.ActivationEnd;constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var xd=class{},Ql=class{url;navigationBehaviorOptions;constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function Z4(n,e){return n.providers&&!n._injector&&(n._injector=Hp(n.providers,e,`Route: ${n.path}`)),n._injector??e}function Mr(n){return n.outlet||ot}function K4(n,e){let t=n.filter(i=>Mr(i)===e);return t.push(...n.filter(i=>Mr(i)!==e)),t}function Td(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var Ox=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return Td(this.route?.snapshot)??this.rootInjector}constructor(e){this.rootInjector=e,this.children=new ym(this.rootInjector)}},ym=(()=>{class n{rootInjector;contexts=new Map;constructor(t){this.rootInjector=t}onChildOutletCreated(t,i){let r=this.getOrCreateContext(t);r.outlet=i,this.contexts.set(t,r)}onChildOutletDestroyed(t){let i=this.getContext(t);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let i=this.getContext(t);return i||(i=new Ox(this.rootInjector),this.contexts.set(t,i)),i}getContext(t){return this.contexts.get(t)||null}static \u0275fac=function(i){return new(i||n)(Tt(Ci))};static \u0275prov=Xe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),dm=class{_root;constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=Lx(e,this._root);return t?t.children.map(i=>i.value):[]}firstChild(e){let t=Lx(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=Fx(e,this._root);return t.length<2?[]:t[t.length-2].children.map(r=>r.value).filter(r=>r!==e)}pathFromRoot(e){return Fx(e,this._root).map(t=>t.value)}};function Lx(n,e){if(n===e.value)return e;for(let t of e.children){let i=Lx(n,t);if(i)return i}return null}function Fx(n,e){if(n===e.value)return[e];for(let t of e.children){let i=Fx(n,t);if(i.length)return i.unshift(e),i}return[]}var Pi=class{value;children;constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function ql(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var hm=class extends dm{snapshot;constructor(e,t){super(e),this.snapshot=t,$x(this,e)}toString(){return this.snapshot.toString()}};function ER(n){let e=J4(n),t=new On([new Ia("",{})]),i=new On({}),r=new On({}),s=new On({}),o=new On(""),a=new ec(t,i,s,o,r,ot,n,e.root);return a.snapshot=e.root,new hm(new Pi(a,[]),e)}function J4(n){let e={},t={},i={},r="",s=new Zl([],e,i,r,t,ot,n,null,{});return new pm("",new Pi(s,[]))}var ec=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(e,t,i,r,s,o,a,l){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=i,this.fragmentSubject=r,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=l,this.title=this.dataSubject?.pipe(_t(c=>c[Sd]))??Qe(void 0),this.url=e,this.params=t,this.queryParams=i,this.fragment=r,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(_t(e=>Jl(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(_t(e=>Jl(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function fm(n,e,t="emptyOnly"){let i,{routeConfig:r}=n;return e!==null&&(t==="always"||r?.path===""||!e.component&&!e.routeConfig?.loadComponent)?i={params:me(me({},e.params),n.params),data:me(me({},e.data),n.data),resolve:me(me(me(me({},n.data),e.data),r?.data),n._resolvedData)}:i={params:me({},n.params),data:me({},n.data),resolve:me(me({},n.data),n._resolvedData??{})},r&&wR(r)&&(i.resolve[Sd]=r.title),i}var Zl=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[Sd]}constructor(e,t,i,r,s,o,a,l,c){this.url=e,this.params=t,this.queryParams=i,this.fragment=r,this.data=s,this.outlet=o,this.component=a,this.routeConfig=l,this._resolve=c}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Jl(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Jl(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(i=>i.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},pm=class extends dm{url;constructor(e,t){super(t),this.url=e,$x(this,t)}toString(){return MR(this._root)}};function $x(n,e){e.value._routerState=n,e.children.forEach(t=>$x(n,t))}function MR(n){let e=n.children.length>0?` { ${n.children.map(MR).join(", ")} } `:"";return`${n.value}${e}`}function gx(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Wr(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),Wr(e.params,t.params)||n.paramsSubject.next(t.params),S4(e.url,t.url)||n.urlSubject.next(t.url),Wr(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function kx(n,e){let t=Wr(n.params,e.params)&&I4(n.url,e.url),i=!n.parent!=!e.parent;return t&&!i&&(!n.parent||kx(n.parent,e.parent))}function wR(n){return typeof n.title=="string"||n.title===null}var Q4=new Le(""),e5=(()=>{class n{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=ot;activateEvents=new Tn;deactivateEvents=new Tn;attachEvents=new Tn;detachEvents=new Tn;routerOutletData=RI(void 0);parentContexts=ae(ym);location=ae(ba);changeDetector=ae(Ca);inputBinder=ae(Xx,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(t){if(t.name){let{firstChange:i,previousValue:r}=t.name;if(i)return;this.isTrackedInParentContexts(r)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(r)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Re(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Re(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Re(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,i){this.activated=t,this._activatedRoute=i,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,i){if(this.isActivated)throw new Re(4013,!1);this._activatedRoute=t;let r=this.location,o=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,l=new Ux(t,a,r.injector,this.routerOutletData);this.activated=r.createComponent(o,{index:r.length,injector:l,environmentInjector:i}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(i){return new(i||n)};static \u0275dir=En({type:n,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[Yu]})}return n})(),Ux=class n{route;childContexts;parent;outletData;__ngOutletInjector(e){return new n(this.route,this.childContexts,e,this.outletData)}constructor(e,t,i,r){this.route=e,this.childContexts=t,this.parent=i,this.outletData=r}get(e,t){return e===ec?this.route:e===ym?this.childContexts:e===Q4?this.outletData:this.parent.get(e,t)}},Xx=new Le("");function t5(n,e,t){let i=Ed(n,e._root,t?t._root:void 0);return new hm(i,e)}function Ed(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let i=t.value;i._futureSnapshot=e.value;let r=n5(n,e,t);return new Pi(i,r)}else{if(n.shouldAttach(e.value)){let s=n.retrieve(e.value);if(s!==null){let o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>Ed(n,a)),o}}let i=i5(e.value),r=e.children.map(s=>Ed(n,s));return new Pi(i,r)}}function n5(n,e,t){return e.children.map(i=>{for(let r of t.children)if(n.shouldReuseRoute(i.value,r.value.snapshot))return Ed(n,i,r);return Ed(n,i)})}function i5(n){return new ec(new On(n.url),new On(n.params),new On(n.queryParams),new On(n.fragment),new On(n.data),n.outlet,n.component,n)}var Md=class{redirectTo;navigationBehaviorOptions;constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},bR="ngNavigationCancelingError";function mm(n,e){let{redirectTo:t,navigationBehaviorOptions:i}=gd(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,r=SR(!1,Ni.Redirect);return r.url=t,r.navigationBehaviorOptions=i,r}function SR(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[bR]=!0,t.cancellationCode=e,t}function r5(n){return TR(n)&&gd(n.url)}function TR(n){return!!n&&n[bR]}var s5=(n,e,t,i)=>_t(r=>(new Bx(e,r.targetRouterState,r.currentRouterState,t,i).activate(n),r)),Bx=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(e,t,i,r,s){this.routeReuseStrategy=e,this.futureState=t,this.currState=i,this.forwardEvent=r,this.inputBindingEnabled=s}activate(e){let t=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,i,e),gx(this.futureState.root),this.activateChildRoutes(t,i,e)}deactivateChildRoutes(e,t,i){let r=ql(t);e.children.forEach(s=>{let o=s.value.outlet;this.deactivateRoutes(s,r[o],i),delete r[o]}),Object.values(r).forEach(s=>{this.deactivateRouteAndItsChildren(s,i)})}deactivateRoutes(e,t,i){let r=e.value,s=t?t.value:null;if(r===s)if(r.component){let o=i.getContext(r.outlet);o&&this.deactivateChildRoutes(e,t,o.children)}else this.deactivateChildRoutes(e,t,i);else s&&this.deactivateRouteAndItsChildren(t,i)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let i=t.getContext(e.value.outlet),r=i&&e.value.component?i.children:t,s=ql(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,r);if(i&&i.outlet){let o=i.outlet.detach(),a=i.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){let i=t.getContext(e.value.outlet),r=i&&e.value.component?i.children:t,s=ql(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,r);i&&(i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated()),i.attachRef=null,i.route=null)}activateChildRoutes(e,t,i){let r=ql(t);e.children.forEach(s=>{this.activateRoutes(s,r[s.value.outlet],i),this.forwardEvent(new Nx(s.value.snapshot))}),e.children.length&&this.forwardEvent(new Rx(e.value.snapshot))}activateRoutes(e,t,i){let r=e.value,s=t?t.value:null;if(gx(r),r===s)if(r.component){let o=i.getOrCreateContext(r.outlet);this.activateChildRoutes(e,t,o.children)}else this.activateChildRoutes(e,t,i);else if(r.component){let o=i.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){let a=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),gx(a.route.value),this.activateChildRoutes(e,null,o.children)}else o.attachRef=null,o.route=r,o.outlet&&o.outlet.activateWith(r,o.injector),this.activateChildRoutes(e,null,o.children)}else this.activateChildRoutes(e,null,i)}},gm=class{path;route;constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},Kl=class{component;route;constructor(e,t){this.component=e,this.route=t}};function o5(n,e,t){let i=n._root,r=e?e._root:null;return ud(i,r,t,[i.value])}function a5(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function nc(n,e){let t=Symbol(),i=e.get(n,t);return i===t?typeof n=="function"&&!IA(n)?n:e.get(n):i}function ud(n,e,t,i,r={canDeactivateChecks:[],canActivateChecks:[]}){let s=ql(e);return n.children.forEach(o=>{l5(o,s[o.value.outlet],t,i.concat([o.value]),r),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>pd(a,t.getContext(o),r)),r}function l5(n,e,t,i,r={canDeactivateChecks:[],canActivateChecks:[]}){let s=n.value,o=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){let l=c5(o,s,s.routeConfig.runGuardsAndResolvers);l?r.canActivateChecks.push(new gm(i)):(s.data=o.data,s._resolvedData=o._resolvedData),s.component?ud(n,e,a?a.children:null,i,r):ud(n,e,t,i,r),l&&a&&a.outlet&&a.outlet.isActivated&&r.canDeactivateChecks.push(new Kl(a.outlet.component,o))}else o&&pd(e,a,r),r.canActivateChecks.push(new gm(i)),s.component?ud(n,null,a?a.children:null,i,r):ud(n,null,t,i,r);return r}function c5(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!Da(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Da(n.url,e.url)||!Wr(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!kx(n,e)||!Wr(n.queryParams,e.queryParams);case"paramsChange":default:return!kx(n,e)}}function pd(n,e,t){let i=ql(n),r=n.value;Object.entries(i).forEach(([s,o])=>{r.component?e?pd(o,e.children.getContext(s),t):pd(o,null,t):pd(o,e,t)}),r.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new Kl(e.outlet.component,r)):t.canDeactivateChecks.push(new Kl(null,r)):t.canDeactivateChecks.push(new Kl(null,r))}function Cd(n){return typeof n=="function"}function u5(n){return typeof n=="boolean"}function d5(n){return n&&Cd(n.canLoad)}function h5(n){return n&&Cd(n.canActivate)}function f5(n){return n&&Cd(n.canActivateChild)}function p5(n){return n&&Cd(n.canDeactivate)}function m5(n){return n&&Cd(n.canMatch)}function CR(n){return n instanceof cs||n?.name==="EmptyError"}var rm=Symbol("INITIAL_VALUE");function tc(){return $i(n=>Sf(n.map(e=>e.pipe(us(1),Ov(rm)))).pipe(_t(e=>{for(let t of e)if(t!==!0){if(t===rm)return rm;if(t===!1||g5(t))return t}return!0}),Wi(e=>e!==rm),us(1)))}function g5(n){return gd(n)||n instanceof Md}function y5(n,e){return _n(t=>{let{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:s,canDeactivateChecks:o}}=t;return o.length===0&&s.length===0?Qe(vt(me({},t),{guardsResult:!0})):v5(o,i,r,n).pipe(_n(a=>a&&u5(a)?_5(i,s,n,e):Qe(a)),_t(a=>vt(me({},t),{guardsResult:a})))})}function v5(n,e,t,i){return ln(n).pipe(_n(r=>b5(r.component,r.route,t,e,i)),pr(r=>r!==!0,!0))}function _5(n,e,t,i){return ln(e).pipe(sa(r=>_l(E5(r.route.parent,i),x5(r.route,i),w5(n,r.path,t),M5(n,r.route,t))),pr(r=>r!==!0,!0))}function x5(n,e){return n!==null&&e&&e(new Px(n)),Qe(!0)}function E5(n,e){return n!==null&&e&&e(new Dx(n)),Qe(!0)}function M5(n,e,t){let i=e.routeConfig?e.routeConfig.canActivate:null;if(!i||i.length===0)return Qe(!0);let r=i.map(s=>Tf(()=>{let o=Td(e)??t,a=nc(s,o),l=h5(a)?a.canActivate(e,n):Zi(o,()=>a(e,n));return Mo(l).pipe(pr())}));return Qe(r).pipe(tc())}function w5(n,e,t){let i=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>a5(o)).filter(o=>o!==null).map(o=>Tf(()=>{let a=o.guards.map(l=>{let c=Td(o.node)??t,u=nc(l,c),d=f5(u)?u.canActivateChild(i,n):Zi(c,()=>u(i,n));return Mo(d).pipe(pr())});return Qe(a).pipe(tc())}));return Qe(s).pipe(tc())}function b5(n,e,t,i,r){let s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!s||s.length===0)return Qe(!0);let o=s.map(a=>{let l=Td(e)??r,c=nc(a,l),u=p5(c)?c.canDeactivate(n,e,t,i):Zi(l,()=>c(n,e,t,i));return Mo(u).pipe(pr())});return Qe(o).pipe(tc())}function S5(n,e,t,i){let r=e.canLoad;if(r===void 0||r.length===0)return Qe(!0);let s=r.map(o=>{let a=nc(o,n),l=d5(a)?a.canLoad(e,t):Zi(n,()=>a(e,t));return Mo(l)});return Qe(s).pipe(tc(),AR(i))}function AR(n){return bv(xn(e=>{if(typeof e!="boolean")throw mm(n,e)}),_t(e=>e===!0))}function T5(n,e,t,i){let r=e.canMatch;if(!r||r.length===0)return Qe(!0);let s=r.map(o=>{let a=nc(o,n),l=m5(a)?a.canMatch(e,t):Zi(n,()=>a(e,t));return Mo(l)});return Qe(s).pipe(tc(),AR(i))}var wd=class{segmentGroup;constructor(e){this.segmentGroup=e||null}},bd=class extends Error{urlTree;constructor(e){super(),this.urlTree=e}};function Xl(n){return vl(new wd(n))}function C5(n){return vl(new Re(4e3,!1))}function A5(n){return vl(SR(!1,Ni.GuardRejected))}var Vx=class{urlSerializer;urlTree;constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let i=[],r=t.root;for(;;){if(i=i.concat(r.segments),r.numberOfChildren===0)return Qe(i);if(r.numberOfChildren>1||!r.children[ot])return C5(`${e.redirectTo}`);r=r.children[ot]}}applyRedirectCommands(e,t,i,r,s){if(typeof t!="string"){let a=t,{queryParams:l,fragment:c,routeConfig:u,url:d,outlet:h,params:f,data:p,title:y}=r,g=Zi(s,()=>a({params:f,data:p,queryParams:l,fragment:c,routeConfig:u,url:d,outlet:h,title:y}));if(g instanceof ws)throw new bd(g);t=g}let o=this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,i);if(t[0]==="/")throw new bd(o);return o}applyRedirectCreateUrlTree(e,t,i,r){let s=this.createSegmentGroup(e,t.root,i,r);return new ws(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let i={};return Object.entries(e).forEach(([r,s])=>{if(typeof s=="string"&&s[0]===":"){let a=s.substring(1);i[r]=t[a]}else i[r]=s}),i}createSegmentGroup(e,t,i,r){let s=this.createSegments(e,t.segments,i,r),o={};return Object.entries(t.children).forEach(([a,l])=>{o[a]=this.createSegmentGroup(e,l,i,r)}),new Ht(s,o)}createSegments(e,t,i,r){return t.map(s=>s.path[0]===":"?this.findPosParam(e,s,r):this.findOrReturn(s,i))}findPosParam(e,t,i){let r=i[t.path.substring(1)];if(!r)throw new Re(4001,!1);return r}findOrReturn(e,t){let i=0;for(let r of t){if(r.path===e.path)return t.splice(i),r;i++}return e}},zx={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function I5(n,e,t,i,r){let s=IR(n,e,t);return s.matched?(i=Z4(e,i),T5(i,e,t,r).pipe(_t(o=>o===!0?s:me({},zx)))):Qe(s)}function IR(n,e,t){if(e.path==="**")return D5(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?me({},zx):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let r=(e.matcher||b4)(t,n,e);if(!r)return me({},zx);let s={};Object.entries(r.posParams??{}).forEach(([a,l])=>{s[a]=l.path});let o=r.consumed.length>0?me(me({},s),r.consumed[r.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:r.consumed,remainingSegments:t.slice(r.consumed.length),parameters:o,positionalParamSegments:r.posParams??{}}}function D5(n){return{matched:!0,parameters:n.length>0?lR(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function rR(n,e,t,i){return t.length>0&&N5(n,t,i)?{segmentGroup:new Ht(e,P5(i,new Ht(t,n.children))),slicedSegments:[]}:t.length===0&&O5(n,t,i)?{segmentGroup:new Ht(n.segments,R5(n,t,i,n.children)),slicedSegments:t}:{segmentGroup:new Ht(n.segments,n.children),slicedSegments:t}}function R5(n,e,t,i){let r={};for(let s of t)if(vm(n,e,s)&&!i[Mr(s)]){let o=new Ht([],{});r[Mr(s)]=o}return me(me({},i),r)}function P5(n,e){let t={};t[ot]=e;for(let i of n)if(i.path===""&&Mr(i)!==ot){let r=new Ht([],{});t[Mr(i)]=r}return t}function N5(n,e,t){return t.some(i=>vm(n,e,i)&&Mr(i)!==ot)}function O5(n,e,t){return t.some(i=>vm(n,e,i))}function vm(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function L5(n,e,t){return e.length===0&&!n.children[t]}var Hx=class{};function F5(n,e,t,i,r,s,o="emptyOnly"){return new Gx(n,e,t,i,r,o,s).recognize()}var k5=31,Gx=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(e,t,i,r,s,o,a){this.injector=e,this.configLoader=t,this.rootComponentType=i,this.config=r,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.applyRedirects=new Vx(this.urlSerializer,this.urlTree)}noMatchError(e){return new Re(4002,`'${e.segmentGroup}'`)}recognize(){let e=rR(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(_t(({children:t,rootSnapshot:i})=>{let r=new Pi(i,t),s=new pm("",r),o=G4(i,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),{state:s,tree:o}}))}match(e){let t=new Zl([],Object.freeze({}),Object.freeze(me({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),ot,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,ot,t).pipe(_t(i=>({children:i,rootSnapshot:t})),ro(i=>{if(i instanceof bd)return this.urlTree=i.urlTree,this.match(i.urlTree.root);throw i instanceof wd?this.noMatchError(i):i}))}processSegmentGroup(e,t,i,r,s){return i.segments.length===0&&i.hasChildren()?this.processChildren(e,t,i,s):this.processSegment(e,t,i,i.segments,r,!0,s).pipe(_t(o=>o instanceof Pi?[o]:[]))}processChildren(e,t,i,r){let s=[];for(let o of Object.keys(i.children))o==="primary"?s.unshift(o):s.push(o);return ln(s).pipe(sa(o=>{let a=i.children[o],l=K4(t,o);return this.processSegmentGroup(e,l,a,o,r)}),Nv((o,a)=>(o.push(...a),o)),so(null),Pv(),_n(o=>{if(o===null)return Xl(i);let a=DR(o);return U5(a),Qe(a)}))}processSegment(e,t,i,r,s,o,a){return ln(t).pipe(sa(l=>this.processSegmentAgainstRoute(l._injector??e,t,l,i,r,s,o,a).pipe(ro(c=>{if(c instanceof wd)return Qe(null);throw c}))),pr(l=>!!l),ro(l=>{if(CR(l))return L5(i,r,s)?Qe(new Hx):Xl(i);throw l}))}processSegmentAgainstRoute(e,t,i,r,s,o,a,l){return Mr(i)!==o&&(o===ot||!vm(r,s,i))?Xl(r):i.redirectTo===void 0?this.matchSegmentAgainstRoute(e,r,i,s,o,l):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,r,t,i,s,o,l):Xl(r)}expandSegmentAgainstRouteUsingRedirect(e,t,i,r,s,o,a){let{matched:l,parameters:c,consumedSegments:u,positionalParamSegments:d,remainingSegments:h}=IR(t,r,s);if(!l)return Xl(t);typeof r.redirectTo=="string"&&r.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>k5&&(this.allowRedirects=!1));let f=new Zl(s,c,Object.freeze(me({},this.urlTree.queryParams)),this.urlTree.fragment,sR(r),Mr(r),r.component??r._loadedComponent??null,r,oR(r)),p=fm(f,a,this.paramsInheritanceStrategy);f.params=Object.freeze(p.params),f.data=Object.freeze(p.data);let y=this.applyRedirects.applyRedirectCommands(u,r.redirectTo,d,f,e);return this.applyRedirects.lineralizeSegments(r,y).pipe(_n(g=>this.processSegment(e,i,t,g.concat(h),o,!1,a)))}matchSegmentAgainstRoute(e,t,i,r,s,o){let a=I5(t,i,r,e,this.urlSerializer);return i.path==="**"&&(t.children={}),a.pipe($i(l=>l.matched?(e=i._injector??e,this.getChildConfig(e,i,r).pipe($i(({routes:c})=>{let u=i._loadedInjector??e,{parameters:d,consumedSegments:h,remainingSegments:f}=l,p=new Zl(h,d,Object.freeze(me({},this.urlTree.queryParams)),this.urlTree.fragment,sR(i),Mr(i),i.component??i._loadedComponent??null,i,oR(i)),y=fm(p,o,this.paramsInheritanceStrategy);p.params=Object.freeze(y.params),p.data=Object.freeze(y.data);let{segmentGroup:g,slicedSegments:m}=rR(t,h,f,c);if(m.length===0&&g.hasChildren())return this.processChildren(u,c,g,p).pipe(_t(M=>new Pi(p,M)));if(c.length===0&&m.length===0)return Qe(new Pi(p,[]));let x=Mr(i)===s;return this.processSegment(u,c,g,m,x?ot:s,!0,p).pipe(_t(M=>new Pi(p,M instanceof Pi?[M]:[])))}))):Xl(t)))}getChildConfig(e,t,i){return t.children?Qe({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?Qe({routes:t._loadedRoutes,injector:t._loadedInjector}):S5(e,t,i,this.urlSerializer).pipe(_n(r=>r?this.configLoader.loadChildren(e,t).pipe(xn(s=>{t._loadedRoutes=s.routes,t._loadedInjector=s.injector})):A5(t))):Qe({routes:[],injector:e})}};function U5(n){n.sort((e,t)=>e.value.outlet===ot?-1:t.value.outlet===ot?1:e.value.outlet.localeCompare(t.value.outlet))}function B5(n){let e=n.value.routeConfig;return e&&e.path===""}function DR(n){let e=[],t=new Set;for(let i of n){if(!B5(i)){e.push(i);continue}let r=e.find(s=>i.value.routeConfig===s.value.routeConfig);r!==void 0?(r.children.push(...i.children),t.add(r)):e.push(i)}for(let i of t){let r=DR(i.children);e.push(new Pi(i.value,r))}return e.filter(i=>!t.has(i))}function sR(n){return n.data||{}}function oR(n){return n.resolve||{}}function V5(n,e,t,i,r,s){return _n(o=>F5(n,e,t,i,o.extractedUrl,r,s).pipe(_t(({state:a,tree:l})=>vt(me({},o),{targetSnapshot:a,urlAfterRedirects:l}))))}function z5(n,e){return _n(t=>{let{targetSnapshot:i,guards:{canActivateChecks:r}}=t;if(!r.length)return Qe(t);let s=new Set(r.map(l=>l.route)),o=new Set;for(let l of s)if(!o.has(l))for(let c of RR(l))o.add(c);let a=0;return ln(o).pipe(sa(l=>s.has(l)?H5(l,i,n,e):(l.data=fm(l,l.parent,n).resolve,Qe(void 0))),xn(()=>a++),El(1),_n(l=>a===o.size?Qe(t):wi))})}function RR(n){let e=n.children.map(t=>RR(t)).flat();return[n,...e]}function H5(n,e,t,i){let r=n.routeConfig,s=n._resolve;return r?.title!==void 0&&!wR(r)&&(s[Sd]=r.title),G5(s,n,e,i).pipe(_t(o=>(n._resolvedData=o,n.data=fm(n,n.parent,t).resolve,null)))}function G5(n,e,t,i){let r=_x(n);if(r.length===0)return Qe({});let s={};return ln(r).pipe(_n(o=>j5(n[o],e,t,i).pipe(pr(),xn(a=>{if(a instanceof Md)throw mm(new md,a);s[o]=a}))),El(1),Rv(s),ro(o=>CR(o)?wi:vl(o)))}function j5(n,e,t,i){let r=Td(e)??i,s=nc(n,r),o=s.resolve?s.resolve(e,t):Zi(r,()=>s(e,t));return Mo(o)}function yx(n){return $i(e=>{let t=n(e);return t?ln(t).pipe(_t(()=>e)):Qe(e)})}var PR=(()=>{class n{buildTitle(t){let i,r=t.root;for(;r!==void 0;)i=this.getResolvedTitleForRoute(r)??i,r=r.children.find(s=>s.outlet===ot);return i}getResolvedTitleForRoute(t){return t.data[Sd]}static \u0275fac=function(i){return new(i||n)};static \u0275prov=Xe({token:n,factory:()=>ae(W5),providedIn:"root"})}return n})(),W5=(()=>{class n extends PR{title;constructor(t){super(),this.title=t}updateTitle(t){let i=this.buildTitle(t);i!==void 0&&this.title.setTitle(i)}static \u0275fac=function(i){return new(i||n)(Tt(K1))};static \u0275prov=Xe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),qx=new Le("",{providedIn:"root",factory:()=>({})}),$5=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275cmp=pn({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(i,r){i&1&&tt(0,"router-outlet")},dependencies:[e5],encapsulation:2})}return n})();function Yx(n){let e=n.children&&n.children.map(Yx),t=e?vt(me({},n),{children:e}):me({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==ot&&(t.component=$5),t}var Zx=new Le(""),X5=(()=>{class n{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=ae(K0);loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return Qe(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);let i=Mo(t.loadComponent()).pipe(_t(NR),xn(s=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=s}),xl(()=>{this.componentLoaders.delete(t)})),r=new yl(i,()=>new vn).pipe(gl());return this.componentLoaders.set(t,r),r}loadChildren(t,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return Qe({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);let s=q5(i,this.compiler,t,this.onLoadEndListener).pipe(xl(()=>{this.childrenLoaders.delete(i)})),o=new yl(s,()=>new vn).pipe(gl());return this.childrenLoaders.set(i,o),o}static \u0275fac=function(i){return new(i||n)};static \u0275prov=Xe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function q5(n,e,t,i){return Mo(n.loadChildren()).pipe(_t(NR),_n(r=>r instanceof Gu||Array.isArray(r)?Qe(r):ln(e.compileModuleAsync(r))),_t(r=>{i&&i(n);let s,o,a=!1;return Array.isArray(r)?(o=r,a=!0):(s=r.create(t).injector,o=s.get(Zx,[],{optional:!0,self:!0}).flat()),{routes:o.map(Yx),injector:s}}))}function Y5(n){return n&&typeof n=="object"&&"default"in n}function NR(n){return Y5(n)?n.default:n}var Kx=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275prov=Xe({token:n,factory:()=>ae(Z5),providedIn:"root"})}return n})(),Z5=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,i){return t}static \u0275fac=function(i){return new(i||n)};static \u0275prov=Xe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),K5=new Le("");var J5=new Le(""),Q5=(()=>{class n{currentNavigation=null;currentTransition=null;lastSuccessfulNavigation=null;events=new vn;transitionAbortSubject=new vn;configLoader=ae(X5);environmentInjector=ae(Ci);urlSerializer=ae(Wx);rootContexts=ae(ym);location=ae(rd);inputBindingEnabled=ae(Xx,{optional:!0})!==null;titleStrategy=ae(PR);options=ae(qx,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=ae(Kx);createViewTransition=ae(K5,{optional:!0});navigationErrorHandler=ae(J5,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>Qe(void 0);rootComponentType=null;constructor(){let t=r=>this.events.next(new Ax(r)),i=r=>this.events.next(new Ix(r));this.configLoader.onLoadEndListener=i,this.configLoader.onLoadStartListener=t}complete(){this.transitions?.complete()}handleNavigationRequest(t){let i=++this.navigationId;this.transitions?.next(vt(me(me({},this.transitions.value),t),{id:i}))}setupNavigations(t,i,r){return this.transitions=new On({id:0,currentUrlTree:i,currentRawUrl:i,extractedUrl:this.urlHandlingStrategy.extract(i),urlAfterRedirects:this.urlHandlingStrategy.extract(i),rawUrl:i,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:fd,restoredState:null,currentSnapshot:r.snapshot,targetSnapshot:null,currentRouterState:r,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Wi(s=>s.id!==0),_t(s=>vt(me({},s),{extractedUrl:this.urlHandlingStrategy.extract(s.rawUrl)})),$i(s=>{let o=!1,a=!1;return Qe(s).pipe($i(l=>{if(this.navigationId>s.id)return this.cancelNavigationTransition(s,"",Ni.SupersededByNewNavigation),wi;this.currentTransition=s,this.currentNavigation={id:l.id,initialUrl:l.rawUrl,extractedUrl:l.extractedUrl,targetBrowserUrl:typeof l.extras.browserUrl=="string"?this.urlSerializer.parse(l.extras.browserUrl):l.extras.browserUrl,trigger:l.source,extras:l.extras,previousNavigation:this.lastSuccessfulNavigation?vt(me({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let c=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),u=l.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!c&&u!=="reload"){let d="";return this.events.next(new Pa(l.id,this.urlSerializer.serialize(l.rawUrl),d,wx.IgnoredSameUrlNavigation)),l.resolve(!1),wi}if(this.urlHandlingStrategy.shouldProcessUrl(l.rawUrl))return Qe(l).pipe($i(d=>{let h=this.transitions?.getValue();return this.events.next(new vd(d.id,this.urlSerializer.serialize(d.extractedUrl),d.source,d.restoredState)),h!==this.transitions?.getValue()?wi:Promise.resolve(d)}),V5(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),xn(d=>{s.targetSnapshot=d.targetSnapshot,s.urlAfterRedirects=d.urlAfterRedirects,this.currentNavigation=vt(me({},this.currentNavigation),{finalUrl:d.urlAfterRedirects});let h=new um(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(h)}));if(c&&this.urlHandlingStrategy.shouldProcessUrl(l.currentRawUrl)){let{id:d,extractedUrl:h,source:f,restoredState:p,extras:y}=l,g=new vd(d,this.urlSerializer.serialize(h),f,p);this.events.next(g);let m=ER(this.rootComponentType).snapshot;return this.currentTransition=s=vt(me({},l),{targetSnapshot:m,urlAfterRedirects:h,extras:vt(me({},y),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=h,Qe(s)}else{let d="";return this.events.next(new Pa(l.id,this.urlSerializer.serialize(l.extractedUrl),d,wx.IgnoredByUrlHandlingStrategy)),l.resolve(!1),wi}}),xn(l=>{let c=new bx(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(c)}),_t(l=>(this.currentTransition=s=vt(me({},l),{guards:o5(l.targetSnapshot,l.currentSnapshot,this.rootContexts)}),s)),y5(this.environmentInjector,l=>this.events.next(l)),xn(l=>{if(s.guardsResult=l.guardsResult,l.guardsResult&&typeof l.guardsResult!="boolean")throw mm(this.urlSerializer,l.guardsResult);let c=new Sx(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot,!!l.guardsResult);this.events.next(c)}),Wi(l=>l.guardsResult?!0:(this.cancelNavigationTransition(l,"",Ni.GuardRejected),!1)),yx(l=>{if(l.guards.canActivateChecks.length)return Qe(l).pipe(xn(c=>{let u=new Tx(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(u)}),$i(c=>{let u=!1;return Qe(c).pipe(z5(this.paramsInheritanceStrategy,this.environmentInjector),xn({next:()=>u=!0,complete:()=>{u||this.cancelNavigationTransition(c,"",Ni.NoDataFromResolver)}}))}),xn(c=>{let u=new Cx(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(u)}))}),yx(l=>{let c=u=>{let d=[];u.routeConfig?.loadComponent&&!u.routeConfig._loadedComponent&&d.push(this.configLoader.loadComponent(u.routeConfig).pipe(xn(h=>{u.component=h}),_t(()=>{})));for(let h of u.children)d.push(...c(h));return d};return Sf(c(l.targetSnapshot.root)).pipe(so(null),us(1))}),yx(()=>this.afterPreactivation()),$i(()=>{let{currentSnapshot:l,targetSnapshot:c}=s,u=this.createViewTransition?.(this.environmentInjector,l.root,c.root);return u?ln(u).pipe(_t(()=>s)):Qe(s)}),_t(l=>{let c=t5(t.routeReuseStrategy,l.targetSnapshot,l.currentRouterState);return this.currentTransition=s=vt(me({},l),{targetRouterState:c}),this.currentNavigation.targetRouterState=c,s}),xn(()=>{this.events.next(new xd)}),s5(this.rootContexts,t.routeReuseStrategy,l=>this.events.next(l),this.inputBindingEnabled),us(1),xn({next:l=>{o=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Ra(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects))),this.titleStrategy?.updateTitle(l.targetRouterState.snapshot),l.resolve(!0)},complete:()=>{o=!0}}),Lv(this.transitionAbortSubject.pipe(xn(l=>{throw l}))),xl(()=>{!o&&!a&&this.cancelNavigationTransition(s,"",Ni.SupersededByNewNavigation),this.currentTransition?.id===s.id&&(this.currentNavigation=null,this.currentTransition=null)}),ro(l=>{if(a=!0,TR(l))this.events.next(new Ms(s.id,this.urlSerializer.serialize(s.extractedUrl),l.message,l.cancellationCode)),r5(l)?this.events.next(new Ql(l.url,l.navigationBehaviorOptions)):s.resolve(!1);else{let c=new _d(s.id,this.urlSerializer.serialize(s.extractedUrl),l,s.targetSnapshot??void 0);try{let u=Zi(this.environmentInjector,()=>this.navigationErrorHandler?.(c));if(u instanceof Md){let{message:d,cancellationCode:h}=mm(this.urlSerializer,u);this.events.next(new Ms(s.id,this.urlSerializer.serialize(s.extractedUrl),d,h)),this.events.next(new Ql(u.redirectTo,u.navigationBehaviorOptions))}else throw this.events.next(c),l}catch(u){this.options.resolveNavigationPromiseOnError?s.resolve(!1):s.reject(u)}}return wi}))}))}cancelNavigationTransition(t,i,r){let s=new Ms(t.id,this.urlSerializer.serialize(t.extractedUrl),i,r);this.events.next(s),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),i=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return t.toString()!==i?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static \u0275fac=function(i){return new(i||n)};static \u0275prov=Xe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function ej(n){return n!==fd}var tj=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275prov=Xe({token:n,factory:()=>ae(nj),providedIn:"root"})}return n})(),jx=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},nj=(()=>{class n extends jx{static \u0275fac=(()=>{let t;return function(r){return(t||(t=va(n)))(r||n)}})();static \u0275prov=Xe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),OR=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275prov=Xe({token:n,factory:()=>ae(ij),providedIn:"root"})}return n})(),ij=(()=>{class n extends OR{location=ae(rd);urlSerializer=ae(Wx);options=ae(qx,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";urlHandlingStrategy=ae(Kx);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new ws;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}routerState=ER(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(i=>{i.type==="popstate"&&t(i.url,i.state)})}handleRouterEvent(t,i){if(t instanceof vd)this.stateMemento=this.createStateMemento();else if(t instanceof Pa)this.rawUrlTree=i.initialUrl;else if(t instanceof um){if(this.urlUpdateStrategy==="eager"&&!i.extras.skipLocationChange){let r=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl);this.setBrowserUrl(i.targetBrowserUrl??r,i)}}else t instanceof xd?(this.currentUrlTree=i.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl),this.routerState=i.targetRouterState,this.urlUpdateStrategy==="deferred"&&!i.extras.skipLocationChange&&this.setBrowserUrl(i.targetBrowserUrl??this.rawUrlTree,i)):t instanceof Ms&&(t.code===Ni.GuardRejected||t.code===Ni.NoDataFromResolver)?this.restoreHistory(i):t instanceof _d?this.restoreHistory(i,!0):t instanceof Ra&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,i){let r=t instanceof ws?this.urlSerializer.serialize(t):t;if(this.location.isCurrentPathEqualTo(r)||i.extras.replaceUrl){let s=this.browserPageId,o=me(me({},i.extras.state),this.generateNgRouterState(i.id,s));this.location.replaceState(r,"",o)}else{let s=me(me({},i.extras.state),this.generateNgRouterState(i.id,this.browserPageId+1));this.location.go(r,"",s)}}restoreHistory(t,i=!1){if(this.canceledNavigationResolution==="computed"){let r=this.browserPageId,s=this.currentPageId-r;s!==0?this.location.historyGo(s):this.currentUrlTree===t.finalUrl&&s===0&&(this.resetState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(i&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,i){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:i}:{navigationId:t}}static \u0275fac=(()=>{let t;return function(r){return(t||(t=va(n)))(r||n)}})();static \u0275prov=Xe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),dd=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(dd||{});function rj(n,e){n.events.pipe(Wi(t=>t instanceof Ra||t instanceof Ms||t instanceof _d||t instanceof Pa),_t(t=>t instanceof Ra||t instanceof Pa?dd.COMPLETE:(t instanceof Ms?t.code===Ni.Redirect||t.code===Ni.SupersededByNewNavigation:!1)?dd.REDIRECTING:dd.FAILED),Wi(t=>t!==dd.REDIRECTING),us(1)).subscribe(()=>{e()})}var sj={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},oj={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},LR=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=ae(Gp);stateManager=ae(OR);options=ae(qx,{optional:!0})||{};pendingTasks=ae(xo);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=ae(Q5);urlSerializer=ae(Wx);location=ae(rd);urlHandlingStrategy=ae(Kx);_events=new vn;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=ae(tj);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=ae(Zx,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!ae(Xx,{optional:!0});constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}eventsSubscription=new hn;subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(i=>{try{let r=this.navigationTransitions.currentTransition,s=this.navigationTransitions.currentNavigation;if(r!==null&&s!==null){if(this.stateManager.handleRouterEvent(i,s),i instanceof Ms&&i.code!==Ni.Redirect&&i.code!==Ni.SupersededByNewNavigation)this.navigated=!0;else if(i instanceof Ra)this.navigated=!0;else if(i instanceof Ql){let o=i.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(i.url,r.currentRawUrl),l=me({browserUrl:r.extras.browserUrl,info:r.extras.info,skipLocationChange:r.extras.skipLocationChange,replaceUrl:r.extras.replaceUrl||this.urlUpdateStrategy==="eager"||ej(r.source)},o);this.scheduleNavigation(a,fd,null,l,{resolve:r.resolve,reject:r.reject,promise:r.promise})}}lj(i)&&this._events.next(i)}catch(r){this.navigationTransitions.transitionAbortSubject.next(r)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),fd,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,i)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(t,"popstate",i)},0)})}navigateToSyncWithBrowser(t,i,r){let s={replaceUrl:!0},o=r?.navigationId?r:null;if(r){let l=me({},r);delete l.navigationId,delete l.\u0275routerPageId,Object.keys(l).length!==0&&(s.state=l)}let a=this.parseUrl(t);this.scheduleNavigation(a,i,o,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(Yx),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,i={}){let{relativeTo:r,queryParams:s,fragment:o,queryParamsHandling:a,preserveFragment:l}=i,c=l?this.currentUrlTree.fragment:o,u=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":u=me(me({},this.currentUrlTree.queryParams),s);break;case"preserve":u=this.currentUrlTree.queryParams;break;default:u=s||null}u!==null&&(u=this.removeEmptyProps(u));let d;try{let h=r?r.snapshot:this.routerState.snapshot.root;d=yR(h)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),d=this.currentUrlTree.root}return vR(d,t,u,c??null)}navigateByUrl(t,i={skipLocationChange:!1}){let r=gd(t)?t:this.parseUrl(t),s=this.urlHandlingStrategy.merge(r,this.rawUrlTree);return this.scheduleNavigation(s,fd,null,i)}navigate(t,i={skipLocationChange:!1}){return aj(t),this.navigateByUrl(this.createUrlTree(t,i),i)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,i){let r;if(i===!0?r=me({},sj):i===!1?r=me({},oj):r=i,gd(t))return eR(this.currentUrlTree,t,r);let s=this.parseUrl(t);return eR(this.currentUrlTree,s,r)}removeEmptyProps(t){return Object.entries(t).reduce((i,[r,s])=>(s!=null&&(i[r]=s),i),{})}scheduleNavigation(t,i,r,s,o){if(this.disposed)return Promise.resolve(!1);let a,l,c;o?(a=o.resolve,l=o.reject,c=o.promise):c=new Promise((d,h)=>{a=d,l=h});let u=this.pendingTasks.add();return rj(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(u))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:r,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:s,resolve:a,reject:l,promise:c,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),c.catch(d=>Promise.reject(d))}static \u0275fac=function(i){return new(i||n)};static \u0275prov=Xe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function aj(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new Re(4008,!1)}function lj(n){return!(n instanceof xd)&&!(n instanceof Ql)}var cj=new Le("");function FR(n,...e){return ya([{provide:Zx,multi:!0,useValue:n},[],{provide:ec,useFactory:uj,deps:[LR]},{provide:wa,multi:!0,useFactory:dj},e.map(t=>t.\u0275providers)])}function uj(n){return n.routerState.root}function dj(){let n=ae(Ii);return e=>{let t=n.get(ci);if(e!==t.components[0])return;let i=n.get(LR),r=n.get(hj);n.get(fj)===1&&i.initialNavigation(),n.get(pj,null,mt.Optional)?.setUpPreloading(),n.get(cj,null,mt.Optional)?.init(),i.resetRootComponentType(t.componentTypes[0]),r.closed||(r.next(),r.complete(),r.unsubscribe())}}var hj=new Le("",{factory:()=>new vn}),fj=new Le("",{providedIn:"root",factory:()=>1});var pj=new Le("");var kR=[];var UR={providers:[m1({eventCoalescing:!0}),FR(kR),Q1(J1())]};function mj(n,e){if(n&1){let t=Eo();Y(0,"div",11)(1,"h2"),he(2),Q(),Y(3,"p"),he(4),Q(),Y(5,"a",12),At("click",function(r){yo(t);let s=Mn();return vo(s.scrollToSection(r,"form-section"))}),he(6,"Request Free Estimate"),Q()()}if(n&2){let t=Mn();et(2),Gn(t.title),et(2),Gn(t.description)}}function gj(n,e){if(n&1){let t=Eo();Y(0,"div",11)(1,"h2"),he(2),Q(),Y(3,"p"),he(4),Q(),Y(5,"a",12),At("click",function(r){yo(t);let s=Mn();return vo(s.scrollToSection(r,"form-section"))}),he(6,"Request Free Estimate"),Q()()}if(n&2){let t=Mn();et(2),Gn(t.title),et(2),Gn(t.description)}}function yj(n,e){if(n&1){let t=Eo();Y(0,"div",11)(1,"h2"),he(2),Q(),Y(3,"p"),he(4),Q(),Y(5,"a",12),At("click",function(r){yo(t);let s=Mn();return vo(s.scrollToSection(r,"form-section"))}),he(6,"Request Free Estimate"),Q()()}if(n&2){let t=Mn();et(2),Gn(t.title),et(2),Gn(t.description)}}function vj(n,e){if(n&1){let t=Eo();Y(0,"div",11)(1,"h2"),he(2),Q(),Y(3,"p"),he(4),Q(),Y(5,"a",12),At("click",function(r){yo(t);let s=Mn();return vo(s.scrollToSection(r,"form-section"))}),he(6,"Request Free Estimate"),Q()()}if(n&2){let t=Mn();et(2),Gn(t.title),et(2),Gn(t.description)}}function _j(n,e){if(n&1){let t=Eo();Y(0,"div",11)(1,"h2"),he(2),Q(),Y(3,"p"),he(4),Q(),Y(5,"a",12),At("click",function(r){yo(t);let s=Mn();return vo(s.scrollToSection(r,"form-section"))}),he(6,"Request Free Estimate"),Q()()}if(n&2){let t=Mn();et(2),Gn(t.title),et(2),Gn(t.description)}}function xj(n,e){if(n&1){let t=Eo();Y(0,"div",11)(1,"h2"),he(2),Q(),Y(3,"p"),he(4),Q(),Y(5,"a",12),At("click",function(r){yo(t);let s=Mn();return vo(s.scrollToSection(r,"form-section"))}),he(6,"Request Free Estimate"),Q()()}if(n&2){let t=Mn();et(2),Gn(t.title),et(2),Gn(t.description)}}function Ej(n,e){if(n&1){let t=Eo();Y(0,"div",11)(1,"h2"),he(2),Q(),Y(3,"p"),he(4),Q(),Y(5,"a",12),At("click",function(r){yo(t);let s=Mn();return vo(s.scrollToSection(r,"form-section"))}),he(6,"Request Free Estimate"),Q()()}if(n&2){let t=Mn();et(2),Gn(t.title),et(2),Gn(t.description)}}var _m=class n{title="";description="";isVisible1=!1;isVisible2=!1;isVisible3=!1;isVisible4=!1;isVisible5=!1;isVisible6=!1;isVisible7=!1;alterInfo(e){switch(e){case 1:this.ordemVisible(1),this.title="Custom Cabinets: Tailored Solutions for Your Home's Storage Needs",this.description="Transform your living space with our custom cabinet services. We design and craft high-quality, personalized cabinets that enhance both the aesthetic and functionality of any room. Whether you're looking for kitchen cabinets, bathroom vanities, or storage solutions for your living room, we ensure that every detail is meticulously planned and expertly executed. Our cabinets are built to last, using durable materials and advanced techniques to match your unique style and storage requirements.";break;case 2:this.ordemVisible(2),this.title="Elegant Decks: Build Your Outdoor Oasis",this.description="Elevate your outdoor living experience with our stunning deck designs and installations. From cozy retreats to expansive entertaining spaces, we specialize in crafting beautiful, functional decks that complement your home and lifestyle. Our team works closely with you to select the perfect materials, whether it's wood, composite, or PVC, and we ensure your deck is built to withstand the elements while adding value to your property. Enjoy summer days, barbecues, and outdoor gatherings on a deck that truly reflects your style.";break;case 3:this.ordemVisible(3),this.title="Professional Painting: Revitalize Your Space with a Fresh Coat",this.description="A fresh coat of paint can completely transform the look and feel of your home. Our expert painting services cover everything from interior rooms to exterior facades, delivering flawless finishes with attention to detail. We work with high-quality paints and materials to ensure vibrant, lasting results. Whether you're refreshing a single room or giving your entire home a new look, our professional painters deliver exceptional service, creating a clean, polished finish that enhances your home's beauty and charm.";break;case 4:this.ordemVisible(4),this.title="Durable Sidings: Protect and Beautify Your Home\u2019s Exterior",this.description="Give your home a timeless, protective upgrade with our premium siding installation services. Our team offers a wide range of siding options, including vinyl, wood, fiber cement, and more, each designed to provide durability, insulation, and curb appeal. With expert installation, your new siding will protect your home from the elements while enhancing its exterior beauty. Whether you're replacing outdated siding or adding a new look to your home, we deliver results that improve both function and style.";break;case 5:this.ordemVisible(5),this.title="Custom Stairs: Craftsmanship That Elevates Your Home",this.description="Our custom stair solutions bring both functionality and elegance to your home. We design and build stairs that suit your style and space, offering a wide range of materials including wood, metal, and glass. Whether you need a grand staircase for a spacious foyer or a sleek, modern design for a compact area, our team ensures every step is crafted with precision and care. Stairs are not just functional \u2013 they are a central feature of your home, and we make sure they make a statement.";break;case 6:this.ordemVisible(6),this.title="Windows & Doors: Enhance Your Home\u2019s Curb Appeal and Efficiency",this.description="Our window and door installation services bring both style and energy efficiency to your home. We offer a variety of beautiful, durable windows and doors to suit every architectural style, from classic wood frames to modern, energy-efficient designs. With our expert installation, your new windows and doors will improve your home\u2019s insulation, reduce energy bills, and increase its value. Whether you're replacing outdated windows, adding a statement door, or upgrading to more energy-efficient options, we deliver quality craftsmanship and exceptional results.";break;case 7:this.ordemVisible(7),this.title="Roofing Solutions: Elevate Your Home's Protection and Aesthetic Appeal",this.description="Our roofing replacement services provide a blend of durability, style, and energy efficiency to your home. We offer a wide range of high-quality roofing materials to complement every architectural style, from traditional shingles to contemporary metal roofs. With our professional installation, your new roof will enhance your home's insulation, lower energy costs, and boost its market value. Whether you're replacing an old, worn-out roof, adding a new look to your home, or upgrading to more energy-efficient roofing options, we guarantee superior craftsmanship and outstanding results.";break;default:this.title="Title",this.description="Description";break}}ordemVisible(e){switch(e){case 1:this.isVisible1=!0,this.isVisible2=!1,this.isVisible3=!1,this.isVisible4=!1,this.isVisible5=!1,this.isVisible6=!1,this.isVisible7=!1;break;case 2:this.isVisible1=!1,this.isVisible2=!0,this.isVisible3=!1,this.isVisible4=!1,this.isVisible5=!1,this.isVisible6=!1,this.isVisible7=!1;break;case 3:this.isVisible1=!1,this.isVisible2=!1,this.isVisible3=!0,this.isVisible4=!1,this.isVisible5=!1,this.isVisible6=!1,this.isVisible7=!1;break;case 4:this.isVisible1=!1,this.isVisible2=!1,this.isVisible3=!1,this.isVisible4=!0,this.isVisible5=!1,this.isVisible6=!1,this.isVisible7=!1;break;case 5:this.isVisible1=!1,this.isVisible2=!1,this.isVisible3=!1,this.isVisible4=!1,this.isVisible5=!0,this.isVisible6=!1,this.isVisible7=!1;break;case 6:this.isVisible1=!1,this.isVisible2=!1,this.isVisible3=!1,this.isVisible4=!1,this.isVisible5=!1,this.isVisible6=!0,this.isVisible7=!1;break;case 7:this.isVisible1=!1,this.isVisible2=!1,this.isVisible3=!1,this.isVisible4=!1,this.isVisible5=!1,this.isVisible6=!1,this.isVisible7=!0;break;default:this.isVisible1=!1,this.isVisible2=!1,this.isVisible3=!1,this.isVisible4=!1,this.isVisible5=!1,this.isVisible6=!1,this.isVisible7=!1;break}}scrollToSection(e,t){e.preventDefault();let i=document.getElementById(t);i&&i.scrollIntoView({behavior:"smooth"})}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=pn({type:n,selectors:[["app-info-service"]],decls:54,vars:7,consts:[["id","services-section",1,"containerService"],["name","image",3,"click"],["src","img/cabinets/three.jpg","height","400","width","300","alt","Cabinets"],[1,"content"],["class","contentInfo",4,"ngIf"],["src","img/decks/on.jpg","height","400","width","300","alt","Decks"],["src","img/paitings/three.jpg","height","400","width","300","alt","Paitings"],["src","img/sidings/nine.jpg","height","400","width","300","alt","Sidings"],["src","img/stairs/eit.jpg","height","400","width","300","alt","Stairs"],["src","img/windows-door/three.jpg","height","400","width","300","alt","Windows & Door"],["src","img/rofing/on.jpg","height","400","width","300","alt","Roofing\xA0Replace"],[1,"contentInfo"],["href","#form-section",1,"btn","btn-primary",2,"background-color","#3db1c0","border","#3db1c0",3,"click"]],template:function(t,i){t&1&&(Y(0,"div",0)(1,"h1"),he(2,"Services"),Q(),Y(3,"div")(4,"main")(5,"details",1),At("click",function(){return i.alterInfo(1)}),Y(6,"summary"),tt(7,"img",2),Q(),Y(8,"div",3)(9,"p"),he(10," Cabinets "),Q()()(),Ln(11,mj,7,2,"div",4),Y(12,"details",1),At("click",function(){return i.alterInfo(2)}),Y(13,"summary"),tt(14,"img",5),Q(),Y(15,"div",3)(16,"p"),he(17,"Decks"),Q()()(),Ln(18,gj,7,2,"div",4),Y(19,"details",1),At("click",function(){return i.alterInfo(3)}),Y(20,"summary"),tt(21,"img",6),Q(),Y(22,"div",3)(23,"p"),he(24,"Paitings"),Q()()(),Ln(25,yj,7,2,"div",4),Y(26,"details",1),At("click",function(){return i.alterInfo(4)}),Y(27,"summary"),tt(28,"img",7),Q(),Y(29,"div",3)(30,"p"),he(31," Sidings "),Q()()(),Ln(32,vj,7,2,"div",4),Y(33,"details",1),At("click",function(){return i.alterInfo(5)}),Y(34,"summary"),tt(35,"img",8),Q(),Y(36,"div",3)(37,"p"),he(38," Stairs "),Q()()(),Ln(39,_j,7,2,"div",4),Y(40,"details",1),At("click",function(){return i.alterInfo(6)}),Y(41,"summary"),tt(42,"img",9),Q(),Y(43,"div",3)(44,"p"),he(45," Windows & Door "),Q()()(),Ln(46,xj,7,2,"div",4),Y(47,"details",1),At("click",function(){return i.alterInfo(7)}),Y(48,"summary"),tt(49,"img",10),Q(),Y(50,"div",3)(51,"p"),he(52," Roofing\xA0Replace "),Q()()(),Ln(53,Ej,7,2,"div",4),Q()()()),t&2&&(et(11),Zt("ngIf",i.title!=""&&i.description!=""&&i.isVisible1),et(7),Zt("ngIf",i.title!=""&&i.description!=""&&i.isVisible2),et(7),Zt("ngIf",i.title!=""&&i.description!=""&&i.isVisible3),et(7),Zt("ngIf",i.title!=""&&i.description!=""&&i.isVisible4),et(7),Zt("ngIf",i.title!=""&&i.description!=""&&i.isVisible5),et(7),Zt("ngIf",i.title!=""&&i.description!=""&&i.isVisible6),et(7),Zt("ngIf",i.title!=""&&i.description!=""&&i.isVisible7))},dependencies:[Er,$l],styles:['.containerService[_ngcontent-%COMP%]{padding:50px 20px 100px;display:flex;background-color:#f8f9fa;flex-direction:column;justify-content:center}.containerService[_ngcontent-%COMP%] > h1[_ngcontent-%COMP%]{text-align:center;margin-bottom:50px;font-family:Bebas Neue,sans-serif}.containerService[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(2){display:flex;flex-direction:row;align-items:center;justify-content:center}.containerService[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(2) > main[_ngcontent-%COMP%]:first-child{width:100%;display:flex;gap:2rem;align-items:center;justify-content:center}.containerService[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(2) > main[_ngcontent-%COMP%]:first-child > .contentInfo[_ngcontent-%COMP%]{width:50%;height:100%;display:flex;flex-direction:column;align-items:center;justify-content:space-around;padding:20px 40px}.containerService[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(2) > main[_ngcontent-%COMP%]:first-child > .contentInfo[_ngcontent-%COMP%] > h2[_ngcontent-%COMP%]{transition:1s;font-family:Bebas Neue,sans-serif;margin-bottom:50px}.containerService[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(2) > main[_ngcontent-%COMP%]:first-child > .contentInfo[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]{transition:1s;margin-bottom:50px;font-family:sans-serif}details[_ngcontent-%COMP%]{display:flex;flex-direction:row;overflow:hidden;border-radius:3px;position:relative;height:30rem;z-index:1}details[_ngcontent-%COMP%]:hover{outline:3px #3db1c0 solid;outline-offset:3px;cursor:pointer}details[_ngcontent-%COMP%]   summary[_ngcontent-%COMP%]{width:5rem}details[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{filter:saturate(.3)}details[_ngcontent-%COMP%]:not([open]):hover   img[_ngcontent-%COMP%]{transform:scale(1.05);filter:brightness(.85)}details[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{display:flex;padding-right:5rem;height:100%;align-items:end;color:#fff}details[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-family:Bebas Neue,sans-serif;background-color:#3db1c0;border-radius:3px;color:#fff;font-size:18px;padding:5px 10px 3px;line-height:18px}summary[_ngcontent-%COMP%]::marker{content:"";opacity:0;display:none}details[_ngcontent-%COMP%]::details-content{transition:width .5s ease,opacity .5s .5s ease;content-visibility:.5s ease allow-discrete;width:0;opacity:0}details[open][_ngcontent-%COMP%]::details-content{width:300px;opacity:1}summary[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;object-fit:cover;z-index:-1;transition:all .2s ease-in}details[open][_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{filter:brightness(1)}@media screen and (max-width: 768px){.containerService[_ngcontent-%COMP%]{padding:50px 0 100px}.containerService[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(2){flex-direction:column}.containerService[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(2) > main[_ngcontent-%COMP%]:first-child{width:100%;flex-direction:column}.containerService[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(2) > main[_ngcontent-%COMP%]:first-child > .contentInfo[_ngcontent-%COMP%]{width:100%}details[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:50px}details[_ngcontent-%COMP%]{height:5rem;z-index:1}details[_ngcontent-%COMP%]   summary[_ngcontent-%COMP%]{width:20rem}details[open][_ngcontent-%COMP%]::details-content{width:100px;opacity:1}}']})};var xm=class n{scrollToSection(e,t){e.preventDefault();let i=document.getElementById(t);i&&i.scrollIntoView({behavior:"smooth"})}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=pn({type:n,selectors:[["app-navigation"]],decls:16,vars:0,consts:[[1,"navbar","navbar-expand-lg","navbar-light","bg-light"],["href","#",1,"navbar-brand"],[1,"titleLogo"],["type","button","data-toggle","collapse","data-target","#navbarNavAltMarkup","aria-controls","navbarNavAltMarkup","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["id","navbarNavAltMarkup",1,"collapse","navbar-collapse"],[1,"navbar-nav"],["href","#home-section",1,"nav-item","nav-link","active",3,"click"],["href","#services-section",1,"nav-item","nav-link","active",3,"click"],["href","#form-section",1,"nav-item","nav-link","active",3,"click"],["href","#footer-section",1,"nav-item","nav-link","active",3,"click"]],template:function(t,i){t&1&&(Y(0,"nav",0)(1,"a",1)(2,"span",2),he(3,"CL Contracting .Inc"),Q()(),Y(4,"button",3),tt(5,"span",4),Q(),Y(6,"div",5)(7,"div",6)(8,"a",7),At("click",function(s){return i.scrollToSection(s,"home-section")}),he(9,"Home"),Q(),Y(10,"a",8),At("click",function(s){return i.scrollToSection(s,"services-section")}),he(11,"Service"),Q(),Y(12,"a",9),At("click",function(s){return i.scrollToSection(s,"form-section")}),he(13,"Pricing"),Q(),Y(14,"a",10),At("click",function(s){return i.scrollToSection(s,"footer-section")}),he(15,"About"),Q()()()())},styles:[".navbar[_ngcontent-%COMP%]{padding:10px 20px;position:fixed;z-index:99;width:100%;border-bottom:1px solid rgba(0,0,0,.1490196078)}.navbar[_ngcontent-%COMP%]   .titleLogo[_ngcontent-%COMP%]{color:#3db1c0;font-family:Bebas Neue,sans-serif}"]})};var Em=class n{scrollToSection(e,t){e.preventDefault();let i=document.getElementById(t);i&&i.scrollIntoView({behavior:"smooth"})}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=pn({type:n,selectors:[["app-home-section"]],decls:8,vars:0,consts:[["id","home-section",1,"containerSection"],["href","#form-section",1,"btn","btn-primary",2,"background-color","#3db1c0","border","#3db1c0",3,"click"]],template:function(t,i){t&1&&(Y(0,"section",0)(1,"div")(2,"h1"),he(3,"CL Contracting Inc"),Q(),Y(4,"p"),he(5,"is a premier American carpentry company committed to transforming homes with expert craftsmanship and innovative design. Specializing in decking services, sidings remodeling, kitchen renovations, and home additions, we strive to create beautiful and functional spaces tailored to our clients' needs."),Q(),Y(6,"a",1),At("click",function(s){return i.scrollToSection(s,"form-section")}),he(7,"Request Free Estimate"),Q()()())},styles:['@charset "UTF-8";.containerSection[_ngcontent-%COMP%]{width:100%;height:100vh;background-image:url("./media/home-background-3HVEEHBL.jpg");background-size:cover;background-color:#63636378;background-blend-mode:hue;padding-top:50px}.containerSection[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child{position:relative;top:9.375rem;width:70%;left:2.5rem;background-color:#f8f9fa;padding:1.25rem 2.5rem;animation:_ngcontent-%COMP%_slideInFromLeft 1s ease-out;border-radius:3px}.containerSection[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child > h1[_ngcontent-%COMP%]{font-weight:700;color:#3db1c0;letter-spacing:.125rem;border-bottom:1px solid;font-family:Bebas Neue,sans-serif}.containerSection[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child > p[_ngcontent-%COMP%]{font-size:1.375rem;letter-spacing:.0625rem;color:#000;font-weight:700}.containerSection[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child > a[_ngcontent-%COMP%]{cursor:pointer}@media (max-width: 1200px){.containerSection[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child{width:80%;left:1.5rem}}@media (max-width: 992px){.containerSection[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child{width:90%;left:1rem;padding:1rem 1.5rem}.containerSection[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child > p[_ngcontent-%COMP%]{font-size:1.25rem}}@media (max-width: 768px){.containerSection[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child{width:95%;left:.5rem;padding:.75rem 1rem}.containerSection[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child > h1[_ngcontent-%COMP%]{font-size:1.5rem}.containerSection[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child > p[_ngcontent-%COMP%]{font-size:1.125rem}}@media (max-width: 576px){.containerSection[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child{width:100%;left:0;padding:.5rem .75rem}.containerSection[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child > h1[_ngcontent-%COMP%]{font-size:1.25rem}.containerSection[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child > p[_ngcontent-%COMP%]{font-size:1rem}}@keyframes _ngcontent-%COMP%_slideInFromLeft{0%{transform:translate(-100%);opacity:0}to{transform:translate(0);opacity:1}}']})};var Mj=n=>({active:n}),Na=n=>({"height.px":n});function wj(n,e){n&1&&tt(0,"li",24)}function bj(n,e){n&1&&tt(0,"li",25)}function Sj(n,e){if(n&1&&(Y(0,"div",26),tt(1,"img",27),Q()),n&2){let t=Mn();et(),Zt("ngStyle",_s(1,Na,t.isSmallScreen?400:600))}}function Tj(n,e){if(n&1&&(Y(0,"div",14),tt(1,"img",28),Q()),n&2){let t=Mn();et(),Zt("ngStyle",_s(1,Na,t.isSmallScreen?400:600))}}function Cj(n,e){if(n&1&&(Y(0,"div",14),tt(1,"img",29),Q()),n&2){let t=Mn();et(),Zt("ngStyle",_s(1,Na,t.isSmallScreen?400:600))}}var Mm=class n{isSmallScreen=!1;constructor(){}ngOnInit(){this.checkScreenSize()}onResize(e){this.checkScreenSize()}checkScreenSize(){typeof window<"u"&&(this.isSmallScreen=window.innerWidth<=750)}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=pn({type:n,selectors:[["app-carousel"]],hostBindings:function(t,i){t&1&&At("resize",function(s){return i.onResize(s)},!1,iD)},decls:30,vars:24,consts:[[1,"containerCarousel","navbar-light","bg-light"],["id","carouselExampleIndicators","data-ride","carousel",1,"carousel","slide"],[1,"carousel-indicators"],["data-target","#carouselExampleIndicators","data-slide-to","0",1,"active"],["data-target","#carouselExampleIndicators","data-slide-to","1"],["data-target","#carouselExampleIndicators","data-slide-to","2"],["data-target","#carouselExampleIndicators","data-slide-to","3",4,"ngIf"],["data-target","#carouselExampleIndicators","data-slide-to","4"],["data-target","#carouselExampleIndicators","data-slide-to","5"],["data-target","#carouselExampleIndicators","data-slide-to","6",4,"ngIf"],[1,"carousel-inner"],["class","carousel-item active",4,"ngIf"],[1,"carousel-item",3,"ngClass"],["alt","Second slide",1,"d-block","w-100","carousel-img",3,"src","ngStyle"],[1,"carousel-item"],["alt","Third slide",1,"d-block","w-100","carousel-img",3,"src","ngStyle"],["class","carousel-item",4,"ngIf"],["alt","Five slide",1,"d-block","w-100","carousel-img",3,"src","ngStyle"],["alt","Six slide",1,"d-block","w-100","carousel-img",3,"src","ngStyle"],["href","#carouselExampleIndicators","role","button","data-slide","prev",1,"carousel-control-prev"],["aria-hidden","true",1,"carousel-control-prev-icon"],[1,"sr-only"],["href","#carouselExampleIndicators","role","button","data-slide","next",1,"carousel-control-next"],["aria-hidden","true",1,"carousel-control-next-icon"],["data-target","#carouselExampleIndicators","data-slide-to","3"],["data-target","#carouselExampleIndicators","data-slide-to","6"],[1,"carousel-item","active"],["src","img/cabinets/carousel/cabinets-two.jpg","alt","First slide",1,"d-block","w-100","carousel-img",3,"ngStyle"],["src","img/rofing/carousel/rofing-two.jpg","alt","Four slide",1,"d-block","w-100","carousel-img",3,"ngStyle"],["src","img/windows-door/carousel/windows-door-three.jpg","alt","Six slide",1,"d-block","w-100","carousel-img",3,"ngStyle"]],template:function(t,i){t&1&&(Y(0,"div",0)(1,"div",1)(2,"ol",2),tt(3,"li",3)(4,"li",4)(5,"li",5),Ln(6,wj,1,0,"li",6),tt(7,"li",7)(8,"li",8),Ln(9,bj,1,0,"li",9),Q(),Y(10,"div",10),Ln(11,Sj,2,3,"div",11),Y(12,"div",12),tt(13,"img",13),Q(),Y(14,"div",14),tt(15,"img",15),Q(),Ln(16,Tj,2,3,"div",16),Y(17,"div",14),tt(18,"img",17),Q(),Y(19,"div",14),tt(20,"img",18),Q(),Ln(21,Cj,2,3,"div",16),Q(),Y(22,"a",19),tt(23,"span",20),Y(24,"span",21),he(25,"Previous"),Q()(),Y(26,"a",22),tt(27,"span",23),Y(28,"span",21),he(29,"Next"),Q()()()()),t&2&&(et(6),Zt("ngIf",i.isSmallScreen),et(3),Zt("ngIf",!i.isSmallScreen),et(2),Zt("ngIf",i.isSmallScreen),et(),Zt("ngClass",_s(14,Mj,!i.isSmallScreen)),et(),Zt("src",i.isSmallScreen?"img/decks/carousel/decks-two.jpg":"img/decks/carousel/deck-four.jpg",Qu)("ngStyle",_s(16,Na,i.isSmallScreen?400:600)),et(2),Zt("src",i.isSmallScreen?"img/paitings/carousel/paintings-two.jpg":"img/paitings/carousel/paintings-four.jpg",Qu)("ngStyle",_s(18,Na,i.isSmallScreen?400:600)),et(),Zt("ngIf",i.isSmallScreen),et(2),Zt("src",i.isSmallScreen?"img/sidings/carousel/sidings-two.jpg":"img/sidings/carousel/sidings-four.jpg",Qu)("ngStyle",_s(20,Na,i.isSmallScreen?400:600)),et(2),Zt("src",i.isSmallScreen?"img/stairs/carousel/stairs-two.jpg":"img/stairs/carousel/stairs-four.jpg",Qu)("ngStyle",_s(22,Na,i.isSmallScreen?400:600)),et(),Zt("ngIf",!i.isSmallScreen))},dependencies:[Er,I1,$l,D1],encapsulation:2})};var XR=(()=>{class n{_renderer;_elementRef;onChange=t=>{};onTouched=()=>{};constructor(t,i){this._renderer=t,this._elementRef=i}setProperty(t,i){this._renderer.setProperty(this._elementRef.nativeElement,t,i)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static \u0275fac=function(i){return new(i||n)(xt(Ji),xt(hi))};static \u0275dir=En({type:n})}return n})(),Qx=(()=>{class n extends XR{static \u0275fac=(()=>{let t;return function(r){return(t||(t=va(n)))(r||n)}})();static \u0275dir=En({type:n,features:[jr]})}return n})(),Dm=new Le("");var Aj={provide:Dm,useExisting:mo(()=>Rm),multi:!0};function Ij(){let n=Es()?Es().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var Dj=new Le(""),Rm=(()=>{class n extends XR{_compositionMode;_composing=!1;constructor(t,i,r){super(t,i),this._compositionMode=r,this._compositionMode==null&&(this._compositionMode=!Ij())}writeValue(t){let i=t??"";this.setProperty("value",i)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static \u0275fac=function(i){return new(i||n)(xt(Ji),xt(hi),xt(Dj,8))};static \u0275dir=En({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(i,r){i&1&&At("input",function(o){return r._handleInput(o.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(o){return r._compositionEnd(o.target.value)})},standalone:!1,features:[Wl([Aj]),jr]})}return n})();var qR=new Le(""),YR=new Le("");function ZR(n){return n!=null}function KR(n){return Ma(n)?ln(n):n}function JR(n){let e={};return n.forEach(t=>{e=t!=null?me(me({},e),t):e}),Object.keys(e).length===0?null:e}function QR(n,e){return e.map(t=>t(n))}function Rj(n){return!n.validate}function eP(n){return n.map(e=>Rj(e)?e:t=>e.validate(t))}function Pj(n){if(!n)return null;let e=n.filter(ZR);return e.length==0?null:function(t){return JR(QR(t,e))}}function eE(n){return n!=null?Pj(eP(n)):null}function Nj(n){if(!n)return null;let e=n.filter(ZR);return e.length==0?null:function(t){let i=QR(t,e).map(KR);return Dv(i).pipe(_t(JR))}}function tE(n){return n!=null?Nj(eP(n)):null}function BR(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function Oj(n){return n._rawValidators}function Lj(n){return n._rawAsyncValidators}function Jx(n){return n?Array.isArray(n)?n:[n]:[]}function bm(n,e){return Array.isArray(n)?n.includes(e):n===e}function VR(n,e){let t=Jx(e);return Jx(n).forEach(r=>{bm(t,r)||t.push(r)}),t}function zR(n,e){return Jx(e).filter(t=>!bm(n,t))}var Sm=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=eE(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=tE(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},sc=class extends Sm{name;get formDirective(){return null}get path(){return null}},Nd=class extends Sm{_parent=null;name=null;valueAccessor=null},Tm=class{_cd;constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},Fj={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},ore=vt(me({},Fj),{"[class.ng-submitted]":"isSubmitted"}),tP=(()=>{class n extends Tm{constructor(t){super(t)}static \u0275fac=function(i){return new(i||n)(xt(Nd,2))};static \u0275dir=En({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(i,r){i&2&&$p("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},standalone:!1,features:[jr]})}return n})(),nP=(()=>{class n extends Tm{constructor(t){super(t)}static \u0275fac=function(i){return new(i||n)(xt(sc,10))};static \u0275dir=En({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(i,r){i&2&&$p("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},standalone:!1,features:[jr]})}return n})();var Ad="VALID",wm="INVALID",ic="PENDING",Id="DISABLED",oc=class{},Cm=class extends oc{value;source;constructor(e,t){super(),this.value=e,this.source=t}},Rd=class extends oc{pristine;source;constructor(e,t){super(),this.pristine=e,this.source=t}},Pd=class extends oc{touched;source;constructor(e,t){super(),this.touched=e,this.source=t}},rc=class extends oc{status;source;constructor(e,t){super(),this.status=e,this.source=t}};function iP(n){return(Pm(n)?n.validators:n)||null}function kj(n){return Array.isArray(n)?eE(n):n||null}function rP(n,e){return(Pm(e)?e.asyncValidators:n)||null}function Uj(n){return Array.isArray(n)?tE(n):n||null}function Pm(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function Bj(n,e,t){let i=n.controls;if(!(e?Object.keys(i):i).length)throw new Re(1e3,"");if(!i[t])throw new Re(1001,"")}function Vj(n,e,t){n._forEachChild((i,r)=>{if(t[r]===void 0)throw new Re(1002,"")})}var Am=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(e,t){this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return xs(this.statusReactive)}set status(e){xs(()=>this.statusReactive.set(e))}_status=id(()=>this.statusReactive());statusReactive=ed(void 0);get valid(){return this.status===Ad}get invalid(){return this.status===wm}get pending(){return this.status==ic}get disabled(){return this.status===Id}get enabled(){return this.status!==Id}errors;get pristine(){return xs(this.pristineReactive)}set pristine(e){xs(()=>this.pristineReactive.set(e))}_pristine=id(()=>this.pristineReactive());pristineReactive=ed(!0);get dirty(){return!this.pristine}get touched(){return xs(this.touchedReactive)}set touched(e){xs(()=>this.touchedReactive.set(e))}_touched=id(()=>this.touchedReactive());touchedReactive=ed(!1);get untouched(){return!this.touched}_events=new vn;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(VR(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(VR(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(zR(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(zR(e,this._rawAsyncValidators))}hasValidator(e){return bm(this._rawValidators,e)}hasAsyncValidator(e){return bm(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let i=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(vt(me({},e),{sourceControl:i})),t&&e.emitEvent!==!1&&this._events.next(new Pd(!0,i))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let i=e.sourceControl??this;this._forEachChild(r=>{r.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:i})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,i),t&&e.emitEvent!==!1&&this._events.next(new Pd(!1,i))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let i=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(vt(me({},e),{sourceControl:i})),t&&e.emitEvent!==!1&&this._events.next(new Rd(!1,i))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let i=e.sourceControl??this;this._forEachChild(r=>{r.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,i),t&&e.emitEvent!==!1&&this._events.next(new Rd(!0,i))}markAsPending(e={}){this.status=ic;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new rc(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(vt(me({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Id,this.errors=null,this._forEachChild(r=>{r.disable(vt(me({},e),{onlySelf:!0}))}),this._updateValue();let i=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Cm(this.value,i)),this._events.next(new rc(this.status,i)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(vt(me({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Ad,this._forEachChild(i=>{i.enable(vt(me({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(vt(me({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let i=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Ad||this.status===ic)&&this._runAsyncValidator(i,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Cm(this.value,t)),this._events.next(new rc(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(vt(me({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Id:Ad}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=ic,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1};let i=KR(this.asyncValidator(this));this._asyncValidationSubscription=i.subscribe(r=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(r,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((i,r)=>i&&i._find(r),this)}getError(e,t){let i=t?this.get(t):this;return i&&i.errors?i.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,i){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||i)&&this._events.next(new rc(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,i)}_initObservables(){this.valueChanges=new Tn,this.statusChanges=new Tn}_calculateStatus(){return this._allControlsDisabled()?Id:this.errors?wm:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(ic)?ic:this._anyControlsHaveStatus(wm)?wm:Ad}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let i=!this._anyControlsDirty(),r=this.pristine!==i;this.pristine=i,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),r&&this._events.next(new Rd(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new Pd(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_onDisabledChange=[];_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Pm(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=kj(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=Uj(this._rawAsyncValidators)}},Im=class extends Am{constructor(e,t,i){super(iP(t),rP(i,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,i={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,i={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){Vj(this,!0,e),Object.keys(e).forEach(i=>{Bj(this,!0,i),this.controls[i].setValue(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(Object.keys(e).forEach(i=>{let r=this.controls[i];r&&r.patchValue(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((i,r)=>{i.reset(e?e[r]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,i)=>(e[i]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,i)=>i._syncPendingControls()?!0:t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{let i=this.controls[t];i&&e(i,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[t,i]of Object.entries(this.controls))if(this.contains(t)&&e(i))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(t,i,r)=>((i.enabled||this.disabled)&&(t[r]=i.value),t))}_reduceChildren(e,t){let i=e;return this._forEachChild((r,s)=>{i=t(i,r,s)}),i}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var nE=new Le("CallSetDisabledState",{providedIn:"root",factory:()=>iE}),iE="always";function zj(n,e){return[...e.path,n]}function sP(n,e,t=iE){oP(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),Gj(n,e),Wj(n,e),jj(n,e),Hj(n,e)}function HR(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function Hj(n,e){if(e.valueAccessor.setDisabledState){let t=i=>{e.valueAccessor.setDisabledState(i)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function oP(n,e){let t=Oj(n);e.validator!==null?n.setValidators(BR(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let i=Lj(n);e.asyncValidator!==null?n.setAsyncValidators(BR(i,e.asyncValidator)):typeof i=="function"&&n.setAsyncValidators([i]);let r=()=>n.updateValueAndValidity();HR(e._rawValidators,r),HR(e._rawAsyncValidators,r)}function Gj(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&aP(n,e)})}function jj(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&aP(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function aP(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function Wj(n,e){let t=(i,r)=>{e.valueAccessor.writeValue(i),r&&e.viewToModelUpdate(i)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function $j(n,e){n==null,oP(n,e)}function Xj(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function qj(n){return Object.getPrototypeOf(n.constructor)===Qx}function Yj(n,e){n._syncPendingControls(),e.forEach(t=>{let i=t.control;i.updateOn==="submit"&&i._pendingChange&&(t.viewToModelUpdate(i._pendingValue),i._pendingChange=!1)})}function Zj(n,e){if(!e)return null;Array.isArray(e);let t,i,r;return e.forEach(s=>{s.constructor===Rm?t=s:qj(s)?i=s:r=s}),r||i||t||null}var Kj={provide:sc,useExisting:mo(()=>rE)},Dd=Promise.resolve(),rE=(()=>{class n extends sc{callSetDisabledState;get submitted(){return xs(this.submittedReactive)}_submitted=id(()=>this.submittedReactive());submittedReactive=ed(!1);_directives=new Set;form;ngSubmit=new Tn;options;constructor(t,i,r){super(),this.callSetDisabledState=r,this.form=new Im({},eE(t),tE(i))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){Dd.then(()=>{let i=this._findContainer(t.path);t.control=i.registerControl(t.name,t.control),sP(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){Dd.then(()=>{let i=this._findContainer(t.path);i&&i.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){Dd.then(()=>{let i=this._findContainer(t.path),r=new Im({});$j(r,t),i.registerControl(t.name,r),r.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){Dd.then(()=>{let i=this._findContainer(t.path);i&&i.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,i){Dd.then(()=>{this.form.get(t.path).setValue(i)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submittedReactive.set(!0),Yj(this.form,this._directives),this.ngSubmit.emit(t),t?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submittedReactive.set(!1)}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}static \u0275fac=function(i){return new(i||n)(xt(qR,10),xt(YR,10),xt(nE,8))};static \u0275dir=En({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(i,r){i&1&&At("submit",function(o){return r.onSubmit(o)})("reset",function(){return r.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[Wl([Kj]),jr]})}return n})();function GR(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function jR(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var Jj=class extends Am{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(e=null,t,i){super(iP(t),rP(i,t)),this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Pm(t)&&(t.nonNullable||t.initialValueIsDefault)&&(jR(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(i=>i(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){GR(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){GR(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){jR(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var Qj={provide:Nd,useExisting:mo(()=>sE)},WR=Promise.resolve(),sE=(()=>{class n extends Nd{_changeDetectorRef;callSetDisabledState;control=new Jj;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new Tn;constructor(t,i,r,s,o,a){super(),this._changeDetectorRef=o,this.callSetDisabledState=a,this._parent=t,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=Zj(this,s)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){let i=t.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),Xj(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){sP(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(t){WR.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){let i=t.isDisabled.currentValue,r=i!==0&&Xp(i);WR.then(()=>{r&&!this.control.disabled?this.control.disable():!r&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?zj(t,this._parent):[t]}static \u0275fac=function(i){return new(i||n)(xt(sc,9),xt(qR,10),xt(YR,10),xt(Dm,10),xt(Ca,8),xt(nE,8))};static \u0275dir=En({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[Wl([Qj]),jr,Yu]})}return n})(),lP=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275dir=En({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""],standalone:!1})}return n})();var eW={provide:Dm,useExisting:mo(()=>Nm),multi:!0};function cP(n,e){return n==null?`${e}`:(e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function tW(n){return n.split(":")[0]}var Nm=(()=>{class n extends Qx{value;_optionMap=new Map;_idCounter=0;set compareWith(t){this._compareWith=t}_compareWith=Object.is;writeValue(t){this.value=t;let i=this._getOptionId(t),r=cP(i,t);this.setProperty("value",r)}registerOnChange(t){this.onChange=i=>{this.value=this._getOptionValue(i),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(let i of this._optionMap.keys())if(this._compareWith(this._optionMap.get(i),t))return i;return null}_getOptionValue(t){let i=tW(t);return this._optionMap.has(i)?this._optionMap.get(i):t}static \u0275fac=(()=>{let t;return function(r){return(t||(t=va(n)))(r||n)}})();static \u0275dir=En({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(i,r){i&1&&At("change",function(o){return r.onChange(o.target.value)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[Wl([eW]),jr]})}return n})(),uP=(()=>{class n{_element;_renderer;_select;id;constructor(t,i,r){this._element=t,this._renderer=i,this._select=r,this._select&&(this.id=this._select._registerOption())}set ngValue(t){this._select!=null&&(this._select._optionMap.set(this.id,t),this._setElementValue(cP(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(i){return new(i||n)(xt(hi),xt(Ji),xt(Nm,9))};static \u0275dir=En({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})(),nW={provide:Dm,useExisting:mo(()=>dP),multi:!0};function $R(n,e){return n==null?`${e}`:(typeof e=="string"&&(e=`'${e}'`),e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function iW(n){return n.split(":")[0]}var dP=(()=>{class n extends Qx{value;_optionMap=new Map;_idCounter=0;set compareWith(t){this._compareWith=t}_compareWith=Object.is;writeValue(t){this.value=t;let i;if(Array.isArray(t)){let r=t.map(s=>this._getOptionId(s));i=(s,o)=>{s._setSelected(r.indexOf(o.toString())>-1)}}else i=(r,s)=>{r._setSelected(!1)};this._optionMap.forEach(i)}registerOnChange(t){this.onChange=i=>{let r=[],s=i.selectedOptions;if(s!==void 0){let o=s;for(let a=0;a<o.length;a++){let l=o[a],c=this._getOptionValue(l.value);r.push(c)}}else{let o=i.options;for(let a=0;a<o.length;a++){let l=o[a];if(l.selected){let c=this._getOptionValue(l.value);r.push(c)}}}this.value=r,t(r)}}_registerOption(t){let i=(this._idCounter++).toString();return this._optionMap.set(i,t),i}_getOptionId(t){for(let i of this._optionMap.keys())if(this._compareWith(this._optionMap.get(i)._value,t))return i;return null}_getOptionValue(t){let i=iW(t);return this._optionMap.has(i)?this._optionMap.get(i)._value:t}static \u0275fac=(()=>{let t;return function(r){return(t||(t=va(n)))(r||n)}})();static \u0275dir=En({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(i,r){i&1&&At("change",function(o){return r.onChange(o.target)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[Wl([nW]),jr]})}return n})(),hP=(()=>{class n{_element;_renderer;_select;id;_value;constructor(t,i,r){this._element=t,this._renderer=i,this._select=r,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){this._select!=null&&(this._value=t,this._setElementValue($R(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue($R(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(i){return new(i||n)(xt(hi),xt(Ji),xt(dP,9))};static \u0275dir=En({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})();var rW=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=Ea({type:n});static \u0275inj=ga({})}return n})();var fP=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:nE,useValue:t.callSetDisabledState??iE}]}}static \u0275fac=function(i){return new(i||n)};static \u0275mod=Ea({type:n});static \u0275inj=ga({imports:[rW]})}return n})();var ah="170",Xa={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},qa={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},oW=0,pP=1,aW=2;var ON=1,lW=2,Ds=3,Yr=0,fi=1,Cr=2,Po=0,bc=1,mP=2,gP=3,yP=4,cW=5,za=100,uW=101,dW=102,hW=103,fW=104,pW=200,mW=201,gW=202,yW=203,UE=204,BE=205,vW=206,_W=207,xW=208,EW=209,MW=210,wW=211,bW=212,SW=213,TW=214,VE=0,zE=1,HE=2,Ac=3,GE=4,jE=5,WE=6,$E=7,LN=0,CW=1,AW=2,No=0,IW=1,DW=2,RW=3,PW=4,NW=5,OW=6,LW=7,vP="attached",FW="detached",_P=300,Ic=301,Dc=302,XE=303,qE=304,zg=306,ja=1e3,Rs=1001,qd=1002,ei=1003,ZM=1004;var Mc=1005;var Fi=1006,jd=1007;var Xr=1008;var Os=1009,FN=1010,kN=1011,Yd=1012,KM=1013,Wa=1014,Ir=1015,lh=1016,JM=1017,QM=1018,Rc=1020,UN=35902,BN=1021,VN=1022,nr=1023,zN=1024,HN=1025,Sc=1026,Pc=1027,ew=1028,tw=1029,GN=1030,nw=1031;var iw=1033,ag=33776,lg=33777,cg=33778,ug=33779,YE=35840,ZE=35841,KE=35842,JE=35843,QE=36196,eM=37492,tM=37496,nM=37808,iM=37809,rM=37810,sM=37811,oM=37812,aM=37813,lM=37814,cM=37815,uM=37816,dM=37817,hM=37818,fM=37819,pM=37820,mM=37821,dg=36492,gM=36494,yM=36495,jN=36283,vM=36284,_M=36285,xM=36286;var Nc=2300,Oc=2301,oE=2302,xP=2400,EP=2401,MP=2402,kW=2500;var WN=0,Hg=1,ch=2,UW=3200,BW=3201;var $N=0,VW=1,Do="",tr="srgb",Hc="srgb-linear",Gg="linear",Xt="srgb";var ac=7680;var wP=519,zW=512,HW=513,GW=514,XN=515,jW=516,WW=517,$W=518,XW=519,EM=35044;var bP="300 es",Ps=2e3,hg=2001,Zr=class{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});let i=this._listeners;i[e]===void 0&&(i[e]=[]),i[e].indexOf(t)===-1&&i[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;let i=this._listeners;return i[e]!==void 0&&i[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;let r=this._listeners[e];if(r!==void 0){let s=r.indexOf(t);s!==-1&&r.splice(s,1)}}dispatchEvent(e){if(this._listeners===void 0)return;let i=this._listeners[e.type];if(i!==void 0){e.target=this;let r=i.slice(0);for(let s=0,o=r.length;s<o;s++)r[s].call(this,e);e.target=null}}},jn=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"],SP=1234567,Wd=Math.PI/180,Lc=180/Math.PI;function Dr(){let n=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,i=Math.random()*4294967295|0;return(jn[n&255]+jn[n>>8&255]+jn[n>>16&255]+jn[n>>24&255]+"-"+jn[e&255]+jn[e>>8&255]+"-"+jn[e>>16&15|64]+jn[e>>24&255]+"-"+jn[t&63|128]+jn[t>>8&255]+"-"+jn[t>>16&255]+jn[t>>24&255]+jn[i&255]+jn[i>>8&255]+jn[i>>16&255]+jn[i>>24&255]).toLowerCase()}function kn(n,e,t){return Math.max(e,Math.min(t,n))}function rw(n,e){return(n%e+e)%e}function qW(n,e,t,i,r){return i+(n-e)*(r-i)/(t-e)}function YW(n,e,t){return n!==e?(t-n)/(e-n):0}function $d(n,e,t){return(1-t)*n+t*e}function ZW(n,e,t,i){return $d(n,e,1-Math.exp(-t*i))}function KW(n,e=1){return e-Math.abs(rw(n,e*2)-e)}function JW(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*(3-2*n))}function QW(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*n*(n*(n*6-15)+10))}function e8(n,e){return n+Math.floor(Math.random()*(e-n+1))}function t8(n,e){return n+Math.random()*(e-n)}function n8(n){return n*(.5-Math.random())}function i8(n){n!==void 0&&(SP=n);let e=SP+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function r8(n){return n*Wd}function s8(n){return n*Lc}function o8(n){return(n&n-1)===0&&n!==0}function a8(n){return Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))}function l8(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))}function c8(n,e,t,i,r){let s=Math.cos,o=Math.sin,a=s(t/2),l=o(t/2),c=s((e+i)/2),u=o((e+i)/2),d=s((e-i)/2),h=o((e-i)/2),f=s((i-e)/2),p=o((i-e)/2);switch(r){case"XYX":n.set(a*u,l*d,l*h,a*c);break;case"YZY":n.set(l*h,a*u,l*d,a*c);break;case"ZXZ":n.set(l*d,l*h,a*u,a*c);break;case"XZX":n.set(a*u,l*p,l*f,a*c);break;case"YXY":n.set(l*f,a*u,l*p,a*c);break;case"ZYZ":n.set(l*p,l*f,a*u,a*c);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+r)}}function Ar(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return n/4294967295;case Uint16Array:return n/65535;case Uint8Array:return n/255;case Int32Array:return Math.max(n/2147483647,-1);case Int16Array:return Math.max(n/32767,-1);case Int8Array:return Math.max(n/127,-1);default:throw new Error("Invalid component type.")}}function jt(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return Math.round(n*4294967295);case Uint16Array:return Math.round(n*65535);case Uint8Array:return Math.round(n*255);case Int32Array:return Math.round(n*2147483647);case Int16Array:return Math.round(n*32767);case Int8Array:return Math.round(n*127);default:throw new Error("Invalid component type.")}}var qN={DEG2RAD:Wd,RAD2DEG:Lc,generateUUID:Dr,clamp:kn,euclideanModulo:rw,mapLinear:qW,inverseLerp:YW,lerp:$d,damp:ZW,pingpong:KW,smoothstep:JW,smootherstep:QW,randInt:e8,randFloat:t8,randFloatSpread:n8,seededRandom:i8,degToRad:r8,radToDeg:s8,isPowerOfTwo:o8,ceilPowerOfTwo:a8,floorPowerOfTwo:l8,setQuaternionFromProperEuler:c8,normalize:jt,denormalize:Ar},Ye=class n{constructor(e=0,t=0){n.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){let t=this.x,i=this.y,r=e.elements;return this.x=r[0]*t+r[3]*i+r[6],this.y=r[1]*t+r[4]*i+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){let i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){let t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;let i=this.dot(e)/t;return Math.acos(kn(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){let t=this.x-e.x,i=this.y-e.y;return t*t+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){let i=Math.cos(t),r=Math.sin(t),s=this.x-e.x,o=this.y-e.y;return this.x=s*i-o*r+e.x,this.y=s*r+o*i+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}},at=class n{constructor(e,t,i,r,s,o,a,l,c){n.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,t,i,r,s,o,a,l,c)}set(e,t,i,r,s,o,a,l,c){let u=this.elements;return u[0]=e,u[1]=r,u[2]=a,u[3]=t,u[4]=s,u[5]=l,u[6]=i,u[7]=o,u[8]=c,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){let t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],this}extractBasis(e,t,i){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(e){let t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){let i=e.elements,r=t.elements,s=this.elements,o=i[0],a=i[3],l=i[6],c=i[1],u=i[4],d=i[7],h=i[2],f=i[5],p=i[8],y=r[0],g=r[3],m=r[6],x=r[1],M=r[4],v=r[7],S=r[2],T=r[5],A=r[8];return s[0]=o*y+a*x+l*S,s[3]=o*g+a*M+l*T,s[6]=o*m+a*v+l*A,s[1]=c*y+u*x+d*S,s[4]=c*g+u*M+d*T,s[7]=c*m+u*v+d*A,s[2]=h*y+f*x+p*S,s[5]=h*g+f*M+p*T,s[8]=h*m+f*v+p*A,this}multiplyScalar(e){let t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){let e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8];return t*o*u-t*a*c-i*s*u+i*a*l+r*s*c-r*o*l}invert(){let e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8],d=u*o-a*c,h=a*l-u*s,f=c*s-o*l,p=t*d+i*h+r*f;if(p===0)return this.set(0,0,0,0,0,0,0,0,0);let y=1/p;return e[0]=d*y,e[1]=(r*c-u*i)*y,e[2]=(a*i-r*o)*y,e[3]=h*y,e[4]=(u*t-r*l)*y,e[5]=(r*s-a*t)*y,e[6]=f*y,e[7]=(i*l-c*t)*y,e[8]=(o*t-i*s)*y,this}transpose(){let e,t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){let t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,i,r,s,o,a){let l=Math.cos(s),c=Math.sin(s);return this.set(i*l,i*c,-i*(l*o+c*a)+o+e,-r*c,r*l,-r*(-c*o+l*a)+a+t,0,0,1),this}scale(e,t){return this.premultiply(aE.makeScale(e,t)),this}rotate(e){return this.premultiply(aE.makeRotation(-e)),this}translate(e,t){return this.premultiply(aE.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){let t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,i,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){let t=this.elements,i=e.elements;for(let r=0;r<9;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<9;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){let i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e}clone(){return new this.constructor().fromArray(this.elements)}},aE=new at;function YN(n){for(let e=n.length-1;e>=0;--e)if(n[e]>=65535)return!0;return!1}function Zd(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}function u8(){let n=Zd("canvas");return n.style.display="block",n}var TP={};function Hd(n){n in TP||(TP[n]=!0,console.warn(n))}function d8(n,e,t){return new Promise(function(i,r){function s(){switch(n.clientWaitSync(e,n.SYNC_FLUSH_COMMANDS_BIT,0)){case n.WAIT_FAILED:r();break;case n.TIMEOUT_EXPIRED:setTimeout(s,t);break;default:i()}}setTimeout(s,t)})}function h8(n){let e=n.elements;e[2]=.5*e[2]+.5*e[3],e[6]=.5*e[6]+.5*e[7],e[10]=.5*e[10]+.5*e[11],e[14]=.5*e[14]+.5*e[15]}function f8(n){let e=n.elements;e[11]===-1?(e[10]=-e[10]-1,e[14]=-e[14]):(e[10]=-e[10],e[14]=-e[14]+1)}var Pt={enabled:!0,workingColorSpace:Hc,spaces:{},convert:function(n,e,t){return this.enabled===!1||e===t||!e||!t||(this.spaces[e].transfer===Xt&&(n.r=Ns(n.r),n.g=Ns(n.g),n.b=Ns(n.b)),this.spaces[e].primaries!==this.spaces[t].primaries&&(n.applyMatrix3(this.spaces[e].toXYZ),n.applyMatrix3(this.spaces[t].fromXYZ)),this.spaces[t].transfer===Xt&&(n.r=Tc(n.r),n.g=Tc(n.g),n.b=Tc(n.b))),n},fromWorkingColorSpace:function(n,e){return this.convert(n,this.workingColorSpace,e)},toWorkingColorSpace:function(n,e){return this.convert(n,e,this.workingColorSpace)},getPrimaries:function(n){return this.spaces[n].primaries},getTransfer:function(n){return n===Do?Gg:this.spaces[n].transfer},getLuminanceCoefficients:function(n,e=this.workingColorSpace){return n.fromArray(this.spaces[e].luminanceCoefficients)},define:function(n){Object.assign(this.spaces,n)},_getMatrix:function(n,e,t){return n.copy(this.spaces[e].toXYZ).multiply(this.spaces[t].fromXYZ)},_getDrawingBufferColorSpace:function(n){return this.spaces[n].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(n=this.workingColorSpace){return this.spaces[n].workingColorSpaceConfig.unpackColorSpace}};function Ns(n){return n<.04045?n*.0773993808:Math.pow(n*.9478672986+.0521327014,2.4)}function Tc(n){return n<.0031308?n*12.92:1.055*Math.pow(n,.41666)-.055}var CP=[.64,.33,.3,.6,.15,.06],AP=[.2126,.7152,.0722],IP=[.3127,.329],DP=new at().set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),RP=new at().set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);Pt.define({[Hc]:{primaries:CP,whitePoint:IP,transfer:Gg,toXYZ:DP,fromXYZ:RP,luminanceCoefficients:AP,workingColorSpaceConfig:{unpackColorSpace:tr},outputColorSpaceConfig:{drawingBufferColorSpace:tr}},[tr]:{primaries:CP,whitePoint:IP,transfer:Xt,toXYZ:DP,fromXYZ:RP,luminanceCoefficients:AP,outputColorSpaceConfig:{drawingBufferColorSpace:tr}}});var lc,MM=class{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{lc===void 0&&(lc=Zd("canvas")),lc.width=e.width,lc.height=e.height;let i=lc.getContext("2d");e instanceof ImageData?i.putImageData(e,0,0):i.drawImage(e,0,0,e.width,e.height),t=lc}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){let t=Zd("canvas");t.width=e.width,t.height=e.height;let i=t.getContext("2d");i.drawImage(e,0,0,e.width,e.height);let r=i.getImageData(0,0,e.width,e.height),s=r.data;for(let o=0;o<s.length;o++)s[o]=Ns(s[o]/255)*255;return i.putImageData(r,0,0),t}else if(e.data){let t=e.data.slice(0);for(let i=0;i<t.length;i++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[i]=Math.floor(Ns(t[i]/255)*255):t[i]=Ns(t[i]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}},p8=0,fg=class{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:p8++}),this.uuid=Dr(),this.data=e,this.dataReady=!0,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){let t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];let i={uuid:this.uuid,url:""},r=this.data;if(r!==null){let s;if(Array.isArray(r)){s=[];for(let o=0,a=r.length;o<a;o++)r[o].isDataTexture?s.push(lE(r[o].image)):s.push(lE(r[o]))}else s=lE(r);i.url=s}return t||(e.images[this.uuid]=i),i}};function lE(n){return typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap?MM.getDataURL(n):n.data?{data:Array.from(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}var m8=0,ar=(()=>{class n extends Zr{constructor(t=n.DEFAULT_IMAGE,i=n.DEFAULT_MAPPING,r=Rs,s=Rs,o=Fi,a=Xr,l=nr,c=Os,u=n.DEFAULT_ANISOTROPY,d=Do){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:m8++}),this.uuid=Dr(),this.name="",this.source=new fg(t),this.mipmaps=[],this.mapping=i,this.channel=0,this.wrapS=r,this.wrapT=s,this.magFilter=o,this.minFilter=a,this.anisotropy=u,this.format=l,this.internalFormat=null,this.type=c,this.offset=new Ye(0,0),this.repeat=new Ye(1,1),this.center=new Ye(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new at,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=d,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.pmremVersion=0}get image(){return this.source.data}set image(t=null){this.source.data=t}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(t){return this.name=t.name,this.source=t.source,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.channel=t.channel,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.internalFormat=t.internalFormat,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.center.copy(t.center),this.rotation=t.rotation,this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrix.copy(t.matrix),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.colorSpace=t.colorSpace,this.userData=JSON.parse(JSON.stringify(t.userData)),this.needsUpdate=!0,this}toJSON(t){let i=t===void 0||typeof t=="string";if(!i&&t.textures[this.uuid]!==void 0)return t.textures[this.uuid];let r={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(t).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(r.userData=this.userData),i||(t.textures[this.uuid]=r),r}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(t){if(this.mapping!==_P)return t;if(t.applyMatrix3(this.matrix),t.x<0||t.x>1)switch(this.wrapS){case ja:t.x=t.x-Math.floor(t.x);break;case Rs:t.x=t.x<0?0:1;break;case qd:Math.abs(Math.floor(t.x)%2)===1?t.x=Math.ceil(t.x)-t.x:t.x=t.x-Math.floor(t.x);break}if(t.y<0||t.y>1)switch(this.wrapT){case ja:t.y=t.y-Math.floor(t.y);break;case Rs:t.y=t.y<0?0:1;break;case qd:Math.abs(Math.floor(t.y)%2)===1?t.y=Math.ceil(t.y)-t.y:t.y=t.y-Math.floor(t.y);break}return this.flipY&&(t.y=1-t.y),t}set needsUpdate(t){t===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(t){t===!0&&this.pmremVersion++}}return n.DEFAULT_IMAGE=null,n.DEFAULT_MAPPING=_P,n.DEFAULT_ANISOTROPY=1,n})(),kt=class n{constructor(e=0,t=0,i=0,r=1){n.prototype.isVector4=!0,this.x=e,this.y=t,this.z=i,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,i,r){return this.x=e,this.y=t,this.z=i,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){let t=this.x,i=this.y,r=this.z,s=this.w,o=e.elements;return this.x=o[0]*t+o[4]*i+o[8]*r+o[12]*s,this.y=o[1]*t+o[5]*i+o[9]*r+o[13]*s,this.z=o[2]*t+o[6]*i+o[10]*r+o[14]*s,this.w=o[3]*t+o[7]*i+o[11]*r+o[15]*s,this}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this.w/=e.w,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);let t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,i,r,s,l=e.elements,c=l[0],u=l[4],d=l[8],h=l[1],f=l[5],p=l[9],y=l[2],g=l[6],m=l[10];if(Math.abs(u-h)<.01&&Math.abs(d-y)<.01&&Math.abs(p-g)<.01){if(Math.abs(u+h)<.1&&Math.abs(d+y)<.1&&Math.abs(p+g)<.1&&Math.abs(c+f+m-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;let M=(c+1)/2,v=(f+1)/2,S=(m+1)/2,T=(u+h)/4,A=(d+y)/4,I=(p+g)/4;return M>v&&M>S?M<.01?(i=0,r=.707106781,s=.707106781):(i=Math.sqrt(M),r=T/i,s=A/i):v>S?v<.01?(i=.707106781,r=0,s=.707106781):(r=Math.sqrt(v),i=T/r,s=I/r):S<.01?(i=.707106781,r=.707106781,s=0):(s=Math.sqrt(S),i=A/s,r=I/s),this.set(i,r,s,t),this}let x=Math.sqrt((g-p)*(g-p)+(d-y)*(d-y)+(h-u)*(h-u));return Math.abs(x)<.001&&(x=1),this.x=(g-p)/x,this.y=(d-y)/x,this.z=(h-u)/x,this.w=Math.acos((c+f+m-1)/2),this}setFromMatrixPosition(e){let t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this.w=t[15],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){let i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this.w=e.w+(t.w-e.w)*i,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}},wM=class extends Zr{constructor(e=1,t=1,i={}){super(),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new kt(0,0,e,t),this.scissorTest=!1,this.viewport=new kt(0,0,e,t);let r={width:e,height:t,depth:1};i=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:Fi,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1},i);let s=new ar(r,i.mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.colorSpace);s.flipY=!1,s.generateMipmaps=i.generateMipmaps,s.internalFormat=i.internalFormat,this.textures=[];let o=i.count;for(let a=0;a<o;a++)this.textures[a]=s.clone(),this.textures[a].isRenderTargetTexture=!0;this.depthBuffer=i.depthBuffer,this.stencilBuffer=i.stencilBuffer,this.resolveDepthBuffer=i.resolveDepthBuffer,this.resolveStencilBuffer=i.resolveStencilBuffer,this.depthTexture=i.depthTexture,this.samples=i.samples}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}setSize(e,t,i=1){if(this.width!==e||this.height!==t||this.depth!==i){this.width=e,this.height=t,this.depth=i;for(let r=0,s=this.textures.length;r<s;r++)this.textures[r].image.width=e,this.textures[r].image.height=t,this.textures[r].image.depth=i;this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let i=0,r=e.textures.length;i<r;i++)this.textures[i]=e.textures[i].clone(),this.textures[i].isRenderTargetTexture=!0;let t=Object.assign({},e.texture.image);return this.texture.source=new fg(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}},Ls=class extends wM{constructor(e=1,t=1,i={}){super(e,t,i),this.isWebGLRenderTarget=!0}},pg=class extends ar{constructor(e=null,t=1,i=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:i,depth:r},this.magFilter=ei,this.minFilter=ei,this.wrapR=Rs,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}};var bM=class extends ar{constructor(e=null,t=1,i=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:i,depth:r},this.magFilter=ei,this.minFilter=ei,this.wrapR=Rs,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}};var pi=class{constructor(e=0,t=0,i=0,r=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=i,this._w=r}static slerpFlat(e,t,i,r,s,o,a){let l=i[r+0],c=i[r+1],u=i[r+2],d=i[r+3],h=s[o+0],f=s[o+1],p=s[o+2],y=s[o+3];if(a===0){e[t+0]=l,e[t+1]=c,e[t+2]=u,e[t+3]=d;return}if(a===1){e[t+0]=h,e[t+1]=f,e[t+2]=p,e[t+3]=y;return}if(d!==y||l!==h||c!==f||u!==p){let g=1-a,m=l*h+c*f+u*p+d*y,x=m>=0?1:-1,M=1-m*m;if(M>Number.EPSILON){let S=Math.sqrt(M),T=Math.atan2(S,m*x);g=Math.sin(g*T)/S,a=Math.sin(a*T)/S}let v=a*x;if(l=l*g+h*v,c=c*g+f*v,u=u*g+p*v,d=d*g+y*v,g===1-a){let S=1/Math.sqrt(l*l+c*c+u*u+d*d);l*=S,c*=S,u*=S,d*=S}}e[t]=l,e[t+1]=c,e[t+2]=u,e[t+3]=d}static multiplyQuaternionsFlat(e,t,i,r,s,o){let a=i[r],l=i[r+1],c=i[r+2],u=i[r+3],d=s[o],h=s[o+1],f=s[o+2],p=s[o+3];return e[t]=a*p+u*d+l*f-c*h,e[t+1]=l*p+u*h+c*d-a*f,e[t+2]=c*p+u*f+a*h-l*d,e[t+3]=u*p-a*d-l*h-c*f,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,i,r){return this._x=e,this._y=t,this._z=i,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t=!0){let i=e._x,r=e._y,s=e._z,o=e._order,a=Math.cos,l=Math.sin,c=a(i/2),u=a(r/2),d=a(s/2),h=l(i/2),f=l(r/2),p=l(s/2);switch(o){case"XYZ":this._x=h*u*d+c*f*p,this._y=c*f*d-h*u*p,this._z=c*u*p+h*f*d,this._w=c*u*d-h*f*p;break;case"YXZ":this._x=h*u*d+c*f*p,this._y=c*f*d-h*u*p,this._z=c*u*p-h*f*d,this._w=c*u*d+h*f*p;break;case"ZXY":this._x=h*u*d-c*f*p,this._y=c*f*d+h*u*p,this._z=c*u*p+h*f*d,this._w=c*u*d-h*f*p;break;case"ZYX":this._x=h*u*d-c*f*p,this._y=c*f*d+h*u*p,this._z=c*u*p-h*f*d,this._w=c*u*d+h*f*p;break;case"YZX":this._x=h*u*d+c*f*p,this._y=c*f*d+h*u*p,this._z=c*u*p-h*f*d,this._w=c*u*d-h*f*p;break;case"XZY":this._x=h*u*d-c*f*p,this._y=c*f*d-h*u*p,this._z=c*u*p+h*f*d,this._w=c*u*d+h*f*p;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return t===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,t){let i=t/2,r=Math.sin(i);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(e){let t=e.elements,i=t[0],r=t[4],s=t[8],o=t[1],a=t[5],l=t[9],c=t[2],u=t[6],d=t[10],h=i+a+d;if(h>0){let f=.5/Math.sqrt(h+1);this._w=.25/f,this._x=(u-l)*f,this._y=(s-c)*f,this._z=(o-r)*f}else if(i>a&&i>d){let f=2*Math.sqrt(1+i-a-d);this._w=(u-l)/f,this._x=.25*f,this._y=(r+o)/f,this._z=(s+c)/f}else if(a>d){let f=2*Math.sqrt(1+a-i-d);this._w=(s-c)/f,this._x=(r+o)/f,this._y=.25*f,this._z=(l+u)/f}else{let f=2*Math.sqrt(1+d-i-a);this._w=(o-r)/f,this._x=(s+c)/f,this._y=(l+u)/f,this._z=.25*f}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let i=e.dot(t)+1;return i<Number.EPSILON?(i=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=i):(this._x=0,this._y=-e.z,this._z=e.y,this._w=i)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=i),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(kn(this.dot(e),-1,1)))}rotateTowards(e,t){let i=this.angleTo(e);if(i===0)return this;let r=Math.min(1,t/i);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){let i=e._x,r=e._y,s=e._z,o=e._w,a=t._x,l=t._y,c=t._z,u=t._w;return this._x=i*u+o*a+r*c-s*l,this._y=r*u+o*l+s*a-i*c,this._z=s*u+o*c+i*l-r*a,this._w=o*u-i*a-r*l-s*c,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);let i=this._x,r=this._y,s=this._z,o=this._w,a=o*e._w+i*e._x+r*e._y+s*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=o,this._x=i,this._y=r,this._z=s,this;let l=1-a*a;if(l<=Number.EPSILON){let f=1-t;return this._w=f*o+t*this._w,this._x=f*i+t*this._x,this._y=f*r+t*this._y,this._z=f*s+t*this._z,this.normalize(),this}let c=Math.sqrt(l),u=Math.atan2(c,a),d=Math.sin((1-t)*u)/c,h=Math.sin(t*u)/c;return this._w=o*d+this._w*h,this._x=i*d+this._x*h,this._y=r*d+this._y*h,this._z=s*d+this._z*h,this._onChangeCallback(),this}slerpQuaternions(e,t,i){return this.copy(e).slerp(t,i)}random(){let e=2*Math.PI*Math.random(),t=2*Math.PI*Math.random(),i=Math.random(),r=Math.sqrt(1-i),s=Math.sqrt(i);return this.set(r*Math.sin(e),r*Math.cos(e),s*Math.sin(t),s*Math.cos(t))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}},N=class n{constructor(e=0,t=0,i=0){n.prototype.isVector3=!0,this.x=e,this.y=t,this.z=i}set(e,t,i){return i===void 0&&(i=this.z),this.x=e,this.y=t,this.z=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(PP.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(PP.setFromAxisAngle(e,t))}applyMatrix3(e){let t=this.x,i=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[3]*i+s[6]*r,this.y=s[1]*t+s[4]*i+s[7]*r,this.z=s[2]*t+s[5]*i+s[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){let t=this.x,i=this.y,r=this.z,s=e.elements,o=1/(s[3]*t+s[7]*i+s[11]*r+s[15]);return this.x=(s[0]*t+s[4]*i+s[8]*r+s[12])*o,this.y=(s[1]*t+s[5]*i+s[9]*r+s[13])*o,this.z=(s[2]*t+s[6]*i+s[10]*r+s[14])*o,this}applyQuaternion(e){let t=this.x,i=this.y,r=this.z,s=e.x,o=e.y,a=e.z,l=e.w,c=2*(o*r-a*i),u=2*(a*t-s*r),d=2*(s*i-o*t);return this.x=t+l*c+o*d-a*u,this.y=i+l*u+a*c-s*d,this.z=r+l*d+s*u-o*c,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){let t=this.x,i=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[4]*i+s[8]*r,this.y=s[1]*t+s[5]*i+s[9]*r,this.z=s[2]*t+s[6]*i+s[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){let i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){let i=e.x,r=e.y,s=e.z,o=t.x,a=t.y,l=t.z;return this.x=r*l-s*a,this.y=s*o-i*l,this.z=i*a-r*o,this}projectOnVector(e){let t=e.lengthSq();if(t===0)return this.set(0,0,0);let i=e.dot(this)/t;return this.copy(e).multiplyScalar(i)}projectOnPlane(e){return cE.copy(this).projectOnVector(e),this.sub(cE)}reflect(e){return this.sub(cE.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){let t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;let i=this.dot(e)/t;return Math.acos(kn(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){let t=this.x-e.x,i=this.y-e.y,r=this.z-e.z;return t*t+i*i+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,i){let r=Math.sin(t)*e;return this.x=r*Math.sin(i),this.y=Math.cos(t)*e,this.z=r*Math.cos(i),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,i){return this.x=e*Math.sin(t),this.y=i,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){let t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){let t=this.setFromMatrixColumn(e,0).length(),i=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=i,this.z=r,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){let e=Math.random()*Math.PI*2,t=Math.random()*2-1,i=Math.sqrt(1-t*t);return this.x=i*Math.cos(e),this.y=t,this.z=i*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}},cE=new N,PP=new pi,rr=class{constructor(e=new N(1/0,1/0,1/0),t=new N(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t+=3)this.expandByPoint(wr.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,i=e.count;t<i;t++)this.expandByPoint(wr.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){let i=wr.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);let i=e.geometry;if(i!==void 0){let s=i.getAttribute("position");if(t===!0&&s!==void 0&&e.isInstancedMesh!==!0)for(let o=0,a=s.count;o<a;o++)e.isMesh===!0?e.getVertexPosition(o,wr):wr.fromBufferAttribute(s,o),wr.applyMatrix4(e.matrixWorld),this.expandByPoint(wr);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),Om.copy(e.boundingBox)):(i.boundingBox===null&&i.computeBoundingBox(),Om.copy(i.boundingBox)),Om.applyMatrix4(e.matrixWorld),this.union(Om)}let r=e.children;for(let s=0,o=r.length;s<o;s++)this.expandByObject(r[s],t);return this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y&&e.z>=this.min.z&&e.z<=this.max.z}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y&&e.max.z>=this.min.z&&e.min.z<=this.max.z}intersectsSphere(e){return this.clampPoint(e.center,wr),wr.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,i;return e.normal.x>0?(t=e.normal.x*this.min.x,i=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,i=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,i+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,i+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,i+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,i+=e.normal.z*this.min.z),t<=-e.constant&&i>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(Od),Lm.subVectors(this.max,Od),cc.subVectors(e.a,Od),uc.subVectors(e.b,Od),dc.subVectors(e.c,Od),bo.subVectors(uc,cc),So.subVectors(dc,uc),Oa.subVectors(cc,dc);let t=[0,-bo.z,bo.y,0,-So.z,So.y,0,-Oa.z,Oa.y,bo.z,0,-bo.x,So.z,0,-So.x,Oa.z,0,-Oa.x,-bo.y,bo.x,0,-So.y,So.x,0,-Oa.y,Oa.x,0];return!uE(t,cc,uc,dc,Lm)||(t=[1,0,0,0,1,0,0,0,1],!uE(t,cc,uc,dc,Lm))?!1:(Fm.crossVectors(bo,So),t=[Fm.x,Fm.y,Fm.z],uE(t,cc,uc,dc,Lm))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,wr).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(wr).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(bs[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),bs[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),bs[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),bs[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),bs[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),bs[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),bs[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),bs[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(bs),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}},bs=[new N,new N,new N,new N,new N,new N,new N,new N],wr=new N,Om=new rr,cc=new N,uc=new N,dc=new N,bo=new N,So=new N,Oa=new N,Od=new N,Lm=new N,Fm=new N,La=new N;function uE(n,e,t,i,r){for(let s=0,o=n.length-3;s<=o;s+=3){La.fromArray(n,s);let a=r.x*Math.abs(La.x)+r.y*Math.abs(La.y)+r.z*Math.abs(La.z),l=e.dot(La),c=t.dot(La),u=i.dot(La);if(Math.max(-Math.max(l,c,u),Math.min(l,c,u))>a)return!1}return!0}var g8=new rr,Ld=new N,dE=new N,ki=class{constructor(e=new N,t=-1){this.isSphere=!0,this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){let i=this.center;t!==void 0?i.copy(t):g8.setFromPoints(e).getCenter(i);let r=0;for(let s=0,o=e.length;s<o;s++)r=Math.max(r,i.distanceToSquared(e[s]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){let t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){let i=this.center.distanceToSquared(e);return t.copy(e),i>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;Ld.subVectors(e,this.center);let t=Ld.lengthSq();if(t>this.radius*this.radius){let i=Math.sqrt(t),r=(i-this.radius)*.5;this.center.addScaledVector(Ld,r/i),this.radius+=r}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(dE.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(Ld.copy(e.center).add(dE)),this.expandByPoint(Ld.copy(e.center).sub(dE))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}},Ss=new N,hE=new N,km=new N,To=new N,fE=new N,Um=new N,pE=new N,Oo=class{constructor(e=new N,t=new N(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Ss)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);let i=t.dot(this.direction);return i<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,i)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){let t=Ss.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(Ss.copy(this.origin).addScaledVector(this.direction,t),Ss.distanceToSquared(e))}distanceSqToSegment(e,t,i,r){hE.copy(e).add(t).multiplyScalar(.5),km.copy(t).sub(e).normalize(),To.copy(this.origin).sub(hE);let s=e.distanceTo(t)*.5,o=-this.direction.dot(km),a=To.dot(this.direction),l=-To.dot(km),c=To.lengthSq(),u=Math.abs(1-o*o),d,h,f,p;if(u>0)if(d=o*l-a,h=o*a-l,p=s*u,d>=0)if(h>=-p)if(h<=p){let y=1/u;d*=y,h*=y,f=d*(d+o*h+2*a)+h*(o*d+h+2*l)+c}else h=s,d=Math.max(0,-(o*h+a)),f=-d*d+h*(h+2*l)+c;else h=-s,d=Math.max(0,-(o*h+a)),f=-d*d+h*(h+2*l)+c;else h<=-p?(d=Math.max(0,-(-o*s+a)),h=d>0?-s:Math.min(Math.max(-s,-l),s),f=-d*d+h*(h+2*l)+c):h<=p?(d=0,h=Math.min(Math.max(-s,-l),s),f=h*(h+2*l)+c):(d=Math.max(0,-(o*s+a)),h=d>0?s:Math.min(Math.max(-s,-l),s),f=-d*d+h*(h+2*l)+c);else h=o>0?-s:s,d=Math.max(0,-(o*h+a)),f=-d*d+h*(h+2*l)+c;return i&&i.copy(this.origin).addScaledVector(this.direction,d),r&&r.copy(hE).addScaledVector(km,h),f}intersectSphere(e,t){Ss.subVectors(e.center,this.origin);let i=Ss.dot(this.direction),r=Ss.dot(Ss)-i*i,s=e.radius*e.radius;if(r>s)return null;let o=Math.sqrt(s-r),a=i-o,l=i+o;return l<0?null:a<0?this.at(l,t):this.at(a,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){let t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;let i=-(this.origin.dot(e.normal)+e.constant)/t;return i>=0?i:null}intersectPlane(e,t){let i=this.distanceToPlane(e);return i===null?null:this.at(i,t)}intersectsPlane(e){let t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let i,r,s,o,a,l,c=1/this.direction.x,u=1/this.direction.y,d=1/this.direction.z,h=this.origin;return c>=0?(i=(e.min.x-h.x)*c,r=(e.max.x-h.x)*c):(i=(e.max.x-h.x)*c,r=(e.min.x-h.x)*c),u>=0?(s=(e.min.y-h.y)*u,o=(e.max.y-h.y)*u):(s=(e.max.y-h.y)*u,o=(e.min.y-h.y)*u),i>o||s>r||((s>i||isNaN(i))&&(i=s),(o<r||isNaN(r))&&(r=o),d>=0?(a=(e.min.z-h.z)*d,l=(e.max.z-h.z)*d):(a=(e.max.z-h.z)*d,l=(e.min.z-h.z)*d),i>l||a>r)||((a>i||i!==i)&&(i=a),(l<r||r!==r)&&(r=l),r<0)?null:this.at(i>=0?i:r,t)}intersectsBox(e){return this.intersectBox(e,Ss)!==null}intersectTriangle(e,t,i,r,s){fE.subVectors(t,e),Um.subVectors(i,e),pE.crossVectors(fE,Um);let o=this.direction.dot(pE),a;if(o>0){if(r)return null;a=1}else if(o<0)a=-1,o=-o;else return null;To.subVectors(this.origin,e);let l=a*this.direction.dot(Um.crossVectors(To,Um));if(l<0)return null;let c=a*this.direction.dot(fE.cross(To));if(c<0||l+c>o)return null;let u=-a*To.dot(pE);return u<0?null:this.at(u/o,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}},lt=class n{constructor(e,t,i,r,s,o,a,l,c,u,d,h,f,p,y,g){n.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,t,i,r,s,o,a,l,c,u,d,h,f,p,y,g)}set(e,t,i,r,s,o,a,l,c,u,d,h,f,p,y,g){let m=this.elements;return m[0]=e,m[4]=t,m[8]=i,m[12]=r,m[1]=s,m[5]=o,m[9]=a,m[13]=l,m[2]=c,m[6]=u,m[10]=d,m[14]=h,m[3]=f,m[7]=p,m[11]=y,m[15]=g,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new n().fromArray(this.elements)}copy(e){let t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],t[9]=i[9],t[10]=i[10],t[11]=i[11],t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15],this}copyPosition(e){let t=this.elements,i=e.elements;return t[12]=i[12],t[13]=i[13],t[14]=i[14],this}setFromMatrix3(e){let t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,i){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(e,t,i){return this.set(e.x,t.x,i.x,0,e.y,t.y,i.y,0,e.z,t.z,i.z,0,0,0,0,1),this}extractRotation(e){let t=this.elements,i=e.elements,r=1/hc.setFromMatrixColumn(e,0).length(),s=1/hc.setFromMatrixColumn(e,1).length(),o=1/hc.setFromMatrixColumn(e,2).length();return t[0]=i[0]*r,t[1]=i[1]*r,t[2]=i[2]*r,t[3]=0,t[4]=i[4]*s,t[5]=i[5]*s,t[6]=i[6]*s,t[7]=0,t[8]=i[8]*o,t[9]=i[9]*o,t[10]=i[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){let t=this.elements,i=e.x,r=e.y,s=e.z,o=Math.cos(i),a=Math.sin(i),l=Math.cos(r),c=Math.sin(r),u=Math.cos(s),d=Math.sin(s);if(e.order==="XYZ"){let h=o*u,f=o*d,p=a*u,y=a*d;t[0]=l*u,t[4]=-l*d,t[8]=c,t[1]=f+p*c,t[5]=h-y*c,t[9]=-a*l,t[2]=y-h*c,t[6]=p+f*c,t[10]=o*l}else if(e.order==="YXZ"){let h=l*u,f=l*d,p=c*u,y=c*d;t[0]=h+y*a,t[4]=p*a-f,t[8]=o*c,t[1]=o*d,t[5]=o*u,t[9]=-a,t[2]=f*a-p,t[6]=y+h*a,t[10]=o*l}else if(e.order==="ZXY"){let h=l*u,f=l*d,p=c*u,y=c*d;t[0]=h-y*a,t[4]=-o*d,t[8]=p+f*a,t[1]=f+p*a,t[5]=o*u,t[9]=y-h*a,t[2]=-o*c,t[6]=a,t[10]=o*l}else if(e.order==="ZYX"){let h=o*u,f=o*d,p=a*u,y=a*d;t[0]=l*u,t[4]=p*c-f,t[8]=h*c+y,t[1]=l*d,t[5]=y*c+h,t[9]=f*c-p,t[2]=-c,t[6]=a*l,t[10]=o*l}else if(e.order==="YZX"){let h=o*l,f=o*c,p=a*l,y=a*c;t[0]=l*u,t[4]=y-h*d,t[8]=p*d+f,t[1]=d,t[5]=o*u,t[9]=-a*u,t[2]=-c*u,t[6]=f*d+p,t[10]=h-y*d}else if(e.order==="XZY"){let h=o*l,f=o*c,p=a*l,y=a*c;t[0]=l*u,t[4]=-d,t[8]=c*u,t[1]=h*d+y,t[5]=o*u,t[9]=f*d-p,t[2]=p*d-f,t[6]=a*u,t[10]=y*d+h}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(y8,e,v8)}lookAt(e,t,i){let r=this.elements;return Oi.subVectors(e,t),Oi.lengthSq()===0&&(Oi.z=1),Oi.normalize(),Co.crossVectors(i,Oi),Co.lengthSq()===0&&(Math.abs(i.z)===1?Oi.x+=1e-4:Oi.z+=1e-4,Oi.normalize(),Co.crossVectors(i,Oi)),Co.normalize(),Bm.crossVectors(Oi,Co),r[0]=Co.x,r[4]=Bm.x,r[8]=Oi.x,r[1]=Co.y,r[5]=Bm.y,r[9]=Oi.y,r[2]=Co.z,r[6]=Bm.z,r[10]=Oi.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){let i=e.elements,r=t.elements,s=this.elements,o=i[0],a=i[4],l=i[8],c=i[12],u=i[1],d=i[5],h=i[9],f=i[13],p=i[2],y=i[6],g=i[10],m=i[14],x=i[3],M=i[7],v=i[11],S=i[15],T=r[0],A=r[4],I=r[8],w=r[12],_=r[1],D=r[5],U=r[9],L=r[13],W=r[2],z=r[6],$=r[10],G=r[14],V=r[3],se=r[7],ie=r[11],ce=r[15];return s[0]=o*T+a*_+l*W+c*V,s[4]=o*A+a*D+l*z+c*se,s[8]=o*I+a*U+l*$+c*ie,s[12]=o*w+a*L+l*G+c*ce,s[1]=u*T+d*_+h*W+f*V,s[5]=u*A+d*D+h*z+f*se,s[9]=u*I+d*U+h*$+f*ie,s[13]=u*w+d*L+h*G+f*ce,s[2]=p*T+y*_+g*W+m*V,s[6]=p*A+y*D+g*z+m*se,s[10]=p*I+y*U+g*$+m*ie,s[14]=p*w+y*L+g*G+m*ce,s[3]=x*T+M*_+v*W+S*V,s[7]=x*A+M*D+v*z+S*se,s[11]=x*I+M*U+v*$+S*ie,s[15]=x*w+M*L+v*G+S*ce,this}multiplyScalar(e){let t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){let e=this.elements,t=e[0],i=e[4],r=e[8],s=e[12],o=e[1],a=e[5],l=e[9],c=e[13],u=e[2],d=e[6],h=e[10],f=e[14],p=e[3],y=e[7],g=e[11],m=e[15];return p*(+s*l*d-r*c*d-s*a*h+i*c*h+r*a*f-i*l*f)+y*(+t*l*f-t*c*h+s*o*h-r*o*f+r*c*u-s*l*u)+g*(+t*c*d-t*a*f-s*o*d+i*o*f+s*a*u-i*c*u)+m*(-r*a*u-t*l*d+t*a*h+r*o*d-i*o*h+i*l*u)}transpose(){let e=this.elements,t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,i){let r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=i),this}invert(){let e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8],d=e[9],h=e[10],f=e[11],p=e[12],y=e[13],g=e[14],m=e[15],x=d*g*c-y*h*c+y*l*f-a*g*f-d*l*m+a*h*m,M=p*h*c-u*g*c-p*l*f+o*g*f+u*l*m-o*h*m,v=u*y*c-p*d*c+p*a*f-o*y*f-u*a*m+o*d*m,S=p*d*l-u*y*l-p*a*h+o*y*h+u*a*g-o*d*g,T=t*x+i*M+r*v+s*S;if(T===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);let A=1/T;return e[0]=x*A,e[1]=(y*h*s-d*g*s-y*r*f+i*g*f+d*r*m-i*h*m)*A,e[2]=(a*g*s-y*l*s+y*r*c-i*g*c-a*r*m+i*l*m)*A,e[3]=(d*l*s-a*h*s-d*r*c+i*h*c+a*r*f-i*l*f)*A,e[4]=M*A,e[5]=(u*g*s-p*h*s+p*r*f-t*g*f-u*r*m+t*h*m)*A,e[6]=(p*l*s-o*g*s-p*r*c+t*g*c+o*r*m-t*l*m)*A,e[7]=(o*h*s-u*l*s+u*r*c-t*h*c-o*r*f+t*l*f)*A,e[8]=v*A,e[9]=(p*d*s-u*y*s-p*i*f+t*y*f+u*i*m-t*d*m)*A,e[10]=(o*y*s-p*a*s+p*i*c-t*y*c-o*i*m+t*a*m)*A,e[11]=(u*a*s-o*d*s-u*i*c+t*d*c+o*i*f-t*a*f)*A,e[12]=S*A,e[13]=(u*y*r-p*d*r+p*i*h-t*y*h-u*i*g+t*d*g)*A,e[14]=(p*a*r-o*y*r-p*i*l+t*y*l+o*i*g-t*a*g)*A,e[15]=(o*d*r-u*a*r+u*i*l-t*d*l-o*i*h+t*a*h)*A,this}scale(e){let t=this.elements,i=e.x,r=e.y,s=e.z;return t[0]*=i,t[4]*=r,t[8]*=s,t[1]*=i,t[5]*=r,t[9]*=s,t[2]*=i,t[6]*=r,t[10]*=s,t[3]*=i,t[7]*=r,t[11]*=s,this}getMaxScaleOnAxis(){let e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],i=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,i,r))}makeTranslation(e,t,i){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,i,0,0,0,1),this}makeRotationX(e){let t=Math.cos(e),i=Math.sin(e);return this.set(1,0,0,0,0,t,-i,0,0,i,t,0,0,0,0,1),this}makeRotationY(e){let t=Math.cos(e),i=Math.sin(e);return this.set(t,0,i,0,0,1,0,0,-i,0,t,0,0,0,0,1),this}makeRotationZ(e){let t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,0,i,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){let i=Math.cos(t),r=Math.sin(t),s=1-i,o=e.x,a=e.y,l=e.z,c=s*o,u=s*a;return this.set(c*o+i,c*a-r*l,c*l+r*a,0,c*a+r*l,u*a+i,u*l-r*o,0,c*l-r*a,u*l+r*o,s*l*l+i,0,0,0,0,1),this}makeScale(e,t,i){return this.set(e,0,0,0,0,t,0,0,0,0,i,0,0,0,0,1),this}makeShear(e,t,i,r,s,o){return this.set(1,i,s,0,e,1,o,0,t,r,1,0,0,0,0,1),this}compose(e,t,i){let r=this.elements,s=t._x,o=t._y,a=t._z,l=t._w,c=s+s,u=o+o,d=a+a,h=s*c,f=s*u,p=s*d,y=o*u,g=o*d,m=a*d,x=l*c,M=l*u,v=l*d,S=i.x,T=i.y,A=i.z;return r[0]=(1-(y+m))*S,r[1]=(f+v)*S,r[2]=(p-M)*S,r[3]=0,r[4]=(f-v)*T,r[5]=(1-(h+m))*T,r[6]=(g+x)*T,r[7]=0,r[8]=(p+M)*A,r[9]=(g-x)*A,r[10]=(1-(h+y))*A,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,t,i){let r=this.elements,s=hc.set(r[0],r[1],r[2]).length(),o=hc.set(r[4],r[5],r[6]).length(),a=hc.set(r[8],r[9],r[10]).length();this.determinant()<0&&(s=-s),e.x=r[12],e.y=r[13],e.z=r[14],br.copy(this);let c=1/s,u=1/o,d=1/a;return br.elements[0]*=c,br.elements[1]*=c,br.elements[2]*=c,br.elements[4]*=u,br.elements[5]*=u,br.elements[6]*=u,br.elements[8]*=d,br.elements[9]*=d,br.elements[10]*=d,t.setFromRotationMatrix(br),i.x=s,i.y=o,i.z=a,this}makePerspective(e,t,i,r,s,o,a=Ps){let l=this.elements,c=2*s/(t-e),u=2*s/(i-r),d=(t+e)/(t-e),h=(i+r)/(i-r),f,p;if(a===Ps)f=-(o+s)/(o-s),p=-2*o*s/(o-s);else if(a===hg)f=-o/(o-s),p=-o*s/(o-s);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+a);return l[0]=c,l[4]=0,l[8]=d,l[12]=0,l[1]=0,l[5]=u,l[9]=h,l[13]=0,l[2]=0,l[6]=0,l[10]=f,l[14]=p,l[3]=0,l[7]=0,l[11]=-1,l[15]=0,this}makeOrthographic(e,t,i,r,s,o,a=Ps){let l=this.elements,c=1/(t-e),u=1/(i-r),d=1/(o-s),h=(t+e)*c,f=(i+r)*u,p,y;if(a===Ps)p=(o+s)*d,y=-2*d;else if(a===hg)p=s*d,y=-1*d;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+a);return l[0]=2*c,l[4]=0,l[8]=0,l[12]=-h,l[1]=0,l[5]=2*u,l[9]=0,l[13]=-f,l[2]=0,l[6]=0,l[10]=y,l[14]=-p,l[3]=0,l[7]=0,l[11]=0,l[15]=1,this}equals(e){let t=this.elements,i=e.elements;for(let r=0;r<16;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<16;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){let i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e[t+9]=i[9],e[t+10]=i[10],e[t+11]=i[11],e[t+12]=i[12],e[t+13]=i[13],e[t+14]=i[14],e[t+15]=i[15],e}},hc=new N,br=new lt,y8=new N(0,0,0),v8=new N(1,1,1),Co=new N,Bm=new N,Oi=new N,NP=new lt,OP=new pi,$a=(()=>{class n{constructor(t=0,i=0,r=0,s=n.DEFAULT_ORDER){this.isEuler=!0,this._x=t,this._y=i,this._z=r,this._order=s}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get order(){return this._order}set order(t){this._order=t,this._onChangeCallback()}set(t,i,r,s=this._order){return this._x=t,this._y=i,this._z=r,this._order=s,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this._onChangeCallback(),this}setFromRotationMatrix(t,i=this._order,r=!0){let s=t.elements,o=s[0],a=s[4],l=s[8],c=s[1],u=s[5],d=s[9],h=s[2],f=s[6],p=s[10];switch(i){case"XYZ":this._y=Math.asin(kn(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-d,p),this._z=Math.atan2(-a,o)):(this._x=Math.atan2(f,u),this._z=0);break;case"YXZ":this._x=Math.asin(-kn(d,-1,1)),Math.abs(d)<.9999999?(this._y=Math.atan2(l,p),this._z=Math.atan2(c,u)):(this._y=Math.atan2(-h,o),this._z=0);break;case"ZXY":this._x=Math.asin(kn(f,-1,1)),Math.abs(f)<.9999999?(this._y=Math.atan2(-h,p),this._z=Math.atan2(-a,u)):(this._y=0,this._z=Math.atan2(c,o));break;case"ZYX":this._y=Math.asin(-kn(h,-1,1)),Math.abs(h)<.9999999?(this._x=Math.atan2(f,p),this._z=Math.atan2(c,o)):(this._x=0,this._z=Math.atan2(-a,u));break;case"YZX":this._z=Math.asin(kn(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(-d,u),this._y=Math.atan2(-h,o)):(this._x=0,this._y=Math.atan2(l,p));break;case"XZY":this._z=Math.asin(-kn(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(f,u),this._y=Math.atan2(l,o)):(this._x=Math.atan2(-d,p),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+i)}return this._order=i,r===!0&&this._onChangeCallback(),this}setFromQuaternion(t,i,r){return NP.makeRotationFromQuaternion(t),this.setFromRotationMatrix(NP,i,r)}setFromVector3(t,i=this._order){return this.set(t.x,t.y,t.z,i)}reorder(t){return OP.setFromEuler(this),this.setFromQuaternion(OP,t)}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order}fromArray(t){return this._x=t[0],this._y=t[1],this._z=t[2],t[3]!==void 0&&(this._order=t[3]),this._onChangeCallback(),this}toArray(t=[],i=0){return t[i]=this._x,t[i+1]=this._y,t[i+2]=this._z,t[i+3]=this._order,t}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}return n.DEFAULT_ORDER="XYZ",n})(),mg=class{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}},_8=0,LP=new N,fc=new pi,Ts=new lt,Vm=new N,Fd=new N,x8=new N,E8=new pi,FP=new N(1,0,0),kP=new N(0,1,0),UP=new N(0,0,1),BP={type:"added"},M8={type:"removed"},pc={type:"childadded",child:null},mE={type:"childremoved",child:null},Un=(()=>{class n extends Zr{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:_8++}),this.uuid=Dr(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=n.DEFAULT_UP.clone();let t=new N,i=new $a,r=new pi,s=new N(1,1,1);function o(){r.setFromEuler(i,!1)}function a(){i.setFromQuaternion(r,void 0,!1)}i._onChange(o),r._onChange(a),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:t},rotation:{configurable:!0,enumerable:!0,value:i},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:s},modelViewMatrix:{value:new lt},normalMatrix:{value:new at}}),this.matrix=new lt,this.matrixWorld=new lt,this.matrixAutoUpdate=n.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=n.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new mg,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(t){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(t),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(t){return this.quaternion.premultiply(t),this}setRotationFromAxisAngle(t,i){this.quaternion.setFromAxisAngle(t,i)}setRotationFromEuler(t){this.quaternion.setFromEuler(t,!0)}setRotationFromMatrix(t){this.quaternion.setFromRotationMatrix(t)}setRotationFromQuaternion(t){this.quaternion.copy(t)}rotateOnAxis(t,i){return fc.setFromAxisAngle(t,i),this.quaternion.multiply(fc),this}rotateOnWorldAxis(t,i){return fc.setFromAxisAngle(t,i),this.quaternion.premultiply(fc),this}rotateX(t){return this.rotateOnAxis(FP,t)}rotateY(t){return this.rotateOnAxis(kP,t)}rotateZ(t){return this.rotateOnAxis(UP,t)}translateOnAxis(t,i){return LP.copy(t).applyQuaternion(this.quaternion),this.position.add(LP.multiplyScalar(i)),this}translateX(t){return this.translateOnAxis(FP,t)}translateY(t){return this.translateOnAxis(kP,t)}translateZ(t){return this.translateOnAxis(UP,t)}localToWorld(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(this.matrixWorld)}worldToLocal(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(Ts.copy(this.matrixWorld).invert())}lookAt(t,i,r){t.isVector3?Vm.copy(t):Vm.set(t,i,r);let s=this.parent;this.updateWorldMatrix(!0,!1),Fd.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Ts.lookAt(Fd,Vm,this.up):Ts.lookAt(Vm,Fd,this.up),this.quaternion.setFromRotationMatrix(Ts),s&&(Ts.extractRotation(s.matrixWorld),fc.setFromRotationMatrix(Ts),this.quaternion.premultiply(fc.invert()))}add(t){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.add(arguments[i]);return this}return t===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",t),this):(t&&t.isObject3D?(t.removeFromParent(),t.parent=this,this.children.push(t),t.dispatchEvent(BP),pc.child=t,this.dispatchEvent(pc),pc.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",t),this)}remove(t){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.remove(arguments[r]);return this}let i=this.children.indexOf(t);return i!==-1&&(t.parent=null,this.children.splice(i,1),t.dispatchEvent(M8),mE.child=t,this.dispatchEvent(mE),mE.child=null),this}removeFromParent(){let t=this.parent;return t!==null&&t.remove(this),this}clear(){return this.remove(...this.children)}attach(t){return this.updateWorldMatrix(!0,!1),Ts.copy(this.matrixWorld).invert(),t.parent!==null&&(t.parent.updateWorldMatrix(!0,!1),Ts.multiply(t.parent.matrixWorld)),t.applyMatrix4(Ts),t.removeFromParent(),t.parent=this,this.children.push(t),t.updateWorldMatrix(!1,!0),t.dispatchEvent(BP),pc.child=t,this.dispatchEvent(pc),pc.child=null,this}getObjectById(t){return this.getObjectByProperty("id",t)}getObjectByName(t){return this.getObjectByProperty("name",t)}getObjectByProperty(t,i){if(this[t]===i)return this;for(let r=0,s=this.children.length;r<s;r++){let a=this.children[r].getObjectByProperty(t,i);if(a!==void 0)return a}}getObjectsByProperty(t,i,r=[]){this[t]===i&&r.push(this);let s=this.children;for(let o=0,a=s.length;o<a;o++)s[o].getObjectsByProperty(t,i,r);return r}getWorldPosition(t){return this.updateWorldMatrix(!0,!1),t.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Fd,t,x8),t}getWorldScale(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Fd,E8,t),t}getWorldDirection(t){this.updateWorldMatrix(!0,!1);let i=this.matrixWorld.elements;return t.set(i[8],i[9],i[10]).normalize()}raycast(){}traverse(t){t(this);let i=this.children;for(let r=0,s=i.length;r<s;r++)i[r].traverse(t)}traverseVisible(t){if(this.visible===!1)return;t(this);let i=this.children;for(let r=0,s=i.length;r<s;r++)i[r].traverseVisible(t)}traverseAncestors(t){let i=this.parent;i!==null&&(t(i),i.traverseAncestors(t))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,t=!0);let i=this.children;for(let r=0,s=i.length;r<s;r++)i[r].updateMatrixWorld(t)}updateWorldMatrix(t,i){let r=this.parent;if(t===!0&&r!==null&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),i===!0){let s=this.children;for(let o=0,a=s.length;o<a;o++)s[o].updateWorldMatrix(!1,!0)}}toJSON(t){let i=t===void 0||typeof t=="string",r={};i&&(t={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},r.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});let s={};s.uuid=this.uuid,s.type=this.type,this.name!==""&&(s.name=this.name),this.castShadow===!0&&(s.castShadow=!0),this.receiveShadow===!0&&(s.receiveShadow=!0),this.visible===!1&&(s.visible=!1),this.frustumCulled===!1&&(s.frustumCulled=!1),this.renderOrder!==0&&(s.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(s.userData=this.userData),s.layers=this.layers.mask,s.matrix=this.matrix.toArray(),s.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(s.matrixAutoUpdate=!1),this.isInstancedMesh&&(s.type="InstancedMesh",s.count=this.count,s.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(s.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(s.type="BatchedMesh",s.perObjectFrustumCulled=this.perObjectFrustumCulled,s.sortObjects=this.sortObjects,s.drawRanges=this._drawRanges,s.reservedRanges=this._reservedRanges,s.visibility=this._visibility,s.active=this._active,s.bounds=this._bounds.map(l=>({boxInitialized:l.boxInitialized,boxMin:l.box.min.toArray(),boxMax:l.box.max.toArray(),sphereInitialized:l.sphereInitialized,sphereRadius:l.sphere.radius,sphereCenter:l.sphere.center.toArray()})),s.maxInstanceCount=this._maxInstanceCount,s.maxVertexCount=this._maxVertexCount,s.maxIndexCount=this._maxIndexCount,s.geometryInitialized=this._geometryInitialized,s.geometryCount=this._geometryCount,s.matricesTexture=this._matricesTexture.toJSON(t),this._colorsTexture!==null&&(s.colorsTexture=this._colorsTexture.toJSON(t)),this.boundingSphere!==null&&(s.boundingSphere={center:s.boundingSphere.center.toArray(),radius:s.boundingSphere.radius}),this.boundingBox!==null&&(s.boundingBox={min:s.boundingBox.min.toArray(),max:s.boundingBox.max.toArray()}));function o(l,c){return l[c.uuid]===void 0&&(l[c.uuid]=c.toJSON(t)),c.uuid}if(this.isScene)this.background&&(this.background.isColor?s.background=this.background.toJSON():this.background.isTexture&&(s.background=this.background.toJSON(t).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(s.environment=this.environment.toJSON(t).uuid);else if(this.isMesh||this.isLine||this.isPoints){s.geometry=o(t.geometries,this.geometry);let l=this.geometry.parameters;if(l!==void 0&&l.shapes!==void 0){let c=l.shapes;if(Array.isArray(c))for(let u=0,d=c.length;u<d;u++){let h=c[u];o(t.shapes,h)}else o(t.shapes,c)}}if(this.isSkinnedMesh&&(s.bindMode=this.bindMode,s.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(o(t.skeletons,this.skeleton),s.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){let l=[];for(let c=0,u=this.material.length;c<u;c++)l.push(o(t.materials,this.material[c]));s.material=l}else s.material=o(t.materials,this.material);if(this.children.length>0){s.children=[];for(let l=0;l<this.children.length;l++)s.children.push(this.children[l].toJSON(t).object)}if(this.animations.length>0){s.animations=[];for(let l=0;l<this.animations.length;l++){let c=this.animations[l];s.animations.push(o(t.animations,c))}}if(i){let l=a(t.geometries),c=a(t.materials),u=a(t.textures),d=a(t.images),h=a(t.shapes),f=a(t.skeletons),p=a(t.animations),y=a(t.nodes);l.length>0&&(r.geometries=l),c.length>0&&(r.materials=c),u.length>0&&(r.textures=u),d.length>0&&(r.images=d),h.length>0&&(r.shapes=h),f.length>0&&(r.skeletons=f),p.length>0&&(r.animations=p),y.length>0&&(r.nodes=y)}return r.object=s,r;function a(l){let c=[];for(let u in l){let d=l[u];delete d.metadata,c.push(d)}return c}}clone(t){return new this.constructor().copy(this,t)}copy(t,i=!0){if(this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.rotation.order=t.rotation.order,this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldAutoUpdate=t.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.animations=t.animations.slice(),this.userData=JSON.parse(JSON.stringify(t.userData)),i===!0)for(let r=0;r<t.children.length;r++){let s=t.children[r];this.add(s.clone())}return this}}return n.DEFAULT_UP=new N(0,1,0),n.DEFAULT_MATRIX_AUTO_UPDATE=!0,n.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0,n})(),Sr=new N,Cs=new N,gE=new N,As=new N,mc=new N,gc=new N,VP=new N,yE=new N,vE=new N,_E=new N,xE=new kt,EE=new kt,ME=new kt,Ha=class n{constructor(e=new N,t=new N,i=new N){this.a=e,this.b=t,this.c=i}static getNormal(e,t,i,r){r.subVectors(i,t),Sr.subVectors(e,t),r.cross(Sr);let s=r.lengthSq();return s>0?r.multiplyScalar(1/Math.sqrt(s)):r.set(0,0,0)}static getBarycoord(e,t,i,r,s){Sr.subVectors(r,t),Cs.subVectors(i,t),gE.subVectors(e,t);let o=Sr.dot(Sr),a=Sr.dot(Cs),l=Sr.dot(gE),c=Cs.dot(Cs),u=Cs.dot(gE),d=o*c-a*a;if(d===0)return s.set(0,0,0),null;let h=1/d,f=(c*l-a*u)*h,p=(o*u-a*l)*h;return s.set(1-f-p,p,f)}static containsPoint(e,t,i,r){return this.getBarycoord(e,t,i,r,As)===null?!1:As.x>=0&&As.y>=0&&As.x+As.y<=1}static getInterpolation(e,t,i,r,s,o,a,l){return this.getBarycoord(e,t,i,r,As)===null?(l.x=0,l.y=0,"z"in l&&(l.z=0),"w"in l&&(l.w=0),null):(l.setScalar(0),l.addScaledVector(s,As.x),l.addScaledVector(o,As.y),l.addScaledVector(a,As.z),l)}static getInterpolatedAttribute(e,t,i,r,s,o){return xE.setScalar(0),EE.setScalar(0),ME.setScalar(0),xE.fromBufferAttribute(e,t),EE.fromBufferAttribute(e,i),ME.fromBufferAttribute(e,r),o.setScalar(0),o.addScaledVector(xE,s.x),o.addScaledVector(EE,s.y),o.addScaledVector(ME,s.z),o}static isFrontFacing(e,t,i,r){return Sr.subVectors(i,t),Cs.subVectors(e,t),Sr.cross(Cs).dot(r)<0}set(e,t,i){return this.a.copy(e),this.b.copy(t),this.c.copy(i),this}setFromPointsAndIndices(e,t,i,r){return this.a.copy(e[t]),this.b.copy(e[i]),this.c.copy(e[r]),this}setFromAttributeAndIndices(e,t,i,r){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,i),this.c.fromBufferAttribute(e,r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Sr.subVectors(this.c,this.b),Cs.subVectors(this.a,this.b),Sr.cross(Cs).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return n.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return n.getBarycoord(e,this.a,this.b,this.c,t)}getInterpolation(e,t,i,r,s){return n.getInterpolation(e,this.a,this.b,this.c,t,i,r,s)}containsPoint(e){return n.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return n.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){let i=this.a,r=this.b,s=this.c,o,a;mc.subVectors(r,i),gc.subVectors(s,i),yE.subVectors(e,i);let l=mc.dot(yE),c=gc.dot(yE);if(l<=0&&c<=0)return t.copy(i);vE.subVectors(e,r);let u=mc.dot(vE),d=gc.dot(vE);if(u>=0&&d<=u)return t.copy(r);let h=l*d-u*c;if(h<=0&&l>=0&&u<=0)return o=l/(l-u),t.copy(i).addScaledVector(mc,o);_E.subVectors(e,s);let f=mc.dot(_E),p=gc.dot(_E);if(p>=0&&f<=p)return t.copy(s);let y=f*c-l*p;if(y<=0&&c>=0&&p<=0)return a=c/(c-p),t.copy(i).addScaledVector(gc,a);let g=u*p-f*d;if(g<=0&&d-u>=0&&f-p>=0)return VP.subVectors(s,r),a=(d-u)/(d-u+(f-p)),t.copy(r).addScaledVector(VP,a);let m=1/(g+y+h);return o=y*m,a=h*m,t.copy(i).addScaledVector(mc,o).addScaledVector(gc,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}},ZN={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Ao={h:0,s:0,l:0},zm={h:0,s:0,l:0};function wE(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*6*(2/3-t):n}var qe=class{constructor(e,t,i){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,i)}set(e,t,i){if(t===void 0&&i===void 0){let r=e;r&&r.isColor?this.copy(r):typeof r=="number"?this.setHex(r):typeof r=="string"&&this.setStyle(r)}else this.setRGB(e,t,i);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=tr){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,Pt.toWorkingColorSpace(this,t),this}setRGB(e,t,i,r=Pt.workingColorSpace){return this.r=e,this.g=t,this.b=i,Pt.toWorkingColorSpace(this,r),this}setHSL(e,t,i,r=Pt.workingColorSpace){if(e=rw(e,1),t=kn(t,0,1),i=kn(i,0,1),t===0)this.r=this.g=this.b=i;else{let s=i<=.5?i*(1+t):i+t-i*t,o=2*i-s;this.r=wE(o,s,e+1/3),this.g=wE(o,s,e),this.b=wE(o,s,e-1/3)}return Pt.toWorkingColorSpace(this,r),this}setStyle(e,t=tr){function i(s){s!==void 0&&parseFloat(s)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let r;if(r=/^(\w+)\(([^\)]*)\)/.exec(e)){let s,o=r[1],a=r[2];switch(o){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(s[4]),this.setRGB(Math.min(255,parseInt(s[1],10))/255,Math.min(255,parseInt(s[2],10))/255,Math.min(255,parseInt(s[3],10))/255,t);if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(s[4]),this.setRGB(Math.min(100,parseInt(s[1],10))/100,Math.min(100,parseInt(s[2],10))/100,Math.min(100,parseInt(s[3],10))/100,t);break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(s[4]),this.setHSL(parseFloat(s[1])/360,parseFloat(s[2])/100,parseFloat(s[3])/100,t);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(e)){let s=r[1],o=s.length;if(o===3)return this.setRGB(parseInt(s.charAt(0),16)/15,parseInt(s.charAt(1),16)/15,parseInt(s.charAt(2),16)/15,t);if(o===6)return this.setHex(parseInt(s,16),t);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=tr){let i=ZN[e.toLowerCase()];return i!==void 0?this.setHex(i,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Ns(e.r),this.g=Ns(e.g),this.b=Ns(e.b),this}copyLinearToSRGB(e){return this.r=Tc(e.r),this.g=Tc(e.g),this.b=Tc(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=tr){return Pt.fromWorkingColorSpace(Wn.copy(this),e),Math.round(kn(Wn.r*255,0,255))*65536+Math.round(kn(Wn.g*255,0,255))*256+Math.round(kn(Wn.b*255,0,255))}getHexString(e=tr){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=Pt.workingColorSpace){Pt.fromWorkingColorSpace(Wn.copy(this),t);let i=Wn.r,r=Wn.g,s=Wn.b,o=Math.max(i,r,s),a=Math.min(i,r,s),l,c,u=(a+o)/2;if(a===o)l=0,c=0;else{let d=o-a;switch(c=u<=.5?d/(o+a):d/(2-o-a),o){case i:l=(r-s)/d+(r<s?6:0);break;case r:l=(s-i)/d+2;break;case s:l=(i-r)/d+4;break}l/=6}return e.h=l,e.s=c,e.l=u,e}getRGB(e,t=Pt.workingColorSpace){return Pt.fromWorkingColorSpace(Wn.copy(this),t),e.r=Wn.r,e.g=Wn.g,e.b=Wn.b,e}getStyle(e=tr){Pt.fromWorkingColorSpace(Wn.copy(this),e);let t=Wn.r,i=Wn.g,r=Wn.b;return e!==tr?`color(${e} ${t.toFixed(3)} ${i.toFixed(3)} ${r.toFixed(3)})`:`rgb(${Math.round(t*255)},${Math.round(i*255)},${Math.round(r*255)})`}offsetHSL(e,t,i){return this.getHSL(Ao),this.setHSL(Ao.h+e,Ao.s+t,Ao.l+i)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,i){return this.r=e.r+(t.r-e.r)*i,this.g=e.g+(t.g-e.g)*i,this.b=e.b+(t.b-e.b)*i,this}lerpHSL(e,t){this.getHSL(Ao),e.getHSL(zm);let i=$d(Ao.h,zm.h,t),r=$d(Ao.s,zm.s,t),s=$d(Ao.l,zm.l,t);return this.setHSL(i,r,s),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){let t=this.r,i=this.g,r=this.b,s=e.elements;return this.r=s[0]*t+s[3]*i+s[6]*r,this.g=s[1]*t+s[4]*i+s[7]*r,this.b=s[2]*t+s[5]*i+s[8]*r,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}},Wn=new qe;qe.NAMES=ZN;var w8=0,Ui=class extends Zr{static get type(){return"Material"}get type(){return this.constructor.type}set type(e){}constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:w8++}),this.uuid=Dr(),this.name="",this.blending=bc,this.side=Yr,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=UE,this.blendDst=BE,this.blendEquation=za,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new qe(0,0,0),this.blendAlpha=0,this.depthFunc=Ac,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=wP,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=ac,this.stencilZFail=ac,this.stencilZPass=ac,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(let t in e){let i=e[t];if(i===void 0){console.warn(`THREE.Material: parameter '${t}' has value of undefined.`);continue}let r=this[t];if(r===void 0){console.warn(`THREE.Material: '${t}' is not a property of THREE.${this.type}.`);continue}r&&r.isColor?r.set(i):r&&r.isVector3&&i&&i.isVector3?r.copy(i):this[t]=i}}toJSON(e){let t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});let i={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),this.roughness!==void 0&&(i.roughness=this.roughness),this.metalness!==void 0&&(i.metalness=this.metalness),this.sheen!==void 0&&(i.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(i.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(i.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(i.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(i.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(i.shininess=this.shininess),this.clearcoat!==void 0&&(i.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.dispersion!==void 0&&(i.dispersion=this.dispersion),this.iridescence!==void 0&&(i.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(i.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(i.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(i.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(i.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(i.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(i.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(e).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(e).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(e).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(e).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(e).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(i.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(i.combine=this.combine)),this.envMapRotation!==void 0&&(i.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(i.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(i.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(i.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(i.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(i.size=this.size),this.shadowSide!==null&&(i.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(i.sizeAttenuation=this.sizeAttenuation),this.blending!==bc&&(i.blending=this.blending),this.side!==Yr&&(i.side=this.side),this.vertexColors===!0&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),this.transparent===!0&&(i.transparent=!0),this.blendSrc!==UE&&(i.blendSrc=this.blendSrc),this.blendDst!==BE&&(i.blendDst=this.blendDst),this.blendEquation!==za&&(i.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(i.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(i.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(i.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(i.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(i.blendAlpha=this.blendAlpha),this.depthFunc!==Ac&&(i.depthFunc=this.depthFunc),this.depthTest===!1&&(i.depthTest=this.depthTest),this.depthWrite===!1&&(i.depthWrite=this.depthWrite),this.colorWrite===!1&&(i.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(i.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==wP&&(i.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(i.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(i.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==ac&&(i.stencilFail=this.stencilFail),this.stencilZFail!==ac&&(i.stencilZFail=this.stencilZFail),this.stencilZPass!==ac&&(i.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(i.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(i.rotation=this.rotation),this.polygonOffset===!0&&(i.polygonOffset=!0),this.polygonOffsetFactor!==0&&(i.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(i.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(i.linewidth=this.linewidth),this.dashSize!==void 0&&(i.dashSize=this.dashSize),this.gapSize!==void 0&&(i.gapSize=this.gapSize),this.scale!==void 0&&(i.scale=this.scale),this.dithering===!0&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),this.alphaHash===!0&&(i.alphaHash=!0),this.alphaToCoverage===!0&&(i.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(i.premultipliedAlpha=!0),this.forceSinglePass===!0&&(i.forceSinglePass=!0),this.wireframe===!0&&(i.wireframe=!0),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(i.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(i.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(i.flatShading=!0),this.visible===!1&&(i.visible=!1),this.toneMapped===!1&&(i.toneMapped=!1),this.fog===!1&&(i.fog=!1),Object.keys(this.userData).length>0&&(i.userData=this.userData);function r(s){let o=[];for(let a in s){let l=s[a];delete l.metadata,o.push(l)}return o}if(t){let s=r(e.textures),o=r(e.images);s.length>0&&(i.textures=s),o.length>0&&(i.images=o)}return i}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;let t=e.clippingPlanes,i=null;if(t!==null){let r=t.length;i=new Array(r);for(let s=0;s!==r;++s)i[s]=t[s].clone()}return this.clippingPlanes=i,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}onBuild(){console.warn("Material: onBuild() has been removed.")}},Kr=class extends Ui{static get type(){return"MeshBasicMaterial"}constructor(e){super(),this.isMeshBasicMaterial=!0,this.color=new qe(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new $a,this.combine=LN,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}};var mn=new N,Hm=new Ye,wn=class{constructor(e,t,i=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=i,this.usage=EM,this.updateRanges=[],this.gpuType=Ir,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,i){e*=this.itemSize,i*=t.itemSize;for(let r=0,s=this.itemSize;r<s;r++)this.array[e+r]=t.array[i+r];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,i=this.count;t<i;t++)Hm.fromBufferAttribute(this,t),Hm.applyMatrix3(e),this.setXY(t,Hm.x,Hm.y);else if(this.itemSize===3)for(let t=0,i=this.count;t<i;t++)mn.fromBufferAttribute(this,t),mn.applyMatrix3(e),this.setXYZ(t,mn.x,mn.y,mn.z);return this}applyMatrix4(e){for(let t=0,i=this.count;t<i;t++)mn.fromBufferAttribute(this,t),mn.applyMatrix4(e),this.setXYZ(t,mn.x,mn.y,mn.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)mn.fromBufferAttribute(this,t),mn.applyNormalMatrix(e),this.setXYZ(t,mn.x,mn.y,mn.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)mn.fromBufferAttribute(this,t),mn.transformDirection(e),this.setXYZ(t,mn.x,mn.y,mn.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let i=this.array[e*this.itemSize+t];return this.normalized&&(i=Ar(i,this.array)),i}setComponent(e,t,i){return this.normalized&&(i=jt(i,this.array)),this.array[e*this.itemSize+t]=i,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=Ar(t,this.array)),t}setX(e,t){return this.normalized&&(t=jt(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=Ar(t,this.array)),t}setY(e,t){return this.normalized&&(t=jt(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=Ar(t,this.array)),t}setZ(e,t){return this.normalized&&(t=jt(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=Ar(t,this.array)),t}setW(e,t){return this.normalized&&(t=jt(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,i){return e*=this.itemSize,this.normalized&&(t=jt(t,this.array),i=jt(i,this.array)),this.array[e+0]=t,this.array[e+1]=i,this}setXYZ(e,t,i,r){return e*=this.itemSize,this.normalized&&(t=jt(t,this.array),i=jt(i,this.array),r=jt(r,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this}setXYZW(e,t,i,r,s){return e*=this.itemSize,this.normalized&&(t=jt(t,this.array),i=jt(i,this.array),r=jt(r,this.array),s=jt(s,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){let e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==EM&&(e.usage=this.usage),e}};var gg=class extends wn{constructor(e,t,i){super(new Uint16Array(e),t,i)}};var yg=class extends wn{constructor(e,t,i){super(new Uint32Array(e),t,i)}};var ir=class extends wn{constructor(e,t,i){super(new Float32Array(e),t,i)}},b8=0,er=new lt,bE=new Un,yc=new N,Li=new rr,kd=new rr,In=new N,sr=class n extends Zr{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:b8++}),this.uuid=Dr(),this.name="",this.type="BufferGeometry",this.index=null,this.indirect=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(YN(e)?yg:gg)(e,1):this.index=e,this}setIndirect(e){return this.indirect=e,this}getIndirect(){return this.indirect}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,i=0){this.groups.push({start:e,count:t,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){let t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);let i=this.attributes.normal;if(i!==void 0){let s=new at().getNormalMatrix(e);i.applyNormalMatrix(s),i.needsUpdate=!0}let r=this.attributes.tangent;return r!==void 0&&(r.transformDirection(e),r.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return er.makeRotationFromQuaternion(e),this.applyMatrix4(er),this}rotateX(e){return er.makeRotationX(e),this.applyMatrix4(er),this}rotateY(e){return er.makeRotationY(e),this.applyMatrix4(er),this}rotateZ(e){return er.makeRotationZ(e),this.applyMatrix4(er),this}translate(e,t,i){return er.makeTranslation(e,t,i),this.applyMatrix4(er),this}scale(e,t,i){return er.makeScale(e,t,i),this.applyMatrix4(er),this}lookAt(e){return bE.lookAt(e),bE.updateMatrix(),this.applyMatrix4(bE.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(yc).negate(),this.translate(yc.x,yc.y,yc.z),this}setFromPoints(e){let t=this.getAttribute("position");if(t===void 0){let i=[];for(let r=0,s=e.length;r<s;r++){let o=e[r];i.push(o.x,o.y,o.z||0)}this.setAttribute("position",new ir(i,3))}else{for(let i=0,r=t.count;i<r;i++){let s=e[i];t.setXYZ(i,s.x,s.y,s.z||0)}e.length>t.count&&console.warn("THREE.BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry."),t.needsUpdate=!0}return this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new rr);let e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new N(-1/0,-1/0,-1/0),new N(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let i=0,r=t.length;i<r;i++){let s=t[i];Li.setFromBufferAttribute(s),this.morphTargetsRelative?(In.addVectors(this.boundingBox.min,Li.min),this.boundingBox.expandByPoint(In),In.addVectors(this.boundingBox.max,Li.max),this.boundingBox.expandByPoint(In)):(this.boundingBox.expandByPoint(Li.min),this.boundingBox.expandByPoint(Li.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new ki);let e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new N,1/0);return}if(e){let i=this.boundingSphere.center;if(Li.setFromBufferAttribute(e),t)for(let s=0,o=t.length;s<o;s++){let a=t[s];kd.setFromBufferAttribute(a),this.morphTargetsRelative?(In.addVectors(Li.min,kd.min),Li.expandByPoint(In),In.addVectors(Li.max,kd.max),Li.expandByPoint(In)):(Li.expandByPoint(kd.min),Li.expandByPoint(kd.max))}Li.getCenter(i);let r=0;for(let s=0,o=e.count;s<o;s++)In.fromBufferAttribute(e,s),r=Math.max(r,i.distanceToSquared(In));if(t)for(let s=0,o=t.length;s<o;s++){let a=t[s],l=this.morphTargetsRelative;for(let c=0,u=a.count;c<u;c++)In.fromBufferAttribute(a,c),l&&(yc.fromBufferAttribute(e,c),In.add(yc)),r=Math.max(r,i.distanceToSquared(In))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){let e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}let i=t.position,r=t.normal,s=t.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new wn(new Float32Array(4*i.count),4));let o=this.getAttribute("tangent"),a=[],l=[];for(let I=0;I<i.count;I++)a[I]=new N,l[I]=new N;let c=new N,u=new N,d=new N,h=new Ye,f=new Ye,p=new Ye,y=new N,g=new N;function m(I,w,_){c.fromBufferAttribute(i,I),u.fromBufferAttribute(i,w),d.fromBufferAttribute(i,_),h.fromBufferAttribute(s,I),f.fromBufferAttribute(s,w),p.fromBufferAttribute(s,_),u.sub(c),d.sub(c),f.sub(h),p.sub(h);let D=1/(f.x*p.y-p.x*f.y);isFinite(D)&&(y.copy(u).multiplyScalar(p.y).addScaledVector(d,-f.y).multiplyScalar(D),g.copy(d).multiplyScalar(f.x).addScaledVector(u,-p.x).multiplyScalar(D),a[I].add(y),a[w].add(y),a[_].add(y),l[I].add(g),l[w].add(g),l[_].add(g))}let x=this.groups;x.length===0&&(x=[{start:0,count:e.count}]);for(let I=0,w=x.length;I<w;++I){let _=x[I],D=_.start,U=_.count;for(let L=D,W=D+U;L<W;L+=3)m(e.getX(L+0),e.getX(L+1),e.getX(L+2))}let M=new N,v=new N,S=new N,T=new N;function A(I){S.fromBufferAttribute(r,I),T.copy(S);let w=a[I];M.copy(w),M.sub(S.multiplyScalar(S.dot(w))).normalize(),v.crossVectors(T,w);let D=v.dot(l[I])<0?-1:1;o.setXYZW(I,M.x,M.y,M.z,D)}for(let I=0,w=x.length;I<w;++I){let _=x[I],D=_.start,U=_.count;for(let L=D,W=D+U;L<W;L+=3)A(e.getX(L+0)),A(e.getX(L+1)),A(e.getX(L+2))}}computeVertexNormals(){let e=this.index,t=this.getAttribute("position");if(t!==void 0){let i=this.getAttribute("normal");if(i===void 0)i=new wn(new Float32Array(t.count*3),3),this.setAttribute("normal",i);else for(let h=0,f=i.count;h<f;h++)i.setXYZ(h,0,0,0);let r=new N,s=new N,o=new N,a=new N,l=new N,c=new N,u=new N,d=new N;if(e)for(let h=0,f=e.count;h<f;h+=3){let p=e.getX(h+0),y=e.getX(h+1),g=e.getX(h+2);r.fromBufferAttribute(t,p),s.fromBufferAttribute(t,y),o.fromBufferAttribute(t,g),u.subVectors(o,s),d.subVectors(r,s),u.cross(d),a.fromBufferAttribute(i,p),l.fromBufferAttribute(i,y),c.fromBufferAttribute(i,g),a.add(u),l.add(u),c.add(u),i.setXYZ(p,a.x,a.y,a.z),i.setXYZ(y,l.x,l.y,l.z),i.setXYZ(g,c.x,c.y,c.z)}else for(let h=0,f=t.count;h<f;h+=3)r.fromBufferAttribute(t,h+0),s.fromBufferAttribute(t,h+1),o.fromBufferAttribute(t,h+2),u.subVectors(o,s),d.subVectors(r,s),u.cross(d),i.setXYZ(h+0,u.x,u.y,u.z),i.setXYZ(h+1,u.x,u.y,u.z),i.setXYZ(h+2,u.x,u.y,u.z);this.normalizeNormals(),i.needsUpdate=!0}}normalizeNormals(){let e=this.attributes.normal;for(let t=0,i=e.count;t<i;t++)In.fromBufferAttribute(e,t),In.normalize(),e.setXYZ(t,In.x,In.y,In.z)}toNonIndexed(){function e(a,l){let c=a.array,u=a.itemSize,d=a.normalized,h=new c.constructor(l.length*u),f=0,p=0;for(let y=0,g=l.length;y<g;y++){a.isInterleavedBufferAttribute?f=l[y]*a.data.stride+a.offset:f=l[y]*u;for(let m=0;m<u;m++)h[p++]=c[f++]}return new wn(h,u,d)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;let t=new n,i=this.index.array,r=this.attributes;for(let a in r){let l=r[a],c=e(l,i);t.setAttribute(a,c)}let s=this.morphAttributes;for(let a in s){let l=[],c=s[a];for(let u=0,d=c.length;u<d;u++){let h=c[u],f=e(h,i);l.push(f)}t.morphAttributes[a]=l}t.morphTargetsRelative=this.morphTargetsRelative;let o=this.groups;for(let a=0,l=o.length;a<l;a++){let c=o[a];t.addGroup(c.start,c.count,c.materialIndex)}return t}toJSON(){let e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){let l=this.parameters;for(let c in l)l[c]!==void 0&&(e[c]=l[c]);return e}e.data={attributes:{}};let t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});let i=this.attributes;for(let l in i){let c=i[l];e.data.attributes[l]=c.toJSON(e.data)}let r={},s=!1;for(let l in this.morphAttributes){let c=this.morphAttributes[l],u=[];for(let d=0,h=c.length;d<h;d++){let f=c[d];u.push(f.toJSON(e.data))}u.length>0&&(r[l]=u,s=!0)}s&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);let o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));let a=this.boundingSphere;return a!==null&&(e.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;let t={};this.name=e.name;let i=e.index;i!==null&&this.setIndex(i.clone(t));let r=e.attributes;for(let c in r){let u=r[c];this.setAttribute(c,u.clone(t))}let s=e.morphAttributes;for(let c in s){let u=[],d=s[c];for(let h=0,f=d.length;h<f;h++)u.push(d[h].clone(t));this.morphAttributes[c]=u}this.morphTargetsRelative=e.morphTargetsRelative;let o=e.groups;for(let c=0,u=o.length;c<u;c++){let d=o[c];this.addGroup(d.start,d.count,d.materialIndex)}let a=e.boundingBox;a!==null&&(this.boundingBox=a.clone());let l=e.boundingSphere;return l!==null&&(this.boundingSphere=l.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}},zP=new lt,Fa=new Oo,Gm=new ki,HP=new N,jm=new N,Wm=new N,$m=new N,SE=new N,Xm=new N,GP=new N,qm=new N,$n=class extends Un{constructor(e=new sr,t=new Kr){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){let t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){let r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){let a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}getVertexPosition(e,t){let i=this.geometry,r=i.attributes.position,s=i.morphAttributes.position,o=i.morphTargetsRelative;t.fromBufferAttribute(r,e);let a=this.morphTargetInfluences;if(s&&a){Xm.set(0,0,0);for(let l=0,c=s.length;l<c;l++){let u=a[l],d=s[l];u!==0&&(SE.fromBufferAttribute(d,e),o?Xm.addScaledVector(SE,u):Xm.addScaledVector(SE.sub(t),u))}t.add(Xm)}return t}raycast(e,t){let i=this.geometry,r=this.material,s=this.matrixWorld;r!==void 0&&(i.boundingSphere===null&&i.computeBoundingSphere(),Gm.copy(i.boundingSphere),Gm.applyMatrix4(s),Fa.copy(e.ray).recast(e.near),!(Gm.containsPoint(Fa.origin)===!1&&(Fa.intersectSphere(Gm,HP)===null||Fa.origin.distanceToSquared(HP)>(e.far-e.near)**2))&&(zP.copy(s).invert(),Fa.copy(e.ray).applyMatrix4(zP),!(i.boundingBox!==null&&Fa.intersectsBox(i.boundingBox)===!1)&&this._computeIntersections(e,t,Fa)))}_computeIntersections(e,t,i){let r,s=this.geometry,o=this.material,a=s.index,l=s.attributes.position,c=s.attributes.uv,u=s.attributes.uv1,d=s.attributes.normal,h=s.groups,f=s.drawRange;if(a!==null)if(Array.isArray(o))for(let p=0,y=h.length;p<y;p++){let g=h[p],m=o[g.materialIndex],x=Math.max(g.start,f.start),M=Math.min(a.count,Math.min(g.start+g.count,f.start+f.count));for(let v=x,S=M;v<S;v+=3){let T=a.getX(v),A=a.getX(v+1),I=a.getX(v+2);r=Ym(this,m,e,i,c,u,d,T,A,I),r&&(r.faceIndex=Math.floor(v/3),r.face.materialIndex=g.materialIndex,t.push(r))}}else{let p=Math.max(0,f.start),y=Math.min(a.count,f.start+f.count);for(let g=p,m=y;g<m;g+=3){let x=a.getX(g),M=a.getX(g+1),v=a.getX(g+2);r=Ym(this,o,e,i,c,u,d,x,M,v),r&&(r.faceIndex=Math.floor(g/3),t.push(r))}}else if(l!==void 0)if(Array.isArray(o))for(let p=0,y=h.length;p<y;p++){let g=h[p],m=o[g.materialIndex],x=Math.max(g.start,f.start),M=Math.min(l.count,Math.min(g.start+g.count,f.start+f.count));for(let v=x,S=M;v<S;v+=3){let T=v,A=v+1,I=v+2;r=Ym(this,m,e,i,c,u,d,T,A,I),r&&(r.faceIndex=Math.floor(v/3),r.face.materialIndex=g.materialIndex,t.push(r))}}else{let p=Math.max(0,f.start),y=Math.min(l.count,f.start+f.count);for(let g=p,m=y;g<m;g+=3){let x=g,M=g+1,v=g+2;r=Ym(this,o,e,i,c,u,d,x,M,v),r&&(r.faceIndex=Math.floor(g/3),t.push(r))}}}};function S8(n,e,t,i,r,s,o,a){let l;if(e.side===fi?l=i.intersectTriangle(o,s,r,!0,a):l=i.intersectTriangle(r,s,o,e.side===Yr,a),l===null)return null;qm.copy(a),qm.applyMatrix4(n.matrixWorld);let c=t.ray.origin.distanceTo(qm);return c<t.near||c>t.far?null:{distance:c,point:qm.clone(),object:n}}function Ym(n,e,t,i,r,s,o,a,l,c){n.getVertexPosition(a,jm),n.getVertexPosition(l,Wm),n.getVertexPosition(c,$m);let u=S8(n,e,t,i,jm,Wm,$m,GP);if(u){let d=new N;Ha.getBarycoord(GP,jm,Wm,$m,d),r&&(u.uv=Ha.getInterpolatedAttribute(r,a,l,c,d,new Ye)),s&&(u.uv1=Ha.getInterpolatedAttribute(s,a,l,c,d,new Ye)),o&&(u.normal=Ha.getInterpolatedAttribute(o,a,l,c,d,new N),u.normal.dot(i.direction)>0&&u.normal.multiplyScalar(-1));let h={a,b:l,c,normal:new N,materialIndex:0};Ha.getNormal(jm,Wm,$m,h.normal),u.face=h,u.barycoord=d}return u}var Kd=class n extends sr{constructor(e=1,t=1,i=1,r=1,s=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:i,widthSegments:r,heightSegments:s,depthSegments:o};let a=this;r=Math.floor(r),s=Math.floor(s),o=Math.floor(o);let l=[],c=[],u=[],d=[],h=0,f=0;p("z","y","x",-1,-1,i,t,e,o,s,0),p("z","y","x",1,-1,i,t,-e,o,s,1),p("x","z","y",1,1,e,i,t,r,o,2),p("x","z","y",1,-1,e,i,-t,r,o,3),p("x","y","z",1,-1,e,t,i,r,s,4),p("x","y","z",-1,-1,e,t,-i,r,s,5),this.setIndex(l),this.setAttribute("position",new ir(c,3)),this.setAttribute("normal",new ir(u,3)),this.setAttribute("uv",new ir(d,2));function p(y,g,m,x,M,v,S,T,A,I,w){let _=v/A,D=S/I,U=v/2,L=S/2,W=T/2,z=A+1,$=I+1,G=0,V=0,se=new N;for(let ie=0;ie<$;ie++){let ce=ie*D-L;for(let Se=0;Se<z;Se++){let Ie=Se*_-U;se[y]=Ie*x,se[g]=ce*M,se[m]=W,c.push(se.x,se.y,se.z),se[y]=0,se[g]=0,se[m]=T>0?1:-1,u.push(se.x,se.y,se.z),d.push(Se/A),d.push(1-ie/I),G+=1}}for(let ie=0;ie<I;ie++)for(let ce=0;ce<A;ce++){let Se=h+ce+z*ie,Ie=h+ce+z*(ie+1),q=h+(ce+1)+z*(ie+1),re=h+(ce+1)+z*ie;l.push(Se,Ie,re),l.push(Ie,q,re),V+=6}a.addGroup(f,V,w),f+=V,h+=G}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new n(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}};function Fc(n){let e={};for(let t in n){e[t]={};for(let i in n[t]){let r=n[t][i];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?r.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[t][i]=null):e[t][i]=r.clone():Array.isArray(r)?e[t][i]=r.slice():e[t][i]=r}}return e}function Qn(n){let e={};for(let t=0;t<n.length;t++){let i=Fc(n[t]);for(let r in i)e[r]=i[r]}return e}function T8(n){let e=[];for(let t=0;t<n.length;t++)e.push(n[t].clone());return e}function KN(n){let e=n.getRenderTarget();return e===null?n.outputColorSpace:e.isXRRenderTarget===!0?e.texture.colorSpace:Pt.workingColorSpace}var C8={clone:Fc,merge:Qn},A8=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,I8=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`,Jr=class extends Ui{static get type(){return"ShaderMaterial"}constructor(e){super(),this.isShaderMaterial=!0,this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=A8,this.fragmentShader=I8,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Fc(e.uniforms),this.uniformsGroups=T8(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){let t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(let r in this.uniforms){let o=this.uniforms[r].value;o&&o.isTexture?t.uniforms[r]={type:"t",value:o.toJSON(e).uuid}:o&&o.isColor?t.uniforms[r]={type:"c",value:o.getHex()}:o&&o.isVector2?t.uniforms[r]={type:"v2",value:o.toArray()}:o&&o.isVector3?t.uniforms[r]={type:"v3",value:o.toArray()}:o&&o.isVector4?t.uniforms[r]={type:"v4",value:o.toArray()}:o&&o.isMatrix3?t.uniforms[r]={type:"m3",value:o.toArray()}:o&&o.isMatrix4?t.uniforms[r]={type:"m4",value:o.toArray()}:t.uniforms[r]={value:o}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;let i={};for(let r in this.extensions)this.extensions[r]===!0&&(i[r]=!0);return Object.keys(i).length>0&&(t.extensions=i),t}},vg=class extends Un{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new lt,this.projectionMatrix=new lt,this.projectionMatrixInverse=new lt,this.coordinateSystem=Ps}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}},Io=new N,jP=new Ye,WP=new Ye,sn=class extends vg{constructor(e=50,t=1,i=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=i,this.far=r,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){let t=.5*this.getFilmHeight()/e;this.fov=Lc*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){let e=Math.tan(Wd*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return Lc*2*Math.atan(Math.tan(Wd*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,t,i){Io.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),t.set(Io.x,Io.y).multiplyScalar(-e/Io.z),Io.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),i.set(Io.x,Io.y).multiplyScalar(-e/Io.z)}getViewSize(e,t){return this.getViewBounds(e,jP,WP),t.subVectors(WP,jP)}setViewOffset(e,t,i,r,s,o){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){let e=this.near,t=e*Math.tan(Wd*.5*this.fov)/this.zoom,i=2*t,r=this.aspect*i,s=-.5*r,o=this.view;if(this.view!==null&&this.view.enabled){let l=o.fullWidth,c=o.fullHeight;s+=o.offsetX*r/l,t-=o.offsetY*i/c,r*=o.width/l,i*=o.height/c}let a=this.filmOffset;a!==0&&(s+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+r,t,t-i,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){let t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}},vc=-90,_c=1,SM=class extends Un{constructor(e,t,i){super(),this.type="CubeCamera",this.renderTarget=i,this.coordinateSystem=null,this.activeMipmapLevel=0;let r=new sn(vc,_c,e,t);r.layers=this.layers,this.add(r);let s=new sn(vc,_c,e,t);s.layers=this.layers,this.add(s);let o=new sn(vc,_c,e,t);o.layers=this.layers,this.add(o);let a=new sn(vc,_c,e,t);a.layers=this.layers,this.add(a);let l=new sn(vc,_c,e,t);l.layers=this.layers,this.add(l);let c=new sn(vc,_c,e,t);c.layers=this.layers,this.add(c)}updateCoordinateSystem(){let e=this.coordinateSystem,t=this.children.concat(),[i,r,s,o,a,l]=t;for(let c of t)this.remove(c);if(e===Ps)i.up.set(0,1,0),i.lookAt(1,0,0),r.up.set(0,1,0),r.lookAt(-1,0,0),s.up.set(0,0,-1),s.lookAt(0,1,0),o.up.set(0,0,1),o.lookAt(0,-1,0),a.up.set(0,1,0),a.lookAt(0,0,1),l.up.set(0,1,0),l.lookAt(0,0,-1);else if(e===hg)i.up.set(0,-1,0),i.lookAt(-1,0,0),r.up.set(0,-1,0),r.lookAt(1,0,0),s.up.set(0,0,1),s.lookAt(0,1,0),o.up.set(0,0,-1),o.lookAt(0,-1,0),a.up.set(0,-1,0),a.lookAt(0,0,1),l.up.set(0,-1,0),l.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(let c of t)this.add(c),c.updateMatrixWorld()}update(e,t){this.parent===null&&this.updateMatrixWorld();let{renderTarget:i,activeMipmapLevel:r}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());let[s,o,a,l,c,u]=this.children,d=e.getRenderTarget(),h=e.getActiveCubeFace(),f=e.getActiveMipmapLevel(),p=e.xr.enabled;e.xr.enabled=!1;let y=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,e.setRenderTarget(i,0,r),e.render(t,s),e.setRenderTarget(i,1,r),e.render(t,o),e.setRenderTarget(i,2,r),e.render(t,a),e.setRenderTarget(i,3,r),e.render(t,l),e.setRenderTarget(i,4,r),e.render(t,c),i.texture.generateMipmaps=y,e.setRenderTarget(i,5,r),e.render(t,u),e.setRenderTarget(d,h,f),e.xr.enabled=p,i.texture.needsPMREMUpdate=!0}},_g=class extends ar{constructor(e,t,i,r,s,o,a,l,c,u){e=e!==void 0?e:[],t=t!==void 0?t:Ic,super(e,t,i,r,s,o,a,l,c,u),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}},TM=class extends Ls{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;let i={width:e,height:e,depth:1},r=[i,i,i,i,i,i];this.texture=new _g(r,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=t.generateMipmaps!==void 0?t.generateMipmaps:!1,this.texture.minFilter=t.minFilter!==void 0?t.minFilter:Fi}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;let i={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},r=new Kd(5,5,5),s=new Jr({name:"CubemapFromEquirect",uniforms:Fc(i.uniforms),vertexShader:i.vertexShader,fragmentShader:i.fragmentShader,side:fi,blending:Po});s.uniforms.tEquirect.value=t;let o=new $n(r,s),a=t.minFilter;return t.minFilter===Xr&&(t.minFilter=Fi),new SM(1,10,this).update(e,o),t.minFilter=a,o.geometry.dispose(),o.material.dispose(),this}clear(e,t,i,r){let s=e.getRenderTarget();for(let o=0;o<6;o++)e.setRenderTarget(this,o),e.clear(t,i,r);e.setRenderTarget(s)}},TE=new N,D8=new N,R8=new at,Tr=class{constructor(e=new N(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,i,r){return this.normal.set(e,t,i),this.constant=r,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,i){let r=TE.subVectors(i,t).cross(D8.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){let e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){let i=e.delta(TE),r=this.normal.dot(i);if(r===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;let s=-(e.start.dot(this.normal)+this.constant)/r;return s<0||s>1?null:t.copy(e.start).addScaledVector(i,s)}intersectsLine(e){let t=this.distanceToPoint(e.start),i=this.distanceToPoint(e.end);return t<0&&i>0||i<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){let i=t||R8.getNormalMatrix(e),r=this.coplanarPoint(TE).applyMatrix4(e),s=this.normal.applyMatrix3(i).normalize();return this.constant=-r.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}},ka=new ki,Zm=new N,Jd=class{constructor(e=new Tr,t=new Tr,i=new Tr,r=new Tr,s=new Tr,o=new Tr){this.planes=[e,t,i,r,s,o]}set(e,t,i,r,s,o){let a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(i),a[3].copy(r),a[4].copy(s),a[5].copy(o),this}copy(e){let t=this.planes;for(let i=0;i<6;i++)t[i].copy(e.planes[i]);return this}setFromProjectionMatrix(e,t=Ps){let i=this.planes,r=e.elements,s=r[0],o=r[1],a=r[2],l=r[3],c=r[4],u=r[5],d=r[6],h=r[7],f=r[8],p=r[9],y=r[10],g=r[11],m=r[12],x=r[13],M=r[14],v=r[15];if(i[0].setComponents(l-s,h-c,g-f,v-m).normalize(),i[1].setComponents(l+s,h+c,g+f,v+m).normalize(),i[2].setComponents(l+o,h+u,g+p,v+x).normalize(),i[3].setComponents(l-o,h-u,g-p,v-x).normalize(),i[4].setComponents(l-a,h-d,g-y,v-M).normalize(),t===Ps)i[5].setComponents(l+a,h+d,g+y,v+M).normalize();else if(t===hg)i[5].setComponents(a,d,y,M).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),ka.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{let t=e.geometry;t.boundingSphere===null&&t.computeBoundingSphere(),ka.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(ka)}intersectsSprite(e){return ka.center.set(0,0,0),ka.radius=.7071067811865476,ka.applyMatrix4(e.matrixWorld),this.intersectsSphere(ka)}intersectsSphere(e){let t=this.planes,i=e.center,r=-e.radius;for(let s=0;s<6;s++)if(t[s].distanceToPoint(i)<r)return!1;return!0}intersectsBox(e){let t=this.planes;for(let i=0;i<6;i++){let r=t[i];if(Zm.x=r.normal.x>0?e.max.x:e.min.x,Zm.y=r.normal.y>0?e.max.y:e.min.y,Zm.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(Zm)<0)return!1}return!0}containsPoint(e){let t=this.planes;for(let i=0;i<6;i++)if(t[i].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}};function JN(){let n=null,e=!1,t=null,i=null;function r(s,o){t(s,o),i=n.requestAnimationFrame(r)}return{start:function(){e!==!0&&t!==null&&(i=n.requestAnimationFrame(r),e=!0)},stop:function(){n.cancelAnimationFrame(i),e=!1},setAnimationLoop:function(s){t=s},setContext:function(s){n=s}}}function P8(n){let e=new WeakMap;function t(a,l){let c=a.array,u=a.usage,d=c.byteLength,h=n.createBuffer();n.bindBuffer(l,h),n.bufferData(l,c,u),a.onUploadCallback();let f;if(c instanceof Float32Array)f=n.FLOAT;else if(c instanceof Uint16Array)a.isFloat16BufferAttribute?f=n.HALF_FLOAT:f=n.UNSIGNED_SHORT;else if(c instanceof Int16Array)f=n.SHORT;else if(c instanceof Uint32Array)f=n.UNSIGNED_INT;else if(c instanceof Int32Array)f=n.INT;else if(c instanceof Int8Array)f=n.BYTE;else if(c instanceof Uint8Array)f=n.UNSIGNED_BYTE;else if(c instanceof Uint8ClampedArray)f=n.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+c);return{buffer:h,type:f,bytesPerElement:c.BYTES_PER_ELEMENT,version:a.version,size:d}}function i(a,l,c){let u=l.array,d=l.updateRanges;if(n.bindBuffer(c,a),d.length===0)n.bufferSubData(c,0,u);else{d.sort((f,p)=>f.start-p.start);let h=0;for(let f=1;f<d.length;f++){let p=d[h],y=d[f];y.start<=p.start+p.count+1?p.count=Math.max(p.count,y.start+y.count-p.start):(++h,d[h]=y)}d.length=h+1;for(let f=0,p=d.length;f<p;f++){let y=d[f];n.bufferSubData(c,y.start*u.BYTES_PER_ELEMENT,u,y.start,y.count)}l.clearUpdateRanges()}l.onUploadCallback()}function r(a){return a.isInterleavedBufferAttribute&&(a=a.data),e.get(a)}function s(a){a.isInterleavedBufferAttribute&&(a=a.data);let l=e.get(a);l&&(n.deleteBuffer(l.buffer),e.delete(a))}function o(a,l){if(a.isInterleavedBufferAttribute&&(a=a.data),a.isGLBufferAttribute){let u=e.get(a);(!u||u.version<a.version)&&e.set(a,{buffer:a.buffer,type:a.type,bytesPerElement:a.elementSize,version:a.version});return}let c=e.get(a);if(c===void 0)e.set(a,t(a,l));else if(c.version<a.version){if(c.size!==a.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");i(c.buffer,a,l),c.version=a.version}}return{get:r,remove:s,update:o}}var xg=class n extends sr{constructor(e=1,t=1,i=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:i,heightSegments:r};let s=e/2,o=t/2,a=Math.floor(i),l=Math.floor(r),c=a+1,u=l+1,d=e/a,h=t/l,f=[],p=[],y=[],g=[];for(let m=0;m<u;m++){let x=m*h-o;for(let M=0;M<c;M++){let v=M*d-s;p.push(v,-x,0),y.push(0,0,1),g.push(M/a),g.push(1-m/l)}}for(let m=0;m<l;m++)for(let x=0;x<a;x++){let M=x+c*m,v=x+c*(m+1),S=x+1+c*(m+1),T=x+1+c*m;f.push(M,v,T),f.push(v,S,T)}this.setIndex(f),this.setAttribute("position",new ir(p,3)),this.setAttribute("normal",new ir(y,3)),this.setAttribute("uv",new ir(g,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new n(e.width,e.height,e.widthSegments,e.heightSegments)}},N8=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,O8=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,L8=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,F8=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,k8=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,U8=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,B8=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,V8=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,z8=`#ifdef USE_BATCHING
	#if ! defined( GL_ANGLE_multi_draw )
	#define gl_DrawID _gl_DrawID
	uniform int _gl_DrawID;
	#endif
	uniform highp sampler2D batchingTexture;
	uniform highp usampler2D batchingIdTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
	float getIndirectIndex( const in int i ) {
		int size = textureSize( batchingIdTexture, 0 ).x;
		int x = i % size;
		int y = i / size;
		return float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );
	}
#endif
#ifdef USE_BATCHING_COLOR
	uniform sampler2D batchingColorTexture;
	vec3 getBatchingColor( const in float i ) {
		int size = textureSize( batchingColorTexture, 0 ).x;
		int j = int( i );
		int x = j % size;
		int y = j / size;
		return texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;
	}
#endif`,H8=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );
#endif`,G8=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,j8=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,W8=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,$8=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,X8=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,q8=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,Y8=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,Z8=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,K8=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,J8=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,Q8=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,e6=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	varying vec3 vColor;
#endif`,t6=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif
#ifdef USE_BATCHING_COLOR
	vec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );
	vColor.xyz *= batchingColor.xyz;
#endif`,n6=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,i6=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,r6=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,s6=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,o6=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,a6=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	#ifdef DECODE_VIDEO_TEXTURE_EMISSIVE
		emissiveColor = sRGBTransferEOTF( emissiveColor );
	#endif
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,l6=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,c6="gl_FragColor = linearToOutputTexel( gl_FragColor );",u6=`vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferEOTF( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,d6=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,h6=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,f6=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,p6=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,m6=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,g6=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,y6=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,v6=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,_6=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,x6=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,E6=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,M6=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,w6=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,b6=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if ( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,S6=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,T6=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,C6=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,A6=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,I6=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,D6=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,R6=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,P6=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,N6=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,O6=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,L6=`#if defined( USE_LOGDEPTHBUF )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,F6=`#if defined( USE_LOGDEPTHBUF )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,k6=`#ifdef USE_LOGDEPTHBUF
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,U6=`#ifdef USE_LOGDEPTHBUF
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,B6=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = sRGBTransferEOTF( sampledDiffuseColor );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,V6=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,z6=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,H6=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,G6=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,j6=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,W6=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,$6=`#if defined( USE_MORPHCOLORS )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,X6=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,q6=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	#endif
	uniform sampler2DArray morphTargetsTexture;
	uniform ivec2 morphTargetsTextureSize;
	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
		int y = texelIndex / morphTargetsTextureSize.x;
		int x = texelIndex - y * morphTargetsTextureSize.x;
		ivec3 morphUV = ivec3( x, y, morphTargetIndex );
		return texelFetch( morphTargetsTexture, morphUV, 0 );
	}
#endif`,Y6=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,Z6=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,K6=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,J6=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,Q6=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,e$=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,t$=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,n$=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,i$=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,r$=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,s$=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,o$=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,a$=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;
const float Inv255 = 1. / 255.;
const vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );
const vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );
const vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );
const vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );
vec4 packDepthToRGBA( const in float v ) {
	if( v <= 0.0 )
		return vec4( 0., 0., 0., 0. );
	if( v >= 1.0 )
		return vec4( 1., 1., 1., 1. );
	float vuf;
	float af = modf( v * PackFactors.a, vuf );
	float bf = modf( vuf * ShiftRight8, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );
}
vec3 packDepthToRGB( const in float v ) {
	if( v <= 0.0 )
		return vec3( 0., 0., 0. );
	if( v >= 1.0 )
		return vec3( 1., 1., 1. );
	float vuf;
	float bf = modf( v * PackFactors.b, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec3( vuf * Inv255, gf * PackUpscale, bf );
}
vec2 packDepthToRG( const in float v ) {
	if( v <= 0.0 )
		return vec2( 0., 0. );
	if( v >= 1.0 )
		return vec2( 1., 1. );
	float vuf;
	float gf = modf( v * 256., vuf );
	return vec2( vuf * Inv255, gf );
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors4 );
}
float unpackRGBToDepth( const in vec3 v ) {
	return dot( v, UnpackFactors3 );
}
float unpackRGToDepth( const in vec2 v ) {
	return v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;
}
vec4 pack2HalfToRGBA( const in vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( const in vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,l$=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,c$=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,u$=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,d$=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,h$=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,f$=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,p$=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		
		float lightToPositionLength = length( lightToPosition );
		if ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {
			float dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );			dp += shadowBias;
			vec3 bd3D = normalize( lightToPosition );
			vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
			#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
				vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
				shadow = (
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
				) * ( 1.0 / 9.0 );
			#else
				shadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
			#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
#endif`,m$=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,g$=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,y$=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,v$=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,_$=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,x$=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,E$=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,M$=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,w$=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,b$=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,S$=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 CineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,T$=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,C$=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
		
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
		
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		
		#else
		
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,A$=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,I$=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,D$=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,R$=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`,P$=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,N$=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,O$=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,L$=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,F$=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,k$=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,U$=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,B$=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#elif DEPTH_PACKING == 3202
		gl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );
	#elif DEPTH_PACKING == 3203
		gl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );
	#endif
}`,V$=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,z$=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,H$=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,G$=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,j$=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,W$=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,$$=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,X$=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,q$=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Y$=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Z$=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,K$=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,J$=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,Q$=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,eX=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,tX=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,nX=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,iX=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,rX=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,sX=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,oX=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,aX=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,lX=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,cX=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,uX=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix[ 3 ];
	vec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,dX=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,ht={alphahash_fragment:N8,alphahash_pars_fragment:O8,alphamap_fragment:L8,alphamap_pars_fragment:F8,alphatest_fragment:k8,alphatest_pars_fragment:U8,aomap_fragment:B8,aomap_pars_fragment:V8,batching_pars_vertex:z8,batching_vertex:H8,begin_vertex:G8,beginnormal_vertex:j8,bsdfs:W8,iridescence_fragment:$8,bumpmap_pars_fragment:X8,clipping_planes_fragment:q8,clipping_planes_pars_fragment:Y8,clipping_planes_pars_vertex:Z8,clipping_planes_vertex:K8,color_fragment:J8,color_pars_fragment:Q8,color_pars_vertex:e6,color_vertex:t6,common:n6,cube_uv_reflection_fragment:i6,defaultnormal_vertex:r6,displacementmap_pars_vertex:s6,displacementmap_vertex:o6,emissivemap_fragment:a6,emissivemap_pars_fragment:l6,colorspace_fragment:c6,colorspace_pars_fragment:u6,envmap_fragment:d6,envmap_common_pars_fragment:h6,envmap_pars_fragment:f6,envmap_pars_vertex:p6,envmap_physical_pars_fragment:S6,envmap_vertex:m6,fog_vertex:g6,fog_pars_vertex:y6,fog_fragment:v6,fog_pars_fragment:_6,gradientmap_pars_fragment:x6,lightmap_pars_fragment:E6,lights_lambert_fragment:M6,lights_lambert_pars_fragment:w6,lights_pars_begin:b6,lights_toon_fragment:T6,lights_toon_pars_fragment:C6,lights_phong_fragment:A6,lights_phong_pars_fragment:I6,lights_physical_fragment:D6,lights_physical_pars_fragment:R6,lights_fragment_begin:P6,lights_fragment_maps:N6,lights_fragment_end:O6,logdepthbuf_fragment:L6,logdepthbuf_pars_fragment:F6,logdepthbuf_pars_vertex:k6,logdepthbuf_vertex:U6,map_fragment:B6,map_pars_fragment:V6,map_particle_fragment:z6,map_particle_pars_fragment:H6,metalnessmap_fragment:G6,metalnessmap_pars_fragment:j6,morphinstance_vertex:W6,morphcolor_vertex:$6,morphnormal_vertex:X6,morphtarget_pars_vertex:q6,morphtarget_vertex:Y6,normal_fragment_begin:Z6,normal_fragment_maps:K6,normal_pars_fragment:J6,normal_pars_vertex:Q6,normal_vertex:e$,normalmap_pars_fragment:t$,clearcoat_normal_fragment_begin:n$,clearcoat_normal_fragment_maps:i$,clearcoat_pars_fragment:r$,iridescence_pars_fragment:s$,opaque_fragment:o$,packing:a$,premultiplied_alpha_fragment:l$,project_vertex:c$,dithering_fragment:u$,dithering_pars_fragment:d$,roughnessmap_fragment:h$,roughnessmap_pars_fragment:f$,shadowmap_pars_fragment:p$,shadowmap_pars_vertex:m$,shadowmap_vertex:g$,shadowmask_pars_fragment:y$,skinbase_vertex:v$,skinning_pars_vertex:_$,skinning_vertex:x$,skinnormal_vertex:E$,specularmap_fragment:M$,specularmap_pars_fragment:w$,tonemapping_fragment:b$,tonemapping_pars_fragment:S$,transmission_fragment:T$,transmission_pars_fragment:C$,uv_pars_fragment:A$,uv_pars_vertex:I$,uv_vertex:D$,worldpos_vertex:R$,background_vert:P$,background_frag:N$,backgroundCube_vert:O$,backgroundCube_frag:L$,cube_vert:F$,cube_frag:k$,depth_vert:U$,depth_frag:B$,distanceRGBA_vert:V$,distanceRGBA_frag:z$,equirect_vert:H$,equirect_frag:G$,linedashed_vert:j$,linedashed_frag:W$,meshbasic_vert:$$,meshbasic_frag:X$,meshlambert_vert:q$,meshlambert_frag:Y$,meshmatcap_vert:Z$,meshmatcap_frag:K$,meshnormal_vert:J$,meshnormal_frag:Q$,meshphong_vert:eX,meshphong_frag:tX,meshphysical_vert:nX,meshphysical_frag:iX,meshtoon_vert:rX,meshtoon_frag:sX,points_vert:oX,points_frag:aX,shadow_vert:lX,shadow_frag:cX,sprite_vert:uX,sprite_frag:dX},ye={common:{diffuse:{value:new qe(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new at},alphaMap:{value:null},alphaMapTransform:{value:new at},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new at}},envmap:{envMap:{value:null},envMapRotation:{value:new at},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new at}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new at}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new at},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new at},normalScale:{value:new Ye(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new at},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new at}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new at}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new at}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new qe(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new qe(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new at},alphaTest:{value:0},uvTransform:{value:new at}},sprite:{diffuse:{value:new qe(16777215)},opacity:{value:1},center:{value:new Ye(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new at},alphaMap:{value:null},alphaMapTransform:{value:new at},alphaTest:{value:0}}},$r={basic:{uniforms:Qn([ye.common,ye.specularmap,ye.envmap,ye.aomap,ye.lightmap,ye.fog]),vertexShader:ht.meshbasic_vert,fragmentShader:ht.meshbasic_frag},lambert:{uniforms:Qn([ye.common,ye.specularmap,ye.envmap,ye.aomap,ye.lightmap,ye.emissivemap,ye.bumpmap,ye.normalmap,ye.displacementmap,ye.fog,ye.lights,{emissive:{value:new qe(0)}}]),vertexShader:ht.meshlambert_vert,fragmentShader:ht.meshlambert_frag},phong:{uniforms:Qn([ye.common,ye.specularmap,ye.envmap,ye.aomap,ye.lightmap,ye.emissivemap,ye.bumpmap,ye.normalmap,ye.displacementmap,ye.fog,ye.lights,{emissive:{value:new qe(0)},specular:{value:new qe(1118481)},shininess:{value:30}}]),vertexShader:ht.meshphong_vert,fragmentShader:ht.meshphong_frag},standard:{uniforms:Qn([ye.common,ye.envmap,ye.aomap,ye.lightmap,ye.emissivemap,ye.bumpmap,ye.normalmap,ye.displacementmap,ye.roughnessmap,ye.metalnessmap,ye.fog,ye.lights,{emissive:{value:new qe(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:ht.meshphysical_vert,fragmentShader:ht.meshphysical_frag},toon:{uniforms:Qn([ye.common,ye.aomap,ye.lightmap,ye.emissivemap,ye.bumpmap,ye.normalmap,ye.displacementmap,ye.gradientmap,ye.fog,ye.lights,{emissive:{value:new qe(0)}}]),vertexShader:ht.meshtoon_vert,fragmentShader:ht.meshtoon_frag},matcap:{uniforms:Qn([ye.common,ye.bumpmap,ye.normalmap,ye.displacementmap,ye.fog,{matcap:{value:null}}]),vertexShader:ht.meshmatcap_vert,fragmentShader:ht.meshmatcap_frag},points:{uniforms:Qn([ye.points,ye.fog]),vertexShader:ht.points_vert,fragmentShader:ht.points_frag},dashed:{uniforms:Qn([ye.common,ye.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:ht.linedashed_vert,fragmentShader:ht.linedashed_frag},depth:{uniforms:Qn([ye.common,ye.displacementmap]),vertexShader:ht.depth_vert,fragmentShader:ht.depth_frag},normal:{uniforms:Qn([ye.common,ye.bumpmap,ye.normalmap,ye.displacementmap,{opacity:{value:1}}]),vertexShader:ht.meshnormal_vert,fragmentShader:ht.meshnormal_frag},sprite:{uniforms:Qn([ye.sprite,ye.fog]),vertexShader:ht.sprite_vert,fragmentShader:ht.sprite_frag},background:{uniforms:{uvTransform:{value:new at},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:ht.background_vert,fragmentShader:ht.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new at}},vertexShader:ht.backgroundCube_vert,fragmentShader:ht.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:ht.cube_vert,fragmentShader:ht.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:ht.equirect_vert,fragmentShader:ht.equirect_frag},distanceRGBA:{uniforms:Qn([ye.common,ye.displacementmap,{referencePosition:{value:new N},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:ht.distanceRGBA_vert,fragmentShader:ht.distanceRGBA_frag},shadow:{uniforms:Qn([ye.lights,ye.fog,{color:{value:new qe(0)},opacity:{value:1}}]),vertexShader:ht.shadow_vert,fragmentShader:ht.shadow_frag}};$r.physical={uniforms:Qn([$r.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new at},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new at},clearcoatNormalScale:{value:new Ye(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new at},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new at},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new at},sheen:{value:0},sheenColor:{value:new qe(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new at},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new at},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new at},transmissionSamplerSize:{value:new Ye},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new at},attenuationDistance:{value:0},attenuationColor:{value:new qe(0)},specularColor:{value:new qe(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new at},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new at},anisotropyVector:{value:new Ye},anisotropyMap:{value:null},anisotropyMapTransform:{value:new at}}]),vertexShader:ht.meshphysical_vert,fragmentShader:ht.meshphysical_frag};var Km={r:0,b:0,g:0},Ua=new $a,hX=new lt;function fX(n,e,t,i,r,s,o){let a=new qe(0),l=s===!0?0:1,c,u,d=null,h=0,f=null;function p(x){let M=x.isScene===!0?x.background:null;return M&&M.isTexture&&(M=(x.backgroundBlurriness>0?t:e).get(M)),M}function y(x){let M=!1,v=p(x);v===null?m(a,l):v&&v.isColor&&(m(v,1),M=!0);let S=n.xr.getEnvironmentBlendMode();S==="additive"?i.buffers.color.setClear(0,0,0,1,o):S==="alpha-blend"&&i.buffers.color.setClear(0,0,0,0,o),(n.autoClear||M)&&(i.buffers.depth.setTest(!0),i.buffers.depth.setMask(!0),i.buffers.color.setMask(!0),n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil))}function g(x,M){let v=p(M);v&&(v.isCubeTexture||v.mapping===zg)?(u===void 0&&(u=new $n(new Kd(1,1,1),new Jr({name:"BackgroundCubeMaterial",uniforms:Fc($r.backgroundCube.uniforms),vertexShader:$r.backgroundCube.vertexShader,fragmentShader:$r.backgroundCube.fragmentShader,side:fi,depthTest:!1,depthWrite:!1,fog:!1})),u.geometry.deleteAttribute("normal"),u.geometry.deleteAttribute("uv"),u.onBeforeRender=function(S,T,A){this.matrixWorld.copyPosition(A.matrixWorld)},Object.defineProperty(u.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(u)),Ua.copy(M.backgroundRotation),Ua.x*=-1,Ua.y*=-1,Ua.z*=-1,v.isCubeTexture&&v.isRenderTargetTexture===!1&&(Ua.y*=-1,Ua.z*=-1),u.material.uniforms.envMap.value=v,u.material.uniforms.flipEnvMap.value=v.isCubeTexture&&v.isRenderTargetTexture===!1?-1:1,u.material.uniforms.backgroundBlurriness.value=M.backgroundBlurriness,u.material.uniforms.backgroundIntensity.value=M.backgroundIntensity,u.material.uniforms.backgroundRotation.value.setFromMatrix4(hX.makeRotationFromEuler(Ua)),u.material.toneMapped=Pt.getTransfer(v.colorSpace)!==Xt,(d!==v||h!==v.version||f!==n.toneMapping)&&(u.material.needsUpdate=!0,d=v,h=v.version,f=n.toneMapping),u.layers.enableAll(),x.unshift(u,u.geometry,u.material,0,0,null)):v&&v.isTexture&&(c===void 0&&(c=new $n(new xg(2,2),new Jr({name:"BackgroundMaterial",uniforms:Fc($r.background.uniforms),vertexShader:$r.background.vertexShader,fragmentShader:$r.background.fragmentShader,side:Yr,depthTest:!1,depthWrite:!1,fog:!1})),c.geometry.deleteAttribute("normal"),Object.defineProperty(c.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(c)),c.material.uniforms.t2D.value=v,c.material.uniforms.backgroundIntensity.value=M.backgroundIntensity,c.material.toneMapped=Pt.getTransfer(v.colorSpace)!==Xt,v.matrixAutoUpdate===!0&&v.updateMatrix(),c.material.uniforms.uvTransform.value.copy(v.matrix),(d!==v||h!==v.version||f!==n.toneMapping)&&(c.material.needsUpdate=!0,d=v,h=v.version,f=n.toneMapping),c.layers.enableAll(),x.unshift(c,c.geometry,c.material,0,0,null))}function m(x,M){x.getRGB(Km,KN(n)),i.buffers.color.setClear(Km.r,Km.g,Km.b,M,o)}return{getClearColor:function(){return a},setClearColor:function(x,M=1){a.set(x),l=M,m(a,l)},getClearAlpha:function(){return l},setClearAlpha:function(x){l=x,m(a,l)},render:y,addToRenderList:g}}function pX(n,e){let t=n.getParameter(n.MAX_VERTEX_ATTRIBS),i={},r=h(null),s=r,o=!1;function a(_,D,U,L,W){let z=!1,$=d(L,U,D);s!==$&&(s=$,c(s.object)),z=f(_,L,U,W),z&&p(_,L,U,W),W!==null&&e.update(W,n.ELEMENT_ARRAY_BUFFER),(z||o)&&(o=!1,v(_,D,U,L),W!==null&&n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,e.get(W).buffer))}function l(){return n.createVertexArray()}function c(_){return n.bindVertexArray(_)}function u(_){return n.deleteVertexArray(_)}function d(_,D,U){let L=U.wireframe===!0,W=i[_.id];W===void 0&&(W={},i[_.id]=W);let z=W[D.id];z===void 0&&(z={},W[D.id]=z);let $=z[L];return $===void 0&&($=h(l()),z[L]=$),$}function h(_){let D=[],U=[],L=[];for(let W=0;W<t;W++)D[W]=0,U[W]=0,L[W]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:D,enabledAttributes:U,attributeDivisors:L,object:_,attributes:{},index:null}}function f(_,D,U,L){let W=s.attributes,z=D.attributes,$=0,G=U.getAttributes();for(let V in G)if(G[V].location>=0){let ie=W[V],ce=z[V];if(ce===void 0&&(V==="instanceMatrix"&&_.instanceMatrix&&(ce=_.instanceMatrix),V==="instanceColor"&&_.instanceColor&&(ce=_.instanceColor)),ie===void 0||ie.attribute!==ce||ce&&ie.data!==ce.data)return!0;$++}return s.attributesNum!==$||s.index!==L}function p(_,D,U,L){let W={},z=D.attributes,$=0,G=U.getAttributes();for(let V in G)if(G[V].location>=0){let ie=z[V];ie===void 0&&(V==="instanceMatrix"&&_.instanceMatrix&&(ie=_.instanceMatrix),V==="instanceColor"&&_.instanceColor&&(ie=_.instanceColor));let ce={};ce.attribute=ie,ie&&ie.data&&(ce.data=ie.data),W[V]=ce,$++}s.attributes=W,s.attributesNum=$,s.index=L}function y(){let _=s.newAttributes;for(let D=0,U=_.length;D<U;D++)_[D]=0}function g(_){m(_,0)}function m(_,D){let U=s.newAttributes,L=s.enabledAttributes,W=s.attributeDivisors;U[_]=1,L[_]===0&&(n.enableVertexAttribArray(_),L[_]=1),W[_]!==D&&(n.vertexAttribDivisor(_,D),W[_]=D)}function x(){let _=s.newAttributes,D=s.enabledAttributes;for(let U=0,L=D.length;U<L;U++)D[U]!==_[U]&&(n.disableVertexAttribArray(U),D[U]=0)}function M(_,D,U,L,W,z,$){$===!0?n.vertexAttribIPointer(_,D,U,W,z):n.vertexAttribPointer(_,D,U,L,W,z)}function v(_,D,U,L){y();let W=L.attributes,z=U.getAttributes(),$=D.defaultAttributeValues;for(let G in z){let V=z[G];if(V.location>=0){let se=W[G];if(se===void 0&&(G==="instanceMatrix"&&_.instanceMatrix&&(se=_.instanceMatrix),G==="instanceColor"&&_.instanceColor&&(se=_.instanceColor)),se!==void 0){let ie=se.normalized,ce=se.itemSize,Se=e.get(se);if(Se===void 0)continue;let Ie=Se.buffer,q=Se.type,re=Se.bytesPerElement,fe=q===n.INT||q===n.UNSIGNED_INT||se.gpuType===KM;if(se.isInterleavedBufferAttribute){let oe=se.data,Ae=oe.stride,Ue=se.offset;if(oe.isInstancedInterleavedBuffer){for(let ze=0;ze<V.locationSize;ze++)m(V.location+ze,oe.meshPerAttribute);_.isInstancedMesh!==!0&&L._maxInstanceCount===void 0&&(L._maxInstanceCount=oe.meshPerAttribute*oe.count)}else for(let ze=0;ze<V.locationSize;ze++)g(V.location+ze);n.bindBuffer(n.ARRAY_BUFFER,Ie);for(let ze=0;ze<V.locationSize;ze++)M(V.location+ze,ce/V.locationSize,q,ie,Ae*re,(Ue+ce/V.locationSize*ze)*re,fe)}else{if(se.isInstancedBufferAttribute){for(let oe=0;oe<V.locationSize;oe++)m(V.location+oe,se.meshPerAttribute);_.isInstancedMesh!==!0&&L._maxInstanceCount===void 0&&(L._maxInstanceCount=se.meshPerAttribute*se.count)}else for(let oe=0;oe<V.locationSize;oe++)g(V.location+oe);n.bindBuffer(n.ARRAY_BUFFER,Ie);for(let oe=0;oe<V.locationSize;oe++)M(V.location+oe,ce/V.locationSize,q,ie,ce*re,ce/V.locationSize*oe*re,fe)}}else if($!==void 0){let ie=$[G];if(ie!==void 0)switch(ie.length){case 2:n.vertexAttrib2fv(V.location,ie);break;case 3:n.vertexAttrib3fv(V.location,ie);break;case 4:n.vertexAttrib4fv(V.location,ie);break;default:n.vertexAttrib1fv(V.location,ie)}}}}x()}function S(){I();for(let _ in i){let D=i[_];for(let U in D){let L=D[U];for(let W in L)u(L[W].object),delete L[W];delete D[U]}delete i[_]}}function T(_){if(i[_.id]===void 0)return;let D=i[_.id];for(let U in D){let L=D[U];for(let W in L)u(L[W].object),delete L[W];delete D[U]}delete i[_.id]}function A(_){for(let D in i){let U=i[D];if(U[_.id]===void 0)continue;let L=U[_.id];for(let W in L)u(L[W].object),delete L[W];delete U[_.id]}}function I(){w(),o=!0,s!==r&&(s=r,c(s.object))}function w(){r.geometry=null,r.program=null,r.wireframe=!1}return{setup:a,reset:I,resetDefaultState:w,dispose:S,releaseStatesOfGeometry:T,releaseStatesOfProgram:A,initAttributes:y,enableAttribute:g,disableUnusedAttributes:x}}function mX(n,e,t){let i;function r(c){i=c}function s(c,u){n.drawArrays(i,c,u),t.update(u,i,1)}function o(c,u,d){d!==0&&(n.drawArraysInstanced(i,c,u,d),t.update(u,i,d))}function a(c,u,d){if(d===0)return;e.get("WEBGL_multi_draw").multiDrawArraysWEBGL(i,c,0,u,0,d);let f=0;for(let p=0;p<d;p++)f+=u[p];t.update(f,i,1)}function l(c,u,d,h){if(d===0)return;let f=e.get("WEBGL_multi_draw");if(f===null)for(let p=0;p<c.length;p++)o(c[p],u[p],h[p]);else{f.multiDrawArraysInstancedWEBGL(i,c,0,u,0,h,0,d);let p=0;for(let y=0;y<d;y++)p+=u[y]*h[y];t.update(p,i,1)}}this.setMode=r,this.render=s,this.renderInstances=o,this.renderMultiDraw=a,this.renderMultiDrawInstances=l}function gX(n,e,t,i){let r;function s(){if(r!==void 0)return r;if(e.has("EXT_texture_filter_anisotropic")===!0){let A=e.get("EXT_texture_filter_anisotropic");r=n.getParameter(A.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r}function o(A){return!(A!==nr&&i.convert(A)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_FORMAT))}function a(A){let I=A===lh&&(e.has("EXT_color_buffer_half_float")||e.has("EXT_color_buffer_float"));return!(A!==Os&&i.convert(A)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_TYPE)&&A!==Ir&&!I)}function l(A){if(A==="highp"){if(n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.HIGH_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT).precision>0)return"highp";A="mediump"}return A==="mediump"&&n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.MEDIUM_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let c=t.precision!==void 0?t.precision:"highp",u=l(c);u!==c&&(console.warn("THREE.WebGLRenderer:",c,"not supported, using",u,"instead."),c=u);let d=t.logarithmicDepthBuffer===!0,h=t.reverseDepthBuffer===!0&&e.has("EXT_clip_control"),f=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS),p=n.getParameter(n.MAX_VERTEX_TEXTURE_IMAGE_UNITS),y=n.getParameter(n.MAX_TEXTURE_SIZE),g=n.getParameter(n.MAX_CUBE_MAP_TEXTURE_SIZE),m=n.getParameter(n.MAX_VERTEX_ATTRIBS),x=n.getParameter(n.MAX_VERTEX_UNIFORM_VECTORS),M=n.getParameter(n.MAX_VARYING_VECTORS),v=n.getParameter(n.MAX_FRAGMENT_UNIFORM_VECTORS),S=p>0,T=n.getParameter(n.MAX_SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:s,getMaxPrecision:l,textureFormatReadable:o,textureTypeReadable:a,precision:c,logarithmicDepthBuffer:d,reverseDepthBuffer:h,maxTextures:f,maxVertexTextures:p,maxTextureSize:y,maxCubemapSize:g,maxAttributes:m,maxVertexUniforms:x,maxVaryings:M,maxFragmentUniforms:v,vertexTextures:S,maxSamples:T}}function yX(n){let e=this,t=null,i=0,r=!1,s=!1,o=new Tr,a=new at,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(d,h){let f=d.length!==0||h||i!==0||r;return r=h,i=d.length,f},this.beginShadows=function(){s=!0,u(null)},this.endShadows=function(){s=!1},this.setGlobalState=function(d,h){t=u(d,h,0)},this.setState=function(d,h,f){let p=d.clippingPlanes,y=d.clipIntersection,g=d.clipShadows,m=n.get(d);if(!r||p===null||p.length===0||s&&!g)s?u(null):c();else{let x=s?0:i,M=x*4,v=m.clippingState||null;l.value=v,v=u(p,h,M,f);for(let S=0;S!==M;++S)v[S]=t[S];m.clippingState=v,this.numIntersection=y?this.numPlanes:0,this.numPlanes+=x}};function c(){l.value!==t&&(l.value=t,l.needsUpdate=i>0),e.numPlanes=i,e.numIntersection=0}function u(d,h,f,p){let y=d!==null?d.length:0,g=null;if(y!==0){if(g=l.value,p!==!0||g===null){let m=f+y*4,x=h.matrixWorldInverse;a.getNormalMatrix(x),(g===null||g.length<m)&&(g=new Float32Array(m));for(let M=0,v=f;M!==y;++M,v+=4)o.copy(d[M]).applyMatrix4(x,a),o.normal.toArray(g,v),g[v+3]=o.constant}l.value=g,l.needsUpdate=!0}return e.numPlanes=y,e.numIntersection=0,g}}function vX(n){let e=new WeakMap;function t(o,a){return a===XE?o.mapping=Ic:a===qE&&(o.mapping=Dc),o}function i(o){if(o&&o.isTexture){let a=o.mapping;if(a===XE||a===qE)if(e.has(o)){let l=e.get(o).texture;return t(l,o.mapping)}else{let l=o.image;if(l&&l.height>0){let c=new TM(l.height);return c.fromEquirectangularTexture(n,o),e.set(o,c),o.addEventListener("dispose",r),t(c.texture,o.mapping)}else return null}}return o}function r(o){let a=o.target;a.removeEventListener("dispose",r);let l=e.get(a);l!==void 0&&(e.delete(a),l.dispose())}function s(){e=new WeakMap}return{get:i,dispose:s}}var Qr=class extends vg{constructor(e=-1,t=1,i=1,r=-1,s=.1,o=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=i,this.bottom=r,this.near=s,this.far=o,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,i,r,s,o){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){let e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,r=(this.top+this.bottom)/2,s=i-e,o=i+e,a=r+t,l=r-t;if(this.view!==null&&this.view.enabled){let c=(this.right-this.left)/this.view.fullWidth/this.zoom,u=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=c*this.view.offsetX,o=s+c*this.view.width,a-=u*this.view.offsetY,l=a-u*this.view.height}this.projectionMatrix.makeOrthographic(s,o,a,l,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){let t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}},wc=4,$P=[.125,.215,.35,.446,.526,.582],Ga=20,CE=new Qr,XP=new qe,AE=null,IE=0,DE=0,RE=!1,Va=(1+Math.sqrt(5))/2,xc=1/Va,qP=[new N(-Va,xc,0),new N(Va,xc,0),new N(-xc,0,Va),new N(xc,0,Va),new N(0,Va,-xc),new N(0,Va,xc),new N(-1,1,-1),new N(1,1,-1),new N(-1,1,1),new N(1,1,1)],Eg=class{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,i=.1,r=100){AE=this._renderer.getRenderTarget(),IE=this._renderer.getActiveCubeFace(),DE=this._renderer.getActiveMipmapLevel(),RE=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(256);let s=this._allocateTargets();return s.depthBuffer=!0,this._sceneToCubeUV(e,i,r,s),t>0&&this._blur(s,0,0,t),this._applyPMREM(s),this._cleanup(s),s}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=KP(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=ZP(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(AE,IE,DE),this._renderer.xr.enabled=RE,e.scissorTest=!1,Jm(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===Ic||e.mapping===Dc?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),AE=this._renderer.getRenderTarget(),IE=this._renderer.getActiveCubeFace(),DE=this._renderer.getActiveMipmapLevel(),RE=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;let i=t||this._allocateTargets();return this._textureToCubeUV(e,i),this._applyPMREM(i),this._cleanup(i),i}_allocateTargets(){let e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,i={magFilter:Fi,minFilter:Fi,generateMipmaps:!1,type:lh,format:nr,colorSpace:Hc,depthBuffer:!1},r=YP(e,t,i);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=YP(e,t,i);let{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=_X(s)),this._blurMaterial=xX(s,e,t)}return r}_compileMaterial(e){let t=new $n(this._lodPlanes[0],e);this._renderer.compile(t,CE)}_sceneToCubeUV(e,t,i,r){let a=new sn(90,1,t,i),l=[1,-1,1,1,1,1],c=[1,1,1,-1,-1,-1],u=this._renderer,d=u.autoClear,h=u.toneMapping;u.getClearColor(XP),u.toneMapping=No,u.autoClear=!1;let f=new Kr({name:"PMREM.Background",side:fi,depthWrite:!1,depthTest:!1}),p=new $n(new Kd,f),y=!1,g=e.background;g?g.isColor&&(f.color.copy(g),e.background=null,y=!0):(f.color.copy(XP),y=!0);for(let m=0;m<6;m++){let x=m%3;x===0?(a.up.set(0,l[m],0),a.lookAt(c[m],0,0)):x===1?(a.up.set(0,0,l[m]),a.lookAt(0,c[m],0)):(a.up.set(0,l[m],0),a.lookAt(0,0,c[m]));let M=this._cubeSize;Jm(r,x*M,m>2?M:0,M,M),u.setRenderTarget(r),y&&u.render(p,a),u.render(e,a)}p.geometry.dispose(),p.material.dispose(),u.toneMapping=h,u.autoClear=d,e.background=g}_textureToCubeUV(e,t){let i=this._renderer,r=e.mapping===Ic||e.mapping===Dc;r?(this._cubemapMaterial===null&&(this._cubemapMaterial=KP()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=ZP());let s=r?this._cubemapMaterial:this._equirectMaterial,o=new $n(this._lodPlanes[0],s),a=s.uniforms;a.envMap.value=e;let l=this._cubeSize;Jm(t,0,0,3*l,2*l),i.setRenderTarget(t),i.render(o,CE)}_applyPMREM(e){let t=this._renderer,i=t.autoClear;t.autoClear=!1;let r=this._lodPlanes.length;for(let s=1;s<r;s++){let o=Math.sqrt(this._sigmas[s]*this._sigmas[s]-this._sigmas[s-1]*this._sigmas[s-1]),a=qP[(r-s-1)%qP.length];this._blur(e,s-1,s,o,a)}t.autoClear=i}_blur(e,t,i,r,s){let o=this._pingPongRenderTarget;this._halfBlur(e,o,t,i,r,"latitudinal",s),this._halfBlur(o,e,i,i,r,"longitudinal",s)}_halfBlur(e,t,i,r,s,o,a){let l=this._renderer,c=this._blurMaterial;o!=="latitudinal"&&o!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");let u=3,d=new $n(this._lodPlanes[r],c),h=c.uniforms,f=this._sizeLods[i]-1,p=isFinite(s)?Math.PI/(2*f):2*Math.PI/(2*Ga-1),y=s/p,g=isFinite(s)?1+Math.floor(u*y):Ga;g>Ga&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${g} samples when the maximum is set to ${Ga}`);let m=[],x=0;for(let A=0;A<Ga;++A){let I=A/y,w=Math.exp(-I*I/2);m.push(w),A===0?x+=w:A<g&&(x+=2*w)}for(let A=0;A<m.length;A++)m[A]=m[A]/x;h.envMap.value=e.texture,h.samples.value=g,h.weights.value=m,h.latitudinal.value=o==="latitudinal",a&&(h.poleAxis.value=a);let{_lodMax:M}=this;h.dTheta.value=p,h.mipInt.value=M-i;let v=this._sizeLods[r],S=3*v*(r>M-wc?r-M+wc:0),T=4*(this._cubeSize-v);Jm(t,S,T,3*v,2*v),l.setRenderTarget(t),l.render(d,CE)}};function _X(n){let e=[],t=[],i=[],r=n,s=n-wc+1+$P.length;for(let o=0;o<s;o++){let a=Math.pow(2,r);t.push(a);let l=1/a;o>n-wc?l=$P[o-n+wc-1]:o===0&&(l=0),i.push(l);let c=1/(a-2),u=-c,d=1+c,h=[u,u,d,u,d,d,u,u,d,d,u,d],f=6,p=6,y=3,g=2,m=1,x=new Float32Array(y*p*f),M=new Float32Array(g*p*f),v=new Float32Array(m*p*f);for(let T=0;T<f;T++){let A=T%3*2/3-1,I=T>2?0:-1,w=[A,I,0,A+2/3,I,0,A+2/3,I+1,0,A,I,0,A+2/3,I+1,0,A,I+1,0];x.set(w,y*p*T),M.set(h,g*p*T);let _=[T,T,T,T,T,T];v.set(_,m*p*T)}let S=new sr;S.setAttribute("position",new wn(x,y)),S.setAttribute("uv",new wn(M,g)),S.setAttribute("faceIndex",new wn(v,m)),e.push(S),r>wc&&r--}return{lodPlanes:e,sizeLods:t,sigmas:i}}function YP(n,e,t){let i=new Ls(n,e,t);return i.texture.mapping=zg,i.texture.name="PMREM.cubeUv",i.scissorTest=!0,i}function Jm(n,e,t,i,r){n.viewport.set(e,t,i,r),n.scissor.set(e,t,i,r)}function xX(n,e,t){let i=new Float32Array(Ga),r=new N(0,1,0);return new Jr({name:"SphericalGaussianBlur",defines:{n:Ga,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r}},vertexShader:sw(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:Po,depthTest:!1,depthWrite:!1})}function ZP(){return new Jr({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:sw(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:Po,depthTest:!1,depthWrite:!1})}function KP(){return new Jr({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:sw(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:Po,depthTest:!1,depthWrite:!1})}function sw(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function EX(n){let e=new WeakMap,t=null;function i(a){if(a&&a.isTexture){let l=a.mapping,c=l===XE||l===qE,u=l===Ic||l===Dc;if(c||u){let d=e.get(a),h=d!==void 0?d.texture.pmremVersion:0;if(a.isRenderTargetTexture&&a.pmremVersion!==h)return t===null&&(t=new Eg(n)),d=c?t.fromEquirectangular(a,d):t.fromCubemap(a,d),d.texture.pmremVersion=a.pmremVersion,e.set(a,d),d.texture;if(d!==void 0)return d.texture;{let f=a.image;return c&&f&&f.height>0||u&&f&&r(f)?(t===null&&(t=new Eg(n)),d=c?t.fromEquirectangular(a):t.fromCubemap(a),d.texture.pmremVersion=a.pmremVersion,e.set(a,d),a.addEventListener("dispose",s),d.texture):null}}}return a}function r(a){let l=0,c=6;for(let u=0;u<c;u++)a[u]!==void 0&&l++;return l===c}function s(a){let l=a.target;l.removeEventListener("dispose",s);let c=e.get(l);c!==void 0&&(e.delete(l),c.dispose())}function o(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:i,dispose:o}}function MX(n){let e={};function t(i){if(e[i]!==void 0)return e[i];let r;switch(i){case"WEBGL_depth_texture":r=n.getExtension("WEBGL_depth_texture")||n.getExtension("MOZ_WEBGL_depth_texture")||n.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=n.getExtension("WEBGL_compressed_texture_s3tc")||n.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=n.getExtension("WEBGL_compressed_texture_pvrtc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=n.getExtension(i)}return e[i]=r,r}return{has:function(i){return t(i)!==null},init:function(){t("EXT_color_buffer_float"),t("WEBGL_clip_cull_distance"),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture"),t("WEBGL_render_shared_exponent")},get:function(i){let r=t(i);return r===null&&Hd("THREE.WebGLRenderer: "+i+" extension not supported."),r}}}function wX(n,e,t,i){let r={},s=new WeakMap;function o(d){let h=d.target;h.index!==null&&e.remove(h.index);for(let p in h.attributes)e.remove(h.attributes[p]);for(let p in h.morphAttributes){let y=h.morphAttributes[p];for(let g=0,m=y.length;g<m;g++)e.remove(y[g])}h.removeEventListener("dispose",o),delete r[h.id];let f=s.get(h);f&&(e.remove(f),s.delete(h)),i.releaseStatesOfGeometry(h),h.isInstancedBufferGeometry===!0&&delete h._maxInstanceCount,t.memory.geometries--}function a(d,h){return r[h.id]===!0||(h.addEventListener("dispose",o),r[h.id]=!0,t.memory.geometries++),h}function l(d){let h=d.attributes;for(let p in h)e.update(h[p],n.ARRAY_BUFFER);let f=d.morphAttributes;for(let p in f){let y=f[p];for(let g=0,m=y.length;g<m;g++)e.update(y[g],n.ARRAY_BUFFER)}}function c(d){let h=[],f=d.index,p=d.attributes.position,y=0;if(f!==null){let x=f.array;y=f.version;for(let M=0,v=x.length;M<v;M+=3){let S=x[M+0],T=x[M+1],A=x[M+2];h.push(S,T,T,A,A,S)}}else if(p!==void 0){let x=p.array;y=p.version;for(let M=0,v=x.length/3-1;M<v;M+=3){let S=M+0,T=M+1,A=M+2;h.push(S,T,T,A,A,S)}}else return;let g=new(YN(h)?yg:gg)(h,1);g.version=y;let m=s.get(d);m&&e.remove(m),s.set(d,g)}function u(d){let h=s.get(d);if(h){let f=d.index;f!==null&&h.version<f.version&&c(d)}else c(d);return s.get(d)}return{get:a,update:l,getWireframeAttribute:u}}function bX(n,e,t){let i;function r(h){i=h}let s,o;function a(h){s=h.type,o=h.bytesPerElement}function l(h,f){n.drawElements(i,f,s,h*o),t.update(f,i,1)}function c(h,f,p){p!==0&&(n.drawElementsInstanced(i,f,s,h*o,p),t.update(f,i,p))}function u(h,f,p){if(p===0)return;e.get("WEBGL_multi_draw").multiDrawElementsWEBGL(i,f,0,s,h,0,p);let g=0;for(let m=0;m<p;m++)g+=f[m];t.update(g,i,1)}function d(h,f,p,y){if(p===0)return;let g=e.get("WEBGL_multi_draw");if(g===null)for(let m=0;m<h.length;m++)c(h[m]/o,f[m],y[m]);else{g.multiDrawElementsInstancedWEBGL(i,f,0,s,h,0,y,0,p);let m=0;for(let x=0;x<p;x++)m+=f[x]*y[x];t.update(m,i,1)}}this.setMode=r,this.setIndex=a,this.render=l,this.renderInstances=c,this.renderMultiDraw=u,this.renderMultiDrawInstances=d}function SX(n){let e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function i(s,o,a){switch(t.calls++,o){case n.TRIANGLES:t.triangles+=a*(s/3);break;case n.LINES:t.lines+=a*(s/2);break;case n.LINE_STRIP:t.lines+=a*(s-1);break;case n.LINE_LOOP:t.lines+=a*s;break;case n.POINTS:t.points+=a*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",o);break}}function r(){t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:r,update:i}}function TX(n,e,t){let i=new WeakMap,r=new kt;function s(o,a,l){let c=o.morphTargetInfluences,u=a.morphAttributes.position||a.morphAttributes.normal||a.morphAttributes.color,d=u!==void 0?u.length:0,h=i.get(a);if(h===void 0||h.count!==d){let _=function(){I.dispose(),i.delete(a),a.removeEventListener("dispose",_)};var f=_;h!==void 0&&h.texture.dispose();let p=a.morphAttributes.position!==void 0,y=a.morphAttributes.normal!==void 0,g=a.morphAttributes.color!==void 0,m=a.morphAttributes.position||[],x=a.morphAttributes.normal||[],M=a.morphAttributes.color||[],v=0;p===!0&&(v=1),y===!0&&(v=2),g===!0&&(v=3);let S=a.attributes.position.count*v,T=1;S>e.maxTextureSize&&(T=Math.ceil(S/e.maxTextureSize),S=e.maxTextureSize);let A=new Float32Array(S*T*4*d),I=new pg(A,S,T,d);I.type=Ir,I.needsUpdate=!0;let w=v*4;for(let D=0;D<d;D++){let U=m[D],L=x[D],W=M[D],z=S*T*4*D;for(let $=0;$<U.count;$++){let G=$*w;p===!0&&(r.fromBufferAttribute(U,$),A[z+G+0]=r.x,A[z+G+1]=r.y,A[z+G+2]=r.z,A[z+G+3]=0),y===!0&&(r.fromBufferAttribute(L,$),A[z+G+4]=r.x,A[z+G+5]=r.y,A[z+G+6]=r.z,A[z+G+7]=0),g===!0&&(r.fromBufferAttribute(W,$),A[z+G+8]=r.x,A[z+G+9]=r.y,A[z+G+10]=r.z,A[z+G+11]=W.itemSize===4?r.w:1)}}h={count:d,texture:I,size:new Ye(S,T)},i.set(a,h),a.addEventListener("dispose",_)}if(o.isInstancedMesh===!0&&o.morphTexture!==null)l.getUniforms().setValue(n,"morphTexture",o.morphTexture,t);else{let p=0;for(let g=0;g<c.length;g++)p+=c[g];let y=a.morphTargetsRelative?1:1-p;l.getUniforms().setValue(n,"morphTargetBaseInfluence",y),l.getUniforms().setValue(n,"morphTargetInfluences",c)}l.getUniforms().setValue(n,"morphTargetsTexture",h.texture,t),l.getUniforms().setValue(n,"morphTargetsTextureSize",h.size)}return{update:s}}function CX(n,e,t,i){let r=new WeakMap;function s(l){let c=i.render.frame,u=l.geometry,d=e.get(l,u);if(r.get(d)!==c&&(e.update(d),r.set(d,c)),l.isInstancedMesh&&(l.hasEventListener("dispose",a)===!1&&l.addEventListener("dispose",a),r.get(l)!==c&&(t.update(l.instanceMatrix,n.ARRAY_BUFFER),l.instanceColor!==null&&t.update(l.instanceColor,n.ARRAY_BUFFER),r.set(l,c))),l.isSkinnedMesh){let h=l.skeleton;r.get(h)!==c&&(h.update(),r.set(h,c))}return d}function o(){r=new WeakMap}function a(l){let c=l.target;c.removeEventListener("dispose",a),t.remove(c.instanceMatrix),c.instanceColor!==null&&t.remove(c.instanceColor)}return{update:s,dispose:o}}var Mg=class extends ar{constructor(e,t,i,r,s,o,a,l,c,u=Sc){if(u!==Sc&&u!==Pc)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");i===void 0&&u===Sc&&(i=Wa),i===void 0&&u===Pc&&(i=Rc),super(null,r,s,o,a,l,u,i,c),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=a!==void 0?a:ei,this.minFilter=l!==void 0?l:ei,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.compareFunction=e.compareFunction,this}toJSON(e){let t=super.toJSON(e);return this.compareFunction!==null&&(t.compareFunction=this.compareFunction),t}},QN=new ar,JP=new Mg(1,1),eO=new pg,tO=new bM,nO=new _g,QP=[],eN=[],tN=new Float32Array(16),nN=new Float32Array(9),iN=new Float32Array(4);function Gc(n,e,t){let i=n[0];if(i<=0||i>0)return n;let r=e*t,s=QP[r];if(s===void 0&&(s=new Float32Array(r),QP[r]=s),e!==0){i.toArray(s,0);for(let o=1,a=0;o!==e;++o)a+=t,n[o].toArray(s,a)}return s}function bn(n,e){if(n.length!==e.length)return!1;for(let t=0,i=n.length;t<i;t++)if(n[t]!==e[t])return!1;return!0}function Sn(n,e){for(let t=0,i=e.length;t<i;t++)n[t]=e[t]}function jg(n,e){let t=eN[e];t===void 0&&(t=new Int32Array(e),eN[e]=t);for(let i=0;i!==e;++i)t[i]=n.allocateTextureUnit();return t}function AX(n,e){let t=this.cache;t[0]!==e&&(n.uniform1f(this.addr,e),t[0]=e)}function IX(n,e){let t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(bn(t,e))return;n.uniform2fv(this.addr,e),Sn(t,e)}}function DX(n,e){let t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(n.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(bn(t,e))return;n.uniform3fv(this.addr,e),Sn(t,e)}}function RX(n,e){let t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(bn(t,e))return;n.uniform4fv(this.addr,e),Sn(t,e)}}function PX(n,e){let t=this.cache,i=e.elements;if(i===void 0){if(bn(t,e))return;n.uniformMatrix2fv(this.addr,!1,e),Sn(t,e)}else{if(bn(t,i))return;iN.set(i),n.uniformMatrix2fv(this.addr,!1,iN),Sn(t,i)}}function NX(n,e){let t=this.cache,i=e.elements;if(i===void 0){if(bn(t,e))return;n.uniformMatrix3fv(this.addr,!1,e),Sn(t,e)}else{if(bn(t,i))return;nN.set(i),n.uniformMatrix3fv(this.addr,!1,nN),Sn(t,i)}}function OX(n,e){let t=this.cache,i=e.elements;if(i===void 0){if(bn(t,e))return;n.uniformMatrix4fv(this.addr,!1,e),Sn(t,e)}else{if(bn(t,i))return;tN.set(i),n.uniformMatrix4fv(this.addr,!1,tN),Sn(t,i)}}function LX(n,e){let t=this.cache;t[0]!==e&&(n.uniform1i(this.addr,e),t[0]=e)}function FX(n,e){let t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(bn(t,e))return;n.uniform2iv(this.addr,e),Sn(t,e)}}function kX(n,e){let t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(bn(t,e))return;n.uniform3iv(this.addr,e),Sn(t,e)}}function UX(n,e){let t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(bn(t,e))return;n.uniform4iv(this.addr,e),Sn(t,e)}}function BX(n,e){let t=this.cache;t[0]!==e&&(n.uniform1ui(this.addr,e),t[0]=e)}function VX(n,e){let t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(bn(t,e))return;n.uniform2uiv(this.addr,e),Sn(t,e)}}function zX(n,e){let t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(bn(t,e))return;n.uniform3uiv(this.addr,e),Sn(t,e)}}function HX(n,e){let t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(bn(t,e))return;n.uniform4uiv(this.addr,e),Sn(t,e)}}function GX(n,e,t){let i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r);let s;this.type===n.SAMPLER_2D_SHADOW?(JP.compareFunction=XN,s=JP):s=QN,t.setTexture2D(e||s,r)}function jX(n,e,t){let i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture3D(e||tO,r)}function WX(n,e,t){let i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTextureCube(e||nO,r)}function $X(n,e,t){let i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture2DArray(e||eO,r)}function XX(n){switch(n){case 5126:return AX;case 35664:return IX;case 35665:return DX;case 35666:return RX;case 35674:return PX;case 35675:return NX;case 35676:return OX;case 5124:case 35670:return LX;case 35667:case 35671:return FX;case 35668:case 35672:return kX;case 35669:case 35673:return UX;case 5125:return BX;case 36294:return VX;case 36295:return zX;case 36296:return HX;case 35678:case 36198:case 36298:case 36306:case 35682:return GX;case 35679:case 36299:case 36307:return jX;case 35680:case 36300:case 36308:case 36293:return WX;case 36289:case 36303:case 36311:case 36292:return $X}}function qX(n,e){n.uniform1fv(this.addr,e)}function YX(n,e){let t=Gc(e,this.size,2);n.uniform2fv(this.addr,t)}function ZX(n,e){let t=Gc(e,this.size,3);n.uniform3fv(this.addr,t)}function KX(n,e){let t=Gc(e,this.size,4);n.uniform4fv(this.addr,t)}function JX(n,e){let t=Gc(e,this.size,4);n.uniformMatrix2fv(this.addr,!1,t)}function QX(n,e){let t=Gc(e,this.size,9);n.uniformMatrix3fv(this.addr,!1,t)}function eq(n,e){let t=Gc(e,this.size,16);n.uniformMatrix4fv(this.addr,!1,t)}function tq(n,e){n.uniform1iv(this.addr,e)}function nq(n,e){n.uniform2iv(this.addr,e)}function iq(n,e){n.uniform3iv(this.addr,e)}function rq(n,e){n.uniform4iv(this.addr,e)}function sq(n,e){n.uniform1uiv(this.addr,e)}function oq(n,e){n.uniform2uiv(this.addr,e)}function aq(n,e){n.uniform3uiv(this.addr,e)}function lq(n,e){n.uniform4uiv(this.addr,e)}function cq(n,e,t){let i=this.cache,r=e.length,s=jg(t,r);bn(i,s)||(n.uniform1iv(this.addr,s),Sn(i,s));for(let o=0;o!==r;++o)t.setTexture2D(e[o]||QN,s[o])}function uq(n,e,t){let i=this.cache,r=e.length,s=jg(t,r);bn(i,s)||(n.uniform1iv(this.addr,s),Sn(i,s));for(let o=0;o!==r;++o)t.setTexture3D(e[o]||tO,s[o])}function dq(n,e,t){let i=this.cache,r=e.length,s=jg(t,r);bn(i,s)||(n.uniform1iv(this.addr,s),Sn(i,s));for(let o=0;o!==r;++o)t.setTextureCube(e[o]||nO,s[o])}function hq(n,e,t){let i=this.cache,r=e.length,s=jg(t,r);bn(i,s)||(n.uniform1iv(this.addr,s),Sn(i,s));for(let o=0;o!==r;++o)t.setTexture2DArray(e[o]||eO,s[o])}function fq(n){switch(n){case 5126:return qX;case 35664:return YX;case 35665:return ZX;case 35666:return KX;case 35674:return JX;case 35675:return QX;case 35676:return eq;case 5124:case 35670:return tq;case 35667:case 35671:return nq;case 35668:case 35672:return iq;case 35669:case 35673:return rq;case 5125:return sq;case 36294:return oq;case 36295:return aq;case 36296:return lq;case 35678:case 36198:case 36298:case 36306:case 35682:return cq;case 35679:case 36299:case 36307:return uq;case 35680:case 36300:case 36308:case 36293:return dq;case 36289:case 36303:case 36311:case 36292:return hq}}var CM=class{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.type=t.type,this.setValue=XX(t.type)}},AM=class{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.type=t.type,this.size=t.size,this.setValue=fq(t.type)}},IM=class{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,i){let r=this.seq;for(let s=0,o=r.length;s!==o;++s){let a=r[s];a.setValue(e,t[a.id],i)}}},PE=/(\w+)(\])?(\[|\.)?/g;function rN(n,e){n.seq.push(e),n.map[e.id]=e}function pq(n,e,t){let i=n.name,r=i.length;for(PE.lastIndex=0;;){let s=PE.exec(i),o=PE.lastIndex,a=s[1],l=s[2]==="]",c=s[3];if(l&&(a=a|0),c===void 0||c==="["&&o+2===r){rN(t,c===void 0?new CM(a,n,e):new AM(a,n,e));break}else{let d=t.map[a];d===void 0&&(d=new IM(a),rN(t,d)),t=d}}}var Cc=class{constructor(e,t){this.seq=[],this.map={};let i=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let r=0;r<i;++r){let s=e.getActiveUniform(t,r),o=e.getUniformLocation(t,s.name);pq(s,o,this)}}setValue(e,t,i,r){let s=this.map[t];s!==void 0&&s.setValue(e,i,r)}setOptional(e,t,i){let r=t[i];r!==void 0&&this.setValue(e,i,r)}static upload(e,t,i,r){for(let s=0,o=t.length;s!==o;++s){let a=t[s],l=i[a.id];l.needsUpdate!==!1&&a.setValue(e,l.value,r)}}static seqWithValue(e,t){let i=[];for(let r=0,s=e.length;r!==s;++r){let o=e[r];o.id in t&&i.push(o)}return i}};function sN(n,e,t){let i=n.createShader(e);return n.shaderSource(i,t),n.compileShader(i),i}var mq=37297,gq=0;function yq(n,e){let t=n.split(`
`),i=[],r=Math.max(e-6,0),s=Math.min(e+6,t.length);for(let o=r;o<s;o++){let a=o+1;i.push(`${a===e?">":" "} ${a}: ${t[o]}`)}return i.join(`
`)}var oN=new at;function vq(n){Pt._getMatrix(oN,Pt.workingColorSpace,n);let e=`mat3( ${oN.elements.map(t=>t.toFixed(4))} )`;switch(Pt.getTransfer(n)){case Gg:return[e,"LinearTransferOETF"];case Xt:return[e,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space: ",n),[e,"LinearTransferOETF"]}}function aN(n,e,t){let i=n.getShaderParameter(e,n.COMPILE_STATUS),r=n.getShaderInfoLog(e).trim();if(i&&r==="")return"";let s=/ERROR: 0:(\d+)/.exec(r);if(s){let o=parseInt(s[1]);return t.toUpperCase()+`

`+r+`

`+yq(n.getShaderSource(e),o)}else return r}function _q(n,e){let t=vq(e);return[`vec4 ${n}( vec4 value ) {`,`	return ${t[1]}( vec4( value.rgb * ${t[0]}, value.a ) );`,"}"].join(`
`)}function xq(n,e){let t;switch(e){case IW:t="Linear";break;case DW:t="Reinhard";break;case RW:t="Cineon";break;case PW:t="ACESFilmic";break;case OW:t="AgX";break;case LW:t="Neutral";break;case NW:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+n+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}var Qm=new N;function Eq(){Pt.getLuminanceCoefficients(Qm);let n=Qm.x.toFixed(4),e=Qm.y.toFixed(4),t=Qm.z.toFixed(4);return["float luminance( const in vec3 rgb ) {",`	const vec3 weights = vec3( ${n}, ${e}, ${t} );`,"	return dot( weights, rgb );","}"].join(`
`)}function Mq(n){return[n.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",n.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(Gd).join(`
`)}function wq(n){let e=[];for(let t in n){let i=n[t];i!==!1&&e.push("#define "+t+" "+i)}return e.join(`
`)}function bq(n,e){let t={},i=n.getProgramParameter(e,n.ACTIVE_ATTRIBUTES);for(let r=0;r<i;r++){let s=n.getActiveAttrib(e,r),o=s.name,a=1;s.type===n.FLOAT_MAT2&&(a=2),s.type===n.FLOAT_MAT3&&(a=3),s.type===n.FLOAT_MAT4&&(a=4),t[o]={type:s.type,location:n.getAttribLocation(e,o),locationSize:a}}return t}function Gd(n){return n!==""}function lN(n,e){let t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return n.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function cN(n,e){return n.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}var Sq=/^[ \t]*#include +<([\w\d./]+)>/gm;function DM(n){return n.replace(Sq,Cq)}var Tq=new Map;function Cq(n,e){let t=ht[e];if(t===void 0){let i=Tq.get(e);if(i!==void 0)t=ht[i],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,i);else throw new Error("Can not resolve #include <"+e+">")}return DM(t)}var Aq=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function uN(n){return n.replace(Aq,Iq)}function Iq(n,e,t,i){let r="";for(let s=parseInt(e);s<parseInt(t);s++)r+=i.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return r}function dN(n){let e=`precision ${n.precision} float;
	precision ${n.precision} int;
	precision ${n.precision} sampler2D;
	precision ${n.precision} samplerCube;
	precision ${n.precision} sampler3D;
	precision ${n.precision} sampler2DArray;
	precision ${n.precision} sampler2DShadow;
	precision ${n.precision} samplerCubeShadow;
	precision ${n.precision} sampler2DArrayShadow;
	precision ${n.precision} isampler2D;
	precision ${n.precision} isampler3D;
	precision ${n.precision} isamplerCube;
	precision ${n.precision} isampler2DArray;
	precision ${n.precision} usampler2D;
	precision ${n.precision} usampler3D;
	precision ${n.precision} usamplerCube;
	precision ${n.precision} usampler2DArray;
	`;return n.precision==="highp"?e+=`
#define HIGH_PRECISION`:n.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:n.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function Dq(n){let e="SHADOWMAP_TYPE_BASIC";return n.shadowMapType===ON?e="SHADOWMAP_TYPE_PCF":n.shadowMapType===lW?e="SHADOWMAP_TYPE_PCF_SOFT":n.shadowMapType===Ds&&(e="SHADOWMAP_TYPE_VSM"),e}function Rq(n){let e="ENVMAP_TYPE_CUBE";if(n.envMap)switch(n.envMapMode){case Ic:case Dc:e="ENVMAP_TYPE_CUBE";break;case zg:e="ENVMAP_TYPE_CUBE_UV";break}return e}function Pq(n){let e="ENVMAP_MODE_REFLECTION";if(n.envMap)switch(n.envMapMode){case Dc:e="ENVMAP_MODE_REFRACTION";break}return e}function Nq(n){let e="ENVMAP_BLENDING_NONE";if(n.envMap)switch(n.combine){case LN:e="ENVMAP_BLENDING_MULTIPLY";break;case CW:e="ENVMAP_BLENDING_MIX";break;case AW:e="ENVMAP_BLENDING_ADD";break}return e}function Oq(n){let e=n.envMapCubeUVHeight;if(e===null)return null;let t=Math.log2(e)-2,i=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),7*16)),texelHeight:i,maxMip:t}}function Lq(n,e,t,i){let r=n.getContext(),s=t.defines,o=t.vertexShader,a=t.fragmentShader,l=Dq(t),c=Rq(t),u=Pq(t),d=Nq(t),h=Oq(t),f=Mq(t),p=wq(s),y=r.createProgram(),g,m,x=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(g=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,p].filter(Gd).join(`
`),g.length>0&&(g+=`
`),m=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,p].filter(Gd).join(`
`),m.length>0&&(m+=`
`)):(g=[dN(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,p,t.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",t.batching?"#define USE_BATCHING":"",t.batchingColor?"#define USE_BATCHING_COLOR":"",t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.instancingMorph?"#define USE_INSTANCING_MORPH":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+u:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.displacementMap?"#define USE_DISPLACEMENTMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.mapUv?"#define MAP_UV "+t.mapUv:"",t.alphaMapUv?"#define ALPHAMAP_UV "+t.alphaMapUv:"",t.lightMapUv?"#define LIGHTMAP_UV "+t.lightMapUv:"",t.aoMapUv?"#define AOMAP_UV "+t.aoMapUv:"",t.emissiveMapUv?"#define EMISSIVEMAP_UV "+t.emissiveMapUv:"",t.bumpMapUv?"#define BUMPMAP_UV "+t.bumpMapUv:"",t.normalMapUv?"#define NORMALMAP_UV "+t.normalMapUv:"",t.displacementMapUv?"#define DISPLACEMENTMAP_UV "+t.displacementMapUv:"",t.metalnessMapUv?"#define METALNESSMAP_UV "+t.metalnessMapUv:"",t.roughnessMapUv?"#define ROUGHNESSMAP_UV "+t.roughnessMapUv:"",t.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+t.anisotropyMapUv:"",t.clearcoatMapUv?"#define CLEARCOATMAP_UV "+t.clearcoatMapUv:"",t.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+t.clearcoatNormalMapUv:"",t.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+t.clearcoatRoughnessMapUv:"",t.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+t.iridescenceMapUv:"",t.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+t.iridescenceThicknessMapUv:"",t.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+t.sheenColorMapUv:"",t.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+t.sheenRoughnessMapUv:"",t.specularMapUv?"#define SPECULARMAP_UV "+t.specularMapUv:"",t.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+t.specularColorMapUv:"",t.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+t.specularIntensityMapUv:"",t.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+t.transmissionMapUv:"",t.thicknessMapUv?"#define THICKNESSMAP_UV "+t.thicknessMapUv:"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(Gd).join(`
`),m=[dN(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,p,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+c:"",t.envMap?"#define "+u:"",t.envMap?"#define "+d:"",h?"#define CUBEUV_TEXEL_WIDTH "+h.texelWidth:"",h?"#define CUBEUV_TEXEL_HEIGHT "+h.texelHeight:"",h?"#define CUBEUV_MAX_MIP "+h.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.dispersion?"#define USE_DISPERSION":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor||t.batchingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.decodeVideoTextureEmissive?"#define DECODE_VIDEO_TEXTURE_EMISSIVE":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==No?"#define TONE_MAPPING":"",t.toneMapping!==No?ht.tonemapping_pars_fragment:"",t.toneMapping!==No?xq("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",ht.colorspace_pars_fragment,_q("linearToOutputTexel",t.outputColorSpace),Eq(),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(Gd).join(`
`)),o=DM(o),o=lN(o,t),o=cN(o,t),a=DM(a),a=lN(a,t),a=cN(a,t),o=uN(o),a=uN(a),t.isRawShaderMaterial!==!0&&(x=`#version 300 es
`,g=[f,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+g,m=["#define varying in",t.glslVersion===bP?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===bP?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+m);let M=x+g+o,v=x+m+a,S=sN(r,r.VERTEX_SHADER,M),T=sN(r,r.FRAGMENT_SHADER,v);r.attachShader(y,S),r.attachShader(y,T),t.index0AttributeName!==void 0?r.bindAttribLocation(y,0,t.index0AttributeName):t.morphTargets===!0&&r.bindAttribLocation(y,0,"position"),r.linkProgram(y);function A(D){if(n.debug.checkShaderErrors){let U=r.getProgramInfoLog(y).trim(),L=r.getShaderInfoLog(S).trim(),W=r.getShaderInfoLog(T).trim(),z=!0,$=!0;if(r.getProgramParameter(y,r.LINK_STATUS)===!1)if(z=!1,typeof n.debug.onShaderError=="function")n.debug.onShaderError(r,y,S,T);else{let G=aN(r,S,"vertex"),V=aN(r,T,"fragment");console.error("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(y,r.VALIDATE_STATUS)+`

Material Name: `+D.name+`
Material Type: `+D.type+`

Program Info Log: `+U+`
`+G+`
`+V)}else U!==""?console.warn("THREE.WebGLProgram: Program Info Log:",U):(L===""||W==="")&&($=!1);$&&(D.diagnostics={runnable:z,programLog:U,vertexShader:{log:L,prefix:g},fragmentShader:{log:W,prefix:m}})}r.deleteShader(S),r.deleteShader(T),I=new Cc(r,y),w=bq(r,y)}let I;this.getUniforms=function(){return I===void 0&&A(this),I};let w;this.getAttributes=function(){return w===void 0&&A(this),w};let _=t.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return _===!1&&(_=r.getProgramParameter(y,mq)),_},this.destroy=function(){i.releaseStatesOfProgram(this),r.deleteProgram(y),this.program=void 0},this.type=t.shaderType,this.name=t.shaderName,this.id=gq++,this.cacheKey=e,this.usedTimes=1,this.program=y,this.vertexShader=S,this.fragmentShader=T,this}var Fq=0,RM=class{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){let t=e.vertexShader,i=e.fragmentShader,r=this._getShaderStage(t),s=this._getShaderStage(i),o=this._getShaderCacheForMaterial(e);return o.has(r)===!1&&(o.add(r),r.usedTimes++),o.has(s)===!1&&(o.add(s),s.usedTimes++),this}remove(e){let t=this.materialCache.get(e);for(let i of t)i.usedTimes--,i.usedTimes===0&&this.shaderCache.delete(i.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){let t=this.materialCache,i=t.get(e);return i===void 0&&(i=new Set,t.set(e,i)),i}_getShaderStage(e){let t=this.shaderCache,i=t.get(e);return i===void 0&&(i=new PM(e),t.set(e,i)),i}},PM=class{constructor(e){this.id=Fq++,this.code=e,this.usedTimes=0}};function kq(n,e,t,i,r,s,o){let a=new mg,l=new RM,c=new Set,u=[],d=r.logarithmicDepthBuffer,h=r.vertexTextures,f=r.precision,p={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function y(w){return c.add(w),w===0?"uv":`uv${w}`}function g(w,_,D,U,L){let W=U.fog,z=L.geometry,$=w.isMeshStandardMaterial?U.environment:null,G=(w.isMeshStandardMaterial?t:e).get(w.envMap||$),V=G&&G.mapping===zg?G.image.height:null,se=p[w.type];w.precision!==null&&(f=r.getMaxPrecision(w.precision),f!==w.precision&&console.warn("THREE.WebGLProgram.getParameters:",w.precision,"not supported, using",f,"instead."));let ie=z.morphAttributes.position||z.morphAttributes.normal||z.morphAttributes.color,ce=ie!==void 0?ie.length:0,Se=0;z.morphAttributes.position!==void 0&&(Se=1),z.morphAttributes.normal!==void 0&&(Se=2),z.morphAttributes.color!==void 0&&(Se=3);let Ie,q,re,fe;if(se){let St=$r[se];Ie=St.vertexShader,q=St.fragmentShader}else Ie=w.vertexShader,q=w.fragmentShader,l.update(w),re=l.getVertexShaderID(w),fe=l.getFragmentShaderID(w);let oe=n.getRenderTarget(),Ae=n.state.buffers.depth.getReversed(),Ue=L.isInstancedMesh===!0,ze=L.isBatchedMesh===!0,It=!!w.map,rt=!!w.matcap,Gt=!!G,O=!!w.aoMap,gn=!!w.lightMap,dt=!!w.bumpMap,Ke=!!w.normalMap,Ce=!!w.displacementMap,Dt=!!w.emissiveMap,Fe=!!w.metalnessMap,C=!!w.roughnessMap,E=w.anisotropy>0,B=w.clearcoat>0,ee=w.dispersion>0,ne=w.iridescence>0,te=w.sheen>0,De=w.transmission>0,ge=E&&!!w.anisotropyMap,we=B&&!!w.clearcoatMap,bt=B&&!!w.clearcoatNormalMap,ue=B&&!!w.clearcoatRoughnessMap,be=ne&&!!w.iridescenceMap,Ge=ne&&!!w.iridescenceThicknessMap,$e=te&&!!w.sheenColorMap,Me=te&&!!w.sheenRoughnessMap,P=!!w.specularMap,K=!!w.specularColorMap,ve=!!w.specularIntensityMap,R=De&&!!w.transmissionMap,le=De&&!!w.thicknessMap,X=!!w.gradientMap,J=!!w.alphaMap,xe=w.alphaTest>0,_e=!!w.alphaHash,He=!!w.extensions,Ot=No;w.toneMapped&&(oe===null||oe.isXRRenderTarget===!0)&&(Ot=n.toneMapping);let an={shaderID:se,shaderType:w.type,shaderName:w.name,vertexShader:Ie,fragmentShader:q,defines:w.defines,customVertexShaderID:re,customFragmentShaderID:fe,isRawShaderMaterial:w.isRawShaderMaterial===!0,glslVersion:w.glslVersion,precision:f,batching:ze,batchingColor:ze&&L._colorsTexture!==null,instancing:Ue,instancingColor:Ue&&L.instanceColor!==null,instancingMorph:Ue&&L.morphTexture!==null,supportsVertexTextures:h,outputColorSpace:oe===null?n.outputColorSpace:oe.isXRRenderTarget===!0?oe.texture.colorSpace:Hc,alphaToCoverage:!!w.alphaToCoverage,map:It,matcap:rt,envMap:Gt,envMapMode:Gt&&G.mapping,envMapCubeUVHeight:V,aoMap:O,lightMap:gn,bumpMap:dt,normalMap:Ke,displacementMap:h&&Ce,emissiveMap:Dt,normalMapObjectSpace:Ke&&w.normalMapType===VW,normalMapTangentSpace:Ke&&w.normalMapType===$N,metalnessMap:Fe,roughnessMap:C,anisotropy:E,anisotropyMap:ge,clearcoat:B,clearcoatMap:we,clearcoatNormalMap:bt,clearcoatRoughnessMap:ue,dispersion:ee,iridescence:ne,iridescenceMap:be,iridescenceThicknessMap:Ge,sheen:te,sheenColorMap:$e,sheenRoughnessMap:Me,specularMap:P,specularColorMap:K,specularIntensityMap:ve,transmission:De,transmissionMap:R,thicknessMap:le,gradientMap:X,opaque:w.transparent===!1&&w.blending===bc&&w.alphaToCoverage===!1,alphaMap:J,alphaTest:xe,alphaHash:_e,combine:w.combine,mapUv:It&&y(w.map.channel),aoMapUv:O&&y(w.aoMap.channel),lightMapUv:gn&&y(w.lightMap.channel),bumpMapUv:dt&&y(w.bumpMap.channel),normalMapUv:Ke&&y(w.normalMap.channel),displacementMapUv:Ce&&y(w.displacementMap.channel),emissiveMapUv:Dt&&y(w.emissiveMap.channel),metalnessMapUv:Fe&&y(w.metalnessMap.channel),roughnessMapUv:C&&y(w.roughnessMap.channel),anisotropyMapUv:ge&&y(w.anisotropyMap.channel),clearcoatMapUv:we&&y(w.clearcoatMap.channel),clearcoatNormalMapUv:bt&&y(w.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:ue&&y(w.clearcoatRoughnessMap.channel),iridescenceMapUv:be&&y(w.iridescenceMap.channel),iridescenceThicknessMapUv:Ge&&y(w.iridescenceThicknessMap.channel),sheenColorMapUv:$e&&y(w.sheenColorMap.channel),sheenRoughnessMapUv:Me&&y(w.sheenRoughnessMap.channel),specularMapUv:P&&y(w.specularMap.channel),specularColorMapUv:K&&y(w.specularColorMap.channel),specularIntensityMapUv:ve&&y(w.specularIntensityMap.channel),transmissionMapUv:R&&y(w.transmissionMap.channel),thicknessMapUv:le&&y(w.thicknessMap.channel),alphaMapUv:J&&y(w.alphaMap.channel),vertexTangents:!!z.attributes.tangent&&(Ke||E),vertexColors:w.vertexColors,vertexAlphas:w.vertexColors===!0&&!!z.attributes.color&&z.attributes.color.itemSize===4,pointsUvs:L.isPoints===!0&&!!z.attributes.uv&&(It||J),fog:!!W,useFog:w.fog===!0,fogExp2:!!W&&W.isFogExp2,flatShading:w.flatShading===!0,sizeAttenuation:w.sizeAttenuation===!0,logarithmicDepthBuffer:d,reverseDepthBuffer:Ae,skinning:L.isSkinnedMesh===!0,morphTargets:z.morphAttributes.position!==void 0,morphNormals:z.morphAttributes.normal!==void 0,morphColors:z.morphAttributes.color!==void 0,morphTargetsCount:ce,morphTextureStride:Se,numDirLights:_.directional.length,numPointLights:_.point.length,numSpotLights:_.spot.length,numSpotLightMaps:_.spotLightMap.length,numRectAreaLights:_.rectArea.length,numHemiLights:_.hemi.length,numDirLightShadows:_.directionalShadowMap.length,numPointLightShadows:_.pointShadowMap.length,numSpotLightShadows:_.spotShadowMap.length,numSpotLightShadowsWithMaps:_.numSpotLightShadowsWithMaps,numLightProbes:_.numLightProbes,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:w.dithering,shadowMapEnabled:n.shadowMap.enabled&&D.length>0,shadowMapType:n.shadowMap.type,toneMapping:Ot,decodeVideoTexture:It&&w.map.isVideoTexture===!0&&Pt.getTransfer(w.map.colorSpace)===Xt,decodeVideoTextureEmissive:Dt&&w.emissiveMap.isVideoTexture===!0&&Pt.getTransfer(w.emissiveMap.colorSpace)===Xt,premultipliedAlpha:w.premultipliedAlpha,doubleSided:w.side===Cr,flipSided:w.side===fi,useDepthPacking:w.depthPacking>=0,depthPacking:w.depthPacking||0,index0AttributeName:w.index0AttributeName,extensionClipCullDistance:He&&w.extensions.clipCullDistance===!0&&i.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(He&&w.extensions.multiDraw===!0||ze)&&i.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:i.has("KHR_parallel_shader_compile"),customProgramCacheKey:w.customProgramCacheKey()};return an.vertexUv1s=c.has(1),an.vertexUv2s=c.has(2),an.vertexUv3s=c.has(3),c.clear(),an}function m(w){let _=[];if(w.shaderID?_.push(w.shaderID):(_.push(w.customVertexShaderID),_.push(w.customFragmentShaderID)),w.defines!==void 0)for(let D in w.defines)_.push(D),_.push(w.defines[D]);return w.isRawShaderMaterial===!1&&(x(_,w),M(_,w),_.push(n.outputColorSpace)),_.push(w.customProgramCacheKey),_.join()}function x(w,_){w.push(_.precision),w.push(_.outputColorSpace),w.push(_.envMapMode),w.push(_.envMapCubeUVHeight),w.push(_.mapUv),w.push(_.alphaMapUv),w.push(_.lightMapUv),w.push(_.aoMapUv),w.push(_.bumpMapUv),w.push(_.normalMapUv),w.push(_.displacementMapUv),w.push(_.emissiveMapUv),w.push(_.metalnessMapUv),w.push(_.roughnessMapUv),w.push(_.anisotropyMapUv),w.push(_.clearcoatMapUv),w.push(_.clearcoatNormalMapUv),w.push(_.clearcoatRoughnessMapUv),w.push(_.iridescenceMapUv),w.push(_.iridescenceThicknessMapUv),w.push(_.sheenColorMapUv),w.push(_.sheenRoughnessMapUv),w.push(_.specularMapUv),w.push(_.specularColorMapUv),w.push(_.specularIntensityMapUv),w.push(_.transmissionMapUv),w.push(_.thicknessMapUv),w.push(_.combine),w.push(_.fogExp2),w.push(_.sizeAttenuation),w.push(_.morphTargetsCount),w.push(_.morphAttributeCount),w.push(_.numDirLights),w.push(_.numPointLights),w.push(_.numSpotLights),w.push(_.numSpotLightMaps),w.push(_.numHemiLights),w.push(_.numRectAreaLights),w.push(_.numDirLightShadows),w.push(_.numPointLightShadows),w.push(_.numSpotLightShadows),w.push(_.numSpotLightShadowsWithMaps),w.push(_.numLightProbes),w.push(_.shadowMapType),w.push(_.toneMapping),w.push(_.numClippingPlanes),w.push(_.numClipIntersection),w.push(_.depthPacking)}function M(w,_){a.disableAll(),_.supportsVertexTextures&&a.enable(0),_.instancing&&a.enable(1),_.instancingColor&&a.enable(2),_.instancingMorph&&a.enable(3),_.matcap&&a.enable(4),_.envMap&&a.enable(5),_.normalMapObjectSpace&&a.enable(6),_.normalMapTangentSpace&&a.enable(7),_.clearcoat&&a.enable(8),_.iridescence&&a.enable(9),_.alphaTest&&a.enable(10),_.vertexColors&&a.enable(11),_.vertexAlphas&&a.enable(12),_.vertexUv1s&&a.enable(13),_.vertexUv2s&&a.enable(14),_.vertexUv3s&&a.enable(15),_.vertexTangents&&a.enable(16),_.anisotropy&&a.enable(17),_.alphaHash&&a.enable(18),_.batching&&a.enable(19),_.dispersion&&a.enable(20),_.batchingColor&&a.enable(21),w.push(a.mask),a.disableAll(),_.fog&&a.enable(0),_.useFog&&a.enable(1),_.flatShading&&a.enable(2),_.logarithmicDepthBuffer&&a.enable(3),_.reverseDepthBuffer&&a.enable(4),_.skinning&&a.enable(5),_.morphTargets&&a.enable(6),_.morphNormals&&a.enable(7),_.morphColors&&a.enable(8),_.premultipliedAlpha&&a.enable(9),_.shadowMapEnabled&&a.enable(10),_.doubleSided&&a.enable(11),_.flipSided&&a.enable(12),_.useDepthPacking&&a.enable(13),_.dithering&&a.enable(14),_.transmission&&a.enable(15),_.sheen&&a.enable(16),_.opaque&&a.enable(17),_.pointsUvs&&a.enable(18),_.decodeVideoTexture&&a.enable(19),_.decodeVideoTextureEmissive&&a.enable(20),_.alphaToCoverage&&a.enable(21),w.push(a.mask)}function v(w){let _=p[w.type],D;if(_){let U=$r[_];D=C8.clone(U.uniforms)}else D=w.uniforms;return D}function S(w,_){let D;for(let U=0,L=u.length;U<L;U++){let W=u[U];if(W.cacheKey===_){D=W,++D.usedTimes;break}}return D===void 0&&(D=new Lq(n,_,w,s),u.push(D)),D}function T(w){if(--w.usedTimes===0){let _=u.indexOf(w);u[_]=u[u.length-1],u.pop(),w.destroy()}}function A(w){l.remove(w)}function I(){l.dispose()}return{getParameters:g,getProgramCacheKey:m,getUniforms:v,acquireProgram:S,releaseProgram:T,releaseShaderCache:A,programs:u,dispose:I}}function Uq(){let n=new WeakMap;function e(o){return n.has(o)}function t(o){let a=n.get(o);return a===void 0&&(a={},n.set(o,a)),a}function i(o){n.delete(o)}function r(o,a,l){n.get(o)[a]=l}function s(){n=new WeakMap}return{has:e,get:t,remove:i,update:r,dispose:s}}function Bq(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.material.id!==e.material.id?n.material.id-e.material.id:n.z!==e.z?n.z-e.z:n.id-e.id}function hN(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.z!==e.z?e.z-n.z:n.id-e.id}function fN(){let n=[],e=0,t=[],i=[],r=[];function s(){e=0,t.length=0,i.length=0,r.length=0}function o(d,h,f,p,y,g){let m=n[e];return m===void 0?(m={id:d.id,object:d,geometry:h,material:f,groupOrder:p,renderOrder:d.renderOrder,z:y,group:g},n[e]=m):(m.id=d.id,m.object=d,m.geometry=h,m.material=f,m.groupOrder=p,m.renderOrder=d.renderOrder,m.z=y,m.group=g),e++,m}function a(d,h,f,p,y,g){let m=o(d,h,f,p,y,g);f.transmission>0?i.push(m):f.transparent===!0?r.push(m):t.push(m)}function l(d,h,f,p,y,g){let m=o(d,h,f,p,y,g);f.transmission>0?i.unshift(m):f.transparent===!0?r.unshift(m):t.unshift(m)}function c(d,h){t.length>1&&t.sort(d||Bq),i.length>1&&i.sort(h||hN),r.length>1&&r.sort(h||hN)}function u(){for(let d=e,h=n.length;d<h;d++){let f=n[d];if(f.id===null)break;f.id=null,f.object=null,f.geometry=null,f.material=null,f.group=null}}return{opaque:t,transmissive:i,transparent:r,init:s,push:a,unshift:l,finish:u,sort:c}}function Vq(){let n=new WeakMap;function e(i,r){let s=n.get(i),o;return s===void 0?(o=new fN,n.set(i,[o])):r>=s.length?(o=new fN,s.push(o)):o=s[r],o}function t(){n=new WeakMap}return{get:e,dispose:t}}function zq(){let n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new N,color:new qe};break;case"SpotLight":t={position:new N,direction:new N,color:new qe,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new N,color:new qe,distance:0,decay:0};break;case"HemisphereLight":t={direction:new N,skyColor:new qe,groundColor:new qe};break;case"RectAreaLight":t={color:new qe,position:new N,halfWidth:new N,halfHeight:new N};break}return n[e.id]=t,t}}}function Hq(){let n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ye};break;case"SpotLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ye};break;case"PointLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ye,shadowCameraNear:1,shadowCameraFar:1e3};break}return n[e.id]=t,t}}}var Gq=0;function jq(n,e){return(e.castShadow?2:0)-(n.castShadow?2:0)+(e.map?1:0)-(n.map?1:0)}function Wq(n){let e=new zq,t=Hq(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let c=0;c<9;c++)i.probe.push(new N);let r=new N,s=new lt,o=new lt;function a(c){let u=0,d=0,h=0;for(let w=0;w<9;w++)i.probe[w].set(0,0,0);let f=0,p=0,y=0,g=0,m=0,x=0,M=0,v=0,S=0,T=0,A=0;c.sort(jq);for(let w=0,_=c.length;w<_;w++){let D=c[w],U=D.color,L=D.intensity,W=D.distance,z=D.shadow&&D.shadow.map?D.shadow.map.texture:null;if(D.isAmbientLight)u+=U.r*L,d+=U.g*L,h+=U.b*L;else if(D.isLightProbe){for(let $=0;$<9;$++)i.probe[$].addScaledVector(D.sh.coefficients[$],L);A++}else if(D.isDirectionalLight){let $=e.get(D);if($.color.copy(D.color).multiplyScalar(D.intensity),D.castShadow){let G=D.shadow,V=t.get(D);V.shadowIntensity=G.intensity,V.shadowBias=G.bias,V.shadowNormalBias=G.normalBias,V.shadowRadius=G.radius,V.shadowMapSize=G.mapSize,i.directionalShadow[f]=V,i.directionalShadowMap[f]=z,i.directionalShadowMatrix[f]=D.shadow.matrix,x++}i.directional[f]=$,f++}else if(D.isSpotLight){let $=e.get(D);$.position.setFromMatrixPosition(D.matrixWorld),$.color.copy(U).multiplyScalar(L),$.distance=W,$.coneCos=Math.cos(D.angle),$.penumbraCos=Math.cos(D.angle*(1-D.penumbra)),$.decay=D.decay,i.spot[y]=$;let G=D.shadow;if(D.map&&(i.spotLightMap[S]=D.map,S++,G.updateMatrices(D),D.castShadow&&T++),i.spotLightMatrix[y]=G.matrix,D.castShadow){let V=t.get(D);V.shadowIntensity=G.intensity,V.shadowBias=G.bias,V.shadowNormalBias=G.normalBias,V.shadowRadius=G.radius,V.shadowMapSize=G.mapSize,i.spotShadow[y]=V,i.spotShadowMap[y]=z,v++}y++}else if(D.isRectAreaLight){let $=e.get(D);$.color.copy(U).multiplyScalar(L),$.halfWidth.set(D.width*.5,0,0),$.halfHeight.set(0,D.height*.5,0),i.rectArea[g]=$,g++}else if(D.isPointLight){let $=e.get(D);if($.color.copy(D.color).multiplyScalar(D.intensity),$.distance=D.distance,$.decay=D.decay,D.castShadow){let G=D.shadow,V=t.get(D);V.shadowIntensity=G.intensity,V.shadowBias=G.bias,V.shadowNormalBias=G.normalBias,V.shadowRadius=G.radius,V.shadowMapSize=G.mapSize,V.shadowCameraNear=G.camera.near,V.shadowCameraFar=G.camera.far,i.pointShadow[p]=V,i.pointShadowMap[p]=z,i.pointShadowMatrix[p]=D.shadow.matrix,M++}i.point[p]=$,p++}else if(D.isHemisphereLight){let $=e.get(D);$.skyColor.copy(D.color).multiplyScalar(L),$.groundColor.copy(D.groundColor).multiplyScalar(L),i.hemi[m]=$,m++}}g>0&&(n.has("OES_texture_float_linear")===!0?(i.rectAreaLTC1=ye.LTC_FLOAT_1,i.rectAreaLTC2=ye.LTC_FLOAT_2):(i.rectAreaLTC1=ye.LTC_HALF_1,i.rectAreaLTC2=ye.LTC_HALF_2)),i.ambient[0]=u,i.ambient[1]=d,i.ambient[2]=h;let I=i.hash;(I.directionalLength!==f||I.pointLength!==p||I.spotLength!==y||I.rectAreaLength!==g||I.hemiLength!==m||I.numDirectionalShadows!==x||I.numPointShadows!==M||I.numSpotShadows!==v||I.numSpotMaps!==S||I.numLightProbes!==A)&&(i.directional.length=f,i.spot.length=y,i.rectArea.length=g,i.point.length=p,i.hemi.length=m,i.directionalShadow.length=x,i.directionalShadowMap.length=x,i.pointShadow.length=M,i.pointShadowMap.length=M,i.spotShadow.length=v,i.spotShadowMap.length=v,i.directionalShadowMatrix.length=x,i.pointShadowMatrix.length=M,i.spotLightMatrix.length=v+S-T,i.spotLightMap.length=S,i.numSpotLightShadowsWithMaps=T,i.numLightProbes=A,I.directionalLength=f,I.pointLength=p,I.spotLength=y,I.rectAreaLength=g,I.hemiLength=m,I.numDirectionalShadows=x,I.numPointShadows=M,I.numSpotShadows=v,I.numSpotMaps=S,I.numLightProbes=A,i.version=Gq++)}function l(c,u){let d=0,h=0,f=0,p=0,y=0,g=u.matrixWorldInverse;for(let m=0,x=c.length;m<x;m++){let M=c[m];if(M.isDirectionalLight){let v=i.directional[d];v.direction.setFromMatrixPosition(M.matrixWorld),r.setFromMatrixPosition(M.target.matrixWorld),v.direction.sub(r),v.direction.transformDirection(g),d++}else if(M.isSpotLight){let v=i.spot[f];v.position.setFromMatrixPosition(M.matrixWorld),v.position.applyMatrix4(g),v.direction.setFromMatrixPosition(M.matrixWorld),r.setFromMatrixPosition(M.target.matrixWorld),v.direction.sub(r),v.direction.transformDirection(g),f++}else if(M.isRectAreaLight){let v=i.rectArea[p];v.position.setFromMatrixPosition(M.matrixWorld),v.position.applyMatrix4(g),o.identity(),s.copy(M.matrixWorld),s.premultiply(g),o.extractRotation(s),v.halfWidth.set(M.width*.5,0,0),v.halfHeight.set(0,M.height*.5,0),v.halfWidth.applyMatrix4(o),v.halfHeight.applyMatrix4(o),p++}else if(M.isPointLight){let v=i.point[h];v.position.setFromMatrixPosition(M.matrixWorld),v.position.applyMatrix4(g),h++}else if(M.isHemisphereLight){let v=i.hemi[y];v.direction.setFromMatrixPosition(M.matrixWorld),v.direction.transformDirection(g),y++}}}return{setup:a,setupView:l,state:i}}function pN(n){let e=new Wq(n),t=[],i=[];function r(u){c.camera=u,t.length=0,i.length=0}function s(u){t.push(u)}function o(u){i.push(u)}function a(){e.setup(t)}function l(u){e.setupView(t,u)}let c={lightsArray:t,shadowsArray:i,camera:null,lights:e,transmissionRenderTarget:{}};return{init:r,state:c,setupLights:a,setupLightsView:l,pushLight:s,pushShadow:o}}function $q(n){let e=new WeakMap;function t(r,s=0){let o=e.get(r),a;return o===void 0?(a=new pN(n),e.set(r,[a])):s>=o.length?(a=new pN(n),o.push(a)):a=o[s],a}function i(){e=new WeakMap}return{get:t,dispose:i}}var NM=class extends Ui{static get type(){return"MeshDepthMaterial"}constructor(e){super(),this.isMeshDepthMaterial=!0,this.depthPacking=UW,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}},OM=class extends Ui{static get type(){return"MeshDistanceMaterial"}constructor(e){super(),this.isMeshDistanceMaterial=!0,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}},Xq=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,qq=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function Yq(n,e,t){let i=new Jd,r=new Ye,s=new Ye,o=new kt,a=new NM({depthPacking:BW}),l=new OM,c={},u=t.maxTextureSize,d={[Yr]:fi,[fi]:Yr,[Cr]:Cr},h=new Jr({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Ye},radius:{value:4}},vertexShader:Xq,fragmentShader:qq}),f=h.clone();f.defines.HORIZONTAL_PASS=1;let p=new sr;p.setAttribute("position",new wn(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));let y=new $n(p,h),g=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=ON;let m=this.type;this.render=function(T,A,I){if(g.enabled===!1||g.autoUpdate===!1&&g.needsUpdate===!1||T.length===0)return;let w=n.getRenderTarget(),_=n.getActiveCubeFace(),D=n.getActiveMipmapLevel(),U=n.state;U.setBlending(Po),U.buffers.color.setClear(1,1,1,1),U.buffers.depth.setTest(!0),U.setScissorTest(!1);let L=m!==Ds&&this.type===Ds,W=m===Ds&&this.type!==Ds;for(let z=0,$=T.length;z<$;z++){let G=T[z],V=G.shadow;if(V===void 0){console.warn("THREE.WebGLShadowMap:",G,"has no shadow.");continue}if(V.autoUpdate===!1&&V.needsUpdate===!1)continue;r.copy(V.mapSize);let se=V.getFrameExtents();if(r.multiply(se),s.copy(V.mapSize),(r.x>u||r.y>u)&&(r.x>u&&(s.x=Math.floor(u/se.x),r.x=s.x*se.x,V.mapSize.x=s.x),r.y>u&&(s.y=Math.floor(u/se.y),r.y=s.y*se.y,V.mapSize.y=s.y)),V.map===null||L===!0||W===!0){let ce=this.type!==Ds?{minFilter:ei,magFilter:ei}:{};V.map!==null&&V.map.dispose(),V.map=new Ls(r.x,r.y,ce),V.map.texture.name=G.name+".shadowMap",V.camera.updateProjectionMatrix()}n.setRenderTarget(V.map),n.clear();let ie=V.getViewportCount();for(let ce=0;ce<ie;ce++){let Se=V.getViewport(ce);o.set(s.x*Se.x,s.y*Se.y,s.x*Se.z,s.y*Se.w),U.viewport(o),V.updateMatrices(G,ce),i=V.getFrustum(),v(A,I,V.camera,G,this.type)}V.isPointLightShadow!==!0&&this.type===Ds&&x(V,I),V.needsUpdate=!1}m=this.type,g.needsUpdate=!1,n.setRenderTarget(w,_,D)};function x(T,A){let I=e.update(y);h.defines.VSM_SAMPLES!==T.blurSamples&&(h.defines.VSM_SAMPLES=T.blurSamples,f.defines.VSM_SAMPLES=T.blurSamples,h.needsUpdate=!0,f.needsUpdate=!0),T.mapPass===null&&(T.mapPass=new Ls(r.x,r.y)),h.uniforms.shadow_pass.value=T.map.texture,h.uniforms.resolution.value=T.mapSize,h.uniforms.radius.value=T.radius,n.setRenderTarget(T.mapPass),n.clear(),n.renderBufferDirect(A,null,I,h,y,null),f.uniforms.shadow_pass.value=T.mapPass.texture,f.uniforms.resolution.value=T.mapSize,f.uniforms.radius.value=T.radius,n.setRenderTarget(T.map),n.clear(),n.renderBufferDirect(A,null,I,f,y,null)}function M(T,A,I,w){let _=null,D=I.isPointLight===!0?T.customDistanceMaterial:T.customDepthMaterial;if(D!==void 0)_=D;else if(_=I.isPointLight===!0?l:a,n.localClippingEnabled&&A.clipShadows===!0&&Array.isArray(A.clippingPlanes)&&A.clippingPlanes.length!==0||A.displacementMap&&A.displacementScale!==0||A.alphaMap&&A.alphaTest>0||A.map&&A.alphaTest>0){let U=_.uuid,L=A.uuid,W=c[U];W===void 0&&(W={},c[U]=W);let z=W[L];z===void 0&&(z=_.clone(),W[L]=z,A.addEventListener("dispose",S)),_=z}if(_.visible=A.visible,_.wireframe=A.wireframe,w===Ds?_.side=A.shadowSide!==null?A.shadowSide:A.side:_.side=A.shadowSide!==null?A.shadowSide:d[A.side],_.alphaMap=A.alphaMap,_.alphaTest=A.alphaTest,_.map=A.map,_.clipShadows=A.clipShadows,_.clippingPlanes=A.clippingPlanes,_.clipIntersection=A.clipIntersection,_.displacementMap=A.displacementMap,_.displacementScale=A.displacementScale,_.displacementBias=A.displacementBias,_.wireframeLinewidth=A.wireframeLinewidth,_.linewidth=A.linewidth,I.isPointLight===!0&&_.isMeshDistanceMaterial===!0){let U=n.properties.get(_);U.light=I}return _}function v(T,A,I,w,_){if(T.visible===!1)return;if(T.layers.test(A.layers)&&(T.isMesh||T.isLine||T.isPoints)&&(T.castShadow||T.receiveShadow&&_===Ds)&&(!T.frustumCulled||i.intersectsObject(T))){T.modelViewMatrix.multiplyMatrices(I.matrixWorldInverse,T.matrixWorld);let L=e.update(T),W=T.material;if(Array.isArray(W)){let z=L.groups;for(let $=0,G=z.length;$<G;$++){let V=z[$],se=W[V.materialIndex];if(se&&se.visible){let ie=M(T,se,w,_);T.onBeforeShadow(n,T,A,I,L,ie,V),n.renderBufferDirect(I,null,L,ie,T,V),T.onAfterShadow(n,T,A,I,L,ie,V)}}}else if(W.visible){let z=M(T,W,w,_);T.onBeforeShadow(n,T,A,I,L,z,null),n.renderBufferDirect(I,null,L,z,T,null),T.onAfterShadow(n,T,A,I,L,z,null)}}let U=T.children;for(let L=0,W=U.length;L<W;L++)v(U[L],A,I,w,_)}function S(T){T.target.removeEventListener("dispose",S);for(let I in c){let w=c[I],_=T.target.uuid;_ in w&&(w[_].dispose(),delete w[_])}}}var Zq={[VE]:zE,[HE]:WE,[GE]:$E,[Ac]:jE,[zE]:VE,[WE]:HE,[$E]:GE,[jE]:Ac};function Kq(n,e){function t(){let R=!1,le=new kt,X=null,J=new kt(0,0,0,0);return{setMask:function(xe){X!==xe&&!R&&(n.colorMask(xe,xe,xe,xe),X=xe)},setLocked:function(xe){R=xe},setClear:function(xe,_e,He,Ot,an){an===!0&&(xe*=Ot,_e*=Ot,He*=Ot),le.set(xe,_e,He,Ot),J.equals(le)===!1&&(n.clearColor(xe,_e,He,Ot),J.copy(le))},reset:function(){R=!1,X=null,J.set(-1,0,0,0)}}}function i(){let R=!1,le=!1,X=null,J=null,xe=null;return{setReversed:function(_e){if(le!==_e){let He=e.get("EXT_clip_control");le?He.clipControlEXT(He.LOWER_LEFT_EXT,He.ZERO_TO_ONE_EXT):He.clipControlEXT(He.LOWER_LEFT_EXT,He.NEGATIVE_ONE_TO_ONE_EXT);let Ot=xe;xe=null,this.setClear(Ot)}le=_e},getReversed:function(){return le},setTest:function(_e){_e?oe(n.DEPTH_TEST):Ae(n.DEPTH_TEST)},setMask:function(_e){X!==_e&&!R&&(n.depthMask(_e),X=_e)},setFunc:function(_e){if(le&&(_e=Zq[_e]),J!==_e){switch(_e){case VE:n.depthFunc(n.NEVER);break;case zE:n.depthFunc(n.ALWAYS);break;case HE:n.depthFunc(n.LESS);break;case Ac:n.depthFunc(n.LEQUAL);break;case GE:n.depthFunc(n.EQUAL);break;case jE:n.depthFunc(n.GEQUAL);break;case WE:n.depthFunc(n.GREATER);break;case $E:n.depthFunc(n.NOTEQUAL);break;default:n.depthFunc(n.LEQUAL)}J=_e}},setLocked:function(_e){R=_e},setClear:function(_e){xe!==_e&&(le&&(_e=1-_e),n.clearDepth(_e),xe=_e)},reset:function(){R=!1,X=null,J=null,xe=null,le=!1}}}function r(){let R=!1,le=null,X=null,J=null,xe=null,_e=null,He=null,Ot=null,an=null;return{setTest:function(St){R||(St?oe(n.STENCIL_TEST):Ae(n.STENCIL_TEST))},setMask:function(St){le!==St&&!R&&(n.stencilMask(St),le=St)},setFunc:function(St,Nn,si){(X!==St||J!==Nn||xe!==si)&&(n.stencilFunc(St,Nn,si),X=St,J=Nn,xe=si)},setOp:function(St,Nn,si){(_e!==St||He!==Nn||Ot!==si)&&(n.stencilOp(St,Nn,si),_e=St,He=Nn,Ot=si)},setLocked:function(St){R=St},setClear:function(St){an!==St&&(n.clearStencil(St),an=St)},reset:function(){R=!1,le=null,X=null,J=null,xe=null,_e=null,He=null,Ot=null,an=null}}}let s=new t,o=new i,a=new r,l=new WeakMap,c=new WeakMap,u={},d={},h=new WeakMap,f=[],p=null,y=!1,g=null,m=null,x=null,M=null,v=null,S=null,T=null,A=new qe(0,0,0),I=0,w=!1,_=null,D=null,U=null,L=null,W=null,z=n.getParameter(n.MAX_COMBINED_TEXTURE_IMAGE_UNITS),$=!1,G=0,V=n.getParameter(n.VERSION);V.indexOf("WebGL")!==-1?(G=parseFloat(/^WebGL (\d)/.exec(V)[1]),$=G>=1):V.indexOf("OpenGL ES")!==-1&&(G=parseFloat(/^OpenGL ES (\d)/.exec(V)[1]),$=G>=2);let se=null,ie={},ce=n.getParameter(n.SCISSOR_BOX),Se=n.getParameter(n.VIEWPORT),Ie=new kt().fromArray(ce),q=new kt().fromArray(Se);function re(R,le,X,J){let xe=new Uint8Array(4),_e=n.createTexture();n.bindTexture(R,_e),n.texParameteri(R,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(R,n.TEXTURE_MAG_FILTER,n.NEAREST);for(let He=0;He<X;He++)R===n.TEXTURE_3D||R===n.TEXTURE_2D_ARRAY?n.texImage3D(le,0,n.RGBA,1,1,J,0,n.RGBA,n.UNSIGNED_BYTE,xe):n.texImage2D(le+He,0,n.RGBA,1,1,0,n.RGBA,n.UNSIGNED_BYTE,xe);return _e}let fe={};fe[n.TEXTURE_2D]=re(n.TEXTURE_2D,n.TEXTURE_2D,1),fe[n.TEXTURE_CUBE_MAP]=re(n.TEXTURE_CUBE_MAP,n.TEXTURE_CUBE_MAP_POSITIVE_X,6),fe[n.TEXTURE_2D_ARRAY]=re(n.TEXTURE_2D_ARRAY,n.TEXTURE_2D_ARRAY,1,1),fe[n.TEXTURE_3D]=re(n.TEXTURE_3D,n.TEXTURE_3D,1,1),s.setClear(0,0,0,1),o.setClear(1),a.setClear(0),oe(n.DEPTH_TEST),o.setFunc(Ac),dt(!1),Ke(pP),oe(n.CULL_FACE),O(Po);function oe(R){u[R]!==!0&&(n.enable(R),u[R]=!0)}function Ae(R){u[R]!==!1&&(n.disable(R),u[R]=!1)}function Ue(R,le){return d[R]!==le?(n.bindFramebuffer(R,le),d[R]=le,R===n.DRAW_FRAMEBUFFER&&(d[n.FRAMEBUFFER]=le),R===n.FRAMEBUFFER&&(d[n.DRAW_FRAMEBUFFER]=le),!0):!1}function ze(R,le){let X=f,J=!1;if(R){X=h.get(le),X===void 0&&(X=[],h.set(le,X));let xe=R.textures;if(X.length!==xe.length||X[0]!==n.COLOR_ATTACHMENT0){for(let _e=0,He=xe.length;_e<He;_e++)X[_e]=n.COLOR_ATTACHMENT0+_e;X.length=xe.length,J=!0}}else X[0]!==n.BACK&&(X[0]=n.BACK,J=!0);J&&n.drawBuffers(X)}function It(R){return p!==R?(n.useProgram(R),p=R,!0):!1}let rt={[za]:n.FUNC_ADD,[uW]:n.FUNC_SUBTRACT,[dW]:n.FUNC_REVERSE_SUBTRACT};rt[hW]=n.MIN,rt[fW]=n.MAX;let Gt={[pW]:n.ZERO,[mW]:n.ONE,[gW]:n.SRC_COLOR,[UE]:n.SRC_ALPHA,[MW]:n.SRC_ALPHA_SATURATE,[xW]:n.DST_COLOR,[vW]:n.DST_ALPHA,[yW]:n.ONE_MINUS_SRC_COLOR,[BE]:n.ONE_MINUS_SRC_ALPHA,[EW]:n.ONE_MINUS_DST_COLOR,[_W]:n.ONE_MINUS_DST_ALPHA,[wW]:n.CONSTANT_COLOR,[bW]:n.ONE_MINUS_CONSTANT_COLOR,[SW]:n.CONSTANT_ALPHA,[TW]:n.ONE_MINUS_CONSTANT_ALPHA};function O(R,le,X,J,xe,_e,He,Ot,an,St){if(R===Po){y===!0&&(Ae(n.BLEND),y=!1);return}if(y===!1&&(oe(n.BLEND),y=!0),R!==cW){if(R!==g||St!==w){if((m!==za||v!==za)&&(n.blendEquation(n.FUNC_ADD),m=za,v=za),St)switch(R){case bc:n.blendFuncSeparate(n.ONE,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case mP:n.blendFunc(n.ONE,n.ONE);break;case gP:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case yP:n.blendFuncSeparate(n.ZERO,n.SRC_COLOR,n.ZERO,n.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",R);break}else switch(R){case bc:n.blendFuncSeparate(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case mP:n.blendFunc(n.SRC_ALPHA,n.ONE);break;case gP:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case yP:n.blendFunc(n.ZERO,n.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",R);break}x=null,M=null,S=null,T=null,A.set(0,0,0),I=0,g=R,w=St}return}xe=xe||le,_e=_e||X,He=He||J,(le!==m||xe!==v)&&(n.blendEquationSeparate(rt[le],rt[xe]),m=le,v=xe),(X!==x||J!==M||_e!==S||He!==T)&&(n.blendFuncSeparate(Gt[X],Gt[J],Gt[_e],Gt[He]),x=X,M=J,S=_e,T=He),(Ot.equals(A)===!1||an!==I)&&(n.blendColor(Ot.r,Ot.g,Ot.b,an),A.copy(Ot),I=an),g=R,w=!1}function gn(R,le){R.side===Cr?Ae(n.CULL_FACE):oe(n.CULL_FACE);let X=R.side===fi;le&&(X=!X),dt(X),R.blending===bc&&R.transparent===!1?O(Po):O(R.blending,R.blendEquation,R.blendSrc,R.blendDst,R.blendEquationAlpha,R.blendSrcAlpha,R.blendDstAlpha,R.blendColor,R.blendAlpha,R.premultipliedAlpha),o.setFunc(R.depthFunc),o.setTest(R.depthTest),o.setMask(R.depthWrite),s.setMask(R.colorWrite);let J=R.stencilWrite;a.setTest(J),J&&(a.setMask(R.stencilWriteMask),a.setFunc(R.stencilFunc,R.stencilRef,R.stencilFuncMask),a.setOp(R.stencilFail,R.stencilZFail,R.stencilZPass)),Dt(R.polygonOffset,R.polygonOffsetFactor,R.polygonOffsetUnits),R.alphaToCoverage===!0?oe(n.SAMPLE_ALPHA_TO_COVERAGE):Ae(n.SAMPLE_ALPHA_TO_COVERAGE)}function dt(R){_!==R&&(R?n.frontFace(n.CW):n.frontFace(n.CCW),_=R)}function Ke(R){R!==oW?(oe(n.CULL_FACE),R!==D&&(R===pP?n.cullFace(n.BACK):R===aW?n.cullFace(n.FRONT):n.cullFace(n.FRONT_AND_BACK))):Ae(n.CULL_FACE),D=R}function Ce(R){R!==U&&($&&n.lineWidth(R),U=R)}function Dt(R,le,X){R?(oe(n.POLYGON_OFFSET_FILL),(L!==le||W!==X)&&(n.polygonOffset(le,X),L=le,W=X)):Ae(n.POLYGON_OFFSET_FILL)}function Fe(R){R?oe(n.SCISSOR_TEST):Ae(n.SCISSOR_TEST)}function C(R){R===void 0&&(R=n.TEXTURE0+z-1),se!==R&&(n.activeTexture(R),se=R)}function E(R,le,X){X===void 0&&(se===null?X=n.TEXTURE0+z-1:X=se);let J=ie[X];J===void 0&&(J={type:void 0,texture:void 0},ie[X]=J),(J.type!==R||J.texture!==le)&&(se!==X&&(n.activeTexture(X),se=X),n.bindTexture(R,le||fe[R]),J.type=R,J.texture=le)}function B(){let R=ie[se];R!==void 0&&R.type!==void 0&&(n.bindTexture(R.type,null),R.type=void 0,R.texture=void 0)}function ee(){try{n.compressedTexImage2D.apply(n,arguments)}catch(R){console.error("THREE.WebGLState:",R)}}function ne(){try{n.compressedTexImage3D.apply(n,arguments)}catch(R){console.error("THREE.WebGLState:",R)}}function te(){try{n.texSubImage2D.apply(n,arguments)}catch(R){console.error("THREE.WebGLState:",R)}}function De(){try{n.texSubImage3D.apply(n,arguments)}catch(R){console.error("THREE.WebGLState:",R)}}function ge(){try{n.compressedTexSubImage2D.apply(n,arguments)}catch(R){console.error("THREE.WebGLState:",R)}}function we(){try{n.compressedTexSubImage3D.apply(n,arguments)}catch(R){console.error("THREE.WebGLState:",R)}}function bt(){try{n.texStorage2D.apply(n,arguments)}catch(R){console.error("THREE.WebGLState:",R)}}function ue(){try{n.texStorage3D.apply(n,arguments)}catch(R){console.error("THREE.WebGLState:",R)}}function be(){try{n.texImage2D.apply(n,arguments)}catch(R){console.error("THREE.WebGLState:",R)}}function Ge(){try{n.texImage3D.apply(n,arguments)}catch(R){console.error("THREE.WebGLState:",R)}}function $e(R){Ie.equals(R)===!1&&(n.scissor(R.x,R.y,R.z,R.w),Ie.copy(R))}function Me(R){q.equals(R)===!1&&(n.viewport(R.x,R.y,R.z,R.w),q.copy(R))}function P(R,le){let X=c.get(le);X===void 0&&(X=new WeakMap,c.set(le,X));let J=X.get(R);J===void 0&&(J=n.getUniformBlockIndex(le,R.name),X.set(R,J))}function K(R,le){let J=c.get(le).get(R);l.get(le)!==J&&(n.uniformBlockBinding(le,J,R.__bindingPointIndex),l.set(le,J))}function ve(){n.disable(n.BLEND),n.disable(n.CULL_FACE),n.disable(n.DEPTH_TEST),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SCISSOR_TEST),n.disable(n.STENCIL_TEST),n.disable(n.SAMPLE_ALPHA_TO_COVERAGE),n.blendEquation(n.FUNC_ADD),n.blendFunc(n.ONE,n.ZERO),n.blendFuncSeparate(n.ONE,n.ZERO,n.ONE,n.ZERO),n.blendColor(0,0,0,0),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(n.LESS),o.setReversed(!1),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(n.ALWAYS,0,4294967295),n.stencilOp(n.KEEP,n.KEEP,n.KEEP),n.clearStencil(0),n.cullFace(n.BACK),n.frontFace(n.CCW),n.polygonOffset(0,0),n.activeTexture(n.TEXTURE0),n.bindFramebuffer(n.FRAMEBUFFER,null),n.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),n.bindFramebuffer(n.READ_FRAMEBUFFER,null),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),u={},se=null,ie={},d={},h=new WeakMap,f=[],p=null,y=!1,g=null,m=null,x=null,M=null,v=null,S=null,T=null,A=new qe(0,0,0),I=0,w=!1,_=null,D=null,U=null,L=null,W=null,Ie.set(0,0,n.canvas.width,n.canvas.height),q.set(0,0,n.canvas.width,n.canvas.height),s.reset(),o.reset(),a.reset()}return{buffers:{color:s,depth:o,stencil:a},enable:oe,disable:Ae,bindFramebuffer:Ue,drawBuffers:ze,useProgram:It,setBlending:O,setMaterial:gn,setFlipSided:dt,setCullFace:Ke,setLineWidth:Ce,setPolygonOffset:Dt,setScissorTest:Fe,activeTexture:C,bindTexture:E,unbindTexture:B,compressedTexImage2D:ee,compressedTexImage3D:ne,texImage2D:be,texImage3D:Ge,updateUBOMapping:P,uniformBlockBinding:K,texStorage2D:bt,texStorage3D:ue,texSubImage2D:te,texSubImage3D:De,compressedTexSubImage2D:ge,compressedTexSubImage3D:we,scissor:$e,viewport:Me,reset:ve}}function mN(n,e,t,i){let r=Jq(i);switch(t){case BN:return n*e;case zN:return n*e;case HN:return n*e*2;case ew:return n*e/r.components*r.byteLength;case tw:return n*e/r.components*r.byteLength;case GN:return n*e*2/r.components*r.byteLength;case nw:return n*e*2/r.components*r.byteLength;case VN:return n*e*3/r.components*r.byteLength;case nr:return n*e*4/r.components*r.byteLength;case iw:return n*e*4/r.components*r.byteLength;case ag:case lg:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*8;case cg:case ug:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case ZE:case JE:return Math.max(n,16)*Math.max(e,8)/4;case YE:case KE:return Math.max(n,8)*Math.max(e,8)/2;case QE:case eM:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*8;case tM:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case nM:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case iM:return Math.floor((n+4)/5)*Math.floor((e+3)/4)*16;case rM:return Math.floor((n+4)/5)*Math.floor((e+4)/5)*16;case sM:return Math.floor((n+5)/6)*Math.floor((e+4)/5)*16;case oM:return Math.floor((n+5)/6)*Math.floor((e+5)/6)*16;case aM:return Math.floor((n+7)/8)*Math.floor((e+4)/5)*16;case lM:return Math.floor((n+7)/8)*Math.floor((e+5)/6)*16;case cM:return Math.floor((n+7)/8)*Math.floor((e+7)/8)*16;case uM:return Math.floor((n+9)/10)*Math.floor((e+4)/5)*16;case dM:return Math.floor((n+9)/10)*Math.floor((e+5)/6)*16;case hM:return Math.floor((n+9)/10)*Math.floor((e+7)/8)*16;case fM:return Math.floor((n+9)/10)*Math.floor((e+9)/10)*16;case pM:return Math.floor((n+11)/12)*Math.floor((e+9)/10)*16;case mM:return Math.floor((n+11)/12)*Math.floor((e+11)/12)*16;case dg:case gM:case yM:return Math.ceil(n/4)*Math.ceil(e/4)*16;case jN:case vM:return Math.ceil(n/4)*Math.ceil(e/4)*8;case _M:case xM:return Math.ceil(n/4)*Math.ceil(e/4)*16}throw new Error(`Unable to determine texture byte length for ${t} format.`)}function Jq(n){switch(n){case Os:case FN:return{byteLength:1,components:1};case Yd:case kN:case lh:return{byteLength:2,components:1};case JM:case QM:return{byteLength:2,components:4};case Wa:case KM:case Ir:return{byteLength:4,components:1};case UN:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${n}.`)}function Qq(n,e,t,i,r,s,o){let a=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,l=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),c=new Ye,u=new WeakMap,d,h=new WeakMap,f=!1;try{f=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function p(C,E){return f?new OffscreenCanvas(C,E):Zd("canvas")}function y(C,E,B){let ee=1,ne=Fe(C);if((ne.width>B||ne.height>B)&&(ee=B/Math.max(ne.width,ne.height)),ee<1)if(typeof HTMLImageElement<"u"&&C instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&C instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&C instanceof ImageBitmap||typeof VideoFrame<"u"&&C instanceof VideoFrame){let te=Math.floor(ee*ne.width),De=Math.floor(ee*ne.height);d===void 0&&(d=p(te,De));let ge=E?p(te,De):d;return ge.width=te,ge.height=De,ge.getContext("2d").drawImage(C,0,0,te,De),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+ne.width+"x"+ne.height+") to ("+te+"x"+De+")."),ge}else return"data"in C&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+ne.width+"x"+ne.height+")."),C;return C}function g(C){return C.generateMipmaps}function m(C){n.generateMipmap(C)}function x(C){return C.isWebGLCubeRenderTarget?n.TEXTURE_CUBE_MAP:C.isWebGL3DRenderTarget?n.TEXTURE_3D:C.isWebGLArrayRenderTarget||C.isCompressedArrayTexture?n.TEXTURE_2D_ARRAY:n.TEXTURE_2D}function M(C,E,B,ee,ne=!1){if(C!==null){if(n[C]!==void 0)return n[C];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+C+"'")}let te=E;if(E===n.RED&&(B===n.FLOAT&&(te=n.R32F),B===n.HALF_FLOAT&&(te=n.R16F),B===n.UNSIGNED_BYTE&&(te=n.R8)),E===n.RED_INTEGER&&(B===n.UNSIGNED_BYTE&&(te=n.R8UI),B===n.UNSIGNED_SHORT&&(te=n.R16UI),B===n.UNSIGNED_INT&&(te=n.R32UI),B===n.BYTE&&(te=n.R8I),B===n.SHORT&&(te=n.R16I),B===n.INT&&(te=n.R32I)),E===n.RG&&(B===n.FLOAT&&(te=n.RG32F),B===n.HALF_FLOAT&&(te=n.RG16F),B===n.UNSIGNED_BYTE&&(te=n.RG8)),E===n.RG_INTEGER&&(B===n.UNSIGNED_BYTE&&(te=n.RG8UI),B===n.UNSIGNED_SHORT&&(te=n.RG16UI),B===n.UNSIGNED_INT&&(te=n.RG32UI),B===n.BYTE&&(te=n.RG8I),B===n.SHORT&&(te=n.RG16I),B===n.INT&&(te=n.RG32I)),E===n.RGB_INTEGER&&(B===n.UNSIGNED_BYTE&&(te=n.RGB8UI),B===n.UNSIGNED_SHORT&&(te=n.RGB16UI),B===n.UNSIGNED_INT&&(te=n.RGB32UI),B===n.BYTE&&(te=n.RGB8I),B===n.SHORT&&(te=n.RGB16I),B===n.INT&&(te=n.RGB32I)),E===n.RGBA_INTEGER&&(B===n.UNSIGNED_BYTE&&(te=n.RGBA8UI),B===n.UNSIGNED_SHORT&&(te=n.RGBA16UI),B===n.UNSIGNED_INT&&(te=n.RGBA32UI),B===n.BYTE&&(te=n.RGBA8I),B===n.SHORT&&(te=n.RGBA16I),B===n.INT&&(te=n.RGBA32I)),E===n.RGB&&B===n.UNSIGNED_INT_5_9_9_9_REV&&(te=n.RGB9_E5),E===n.RGBA){let De=ne?Gg:Pt.getTransfer(ee);B===n.FLOAT&&(te=n.RGBA32F),B===n.HALF_FLOAT&&(te=n.RGBA16F),B===n.UNSIGNED_BYTE&&(te=De===Xt?n.SRGB8_ALPHA8:n.RGBA8),B===n.UNSIGNED_SHORT_4_4_4_4&&(te=n.RGBA4),B===n.UNSIGNED_SHORT_5_5_5_1&&(te=n.RGB5_A1)}return(te===n.R16F||te===n.R32F||te===n.RG16F||te===n.RG32F||te===n.RGBA16F||te===n.RGBA32F)&&e.get("EXT_color_buffer_float"),te}function v(C,E){let B;return C?E===null||E===Wa||E===Rc?B=n.DEPTH24_STENCIL8:E===Ir?B=n.DEPTH32F_STENCIL8:E===Yd&&(B=n.DEPTH24_STENCIL8,console.warn("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):E===null||E===Wa||E===Rc?B=n.DEPTH_COMPONENT24:E===Ir?B=n.DEPTH_COMPONENT32F:E===Yd&&(B=n.DEPTH_COMPONENT16),B}function S(C,E){return g(C)===!0||C.isFramebufferTexture&&C.minFilter!==ei&&C.minFilter!==Fi?Math.log2(Math.max(E.width,E.height))+1:C.mipmaps!==void 0&&C.mipmaps.length>0?C.mipmaps.length:C.isCompressedTexture&&Array.isArray(C.image)?E.mipmaps.length:1}function T(C){let E=C.target;E.removeEventListener("dispose",T),I(E),E.isVideoTexture&&u.delete(E)}function A(C){let E=C.target;E.removeEventListener("dispose",A),_(E)}function I(C){let E=i.get(C);if(E.__webglInit===void 0)return;let B=C.source,ee=h.get(B);if(ee){let ne=ee[E.__cacheKey];ne.usedTimes--,ne.usedTimes===0&&w(C),Object.keys(ee).length===0&&h.delete(B)}i.remove(C)}function w(C){let E=i.get(C);n.deleteTexture(E.__webglTexture);let B=C.source,ee=h.get(B);delete ee[E.__cacheKey],o.memory.textures--}function _(C){let E=i.get(C);if(C.depthTexture&&(C.depthTexture.dispose(),i.remove(C.depthTexture)),C.isWebGLCubeRenderTarget)for(let ee=0;ee<6;ee++){if(Array.isArray(E.__webglFramebuffer[ee]))for(let ne=0;ne<E.__webglFramebuffer[ee].length;ne++)n.deleteFramebuffer(E.__webglFramebuffer[ee][ne]);else n.deleteFramebuffer(E.__webglFramebuffer[ee]);E.__webglDepthbuffer&&n.deleteRenderbuffer(E.__webglDepthbuffer[ee])}else{if(Array.isArray(E.__webglFramebuffer))for(let ee=0;ee<E.__webglFramebuffer.length;ee++)n.deleteFramebuffer(E.__webglFramebuffer[ee]);else n.deleteFramebuffer(E.__webglFramebuffer);if(E.__webglDepthbuffer&&n.deleteRenderbuffer(E.__webglDepthbuffer),E.__webglMultisampledFramebuffer&&n.deleteFramebuffer(E.__webglMultisampledFramebuffer),E.__webglColorRenderbuffer)for(let ee=0;ee<E.__webglColorRenderbuffer.length;ee++)E.__webglColorRenderbuffer[ee]&&n.deleteRenderbuffer(E.__webglColorRenderbuffer[ee]);E.__webglDepthRenderbuffer&&n.deleteRenderbuffer(E.__webglDepthRenderbuffer)}let B=C.textures;for(let ee=0,ne=B.length;ee<ne;ee++){let te=i.get(B[ee]);te.__webglTexture&&(n.deleteTexture(te.__webglTexture),o.memory.textures--),i.remove(B[ee])}i.remove(C)}let D=0;function U(){D=0}function L(){let C=D;return C>=r.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+C+" texture units while this GPU supports only "+r.maxTextures),D+=1,C}function W(C){let E=[];return E.push(C.wrapS),E.push(C.wrapT),E.push(C.wrapR||0),E.push(C.magFilter),E.push(C.minFilter),E.push(C.anisotropy),E.push(C.internalFormat),E.push(C.format),E.push(C.type),E.push(C.generateMipmaps),E.push(C.premultiplyAlpha),E.push(C.flipY),E.push(C.unpackAlignment),E.push(C.colorSpace),E.join()}function z(C,E){let B=i.get(C);if(C.isVideoTexture&&Ce(C),C.isRenderTargetTexture===!1&&C.version>0&&B.__version!==C.version){let ee=C.image;if(ee===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(ee.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{q(B,C,E);return}}t.bindTexture(n.TEXTURE_2D,B.__webglTexture,n.TEXTURE0+E)}function $(C,E){let B=i.get(C);if(C.version>0&&B.__version!==C.version){q(B,C,E);return}t.bindTexture(n.TEXTURE_2D_ARRAY,B.__webglTexture,n.TEXTURE0+E)}function G(C,E){let B=i.get(C);if(C.version>0&&B.__version!==C.version){q(B,C,E);return}t.bindTexture(n.TEXTURE_3D,B.__webglTexture,n.TEXTURE0+E)}function V(C,E){let B=i.get(C);if(C.version>0&&B.__version!==C.version){re(B,C,E);return}t.bindTexture(n.TEXTURE_CUBE_MAP,B.__webglTexture,n.TEXTURE0+E)}let se={[ja]:n.REPEAT,[Rs]:n.CLAMP_TO_EDGE,[qd]:n.MIRRORED_REPEAT},ie={[ei]:n.NEAREST,[ZM]:n.NEAREST_MIPMAP_NEAREST,[Mc]:n.NEAREST_MIPMAP_LINEAR,[Fi]:n.LINEAR,[jd]:n.LINEAR_MIPMAP_NEAREST,[Xr]:n.LINEAR_MIPMAP_LINEAR},ce={[zW]:n.NEVER,[XW]:n.ALWAYS,[HW]:n.LESS,[XN]:n.LEQUAL,[GW]:n.EQUAL,[$W]:n.GEQUAL,[jW]:n.GREATER,[WW]:n.NOTEQUAL};function Se(C,E){if(E.type===Ir&&e.has("OES_texture_float_linear")===!1&&(E.magFilter===Fi||E.magFilter===jd||E.magFilter===Mc||E.magFilter===Xr||E.minFilter===Fi||E.minFilter===jd||E.minFilter===Mc||E.minFilter===Xr)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),n.texParameteri(C,n.TEXTURE_WRAP_S,se[E.wrapS]),n.texParameteri(C,n.TEXTURE_WRAP_T,se[E.wrapT]),(C===n.TEXTURE_3D||C===n.TEXTURE_2D_ARRAY)&&n.texParameteri(C,n.TEXTURE_WRAP_R,se[E.wrapR]),n.texParameteri(C,n.TEXTURE_MAG_FILTER,ie[E.magFilter]),n.texParameteri(C,n.TEXTURE_MIN_FILTER,ie[E.minFilter]),E.compareFunction&&(n.texParameteri(C,n.TEXTURE_COMPARE_MODE,n.COMPARE_REF_TO_TEXTURE),n.texParameteri(C,n.TEXTURE_COMPARE_FUNC,ce[E.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){if(E.magFilter===ei||E.minFilter!==Mc&&E.minFilter!==Xr||E.type===Ir&&e.has("OES_texture_float_linear")===!1)return;if(E.anisotropy>1||i.get(E).__currentAnisotropy){let B=e.get("EXT_texture_filter_anisotropic");n.texParameterf(C,B.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(E.anisotropy,r.getMaxAnisotropy())),i.get(E).__currentAnisotropy=E.anisotropy}}}function Ie(C,E){let B=!1;C.__webglInit===void 0&&(C.__webglInit=!0,E.addEventListener("dispose",T));let ee=E.source,ne=h.get(ee);ne===void 0&&(ne={},h.set(ee,ne));let te=W(E);if(te!==C.__cacheKey){ne[te]===void 0&&(ne[te]={texture:n.createTexture(),usedTimes:0},o.memory.textures++,B=!0),ne[te].usedTimes++;let De=ne[C.__cacheKey];De!==void 0&&(ne[C.__cacheKey].usedTimes--,De.usedTimes===0&&w(E)),C.__cacheKey=te,C.__webglTexture=ne[te].texture}return B}function q(C,E,B){let ee=n.TEXTURE_2D;(E.isDataArrayTexture||E.isCompressedArrayTexture)&&(ee=n.TEXTURE_2D_ARRAY),E.isData3DTexture&&(ee=n.TEXTURE_3D);let ne=Ie(C,E),te=E.source;t.bindTexture(ee,C.__webglTexture,n.TEXTURE0+B);let De=i.get(te);if(te.version!==De.__version||ne===!0){t.activeTexture(n.TEXTURE0+B);let ge=Pt.getPrimaries(Pt.workingColorSpace),we=E.colorSpace===Do?null:Pt.getPrimaries(E.colorSpace),bt=E.colorSpace===Do||ge===we?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,E.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,E.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,E.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,bt);let ue=y(E.image,!1,r.maxTextureSize);ue=Dt(E,ue);let be=s.convert(E.format,E.colorSpace),Ge=s.convert(E.type),$e=M(E.internalFormat,be,Ge,E.colorSpace,E.isVideoTexture);Se(ee,E);let Me,P=E.mipmaps,K=E.isVideoTexture!==!0,ve=De.__version===void 0||ne===!0,R=te.dataReady,le=S(E,ue);if(E.isDepthTexture)$e=v(E.format===Pc,E.type),ve&&(K?t.texStorage2D(n.TEXTURE_2D,1,$e,ue.width,ue.height):t.texImage2D(n.TEXTURE_2D,0,$e,ue.width,ue.height,0,be,Ge,null));else if(E.isDataTexture)if(P.length>0){K&&ve&&t.texStorage2D(n.TEXTURE_2D,le,$e,P[0].width,P[0].height);for(let X=0,J=P.length;X<J;X++)Me=P[X],K?R&&t.texSubImage2D(n.TEXTURE_2D,X,0,0,Me.width,Me.height,be,Ge,Me.data):t.texImage2D(n.TEXTURE_2D,X,$e,Me.width,Me.height,0,be,Ge,Me.data);E.generateMipmaps=!1}else K?(ve&&t.texStorage2D(n.TEXTURE_2D,le,$e,ue.width,ue.height),R&&t.texSubImage2D(n.TEXTURE_2D,0,0,0,ue.width,ue.height,be,Ge,ue.data)):t.texImage2D(n.TEXTURE_2D,0,$e,ue.width,ue.height,0,be,Ge,ue.data);else if(E.isCompressedTexture)if(E.isCompressedArrayTexture){K&&ve&&t.texStorage3D(n.TEXTURE_2D_ARRAY,le,$e,P[0].width,P[0].height,ue.depth);for(let X=0,J=P.length;X<J;X++)if(Me=P[X],E.format!==nr)if(be!==null)if(K){if(R)if(E.layerUpdates.size>0){let xe=mN(Me.width,Me.height,E.format,E.type);for(let _e of E.layerUpdates){let He=Me.data.subarray(_e*xe/Me.data.BYTES_PER_ELEMENT,(_e+1)*xe/Me.data.BYTES_PER_ELEMENT);t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,X,0,0,_e,Me.width,Me.height,1,be,He)}E.clearLayerUpdates()}else t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,X,0,0,0,Me.width,Me.height,ue.depth,be,Me.data)}else t.compressedTexImage3D(n.TEXTURE_2D_ARRAY,X,$e,Me.width,Me.height,ue.depth,0,Me.data,0,0);else console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else K?R&&t.texSubImage3D(n.TEXTURE_2D_ARRAY,X,0,0,0,Me.width,Me.height,ue.depth,be,Ge,Me.data):t.texImage3D(n.TEXTURE_2D_ARRAY,X,$e,Me.width,Me.height,ue.depth,0,be,Ge,Me.data)}else{K&&ve&&t.texStorage2D(n.TEXTURE_2D,le,$e,P[0].width,P[0].height);for(let X=0,J=P.length;X<J;X++)Me=P[X],E.format!==nr?be!==null?K?R&&t.compressedTexSubImage2D(n.TEXTURE_2D,X,0,0,Me.width,Me.height,be,Me.data):t.compressedTexImage2D(n.TEXTURE_2D,X,$e,Me.width,Me.height,0,Me.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):K?R&&t.texSubImage2D(n.TEXTURE_2D,X,0,0,Me.width,Me.height,be,Ge,Me.data):t.texImage2D(n.TEXTURE_2D,X,$e,Me.width,Me.height,0,be,Ge,Me.data)}else if(E.isDataArrayTexture)if(K){if(ve&&t.texStorage3D(n.TEXTURE_2D_ARRAY,le,$e,ue.width,ue.height,ue.depth),R)if(E.layerUpdates.size>0){let X=mN(ue.width,ue.height,E.format,E.type);for(let J of E.layerUpdates){let xe=ue.data.subarray(J*X/ue.data.BYTES_PER_ELEMENT,(J+1)*X/ue.data.BYTES_PER_ELEMENT);t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,J,ue.width,ue.height,1,be,Ge,xe)}E.clearLayerUpdates()}else t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,0,ue.width,ue.height,ue.depth,be,Ge,ue.data)}else t.texImage3D(n.TEXTURE_2D_ARRAY,0,$e,ue.width,ue.height,ue.depth,0,be,Ge,ue.data);else if(E.isData3DTexture)K?(ve&&t.texStorage3D(n.TEXTURE_3D,le,$e,ue.width,ue.height,ue.depth),R&&t.texSubImage3D(n.TEXTURE_3D,0,0,0,0,ue.width,ue.height,ue.depth,be,Ge,ue.data)):t.texImage3D(n.TEXTURE_3D,0,$e,ue.width,ue.height,ue.depth,0,be,Ge,ue.data);else if(E.isFramebufferTexture){if(ve)if(K)t.texStorage2D(n.TEXTURE_2D,le,$e,ue.width,ue.height);else{let X=ue.width,J=ue.height;for(let xe=0;xe<le;xe++)t.texImage2D(n.TEXTURE_2D,xe,$e,X,J,0,be,Ge,null),X>>=1,J>>=1}}else if(P.length>0){if(K&&ve){let X=Fe(P[0]);t.texStorage2D(n.TEXTURE_2D,le,$e,X.width,X.height)}for(let X=0,J=P.length;X<J;X++)Me=P[X],K?R&&t.texSubImage2D(n.TEXTURE_2D,X,0,0,be,Ge,Me):t.texImage2D(n.TEXTURE_2D,X,$e,be,Ge,Me);E.generateMipmaps=!1}else if(K){if(ve){let X=Fe(ue);t.texStorage2D(n.TEXTURE_2D,le,$e,X.width,X.height)}R&&t.texSubImage2D(n.TEXTURE_2D,0,0,0,be,Ge,ue)}else t.texImage2D(n.TEXTURE_2D,0,$e,be,Ge,ue);g(E)&&m(ee),De.__version=te.version,E.onUpdate&&E.onUpdate(E)}C.__version=E.version}function re(C,E,B){if(E.image.length!==6)return;let ee=Ie(C,E),ne=E.source;t.bindTexture(n.TEXTURE_CUBE_MAP,C.__webglTexture,n.TEXTURE0+B);let te=i.get(ne);if(ne.version!==te.__version||ee===!0){t.activeTexture(n.TEXTURE0+B);let De=Pt.getPrimaries(Pt.workingColorSpace),ge=E.colorSpace===Do?null:Pt.getPrimaries(E.colorSpace),we=E.colorSpace===Do||De===ge?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,E.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,E.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,E.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,we);let bt=E.isCompressedTexture||E.image[0].isCompressedTexture,ue=E.image[0]&&E.image[0].isDataTexture,be=[];for(let J=0;J<6;J++)!bt&&!ue?be[J]=y(E.image[J],!0,r.maxCubemapSize):be[J]=ue?E.image[J].image:E.image[J],be[J]=Dt(E,be[J]);let Ge=be[0],$e=s.convert(E.format,E.colorSpace),Me=s.convert(E.type),P=M(E.internalFormat,$e,Me,E.colorSpace),K=E.isVideoTexture!==!0,ve=te.__version===void 0||ee===!0,R=ne.dataReady,le=S(E,Ge);Se(n.TEXTURE_CUBE_MAP,E);let X;if(bt){K&&ve&&t.texStorage2D(n.TEXTURE_CUBE_MAP,le,P,Ge.width,Ge.height);for(let J=0;J<6;J++){X=be[J].mipmaps;for(let xe=0;xe<X.length;xe++){let _e=X[xe];E.format!==nr?$e!==null?K?R&&t.compressedTexSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+J,xe,0,0,_e.width,_e.height,$e,_e.data):t.compressedTexImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+J,xe,P,_e.width,_e.height,0,_e.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):K?R&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+J,xe,0,0,_e.width,_e.height,$e,Me,_e.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+J,xe,P,_e.width,_e.height,0,$e,Me,_e.data)}}}else{if(X=E.mipmaps,K&&ve){X.length>0&&le++;let J=Fe(be[0]);t.texStorage2D(n.TEXTURE_CUBE_MAP,le,P,J.width,J.height)}for(let J=0;J<6;J++)if(ue){K?R&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+J,0,0,0,be[J].width,be[J].height,$e,Me,be[J].data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+J,0,P,be[J].width,be[J].height,0,$e,Me,be[J].data);for(let xe=0;xe<X.length;xe++){let He=X[xe].image[J].image;K?R&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+J,xe+1,0,0,He.width,He.height,$e,Me,He.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+J,xe+1,P,He.width,He.height,0,$e,Me,He.data)}}else{K?R&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+J,0,0,0,$e,Me,be[J]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+J,0,P,$e,Me,be[J]);for(let xe=0;xe<X.length;xe++){let _e=X[xe];K?R&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+J,xe+1,0,0,$e,Me,_e.image[J]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+J,xe+1,P,$e,Me,_e.image[J])}}}g(E)&&m(n.TEXTURE_CUBE_MAP),te.__version=ne.version,E.onUpdate&&E.onUpdate(E)}C.__version=E.version}function fe(C,E,B,ee,ne,te){let De=s.convert(B.format,B.colorSpace),ge=s.convert(B.type),we=M(B.internalFormat,De,ge,B.colorSpace),bt=i.get(E),ue=i.get(B);if(ue.__renderTarget=E,!bt.__hasExternalTextures){let be=Math.max(1,E.width>>te),Ge=Math.max(1,E.height>>te);ne===n.TEXTURE_3D||ne===n.TEXTURE_2D_ARRAY?t.texImage3D(ne,te,we,be,Ge,E.depth,0,De,ge,null):t.texImage2D(ne,te,we,be,Ge,0,De,ge,null)}t.bindFramebuffer(n.FRAMEBUFFER,C),Ke(E)?a.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,ee,ne,ue.__webglTexture,0,dt(E)):(ne===n.TEXTURE_2D||ne>=n.TEXTURE_CUBE_MAP_POSITIVE_X&&ne<=n.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&n.framebufferTexture2D(n.FRAMEBUFFER,ee,ne,ue.__webglTexture,te),t.bindFramebuffer(n.FRAMEBUFFER,null)}function oe(C,E,B){if(n.bindRenderbuffer(n.RENDERBUFFER,C),E.depthBuffer){let ee=E.depthTexture,ne=ee&&ee.isDepthTexture?ee.type:null,te=v(E.stencilBuffer,ne),De=E.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,ge=dt(E);Ke(E)?a.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,ge,te,E.width,E.height):B?n.renderbufferStorageMultisample(n.RENDERBUFFER,ge,te,E.width,E.height):n.renderbufferStorage(n.RENDERBUFFER,te,E.width,E.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,De,n.RENDERBUFFER,C)}else{let ee=E.textures;for(let ne=0;ne<ee.length;ne++){let te=ee[ne],De=s.convert(te.format,te.colorSpace),ge=s.convert(te.type),we=M(te.internalFormat,De,ge,te.colorSpace),bt=dt(E);B&&Ke(E)===!1?n.renderbufferStorageMultisample(n.RENDERBUFFER,bt,we,E.width,E.height):Ke(E)?a.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,bt,we,E.width,E.height):n.renderbufferStorage(n.RENDERBUFFER,we,E.width,E.height)}}n.bindRenderbuffer(n.RENDERBUFFER,null)}function Ae(C,E){if(E&&E.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(n.FRAMEBUFFER,C),!(E.depthTexture&&E.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");let ee=i.get(E.depthTexture);ee.__renderTarget=E,(!ee.__webglTexture||E.depthTexture.image.width!==E.width||E.depthTexture.image.height!==E.height)&&(E.depthTexture.image.width=E.width,E.depthTexture.image.height=E.height,E.depthTexture.needsUpdate=!0),z(E.depthTexture,0);let ne=ee.__webglTexture,te=dt(E);if(E.depthTexture.format===Sc)Ke(E)?a.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,ne,0,te):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,ne,0);else if(E.depthTexture.format===Pc)Ke(E)?a.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,ne,0,te):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,ne,0);else throw new Error("Unknown depthTexture format")}function Ue(C){let E=i.get(C),B=C.isWebGLCubeRenderTarget===!0;if(E.__boundDepthTexture!==C.depthTexture){let ee=C.depthTexture;if(E.__depthDisposeCallback&&E.__depthDisposeCallback(),ee){let ne=()=>{delete E.__boundDepthTexture,delete E.__depthDisposeCallback,ee.removeEventListener("dispose",ne)};ee.addEventListener("dispose",ne),E.__depthDisposeCallback=ne}E.__boundDepthTexture=ee}if(C.depthTexture&&!E.__autoAllocateDepthBuffer){if(B)throw new Error("target.depthTexture not supported in Cube render targets");Ae(E.__webglFramebuffer,C)}else if(B){E.__webglDepthbuffer=[];for(let ee=0;ee<6;ee++)if(t.bindFramebuffer(n.FRAMEBUFFER,E.__webglFramebuffer[ee]),E.__webglDepthbuffer[ee]===void 0)E.__webglDepthbuffer[ee]=n.createRenderbuffer(),oe(E.__webglDepthbuffer[ee],C,!1);else{let ne=C.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,te=E.__webglDepthbuffer[ee];n.bindRenderbuffer(n.RENDERBUFFER,te),n.framebufferRenderbuffer(n.FRAMEBUFFER,ne,n.RENDERBUFFER,te)}}else if(t.bindFramebuffer(n.FRAMEBUFFER,E.__webglFramebuffer),E.__webglDepthbuffer===void 0)E.__webglDepthbuffer=n.createRenderbuffer(),oe(E.__webglDepthbuffer,C,!1);else{let ee=C.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,ne=E.__webglDepthbuffer;n.bindRenderbuffer(n.RENDERBUFFER,ne),n.framebufferRenderbuffer(n.FRAMEBUFFER,ee,n.RENDERBUFFER,ne)}t.bindFramebuffer(n.FRAMEBUFFER,null)}function ze(C,E,B){let ee=i.get(C);E!==void 0&&fe(ee.__webglFramebuffer,C,C.texture,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,0),B!==void 0&&Ue(C)}function It(C){let E=C.texture,B=i.get(C),ee=i.get(E);C.addEventListener("dispose",A);let ne=C.textures,te=C.isWebGLCubeRenderTarget===!0,De=ne.length>1;if(De||(ee.__webglTexture===void 0&&(ee.__webglTexture=n.createTexture()),ee.__version=E.version,o.memory.textures++),te){B.__webglFramebuffer=[];for(let ge=0;ge<6;ge++)if(E.mipmaps&&E.mipmaps.length>0){B.__webglFramebuffer[ge]=[];for(let we=0;we<E.mipmaps.length;we++)B.__webglFramebuffer[ge][we]=n.createFramebuffer()}else B.__webglFramebuffer[ge]=n.createFramebuffer()}else{if(E.mipmaps&&E.mipmaps.length>0){B.__webglFramebuffer=[];for(let ge=0;ge<E.mipmaps.length;ge++)B.__webglFramebuffer[ge]=n.createFramebuffer()}else B.__webglFramebuffer=n.createFramebuffer();if(De)for(let ge=0,we=ne.length;ge<we;ge++){let bt=i.get(ne[ge]);bt.__webglTexture===void 0&&(bt.__webglTexture=n.createTexture(),o.memory.textures++)}if(C.samples>0&&Ke(C)===!1){B.__webglMultisampledFramebuffer=n.createFramebuffer(),B.__webglColorRenderbuffer=[],t.bindFramebuffer(n.FRAMEBUFFER,B.__webglMultisampledFramebuffer);for(let ge=0;ge<ne.length;ge++){let we=ne[ge];B.__webglColorRenderbuffer[ge]=n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,B.__webglColorRenderbuffer[ge]);let bt=s.convert(we.format,we.colorSpace),ue=s.convert(we.type),be=M(we.internalFormat,bt,ue,we.colorSpace,C.isXRRenderTarget===!0),Ge=dt(C);n.renderbufferStorageMultisample(n.RENDERBUFFER,Ge,be,C.width,C.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+ge,n.RENDERBUFFER,B.__webglColorRenderbuffer[ge])}n.bindRenderbuffer(n.RENDERBUFFER,null),C.depthBuffer&&(B.__webglDepthRenderbuffer=n.createRenderbuffer(),oe(B.__webglDepthRenderbuffer,C,!0)),t.bindFramebuffer(n.FRAMEBUFFER,null)}}if(te){t.bindTexture(n.TEXTURE_CUBE_MAP,ee.__webglTexture),Se(n.TEXTURE_CUBE_MAP,E);for(let ge=0;ge<6;ge++)if(E.mipmaps&&E.mipmaps.length>0)for(let we=0;we<E.mipmaps.length;we++)fe(B.__webglFramebuffer[ge][we],C,E,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+ge,we);else fe(B.__webglFramebuffer[ge],C,E,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+ge,0);g(E)&&m(n.TEXTURE_CUBE_MAP),t.unbindTexture()}else if(De){for(let ge=0,we=ne.length;ge<we;ge++){let bt=ne[ge],ue=i.get(bt);t.bindTexture(n.TEXTURE_2D,ue.__webglTexture),Se(n.TEXTURE_2D,bt),fe(B.__webglFramebuffer,C,bt,n.COLOR_ATTACHMENT0+ge,n.TEXTURE_2D,0),g(bt)&&m(n.TEXTURE_2D)}t.unbindTexture()}else{let ge=n.TEXTURE_2D;if((C.isWebGL3DRenderTarget||C.isWebGLArrayRenderTarget)&&(ge=C.isWebGL3DRenderTarget?n.TEXTURE_3D:n.TEXTURE_2D_ARRAY),t.bindTexture(ge,ee.__webglTexture),Se(ge,E),E.mipmaps&&E.mipmaps.length>0)for(let we=0;we<E.mipmaps.length;we++)fe(B.__webglFramebuffer[we],C,E,n.COLOR_ATTACHMENT0,ge,we);else fe(B.__webglFramebuffer,C,E,n.COLOR_ATTACHMENT0,ge,0);g(E)&&m(ge),t.unbindTexture()}C.depthBuffer&&Ue(C)}function rt(C){let E=C.textures;for(let B=0,ee=E.length;B<ee;B++){let ne=E[B];if(g(ne)){let te=x(C),De=i.get(ne).__webglTexture;t.bindTexture(te,De),m(te),t.unbindTexture()}}}let Gt=[],O=[];function gn(C){if(C.samples>0){if(Ke(C)===!1){let E=C.textures,B=C.width,ee=C.height,ne=n.COLOR_BUFFER_BIT,te=C.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,De=i.get(C),ge=E.length>1;if(ge)for(let we=0;we<E.length;we++)t.bindFramebuffer(n.FRAMEBUFFER,De.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+we,n.RENDERBUFFER,null),t.bindFramebuffer(n.FRAMEBUFFER,De.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+we,n.TEXTURE_2D,null,0);t.bindFramebuffer(n.READ_FRAMEBUFFER,De.__webglMultisampledFramebuffer),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,De.__webglFramebuffer);for(let we=0;we<E.length;we++){if(C.resolveDepthBuffer&&(C.depthBuffer&&(ne|=n.DEPTH_BUFFER_BIT),C.stencilBuffer&&C.resolveStencilBuffer&&(ne|=n.STENCIL_BUFFER_BIT)),ge){n.framebufferRenderbuffer(n.READ_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,De.__webglColorRenderbuffer[we]);let bt=i.get(E[we]).__webglTexture;n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,bt,0)}n.blitFramebuffer(0,0,B,ee,0,0,B,ee,ne,n.NEAREST),l===!0&&(Gt.length=0,O.length=0,Gt.push(n.COLOR_ATTACHMENT0+we),C.depthBuffer&&C.resolveDepthBuffer===!1&&(Gt.push(te),O.push(te),n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,O)),n.invalidateFramebuffer(n.READ_FRAMEBUFFER,Gt))}if(t.bindFramebuffer(n.READ_FRAMEBUFFER,null),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),ge)for(let we=0;we<E.length;we++){t.bindFramebuffer(n.FRAMEBUFFER,De.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+we,n.RENDERBUFFER,De.__webglColorRenderbuffer[we]);let bt=i.get(E[we]).__webglTexture;t.bindFramebuffer(n.FRAMEBUFFER,De.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+we,n.TEXTURE_2D,bt,0)}t.bindFramebuffer(n.DRAW_FRAMEBUFFER,De.__webglMultisampledFramebuffer)}else if(C.depthBuffer&&C.resolveDepthBuffer===!1&&l){let E=C.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT;n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,[E])}}}function dt(C){return Math.min(r.maxSamples,C.samples)}function Ke(C){let E=i.get(C);return C.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&E.__useRenderToTexture!==!1}function Ce(C){let E=o.render.frame;u.get(C)!==E&&(u.set(C,E),C.update())}function Dt(C,E){let B=C.colorSpace,ee=C.format,ne=C.type;return C.isCompressedTexture===!0||C.isVideoTexture===!0||B!==Hc&&B!==Do&&(Pt.getTransfer(B)===Xt?(ee!==nr||ne!==Os)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",B)),E}function Fe(C){return typeof HTMLImageElement<"u"&&C instanceof HTMLImageElement?(c.width=C.naturalWidth||C.width,c.height=C.naturalHeight||C.height):typeof VideoFrame<"u"&&C instanceof VideoFrame?(c.width=C.displayWidth,c.height=C.displayHeight):(c.width=C.width,c.height=C.height),c}this.allocateTextureUnit=L,this.resetTextureUnits=U,this.setTexture2D=z,this.setTexture2DArray=$,this.setTexture3D=G,this.setTextureCube=V,this.rebindTextures=ze,this.setupRenderTarget=It,this.updateRenderTargetMipmap=rt,this.updateMultisampleRenderTarget=gn,this.setupDepthRenderbuffer=Ue,this.setupFrameBufferTexture=fe,this.useMultisampledRTT=Ke}function e9(n,e){function t(i,r=Do){let s,o=Pt.getTransfer(r);if(i===Os)return n.UNSIGNED_BYTE;if(i===JM)return n.UNSIGNED_SHORT_4_4_4_4;if(i===QM)return n.UNSIGNED_SHORT_5_5_5_1;if(i===UN)return n.UNSIGNED_INT_5_9_9_9_REV;if(i===FN)return n.BYTE;if(i===kN)return n.SHORT;if(i===Yd)return n.UNSIGNED_SHORT;if(i===KM)return n.INT;if(i===Wa)return n.UNSIGNED_INT;if(i===Ir)return n.FLOAT;if(i===lh)return n.HALF_FLOAT;if(i===BN)return n.ALPHA;if(i===VN)return n.RGB;if(i===nr)return n.RGBA;if(i===zN)return n.LUMINANCE;if(i===HN)return n.LUMINANCE_ALPHA;if(i===Sc)return n.DEPTH_COMPONENT;if(i===Pc)return n.DEPTH_STENCIL;if(i===ew)return n.RED;if(i===tw)return n.RED_INTEGER;if(i===GN)return n.RG;if(i===nw)return n.RG_INTEGER;if(i===iw)return n.RGBA_INTEGER;if(i===ag||i===lg||i===cg||i===ug)if(o===Xt)if(s=e.get("WEBGL_compressed_texture_s3tc_srgb"),s!==null){if(i===ag)return s.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(i===lg)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(i===cg)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(i===ug)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(s=e.get("WEBGL_compressed_texture_s3tc"),s!==null){if(i===ag)return s.COMPRESSED_RGB_S3TC_DXT1_EXT;if(i===lg)return s.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(i===cg)return s.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(i===ug)return s.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(i===YE||i===ZE||i===KE||i===JE)if(s=e.get("WEBGL_compressed_texture_pvrtc"),s!==null){if(i===YE)return s.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(i===ZE)return s.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(i===KE)return s.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(i===JE)return s.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(i===QE||i===eM||i===tM)if(s=e.get("WEBGL_compressed_texture_etc"),s!==null){if(i===QE||i===eM)return o===Xt?s.COMPRESSED_SRGB8_ETC2:s.COMPRESSED_RGB8_ETC2;if(i===tM)return o===Xt?s.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:s.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(i===nM||i===iM||i===rM||i===sM||i===oM||i===aM||i===lM||i===cM||i===uM||i===dM||i===hM||i===fM||i===pM||i===mM)if(s=e.get("WEBGL_compressed_texture_astc"),s!==null){if(i===nM)return o===Xt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:s.COMPRESSED_RGBA_ASTC_4x4_KHR;if(i===iM)return o===Xt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:s.COMPRESSED_RGBA_ASTC_5x4_KHR;if(i===rM)return o===Xt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:s.COMPRESSED_RGBA_ASTC_5x5_KHR;if(i===sM)return o===Xt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:s.COMPRESSED_RGBA_ASTC_6x5_KHR;if(i===oM)return o===Xt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:s.COMPRESSED_RGBA_ASTC_6x6_KHR;if(i===aM)return o===Xt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:s.COMPRESSED_RGBA_ASTC_8x5_KHR;if(i===lM)return o===Xt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:s.COMPRESSED_RGBA_ASTC_8x6_KHR;if(i===cM)return o===Xt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:s.COMPRESSED_RGBA_ASTC_8x8_KHR;if(i===uM)return o===Xt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:s.COMPRESSED_RGBA_ASTC_10x5_KHR;if(i===dM)return o===Xt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:s.COMPRESSED_RGBA_ASTC_10x6_KHR;if(i===hM)return o===Xt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:s.COMPRESSED_RGBA_ASTC_10x8_KHR;if(i===fM)return o===Xt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:s.COMPRESSED_RGBA_ASTC_10x10_KHR;if(i===pM)return o===Xt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:s.COMPRESSED_RGBA_ASTC_12x10_KHR;if(i===mM)return o===Xt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:s.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(i===dg||i===gM||i===yM)if(s=e.get("EXT_texture_compression_bptc"),s!==null){if(i===dg)return o===Xt?s.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:s.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(i===gM)return s.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(i===yM)return s.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(i===jN||i===vM||i===_M||i===xM)if(s=e.get("EXT_texture_compression_rgtc"),s!==null){if(i===dg)return s.COMPRESSED_RED_RGTC1_EXT;if(i===vM)return s.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(i===_M)return s.COMPRESSED_RED_GREEN_RGTC2_EXT;if(i===xM)return s.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return i===Rc?n.UNSIGNED_INT_24_8:n[i]!==void 0?n[i]:null}return{convert:t}}var LM=class extends sn{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}},qr=class extends Un{constructor(){super(),this.isGroup=!0,this.type="Group"}},t9={type:"move"},Xd=class{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new qr,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new qr,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new N,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new N),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new qr,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new N,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new N),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){let t=this._hand;if(t)for(let i of e.hand.values())this._getHandJoint(t,i)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,i){let r=null,s=null,o=null,a=this._targetRay,l=this._grip,c=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(c&&e.hand){o=!0;for(let y of e.hand.values()){let g=t.getJointPose(y,i),m=this._getHandJoint(c,y);g!==null&&(m.matrix.fromArray(g.transform.matrix),m.matrix.decompose(m.position,m.rotation,m.scale),m.matrixWorldNeedsUpdate=!0,m.jointRadius=g.radius),m.visible=g!==null}let u=c.joints["index-finger-tip"],d=c.joints["thumb-tip"],h=u.position.distanceTo(d.position),f=.02,p=.005;c.inputState.pinching&&h>f+p?(c.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!c.inputState.pinching&&h<=f-p&&(c.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else l!==null&&e.gripSpace&&(s=t.getPose(e.gripSpace,i),s!==null&&(l.matrix.fromArray(s.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),l.matrixWorldNeedsUpdate=!0,s.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(s.linearVelocity)):l.hasLinearVelocity=!1,s.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(s.angularVelocity)):l.hasAngularVelocity=!1));a!==null&&(r=t.getPose(e.targetRaySpace,i),r===null&&s!==null&&(r=s),r!==null&&(a.matrix.fromArray(r.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),a.matrixWorldNeedsUpdate=!0,r.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(r.linearVelocity)):a.hasLinearVelocity=!1,r.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(r.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(t9)))}return a!==null&&(a.visible=r!==null),l!==null&&(l.visible=s!==null),c!==null&&(c.visible=o!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){let i=new qr;i.matrixAutoUpdate=!1,i.visible=!1,e.joints[t.jointName]=i,e.add(i)}return e.joints[t.jointName]}},n9=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,i9=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`,FM=class{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,t,i){if(this.texture===null){let r=new ar,s=e.properties.get(r);s.__webglTexture=t.texture,(t.depthNear!=i.depthNear||t.depthFar!=i.depthFar)&&(this.depthNear=t.depthNear,this.depthFar=t.depthFar),this.texture=r}}getMesh(e){if(this.texture!==null&&this.mesh===null){let t=e.cameras[0].viewport,i=new Jr({vertexShader:n9,fragmentShader:i9,uniforms:{depthColor:{value:this.texture},depthWidth:{value:t.z},depthHeight:{value:t.w}}});this.mesh=new $n(new xg(20,20),i)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}},kM=class extends Zr{constructor(e,t){super();let i=this,r=null,s=1,o=null,a="local-floor",l=1,c=null,u=null,d=null,h=null,f=null,p=null,y=new FM,g=t.getContextAttributes(),m=null,x=null,M=[],v=[],S=new Ye,T=null,A=new sn;A.viewport=new kt;let I=new sn;I.viewport=new kt;let w=[A,I],_=new LM,D=null,U=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(q){let re=M[q];return re===void 0&&(re=new Xd,M[q]=re),re.getTargetRaySpace()},this.getControllerGrip=function(q){let re=M[q];return re===void 0&&(re=new Xd,M[q]=re),re.getGripSpace()},this.getHand=function(q){let re=M[q];return re===void 0&&(re=new Xd,M[q]=re),re.getHandSpace()};function L(q){let re=v.indexOf(q.inputSource);if(re===-1)return;let fe=M[re];fe!==void 0&&(fe.update(q.inputSource,q.frame,c||o),fe.dispatchEvent({type:q.type,data:q.inputSource}))}function W(){r.removeEventListener("select",L),r.removeEventListener("selectstart",L),r.removeEventListener("selectend",L),r.removeEventListener("squeeze",L),r.removeEventListener("squeezestart",L),r.removeEventListener("squeezeend",L),r.removeEventListener("end",W),r.removeEventListener("inputsourceschange",z);for(let q=0;q<M.length;q++){let re=v[q];re!==null&&(v[q]=null,M[q].disconnect(re))}D=null,U=null,y.reset(),e.setRenderTarget(m),f=null,h=null,d=null,r=null,x=null,Ie.stop(),i.isPresenting=!1,e.setPixelRatio(T),e.setSize(S.width,S.height,!1),i.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(q){s=q,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(q){a=q,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return c||o},this.setReferenceSpace=function(q){c=q},this.getBaseLayer=function(){return h!==null?h:f},this.getBinding=function(){return d},this.getFrame=function(){return p},this.getSession=function(){return r},this.setSession=function(q){return ji(this,null,function*(){if(r=q,r!==null){if(m=e.getRenderTarget(),r.addEventListener("select",L),r.addEventListener("selectstart",L),r.addEventListener("selectend",L),r.addEventListener("squeeze",L),r.addEventListener("squeezestart",L),r.addEventListener("squeezeend",L),r.addEventListener("end",W),r.addEventListener("inputsourceschange",z),g.xrCompatible!==!0&&(yield t.makeXRCompatible()),T=e.getPixelRatio(),e.getSize(S),r.renderState.layers===void 0){let re={antialias:g.antialias,alpha:!0,depth:g.depth,stencil:g.stencil,framebufferScaleFactor:s};f=new XRWebGLLayer(r,t,re),r.updateRenderState({baseLayer:f}),e.setPixelRatio(1),e.setSize(f.framebufferWidth,f.framebufferHeight,!1),x=new Ls(f.framebufferWidth,f.framebufferHeight,{format:nr,type:Os,colorSpace:e.outputColorSpace,stencilBuffer:g.stencil})}else{let re=null,fe=null,oe=null;g.depth&&(oe=g.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,re=g.stencil?Pc:Sc,fe=g.stencil?Rc:Wa);let Ae={colorFormat:t.RGBA8,depthFormat:oe,scaleFactor:s};d=new XRWebGLBinding(r,t),h=d.createProjectionLayer(Ae),r.updateRenderState({layers:[h]}),e.setPixelRatio(1),e.setSize(h.textureWidth,h.textureHeight,!1),x=new Ls(h.textureWidth,h.textureHeight,{format:nr,type:Os,depthTexture:new Mg(h.textureWidth,h.textureHeight,fe,void 0,void 0,void 0,void 0,void 0,void 0,re),stencilBuffer:g.stencil,colorSpace:e.outputColorSpace,samples:g.antialias?4:0,resolveDepthBuffer:h.ignoreDepthValues===!1})}x.isXRRenderTarget=!0,this.setFoveation(l),c=null,o=yield r.requestReferenceSpace(a),Ie.setContext(r),Ie.start(),i.isPresenting=!0,i.dispatchEvent({type:"sessionstart"})}})},this.getEnvironmentBlendMode=function(){if(r!==null)return r.environmentBlendMode},this.getDepthTexture=function(){return y.getDepthTexture()};function z(q){for(let re=0;re<q.removed.length;re++){let fe=q.removed[re],oe=v.indexOf(fe);oe>=0&&(v[oe]=null,M[oe].disconnect(fe))}for(let re=0;re<q.added.length;re++){let fe=q.added[re],oe=v.indexOf(fe);if(oe===-1){for(let Ue=0;Ue<M.length;Ue++)if(Ue>=v.length){v.push(fe),oe=Ue;break}else if(v[Ue]===null){v[Ue]=fe,oe=Ue;break}if(oe===-1)break}let Ae=M[oe];Ae&&Ae.connect(fe)}}let $=new N,G=new N;function V(q,re,fe){$.setFromMatrixPosition(re.matrixWorld),G.setFromMatrixPosition(fe.matrixWorld);let oe=$.distanceTo(G),Ae=re.projectionMatrix.elements,Ue=fe.projectionMatrix.elements,ze=Ae[14]/(Ae[10]-1),It=Ae[14]/(Ae[10]+1),rt=(Ae[9]+1)/Ae[5],Gt=(Ae[9]-1)/Ae[5],O=(Ae[8]-1)/Ae[0],gn=(Ue[8]+1)/Ue[0],dt=ze*O,Ke=ze*gn,Ce=oe/(-O+gn),Dt=Ce*-O;if(re.matrixWorld.decompose(q.position,q.quaternion,q.scale),q.translateX(Dt),q.translateZ(Ce),q.matrixWorld.compose(q.position,q.quaternion,q.scale),q.matrixWorldInverse.copy(q.matrixWorld).invert(),Ae[10]===-1)q.projectionMatrix.copy(re.projectionMatrix),q.projectionMatrixInverse.copy(re.projectionMatrixInverse);else{let Fe=ze+Ce,C=It+Ce,E=dt-Dt,B=Ke+(oe-Dt),ee=rt*It/C*Fe,ne=Gt*It/C*Fe;q.projectionMatrix.makePerspective(E,B,ee,ne,Fe,C),q.projectionMatrixInverse.copy(q.projectionMatrix).invert()}}function se(q,re){re===null?q.matrixWorld.copy(q.matrix):q.matrixWorld.multiplyMatrices(re.matrixWorld,q.matrix),q.matrixWorldInverse.copy(q.matrixWorld).invert()}this.updateCamera=function(q){if(r===null)return;let re=q.near,fe=q.far;y.texture!==null&&(y.depthNear>0&&(re=y.depthNear),y.depthFar>0&&(fe=y.depthFar)),_.near=I.near=A.near=re,_.far=I.far=A.far=fe,(D!==_.near||U!==_.far)&&(r.updateRenderState({depthNear:_.near,depthFar:_.far}),D=_.near,U=_.far),A.layers.mask=q.layers.mask|2,I.layers.mask=q.layers.mask|4,_.layers.mask=A.layers.mask|I.layers.mask;let oe=q.parent,Ae=_.cameras;se(_,oe);for(let Ue=0;Ue<Ae.length;Ue++)se(Ae[Ue],oe);Ae.length===2?V(_,A,I):_.projectionMatrix.copy(A.projectionMatrix),ie(q,_,oe)};function ie(q,re,fe){fe===null?q.matrix.copy(re.matrixWorld):(q.matrix.copy(fe.matrixWorld),q.matrix.invert(),q.matrix.multiply(re.matrixWorld)),q.matrix.decompose(q.position,q.quaternion,q.scale),q.updateMatrixWorld(!0),q.projectionMatrix.copy(re.projectionMatrix),q.projectionMatrixInverse.copy(re.projectionMatrixInverse),q.isPerspectiveCamera&&(q.fov=Lc*2*Math.atan(1/q.projectionMatrix.elements[5]),q.zoom=1)}this.getCamera=function(){return _},this.getFoveation=function(){if(!(h===null&&f===null))return l},this.setFoveation=function(q){l=q,h!==null&&(h.fixedFoveation=q),f!==null&&f.fixedFoveation!==void 0&&(f.fixedFoveation=q)},this.hasDepthSensing=function(){return y.texture!==null},this.getDepthSensingMesh=function(){return y.getMesh(_)};let ce=null;function Se(q,re){if(u=re.getViewerPose(c||o),p=re,u!==null){let fe=u.views;f!==null&&(e.setRenderTargetFramebuffer(x,f.framebuffer),e.setRenderTarget(x));let oe=!1;fe.length!==_.cameras.length&&(_.cameras.length=0,oe=!0);for(let Ue=0;Ue<fe.length;Ue++){let ze=fe[Ue],It=null;if(f!==null)It=f.getViewport(ze);else{let Gt=d.getViewSubImage(h,ze);It=Gt.viewport,Ue===0&&(e.setRenderTargetTextures(x,Gt.colorTexture,h.ignoreDepthValues?void 0:Gt.depthStencilTexture),e.setRenderTarget(x))}let rt=w[Ue];rt===void 0&&(rt=new sn,rt.layers.enable(Ue),rt.viewport=new kt,w[Ue]=rt),rt.matrix.fromArray(ze.transform.matrix),rt.matrix.decompose(rt.position,rt.quaternion,rt.scale),rt.projectionMatrix.fromArray(ze.projectionMatrix),rt.projectionMatrixInverse.copy(rt.projectionMatrix).invert(),rt.viewport.set(It.x,It.y,It.width,It.height),Ue===0&&(_.matrix.copy(rt.matrix),_.matrix.decompose(_.position,_.quaternion,_.scale)),oe===!0&&_.cameras.push(rt)}let Ae=r.enabledFeatures;if(Ae&&Ae.includes("depth-sensing")){let Ue=d.getDepthInformation(fe[0]);Ue&&Ue.isValid&&Ue.texture&&y.init(e,Ue,r.renderState)}}for(let fe=0;fe<M.length;fe++){let oe=v[fe],Ae=M[fe];oe!==null&&Ae!==void 0&&Ae.update(oe,re,c||o)}ce&&ce(q,re),re.detectedPlanes&&i.dispatchEvent({type:"planesdetected",data:re}),p=null}let Ie=new JN;Ie.setAnimationLoop(Se),this.setAnimationLoop=function(q){ce=q},this.dispose=function(){}}},Ba=new $a,r9=new lt;function s9(n,e){function t(g,m){g.matrixAutoUpdate===!0&&g.updateMatrix(),m.value.copy(g.matrix)}function i(g,m){m.color.getRGB(g.fogColor.value,KN(n)),m.isFog?(g.fogNear.value=m.near,g.fogFar.value=m.far):m.isFogExp2&&(g.fogDensity.value=m.density)}function r(g,m,x,M,v){m.isMeshBasicMaterial||m.isMeshLambertMaterial?s(g,m):m.isMeshToonMaterial?(s(g,m),d(g,m)):m.isMeshPhongMaterial?(s(g,m),u(g,m)):m.isMeshStandardMaterial?(s(g,m),h(g,m),m.isMeshPhysicalMaterial&&f(g,m,v)):m.isMeshMatcapMaterial?(s(g,m),p(g,m)):m.isMeshDepthMaterial?s(g,m):m.isMeshDistanceMaterial?(s(g,m),y(g,m)):m.isMeshNormalMaterial?s(g,m):m.isLineBasicMaterial?(o(g,m),m.isLineDashedMaterial&&a(g,m)):m.isPointsMaterial?l(g,m,x,M):m.isSpriteMaterial?c(g,m):m.isShadowMaterial?(g.color.value.copy(m.color),g.opacity.value=m.opacity):m.isShaderMaterial&&(m.uniformsNeedUpdate=!1)}function s(g,m){g.opacity.value=m.opacity,m.color&&g.diffuse.value.copy(m.color),m.emissive&&g.emissive.value.copy(m.emissive).multiplyScalar(m.emissiveIntensity),m.map&&(g.map.value=m.map,t(m.map,g.mapTransform)),m.alphaMap&&(g.alphaMap.value=m.alphaMap,t(m.alphaMap,g.alphaMapTransform)),m.bumpMap&&(g.bumpMap.value=m.bumpMap,t(m.bumpMap,g.bumpMapTransform),g.bumpScale.value=m.bumpScale,m.side===fi&&(g.bumpScale.value*=-1)),m.normalMap&&(g.normalMap.value=m.normalMap,t(m.normalMap,g.normalMapTransform),g.normalScale.value.copy(m.normalScale),m.side===fi&&g.normalScale.value.negate()),m.displacementMap&&(g.displacementMap.value=m.displacementMap,t(m.displacementMap,g.displacementMapTransform),g.displacementScale.value=m.displacementScale,g.displacementBias.value=m.displacementBias),m.emissiveMap&&(g.emissiveMap.value=m.emissiveMap,t(m.emissiveMap,g.emissiveMapTransform)),m.specularMap&&(g.specularMap.value=m.specularMap,t(m.specularMap,g.specularMapTransform)),m.alphaTest>0&&(g.alphaTest.value=m.alphaTest);let x=e.get(m),M=x.envMap,v=x.envMapRotation;M&&(g.envMap.value=M,Ba.copy(v),Ba.x*=-1,Ba.y*=-1,Ba.z*=-1,M.isCubeTexture&&M.isRenderTargetTexture===!1&&(Ba.y*=-1,Ba.z*=-1),g.envMapRotation.value.setFromMatrix4(r9.makeRotationFromEuler(Ba)),g.flipEnvMap.value=M.isCubeTexture&&M.isRenderTargetTexture===!1?-1:1,g.reflectivity.value=m.reflectivity,g.ior.value=m.ior,g.refractionRatio.value=m.refractionRatio),m.lightMap&&(g.lightMap.value=m.lightMap,g.lightMapIntensity.value=m.lightMapIntensity,t(m.lightMap,g.lightMapTransform)),m.aoMap&&(g.aoMap.value=m.aoMap,g.aoMapIntensity.value=m.aoMapIntensity,t(m.aoMap,g.aoMapTransform))}function o(g,m){g.diffuse.value.copy(m.color),g.opacity.value=m.opacity,m.map&&(g.map.value=m.map,t(m.map,g.mapTransform))}function a(g,m){g.dashSize.value=m.dashSize,g.totalSize.value=m.dashSize+m.gapSize,g.scale.value=m.scale}function l(g,m,x,M){g.diffuse.value.copy(m.color),g.opacity.value=m.opacity,g.size.value=m.size*x,g.scale.value=M*.5,m.map&&(g.map.value=m.map,t(m.map,g.uvTransform)),m.alphaMap&&(g.alphaMap.value=m.alphaMap,t(m.alphaMap,g.alphaMapTransform)),m.alphaTest>0&&(g.alphaTest.value=m.alphaTest)}function c(g,m){g.diffuse.value.copy(m.color),g.opacity.value=m.opacity,g.rotation.value=m.rotation,m.map&&(g.map.value=m.map,t(m.map,g.mapTransform)),m.alphaMap&&(g.alphaMap.value=m.alphaMap,t(m.alphaMap,g.alphaMapTransform)),m.alphaTest>0&&(g.alphaTest.value=m.alphaTest)}function u(g,m){g.specular.value.copy(m.specular),g.shininess.value=Math.max(m.shininess,1e-4)}function d(g,m){m.gradientMap&&(g.gradientMap.value=m.gradientMap)}function h(g,m){g.metalness.value=m.metalness,m.metalnessMap&&(g.metalnessMap.value=m.metalnessMap,t(m.metalnessMap,g.metalnessMapTransform)),g.roughness.value=m.roughness,m.roughnessMap&&(g.roughnessMap.value=m.roughnessMap,t(m.roughnessMap,g.roughnessMapTransform)),m.envMap&&(g.envMapIntensity.value=m.envMapIntensity)}function f(g,m,x){g.ior.value=m.ior,m.sheen>0&&(g.sheenColor.value.copy(m.sheenColor).multiplyScalar(m.sheen),g.sheenRoughness.value=m.sheenRoughness,m.sheenColorMap&&(g.sheenColorMap.value=m.sheenColorMap,t(m.sheenColorMap,g.sheenColorMapTransform)),m.sheenRoughnessMap&&(g.sheenRoughnessMap.value=m.sheenRoughnessMap,t(m.sheenRoughnessMap,g.sheenRoughnessMapTransform))),m.clearcoat>0&&(g.clearcoat.value=m.clearcoat,g.clearcoatRoughness.value=m.clearcoatRoughness,m.clearcoatMap&&(g.clearcoatMap.value=m.clearcoatMap,t(m.clearcoatMap,g.clearcoatMapTransform)),m.clearcoatRoughnessMap&&(g.clearcoatRoughnessMap.value=m.clearcoatRoughnessMap,t(m.clearcoatRoughnessMap,g.clearcoatRoughnessMapTransform)),m.clearcoatNormalMap&&(g.clearcoatNormalMap.value=m.clearcoatNormalMap,t(m.clearcoatNormalMap,g.clearcoatNormalMapTransform),g.clearcoatNormalScale.value.copy(m.clearcoatNormalScale),m.side===fi&&g.clearcoatNormalScale.value.negate())),m.dispersion>0&&(g.dispersion.value=m.dispersion),m.iridescence>0&&(g.iridescence.value=m.iridescence,g.iridescenceIOR.value=m.iridescenceIOR,g.iridescenceThicknessMinimum.value=m.iridescenceThicknessRange[0],g.iridescenceThicknessMaximum.value=m.iridescenceThicknessRange[1],m.iridescenceMap&&(g.iridescenceMap.value=m.iridescenceMap,t(m.iridescenceMap,g.iridescenceMapTransform)),m.iridescenceThicknessMap&&(g.iridescenceThicknessMap.value=m.iridescenceThicknessMap,t(m.iridescenceThicknessMap,g.iridescenceThicknessMapTransform))),m.transmission>0&&(g.transmission.value=m.transmission,g.transmissionSamplerMap.value=x.texture,g.transmissionSamplerSize.value.set(x.width,x.height),m.transmissionMap&&(g.transmissionMap.value=m.transmissionMap,t(m.transmissionMap,g.transmissionMapTransform)),g.thickness.value=m.thickness,m.thicknessMap&&(g.thicknessMap.value=m.thicknessMap,t(m.thicknessMap,g.thicknessMapTransform)),g.attenuationDistance.value=m.attenuationDistance,g.attenuationColor.value.copy(m.attenuationColor)),m.anisotropy>0&&(g.anisotropyVector.value.set(m.anisotropy*Math.cos(m.anisotropyRotation),m.anisotropy*Math.sin(m.anisotropyRotation)),m.anisotropyMap&&(g.anisotropyMap.value=m.anisotropyMap,t(m.anisotropyMap,g.anisotropyMapTransform))),g.specularIntensity.value=m.specularIntensity,g.specularColor.value.copy(m.specularColor),m.specularColorMap&&(g.specularColorMap.value=m.specularColorMap,t(m.specularColorMap,g.specularColorMapTransform)),m.specularIntensityMap&&(g.specularIntensityMap.value=m.specularIntensityMap,t(m.specularIntensityMap,g.specularIntensityMapTransform))}function p(g,m){m.matcap&&(g.matcap.value=m.matcap)}function y(g,m){let x=e.get(m).light;g.referencePosition.value.setFromMatrixPosition(x.matrixWorld),g.nearDistance.value=x.shadow.camera.near,g.farDistance.value=x.shadow.camera.far}return{refreshFogUniforms:i,refreshMaterialUniforms:r}}function o9(n,e,t,i){let r={},s={},o=[],a=n.getParameter(n.MAX_UNIFORM_BUFFER_BINDINGS);function l(x,M){let v=M.program;i.uniformBlockBinding(x,v)}function c(x,M){let v=r[x.id];v===void 0&&(p(x),v=u(x),r[x.id]=v,x.addEventListener("dispose",g));let S=M.program;i.updateUBOMapping(x,S);let T=e.render.frame;s[x.id]!==T&&(h(x),s[x.id]=T)}function u(x){let M=d();x.__bindingPointIndex=M;let v=n.createBuffer(),S=x.__size,T=x.usage;return n.bindBuffer(n.UNIFORM_BUFFER,v),n.bufferData(n.UNIFORM_BUFFER,S,T),n.bindBuffer(n.UNIFORM_BUFFER,null),n.bindBufferBase(n.UNIFORM_BUFFER,M,v),v}function d(){for(let x=0;x<a;x++)if(o.indexOf(x)===-1)return o.push(x),x;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function h(x){let M=r[x.id],v=x.uniforms,S=x.__cache;n.bindBuffer(n.UNIFORM_BUFFER,M);for(let T=0,A=v.length;T<A;T++){let I=Array.isArray(v[T])?v[T]:[v[T]];for(let w=0,_=I.length;w<_;w++){let D=I[w];if(f(D,T,w,S)===!0){let U=D.__offset,L=Array.isArray(D.value)?D.value:[D.value],W=0;for(let z=0;z<L.length;z++){let $=L[z],G=y($);typeof $=="number"||typeof $=="boolean"?(D.__data[0]=$,n.bufferSubData(n.UNIFORM_BUFFER,U+W,D.__data)):$.isMatrix3?(D.__data[0]=$.elements[0],D.__data[1]=$.elements[1],D.__data[2]=$.elements[2],D.__data[3]=0,D.__data[4]=$.elements[3],D.__data[5]=$.elements[4],D.__data[6]=$.elements[5],D.__data[7]=0,D.__data[8]=$.elements[6],D.__data[9]=$.elements[7],D.__data[10]=$.elements[8],D.__data[11]=0):($.toArray(D.__data,W),W+=G.storage/Float32Array.BYTES_PER_ELEMENT)}n.bufferSubData(n.UNIFORM_BUFFER,U,D.__data)}}}n.bindBuffer(n.UNIFORM_BUFFER,null)}function f(x,M,v,S){let T=x.value,A=M+"_"+v;if(S[A]===void 0)return typeof T=="number"||typeof T=="boolean"?S[A]=T:S[A]=T.clone(),!0;{let I=S[A];if(typeof T=="number"||typeof T=="boolean"){if(I!==T)return S[A]=T,!0}else if(I.equals(T)===!1)return I.copy(T),!0}return!1}function p(x){let M=x.uniforms,v=0,S=16;for(let A=0,I=M.length;A<I;A++){let w=Array.isArray(M[A])?M[A]:[M[A]];for(let _=0,D=w.length;_<D;_++){let U=w[_],L=Array.isArray(U.value)?U.value:[U.value];for(let W=0,z=L.length;W<z;W++){let $=L[W],G=y($),V=v%S,se=V%G.boundary,ie=V+se;v+=se,ie!==0&&S-ie<G.storage&&(v+=S-ie),U.__data=new Float32Array(G.storage/Float32Array.BYTES_PER_ELEMENT),U.__offset=v,v+=G.storage}}}let T=v%S;return T>0&&(v+=S-T),x.__size=v,x.__cache={},this}function y(x){let M={boundary:0,storage:0};return typeof x=="number"||typeof x=="boolean"?(M.boundary=4,M.storage=4):x.isVector2?(M.boundary=8,M.storage=8):x.isVector3||x.isColor?(M.boundary=16,M.storage=12):x.isVector4?(M.boundary=16,M.storage=16):x.isMatrix3?(M.boundary=48,M.storage=48):x.isMatrix4?(M.boundary=64,M.storage=64):x.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",x),M}function g(x){let M=x.target;M.removeEventListener("dispose",g);let v=o.indexOf(M.__bindingPointIndex);o.splice(v,1),n.deleteBuffer(r[M.id]),delete r[M.id],delete s[M.id]}function m(){for(let x in r)n.deleteBuffer(r[x]);o=[],r={},s={}}return{bind:l,update:c,dispose:m}}var wg=class{constructor(e={}){let{canvas:t=u8(),context:i=null,depth:r=!0,stencil:s=!1,alpha:o=!1,antialias:a=!1,premultipliedAlpha:l=!0,preserveDrawingBuffer:c=!1,powerPreference:u="default",failIfMajorPerformanceCaveat:d=!1,reverseDepthBuffer:h=!1}=e;this.isWebGLRenderer=!0;let f;if(i!==null){if(typeof WebGLRenderingContext<"u"&&i instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");f=i.getContextAttributes().alpha}else f=o;let p=new Uint32Array(4),y=new Int32Array(4),g=null,m=null,x=[],M=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=tr,this.toneMapping=No,this.toneMappingExposure=1;let v=this,S=!1,T=0,A=0,I=null,w=-1,_=null,D=new kt,U=new kt,L=null,W=new qe(0),z=0,$=t.width,G=t.height,V=1,se=null,ie=null,ce=new kt(0,0,$,G),Se=new kt(0,0,$,G),Ie=!1,q=new Jd,re=!1,fe=!1,oe=new lt,Ae=new lt,Ue=new N,ze=new kt,It={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0},rt=!1;function Gt(){return I===null?V:1}let O=i;function gn(b,F){return t.getContext(b,F)}try{let b={alpha:!0,depth:r,stencil:s,antialias:a,premultipliedAlpha:l,preserveDrawingBuffer:c,powerPreference:u,failIfMajorPerformanceCaveat:d};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${ah}`),t.addEventListener("webglcontextlost",J,!1),t.addEventListener("webglcontextrestored",xe,!1),t.addEventListener("webglcontextcreationerror",_e,!1),O===null){let F="webgl2";if(O=gn(F,b),O===null)throw gn(F)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(b){throw console.error("THREE.WebGLRenderer: "+b.message),b}let dt,Ke,Ce,Dt,Fe,C,E,B,ee,ne,te,De,ge,we,bt,ue,be,Ge,$e,Me,P,K,ve,R;function le(){dt=new MX(O),dt.init(),K=new e9(O,dt),Ke=new gX(O,dt,e,K),Ce=new Kq(O,dt),Ke.reverseDepthBuffer&&h&&Ce.buffers.depth.setReversed(!0),Dt=new SX(O),Fe=new Uq,C=new Qq(O,dt,Ce,Fe,Ke,K,Dt),E=new vX(v),B=new EX(v),ee=new P8(O),ve=new pX(O,ee),ne=new wX(O,ee,Dt,ve),te=new CX(O,ne,ee,Dt),$e=new TX(O,Ke,C),ue=new yX(Fe),De=new kq(v,E,B,dt,Ke,ve,ue),ge=new s9(v,Fe),we=new Vq,bt=new $q(dt),Ge=new fX(v,E,B,Ce,te,f,l),be=new Yq(v,te,Ke),R=new o9(O,Dt,Ke,Ce),Me=new mX(O,dt,Dt),P=new bX(O,dt,Dt),Dt.programs=De.programs,v.capabilities=Ke,v.extensions=dt,v.properties=Fe,v.renderLists=we,v.shadowMap=be,v.state=Ce,v.info=Dt}le();let X=new kM(v,O);this.xr=X,this.getContext=function(){return O},this.getContextAttributes=function(){return O.getContextAttributes()},this.forceContextLoss=function(){let b=dt.get("WEBGL_lose_context");b&&b.loseContext()},this.forceContextRestore=function(){let b=dt.get("WEBGL_lose_context");b&&b.restoreContext()},this.getPixelRatio=function(){return V},this.setPixelRatio=function(b){b!==void 0&&(V=b,this.setSize($,G,!1))},this.getSize=function(b){return b.set($,G)},this.setSize=function(b,F,H=!0){if(X.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}$=b,G=F,t.width=Math.floor(b*V),t.height=Math.floor(F*V),H===!0&&(t.style.width=b+"px",t.style.height=F+"px"),this.setViewport(0,0,b,F)},this.getDrawingBufferSize=function(b){return b.set($*V,G*V).floor()},this.setDrawingBufferSize=function(b,F,H){$=b,G=F,V=H,t.width=Math.floor(b*H),t.height=Math.floor(F*H),this.setViewport(0,0,b,F)},this.getCurrentViewport=function(b){return b.copy(D)},this.getViewport=function(b){return b.copy(ce)},this.setViewport=function(b,F,H,j){b.isVector4?ce.set(b.x,b.y,b.z,b.w):ce.set(b,F,H,j),Ce.viewport(D.copy(ce).multiplyScalar(V).round())},this.getScissor=function(b){return b.copy(Se)},this.setScissor=function(b,F,H,j){b.isVector4?Se.set(b.x,b.y,b.z,b.w):Se.set(b,F,H,j),Ce.scissor(U.copy(Se).multiplyScalar(V).round())},this.getScissorTest=function(){return Ie},this.setScissorTest=function(b){Ce.setScissorTest(Ie=b)},this.setOpaqueSort=function(b){se=b},this.setTransparentSort=function(b){ie=b},this.getClearColor=function(b){return b.copy(Ge.getClearColor())},this.setClearColor=function(){Ge.setClearColor.apply(Ge,arguments)},this.getClearAlpha=function(){return Ge.getClearAlpha()},this.setClearAlpha=function(){Ge.setClearAlpha.apply(Ge,arguments)},this.clear=function(b=!0,F=!0,H=!0){let j=0;if(b){let k=!1;if(I!==null){let de=I.texture.format;k=de===iw||de===nw||de===tw}if(k){let de=I.texture.type,Ee=de===Os||de===Wa||de===Yd||de===Rc||de===JM||de===QM,Pe=Ge.getClearColor(),Ne=Ge.getClearAlpha(),Je=Pe.r,st=Pe.g,Oe=Pe.b;Ee?(p[0]=Je,p[1]=st,p[2]=Oe,p[3]=Ne,O.clearBufferuiv(O.COLOR,0,p)):(y[0]=Je,y[1]=st,y[2]=Oe,y[3]=Ne,O.clearBufferiv(O.COLOR,0,y))}else j|=O.COLOR_BUFFER_BIT}F&&(j|=O.DEPTH_BUFFER_BIT),H&&(j|=O.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),O.clear(j)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",J,!1),t.removeEventListener("webglcontextrestored",xe,!1),t.removeEventListener("webglcontextcreationerror",_e,!1),we.dispose(),bt.dispose(),Fe.dispose(),E.dispose(),B.dispose(),te.dispose(),ve.dispose(),R.dispose(),De.dispose(),X.dispose(),X.removeEventListener("sessionstart",vT),X.removeEventListener("sessionend",_T),ta.stop()};function J(b){b.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),S=!0}function xe(){console.log("THREE.WebGLRenderer: Context Restored."),S=!1;let b=Dt.autoReset,F=be.enabled,H=be.autoUpdate,j=be.needsUpdate,k=be.type;le(),Dt.autoReset=b,be.enabled=F,be.autoUpdate=H,be.needsUpdate=j,be.type=k}function _e(b){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",b.statusMessage)}function He(b){let F=b.target;F.removeEventListener("dispose",He),Ot(F)}function Ot(b){an(b),Fe.remove(b)}function an(b){let F=Fe.get(b).programs;F!==void 0&&(F.forEach(function(H){De.releaseProgram(H)}),b.isShaderMaterial&&De.releaseShaderCache(b))}this.renderBufferDirect=function(b,F,H,j,k,de){F===null&&(F=It);let Ee=k.isMesh&&k.matrixWorld.determinant()<0,Pe=W2(b,F,H,j,k);Ce.setMaterial(j,Ee);let Ne=H.index,Je=1;if(j.wireframe===!0){if(Ne=ne.getWireframeAttribute(H),Ne===void 0)return;Je=2}let st=H.drawRange,Oe=H.attributes.position,Lt=st.start*Je,Yt=(st.start+st.count)*Je;de!==null&&(Lt=Math.max(Lt,de.start*Je),Yt=Math.min(Yt,(de.start+de.count)*Je)),Ne!==null?(Lt=Math.max(Lt,0),Yt=Math.min(Yt,Ne.count)):Oe!=null&&(Lt=Math.max(Lt,0),Yt=Math.min(Yt,Oe.count));let Jt=Yt-Lt;if(Jt<0||Jt===1/0)return;ve.setup(k,j,Pe,H,Ne);let oi,Vt=Me;if(Ne!==null&&(oi=ee.get(Ne),Vt=P,Vt.setIndex(oi)),k.isMesh)j.wireframe===!0?(Ce.setLineWidth(j.wireframeLinewidth*Gt()),Vt.setMode(O.LINES)):Vt.setMode(O.TRIANGLES);else if(k.isLine){let ke=j.linewidth;ke===void 0&&(ke=1),Ce.setLineWidth(ke*Gt()),k.isLineSegments?Vt.setMode(O.LINES):k.isLineLoop?Vt.setMode(O.LINE_LOOP):Vt.setMode(O.LINE_STRIP)}else k.isPoints?Vt.setMode(O.POINTS):k.isSprite&&Vt.setMode(O.TRIANGLES);if(k.isBatchedMesh)if(k._multiDrawInstances!==null)Vt.renderMultiDrawInstances(k._multiDrawStarts,k._multiDrawCounts,k._multiDrawCount,k._multiDrawInstances);else if(dt.get("WEBGL_multi_draw"))Vt.renderMultiDraw(k._multiDrawStarts,k._multiDrawCounts,k._multiDrawCount);else{let ke=k._multiDrawStarts,ls=k._multiDrawCounts,zt=k._multiDrawCount,hr=Ne?ee.get(Ne).bytesPerElement:1,ul=Fe.get(j).currentProgram.getUniforms();for(let xi=0;xi<zt;xi++)ul.setValue(O,"_gl_DrawID",xi),Vt.render(ke[xi]/hr,ls[xi])}else if(k.isInstancedMesh)Vt.renderInstances(Lt,Jt,k.count);else if(H.isInstancedBufferGeometry){let ke=H._maxInstanceCount!==void 0?H._maxInstanceCount:1/0,ls=Math.min(H.instanceCount,ke);Vt.renderInstances(Lt,Jt,ls)}else Vt.render(Lt,Jt)};function St(b,F,H){b.transparent===!0&&b.side===Cr&&b.forceSinglePass===!1?(b.side=fi,b.needsUpdate=!0,qh(b,F,H),b.side=Yr,b.needsUpdate=!0,qh(b,F,H),b.side=Cr):qh(b,F,H)}this.compile=function(b,F,H=null){H===null&&(H=b),m=bt.get(H),m.init(F),M.push(m),H.traverseVisible(function(k){k.isLight&&k.layers.test(F.layers)&&(m.pushLight(k),k.castShadow&&m.pushShadow(k))}),b!==H&&b.traverseVisible(function(k){k.isLight&&k.layers.test(F.layers)&&(m.pushLight(k),k.castShadow&&m.pushShadow(k))}),m.setupLights();let j=new Set;return b.traverse(function(k){if(!(k.isMesh||k.isPoints||k.isLine||k.isSprite))return;let de=k.material;if(de)if(Array.isArray(de))for(let Ee=0;Ee<de.length;Ee++){let Pe=de[Ee];St(Pe,H,k),j.add(Pe)}else St(de,H,k),j.add(de)}),M.pop(),m=null,j},this.compileAsync=function(b,F,H=null){let j=this.compile(b,F,H);return new Promise(k=>{function de(){if(j.forEach(function(Ee){Fe.get(Ee).currentProgram.isReady()&&j.delete(Ee)}),j.size===0){k(b);return}setTimeout(de,10)}dt.get("KHR_parallel_shader_compile")!==null?de():setTimeout(de,10)})};let Nn=null;function si(b){Nn&&Nn(b)}function vT(){ta.stop()}function _T(){ta.start()}let ta=new JN;ta.setAnimationLoop(si),typeof self<"u"&&ta.setContext(self),this.setAnimationLoop=function(b){Nn=b,X.setAnimationLoop(b),b===null?ta.stop():ta.start()},X.addEventListener("sessionstart",vT),X.addEventListener("sessionend",_T),this.render=function(b,F){if(F!==void 0&&F.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(S===!0)return;if(b.matrixWorldAutoUpdate===!0&&b.updateMatrixWorld(),F.parent===null&&F.matrixWorldAutoUpdate===!0&&F.updateMatrixWorld(),X.enabled===!0&&X.isPresenting===!0&&(X.cameraAutoUpdate===!0&&X.updateCamera(F),F=X.getCamera()),b.isScene===!0&&b.onBeforeRender(v,b,F,I),m=bt.get(b,M.length),m.init(F),M.push(m),Ae.multiplyMatrices(F.projectionMatrix,F.matrixWorldInverse),q.setFromProjectionMatrix(Ae),fe=this.localClippingEnabled,re=ue.init(this.clippingPlanes,fe),g=we.get(b,x.length),g.init(),x.push(g),X.enabled===!0&&X.isPresenting===!0){let de=v.xr.getDepthSensingMesh();de!==null&&lv(de,F,-1/0,v.sortObjects)}lv(b,F,0,v.sortObjects),g.finish(),v.sortObjects===!0&&g.sort(se,ie),rt=X.enabled===!1||X.isPresenting===!1||X.hasDepthSensing()===!1,rt&&Ge.addToRenderList(g,b),this.info.render.frame++,re===!0&&ue.beginShadows();let H=m.state.shadowsArray;be.render(H,b,F),re===!0&&ue.endShadows(),this.info.autoReset===!0&&this.info.reset();let j=g.opaque,k=g.transmissive;if(m.setupLights(),F.isArrayCamera){let de=F.cameras;if(k.length>0)for(let Ee=0,Pe=de.length;Ee<Pe;Ee++){let Ne=de[Ee];ET(j,k,b,Ne)}rt&&Ge.render(b);for(let Ee=0,Pe=de.length;Ee<Pe;Ee++){let Ne=de[Ee];xT(g,b,Ne,Ne.viewport)}}else k.length>0&&ET(j,k,b,F),rt&&Ge.render(b),xT(g,b,F);I!==null&&(C.updateMultisampleRenderTarget(I),C.updateRenderTargetMipmap(I)),b.isScene===!0&&b.onAfterRender(v,b,F),ve.resetDefaultState(),w=-1,_=null,M.pop(),M.length>0?(m=M[M.length-1],re===!0&&ue.setGlobalState(v.clippingPlanes,m.state.camera)):m=null,x.pop(),x.length>0?g=x[x.length-1]:g=null};function lv(b,F,H,j){if(b.visible===!1)return;if(b.layers.test(F.layers)){if(b.isGroup)H=b.renderOrder;else if(b.isLOD)b.autoUpdate===!0&&b.update(F);else if(b.isLight)m.pushLight(b),b.castShadow&&m.pushShadow(b);else if(b.isSprite){if(!b.frustumCulled||q.intersectsSprite(b)){j&&ze.setFromMatrixPosition(b.matrixWorld).applyMatrix4(Ae);let Ee=te.update(b),Pe=b.material;Pe.visible&&g.push(b,Ee,Pe,H,ze.z,null)}}else if((b.isMesh||b.isLine||b.isPoints)&&(!b.frustumCulled||q.intersectsObject(b))){let Ee=te.update(b),Pe=b.material;if(j&&(b.boundingSphere!==void 0?(b.boundingSphere===null&&b.computeBoundingSphere(),ze.copy(b.boundingSphere.center)):(Ee.boundingSphere===null&&Ee.computeBoundingSphere(),ze.copy(Ee.boundingSphere.center)),ze.applyMatrix4(b.matrixWorld).applyMatrix4(Ae)),Array.isArray(Pe)){let Ne=Ee.groups;for(let Je=0,st=Ne.length;Je<st;Je++){let Oe=Ne[Je],Lt=Pe[Oe.materialIndex];Lt&&Lt.visible&&g.push(b,Ee,Lt,H,ze.z,Oe)}}else Pe.visible&&g.push(b,Ee,Pe,H,ze.z,null)}}let de=b.children;for(let Ee=0,Pe=de.length;Ee<Pe;Ee++)lv(de[Ee],F,H,j)}function xT(b,F,H,j){let k=b.opaque,de=b.transmissive,Ee=b.transparent;m.setupLightsView(H),re===!0&&ue.setGlobalState(v.clippingPlanes,H),j&&Ce.viewport(D.copy(j)),k.length>0&&Xh(k,F,H),de.length>0&&Xh(de,F,H),Ee.length>0&&Xh(Ee,F,H),Ce.buffers.depth.setTest(!0),Ce.buffers.depth.setMask(!0),Ce.buffers.color.setMask(!0),Ce.setPolygonOffset(!1)}function ET(b,F,H,j){if((H.isScene===!0?H.overrideMaterial:null)!==null)return;m.state.transmissionRenderTarget[j.id]===void 0&&(m.state.transmissionRenderTarget[j.id]=new Ls(1,1,{generateMipmaps:!0,type:dt.has("EXT_color_buffer_half_float")||dt.has("EXT_color_buffer_float")?lh:Os,minFilter:Xr,samples:4,stencilBuffer:s,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:Pt.workingColorSpace}));let de=m.state.transmissionRenderTarget[j.id],Ee=j.viewport||D;de.setSize(Ee.z,Ee.w);let Pe=v.getRenderTarget();v.setRenderTarget(de),v.getClearColor(W),z=v.getClearAlpha(),z<1&&v.setClearColor(16777215,.5),v.clear(),rt&&Ge.render(H);let Ne=v.toneMapping;v.toneMapping=No;let Je=j.viewport;if(j.viewport!==void 0&&(j.viewport=void 0),m.setupLightsView(j),re===!0&&ue.setGlobalState(v.clippingPlanes,j),Xh(b,H,j),C.updateMultisampleRenderTarget(de),C.updateRenderTargetMipmap(de),dt.has("WEBGL_multisampled_render_to_texture")===!1){let st=!1;for(let Oe=0,Lt=F.length;Oe<Lt;Oe++){let Yt=F[Oe],Jt=Yt.object,oi=Yt.geometry,Vt=Yt.material,ke=Yt.group;if(Vt.side===Cr&&Jt.layers.test(j.layers)){let ls=Vt.side;Vt.side=fi,Vt.needsUpdate=!0,MT(Jt,H,j,oi,Vt,ke),Vt.side=ls,Vt.needsUpdate=!0,st=!0}}st===!0&&(C.updateMultisampleRenderTarget(de),C.updateRenderTargetMipmap(de))}v.setRenderTarget(Pe),v.setClearColor(W,z),Je!==void 0&&(j.viewport=Je),v.toneMapping=Ne}function Xh(b,F,H){let j=F.isScene===!0?F.overrideMaterial:null;for(let k=0,de=b.length;k<de;k++){let Ee=b[k],Pe=Ee.object,Ne=Ee.geometry,Je=j===null?Ee.material:j,st=Ee.group;Pe.layers.test(H.layers)&&MT(Pe,F,H,Ne,Je,st)}}function MT(b,F,H,j,k,de){b.onBeforeRender(v,F,H,j,k,de),b.modelViewMatrix.multiplyMatrices(H.matrixWorldInverse,b.matrixWorld),b.normalMatrix.getNormalMatrix(b.modelViewMatrix),k.onBeforeRender(v,F,H,j,b,de),k.transparent===!0&&k.side===Cr&&k.forceSinglePass===!1?(k.side=fi,k.needsUpdate=!0,v.renderBufferDirect(H,F,j,k,b,de),k.side=Yr,k.needsUpdate=!0,v.renderBufferDirect(H,F,j,k,b,de),k.side=Cr):v.renderBufferDirect(H,F,j,k,b,de),b.onAfterRender(v,F,H,j,k,de)}function qh(b,F,H){F.isScene!==!0&&(F=It);let j=Fe.get(b),k=m.state.lights,de=m.state.shadowsArray,Ee=k.state.version,Pe=De.getParameters(b,k.state,de,F,H),Ne=De.getProgramCacheKey(Pe),Je=j.programs;j.environment=b.isMeshStandardMaterial?F.environment:null,j.fog=F.fog,j.envMap=(b.isMeshStandardMaterial?B:E).get(b.envMap||j.environment),j.envMapRotation=j.environment!==null&&b.envMap===null?F.environmentRotation:b.envMapRotation,Je===void 0&&(b.addEventListener("dispose",He),Je=new Map,j.programs=Je);let st=Je.get(Ne);if(st!==void 0){if(j.currentProgram===st&&j.lightsStateVersion===Ee)return bT(b,Pe),st}else Pe.uniforms=De.getUniforms(b),b.onBeforeCompile(Pe,v),st=De.acquireProgram(Pe,Ne),Je.set(Ne,st),j.uniforms=Pe.uniforms;let Oe=j.uniforms;return(!b.isShaderMaterial&&!b.isRawShaderMaterial||b.clipping===!0)&&(Oe.clippingPlanes=ue.uniform),bT(b,Pe),j.needsLights=X2(b),j.lightsStateVersion=Ee,j.needsLights&&(Oe.ambientLightColor.value=k.state.ambient,Oe.lightProbe.value=k.state.probe,Oe.directionalLights.value=k.state.directional,Oe.directionalLightShadows.value=k.state.directionalShadow,Oe.spotLights.value=k.state.spot,Oe.spotLightShadows.value=k.state.spotShadow,Oe.rectAreaLights.value=k.state.rectArea,Oe.ltc_1.value=k.state.rectAreaLTC1,Oe.ltc_2.value=k.state.rectAreaLTC2,Oe.pointLights.value=k.state.point,Oe.pointLightShadows.value=k.state.pointShadow,Oe.hemisphereLights.value=k.state.hemi,Oe.directionalShadowMap.value=k.state.directionalShadowMap,Oe.directionalShadowMatrix.value=k.state.directionalShadowMatrix,Oe.spotShadowMap.value=k.state.spotShadowMap,Oe.spotLightMatrix.value=k.state.spotLightMatrix,Oe.spotLightMap.value=k.state.spotLightMap,Oe.pointShadowMap.value=k.state.pointShadowMap,Oe.pointShadowMatrix.value=k.state.pointShadowMatrix),j.currentProgram=st,j.uniformsList=null,st}function wT(b){if(b.uniformsList===null){let F=b.currentProgram.getUniforms();b.uniformsList=Cc.seqWithValue(F.seq,b.uniforms)}return b.uniformsList}function bT(b,F){let H=Fe.get(b);H.outputColorSpace=F.outputColorSpace,H.batching=F.batching,H.batchingColor=F.batchingColor,H.instancing=F.instancing,H.instancingColor=F.instancingColor,H.instancingMorph=F.instancingMorph,H.skinning=F.skinning,H.morphTargets=F.morphTargets,H.morphNormals=F.morphNormals,H.morphColors=F.morphColors,H.morphTargetsCount=F.morphTargetsCount,H.numClippingPlanes=F.numClippingPlanes,H.numIntersection=F.numClipIntersection,H.vertexAlphas=F.vertexAlphas,H.vertexTangents=F.vertexTangents,H.toneMapping=F.toneMapping}function W2(b,F,H,j,k){F.isScene!==!0&&(F=It),C.resetTextureUnits();let de=F.fog,Ee=j.isMeshStandardMaterial?F.environment:null,Pe=I===null?v.outputColorSpace:I.isXRRenderTarget===!0?I.texture.colorSpace:Hc,Ne=(j.isMeshStandardMaterial?B:E).get(j.envMap||Ee),Je=j.vertexColors===!0&&!!H.attributes.color&&H.attributes.color.itemSize===4,st=!!H.attributes.tangent&&(!!j.normalMap||j.anisotropy>0),Oe=!!H.morphAttributes.position,Lt=!!H.morphAttributes.normal,Yt=!!H.morphAttributes.color,Jt=No;j.toneMapped&&(I===null||I.isXRRenderTarget===!0)&&(Jt=v.toneMapping);let oi=H.morphAttributes.position||H.morphAttributes.normal||H.morphAttributes.color,Vt=oi!==void 0?oi.length:0,ke=Fe.get(j),ls=m.state.lights;if(re===!0&&(fe===!0||b!==_)){let Gi=b===_&&j.id===w;ue.setState(j,b,Gi)}let zt=!1;j.version===ke.__version?(ke.needsLights&&ke.lightsStateVersion!==ls.state.version||ke.outputColorSpace!==Pe||k.isBatchedMesh&&ke.batching===!1||!k.isBatchedMesh&&ke.batching===!0||k.isBatchedMesh&&ke.batchingColor===!0&&k.colorTexture===null||k.isBatchedMesh&&ke.batchingColor===!1&&k.colorTexture!==null||k.isInstancedMesh&&ke.instancing===!1||!k.isInstancedMesh&&ke.instancing===!0||k.isSkinnedMesh&&ke.skinning===!1||!k.isSkinnedMesh&&ke.skinning===!0||k.isInstancedMesh&&ke.instancingColor===!0&&k.instanceColor===null||k.isInstancedMesh&&ke.instancingColor===!1&&k.instanceColor!==null||k.isInstancedMesh&&ke.instancingMorph===!0&&k.morphTexture===null||k.isInstancedMesh&&ke.instancingMorph===!1&&k.morphTexture!==null||ke.envMap!==Ne||j.fog===!0&&ke.fog!==de||ke.numClippingPlanes!==void 0&&(ke.numClippingPlanes!==ue.numPlanes||ke.numIntersection!==ue.numIntersection)||ke.vertexAlphas!==Je||ke.vertexTangents!==st||ke.morphTargets!==Oe||ke.morphNormals!==Lt||ke.morphColors!==Yt||ke.toneMapping!==Jt||ke.morphTargetsCount!==Vt)&&(zt=!0):(zt=!0,ke.__version=j.version);let hr=ke.currentProgram;zt===!0&&(hr=qh(j,F,k));let ul=!1,xi=!1,Du=!1,Qt=hr.getUniforms(),Fr=ke.uniforms;if(Ce.useProgram(hr.program)&&(ul=!0,xi=!0,Du=!0),j.id!==w&&(w=j.id,xi=!0),ul||_!==b){Ce.buffers.depth.getReversed()?(oe.copy(b.projectionMatrix),h8(oe),f8(oe),Qt.setValue(O,"projectionMatrix",oe)):Qt.setValue(O,"projectionMatrix",b.projectionMatrix),Qt.setValue(O,"viewMatrix",b.matrixWorldInverse);let to=Qt.map.cameraPosition;to!==void 0&&to.setValue(O,Ue.setFromMatrixPosition(b.matrixWorld)),Ke.logarithmicDepthBuffer&&Qt.setValue(O,"logDepthBufFC",2/(Math.log(b.far+1)/Math.LN2)),(j.isMeshPhongMaterial||j.isMeshToonMaterial||j.isMeshLambertMaterial||j.isMeshBasicMaterial||j.isMeshStandardMaterial||j.isShaderMaterial)&&Qt.setValue(O,"isOrthographic",b.isOrthographicCamera===!0),_!==b&&(_=b,xi=!0,Du=!0)}if(k.isSkinnedMesh){Qt.setOptional(O,k,"bindMatrix"),Qt.setOptional(O,k,"bindMatrixInverse");let Gi=k.skeleton;Gi&&(Gi.boneTexture===null&&Gi.computeBoneTexture(),Qt.setValue(O,"boneTexture",Gi.boneTexture,C))}k.isBatchedMesh&&(Qt.setOptional(O,k,"batchingTexture"),Qt.setValue(O,"batchingTexture",k._matricesTexture,C),Qt.setOptional(O,k,"batchingIdTexture"),Qt.setValue(O,"batchingIdTexture",k._indirectTexture,C),Qt.setOptional(O,k,"batchingColorTexture"),k._colorsTexture!==null&&Qt.setValue(O,"batchingColorTexture",k._colorsTexture,C));let Ru=H.morphAttributes;if((Ru.position!==void 0||Ru.normal!==void 0||Ru.color!==void 0)&&$e.update(k,H,hr),(xi||ke.receiveShadow!==k.receiveShadow)&&(ke.receiveShadow=k.receiveShadow,Qt.setValue(O,"receiveShadow",k.receiveShadow)),j.isMeshGouraudMaterial&&j.envMap!==null&&(Fr.envMap.value=Ne,Fr.flipEnvMap.value=Ne.isCubeTexture&&Ne.isRenderTargetTexture===!1?-1:1),j.isMeshStandardMaterial&&j.envMap===null&&F.environment!==null&&(Fr.envMapIntensity.value=F.environmentIntensity),xi&&(Qt.setValue(O,"toneMappingExposure",v.toneMappingExposure),ke.needsLights&&$2(Fr,Du),de&&j.fog===!0&&ge.refreshFogUniforms(Fr,de),ge.refreshMaterialUniforms(Fr,j,V,G,m.state.transmissionRenderTarget[b.id]),Cc.upload(O,wT(ke),Fr,C)),j.isShaderMaterial&&j.uniformsNeedUpdate===!0&&(Cc.upload(O,wT(ke),Fr,C),j.uniformsNeedUpdate=!1),j.isSpriteMaterial&&Qt.setValue(O,"center",k.center),Qt.setValue(O,"modelViewMatrix",k.modelViewMatrix),Qt.setValue(O,"normalMatrix",k.normalMatrix),Qt.setValue(O,"modelMatrix",k.matrixWorld),j.isShaderMaterial||j.isRawShaderMaterial){let Gi=j.uniformsGroups;for(let to=0,no=Gi.length;to<no;to++){let ST=Gi[to];R.update(ST,hr),R.bind(ST,hr)}}return hr}function $2(b,F){b.ambientLightColor.needsUpdate=F,b.lightProbe.needsUpdate=F,b.directionalLights.needsUpdate=F,b.directionalLightShadows.needsUpdate=F,b.pointLights.needsUpdate=F,b.pointLightShadows.needsUpdate=F,b.spotLights.needsUpdate=F,b.spotLightShadows.needsUpdate=F,b.rectAreaLights.needsUpdate=F,b.hemisphereLights.needsUpdate=F}function X2(b){return b.isMeshLambertMaterial||b.isMeshToonMaterial||b.isMeshPhongMaterial||b.isMeshStandardMaterial||b.isShadowMaterial||b.isShaderMaterial&&b.lights===!0}this.getActiveCubeFace=function(){return T},this.getActiveMipmapLevel=function(){return A},this.getRenderTarget=function(){return I},this.setRenderTargetTextures=function(b,F,H){Fe.get(b.texture).__webglTexture=F,Fe.get(b.depthTexture).__webglTexture=H;let j=Fe.get(b);j.__hasExternalTextures=!0,j.__autoAllocateDepthBuffer=H===void 0,j.__autoAllocateDepthBuffer||dt.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),j.__useRenderToTexture=!1)},this.setRenderTargetFramebuffer=function(b,F){let H=Fe.get(b);H.__webglFramebuffer=F,H.__useDefaultFramebuffer=F===void 0},this.setRenderTarget=function(b,F=0,H=0){I=b,T=F,A=H;let j=!0,k=null,de=!1,Ee=!1;if(b){let Ne=Fe.get(b);if(Ne.__useDefaultFramebuffer!==void 0)Ce.bindFramebuffer(O.FRAMEBUFFER,null),j=!1;else if(Ne.__webglFramebuffer===void 0)C.setupRenderTarget(b);else if(Ne.__hasExternalTextures)C.rebindTextures(b,Fe.get(b.texture).__webglTexture,Fe.get(b.depthTexture).__webglTexture);else if(b.depthBuffer){let Oe=b.depthTexture;if(Ne.__boundDepthTexture!==Oe){if(Oe!==null&&Fe.has(Oe)&&(b.width!==Oe.image.width||b.height!==Oe.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");C.setupDepthRenderbuffer(b)}}let Je=b.texture;(Je.isData3DTexture||Je.isDataArrayTexture||Je.isCompressedArrayTexture)&&(Ee=!0);let st=Fe.get(b).__webglFramebuffer;b.isWebGLCubeRenderTarget?(Array.isArray(st[F])?k=st[F][H]:k=st[F],de=!0):b.samples>0&&C.useMultisampledRTT(b)===!1?k=Fe.get(b).__webglMultisampledFramebuffer:Array.isArray(st)?k=st[H]:k=st,D.copy(b.viewport),U.copy(b.scissor),L=b.scissorTest}else D.copy(ce).multiplyScalar(V).floor(),U.copy(Se).multiplyScalar(V).floor(),L=Ie;if(Ce.bindFramebuffer(O.FRAMEBUFFER,k)&&j&&Ce.drawBuffers(b,k),Ce.viewport(D),Ce.scissor(U),Ce.setScissorTest(L),de){let Ne=Fe.get(b.texture);O.framebufferTexture2D(O.FRAMEBUFFER,O.COLOR_ATTACHMENT0,O.TEXTURE_CUBE_MAP_POSITIVE_X+F,Ne.__webglTexture,H)}else if(Ee){let Ne=Fe.get(b.texture),Je=F||0;O.framebufferTextureLayer(O.FRAMEBUFFER,O.COLOR_ATTACHMENT0,Ne.__webglTexture,H||0,Je)}w=-1},this.readRenderTargetPixels=function(b,F,H,j,k,de,Ee){if(!(b&&b.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let Pe=Fe.get(b).__webglFramebuffer;if(b.isWebGLCubeRenderTarget&&Ee!==void 0&&(Pe=Pe[Ee]),Pe){Ce.bindFramebuffer(O.FRAMEBUFFER,Pe);try{let Ne=b.texture,Je=Ne.format,st=Ne.type;if(!Ke.textureFormatReadable(Je)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!Ke.textureTypeReadable(st)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}F>=0&&F<=b.width-j&&H>=0&&H<=b.height-k&&O.readPixels(F,H,j,k,K.convert(Je),K.convert(st),de)}finally{let Ne=I!==null?Fe.get(I).__webglFramebuffer:null;Ce.bindFramebuffer(O.FRAMEBUFFER,Ne)}}},this.readRenderTargetPixelsAsync=function(b,F,H,j,k,de,Ee){return ji(this,null,function*(){if(!(b&&b.isWebGLRenderTarget))throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let Pe=Fe.get(b).__webglFramebuffer;if(b.isWebGLCubeRenderTarget&&Ee!==void 0&&(Pe=Pe[Ee]),Pe){let Ne=b.texture,Je=Ne.format,st=Ne.type;if(!Ke.textureFormatReadable(Je))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!Ke.textureTypeReadable(st))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");if(F>=0&&F<=b.width-j&&H>=0&&H<=b.height-k){Ce.bindFramebuffer(O.FRAMEBUFFER,Pe);let Oe=O.createBuffer();O.bindBuffer(O.PIXEL_PACK_BUFFER,Oe),O.bufferData(O.PIXEL_PACK_BUFFER,de.byteLength,O.STREAM_READ),O.readPixels(F,H,j,k,K.convert(Je),K.convert(st),0);let Lt=I!==null?Fe.get(I).__webglFramebuffer:null;Ce.bindFramebuffer(O.FRAMEBUFFER,Lt);let Yt=O.fenceSync(O.SYNC_GPU_COMMANDS_COMPLETE,0);return O.flush(),yield d8(O,Yt,4),O.bindBuffer(O.PIXEL_PACK_BUFFER,Oe),O.getBufferSubData(O.PIXEL_PACK_BUFFER,0,de),O.deleteBuffer(Oe),O.deleteSync(Yt),de}else throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")}})},this.copyFramebufferToTexture=function(b,F=null,H=0){b.isTexture!==!0&&(Hd("WebGLRenderer: copyFramebufferToTexture function signature has changed."),F=arguments[0]||null,b=arguments[1]);let j=Math.pow(2,-H),k=Math.floor(b.image.width*j),de=Math.floor(b.image.height*j),Ee=F!==null?F.x:0,Pe=F!==null?F.y:0;C.setTexture2D(b,0),O.copyTexSubImage2D(O.TEXTURE_2D,H,0,0,Ee,Pe,k,de),Ce.unbindTexture()},this.copyTextureToTexture=function(b,F,H=null,j=null,k=0){b.isTexture!==!0&&(Hd("WebGLRenderer: copyTextureToTexture function signature has changed."),j=arguments[0]||null,b=arguments[1],F=arguments[2],k=arguments[3]||0,H=null);let de,Ee,Pe,Ne,Je,st,Oe,Lt,Yt,Jt=b.isCompressedTexture?b.mipmaps[k]:b.image;H!==null?(de=H.max.x-H.min.x,Ee=H.max.y-H.min.y,Pe=H.isBox3?H.max.z-H.min.z:1,Ne=H.min.x,Je=H.min.y,st=H.isBox3?H.min.z:0):(de=Jt.width,Ee=Jt.height,Pe=Jt.depth||1,Ne=0,Je=0,st=0),j!==null?(Oe=j.x,Lt=j.y,Yt=j.z):(Oe=0,Lt=0,Yt=0);let oi=K.convert(F.format),Vt=K.convert(F.type),ke;F.isData3DTexture?(C.setTexture3D(F,0),ke=O.TEXTURE_3D):F.isDataArrayTexture||F.isCompressedArrayTexture?(C.setTexture2DArray(F,0),ke=O.TEXTURE_2D_ARRAY):(C.setTexture2D(F,0),ke=O.TEXTURE_2D),O.pixelStorei(O.UNPACK_FLIP_Y_WEBGL,F.flipY),O.pixelStorei(O.UNPACK_PREMULTIPLY_ALPHA_WEBGL,F.premultiplyAlpha),O.pixelStorei(O.UNPACK_ALIGNMENT,F.unpackAlignment);let ls=O.getParameter(O.UNPACK_ROW_LENGTH),zt=O.getParameter(O.UNPACK_IMAGE_HEIGHT),hr=O.getParameter(O.UNPACK_SKIP_PIXELS),ul=O.getParameter(O.UNPACK_SKIP_ROWS),xi=O.getParameter(O.UNPACK_SKIP_IMAGES);O.pixelStorei(O.UNPACK_ROW_LENGTH,Jt.width),O.pixelStorei(O.UNPACK_IMAGE_HEIGHT,Jt.height),O.pixelStorei(O.UNPACK_SKIP_PIXELS,Ne),O.pixelStorei(O.UNPACK_SKIP_ROWS,Je),O.pixelStorei(O.UNPACK_SKIP_IMAGES,st);let Du=b.isDataArrayTexture||b.isData3DTexture,Qt=F.isDataArrayTexture||F.isData3DTexture;if(b.isRenderTargetTexture||b.isDepthTexture){let Fr=Fe.get(b),Ru=Fe.get(F),Gi=Fe.get(Fr.__renderTarget),to=Fe.get(Ru.__renderTarget);Ce.bindFramebuffer(O.READ_FRAMEBUFFER,Gi.__webglFramebuffer),Ce.bindFramebuffer(O.DRAW_FRAMEBUFFER,to.__webglFramebuffer);for(let no=0;no<Pe;no++)Du&&O.framebufferTextureLayer(O.READ_FRAMEBUFFER,O.COLOR_ATTACHMENT0,Fe.get(b).__webglTexture,k,st+no),b.isDepthTexture?(Qt&&O.framebufferTextureLayer(O.DRAW_FRAMEBUFFER,O.COLOR_ATTACHMENT0,Fe.get(F).__webglTexture,k,Yt+no),O.blitFramebuffer(Ne,Je,de,Ee,Oe,Lt,de,Ee,O.DEPTH_BUFFER_BIT,O.NEAREST)):Qt?O.copyTexSubImage3D(ke,k,Oe,Lt,Yt+no,Ne,Je,de,Ee):O.copyTexSubImage2D(ke,k,Oe,Lt,Yt+no,Ne,Je,de,Ee);Ce.bindFramebuffer(O.READ_FRAMEBUFFER,null),Ce.bindFramebuffer(O.DRAW_FRAMEBUFFER,null)}else Qt?b.isDataTexture||b.isData3DTexture?O.texSubImage3D(ke,k,Oe,Lt,Yt,de,Ee,Pe,oi,Vt,Jt.data):F.isCompressedArrayTexture?O.compressedTexSubImage3D(ke,k,Oe,Lt,Yt,de,Ee,Pe,oi,Jt.data):O.texSubImage3D(ke,k,Oe,Lt,Yt,de,Ee,Pe,oi,Vt,Jt):b.isDataTexture?O.texSubImage2D(O.TEXTURE_2D,k,Oe,Lt,de,Ee,oi,Vt,Jt.data):b.isCompressedTexture?O.compressedTexSubImage2D(O.TEXTURE_2D,k,Oe,Lt,Jt.width,Jt.height,oi,Jt.data):O.texSubImage2D(O.TEXTURE_2D,k,Oe,Lt,de,Ee,oi,Vt,Jt);O.pixelStorei(O.UNPACK_ROW_LENGTH,ls),O.pixelStorei(O.UNPACK_IMAGE_HEIGHT,zt),O.pixelStorei(O.UNPACK_SKIP_PIXELS,hr),O.pixelStorei(O.UNPACK_SKIP_ROWS,ul),O.pixelStorei(O.UNPACK_SKIP_IMAGES,xi),k===0&&F.generateMipmaps&&O.generateMipmap(ke),Ce.unbindTexture()},this.copyTextureToTexture3D=function(b,F,H=null,j=null,k=0){return b.isTexture!==!0&&(Hd("WebGLRenderer: copyTextureToTexture3D function signature has changed."),H=arguments[0]||null,j=arguments[1]||null,b=arguments[2],F=arguments[3],k=arguments[4]||0),Hd('WebGLRenderer: copyTextureToTexture3D function has been deprecated. Use "copyTextureToTexture" instead.'),this.copyTextureToTexture(b,F,H,j,k)},this.initRenderTarget=function(b){Fe.get(b).__webglFramebuffer===void 0&&C.setupRenderTarget(b)},this.initTexture=function(b){b.isCubeTexture?C.setTextureCube(b,0):b.isData3DTexture?C.setTexture3D(b,0):b.isDataArrayTexture||b.isCompressedArrayTexture?C.setTexture2DArray(b,0):C.setTexture2D(b,0),Ce.unbindTexture()},this.resetState=function(){T=0,A=0,I=null,Ce.reset(),ve.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return Ps}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;let t=this.getContext();t.drawingBufferColorspace=Pt._getDrawingBufferColorSpace(e),t.unpackColorSpace=Pt._getUnpackColorSpace()}};var bg=class extends Un{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new $a,this.environmentIntensity=1,this.environmentRotation=new $a,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){let t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.object.backgroundIntensity=this.backgroundIntensity),t.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(t.object.environmentIntensity=this.environmentIntensity),t.object.environmentRotation=this.environmentRotation.toArray(),t}},Qd=class{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=EM,this.updateRanges=[],this.version=0,this.uuid=Dr()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,i){e*=this.stride,i*=t.stride;for(let r=0,s=this.stride;r<s;r++)this.array[e+r]=t.array[i+r];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Dr()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);let t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),i=new this.constructor(t,this.stride);return i.setUsage(this.usage),i}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Dr()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}},Jn=new N,eh=class n{constructor(e,t,i,r=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=i,this.normalized=r}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,i=this.data.count;t<i;t++)Jn.fromBufferAttribute(this,t),Jn.applyMatrix4(e),this.setXYZ(t,Jn.x,Jn.y,Jn.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)Jn.fromBufferAttribute(this,t),Jn.applyNormalMatrix(e),this.setXYZ(t,Jn.x,Jn.y,Jn.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)Jn.fromBufferAttribute(this,t),Jn.transformDirection(e),this.setXYZ(t,Jn.x,Jn.y,Jn.z);return this}getComponent(e,t){let i=this.array[e*this.data.stride+this.offset+t];return this.normalized&&(i=Ar(i,this.array)),i}setComponent(e,t,i){return this.normalized&&(i=jt(i,this.array)),this.data.array[e*this.data.stride+this.offset+t]=i,this}setX(e,t){return this.normalized&&(t=jt(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=jt(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=jt(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=jt(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=Ar(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=Ar(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=Ar(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=Ar(t,this.array)),t}setXY(e,t,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=jt(t,this.array),i=jt(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this}setXYZ(e,t,i,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=jt(t,this.array),i=jt(i,this.array),r=jt(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=r,this}setXYZW(e,t,i,r,s){return e=e*this.data.stride+this.offset,this.normalized&&(t=jt(t,this.array),i=jt(i,this.array),r=jt(r,this.array),s=jt(s,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=r,this.data.array[e+3]=s,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");let t=[];for(let i=0;i<this.count;i++){let r=i*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[r+s])}return new wn(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new n(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");let t=[];for(let i=0;i<this.count;i++){let r=i*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[r+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}};var gN=new N,yN=new kt,vN=new kt,a9=new N,_N=new lt,eg=new N,NE=new ki,xN=new lt,OE=new Oo,Sg=class extends $n{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=vP,this.bindMatrix=new lt,this.bindMatrixInverse=new lt,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){let e=this.geometry;this.boundingBox===null&&(this.boundingBox=new rr),this.boundingBox.makeEmpty();let t=e.getAttribute("position");for(let i=0;i<t.count;i++)this.getVertexPosition(i,eg),this.boundingBox.expandByPoint(eg)}computeBoundingSphere(){let e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new ki),this.boundingSphere.makeEmpty();let t=e.getAttribute("position");for(let i=0;i<t.count;i++)this.getVertexPosition(i,eg),this.boundingSphere.expandByPoint(eg)}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,t){let i=this.material,r=this.matrixWorld;i!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),NE.copy(this.boundingSphere),NE.applyMatrix4(r),e.ray.intersectsSphere(NE)!==!1&&(xN.copy(r).invert(),OE.copy(e.ray).applyMatrix4(xN),!(this.boundingBox!==null&&OE.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(e,t,OE)))}getVertexPosition(e,t){return super.getVertexPosition(e,t),this.applyBoneTransform(e,t),t}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){let e=new kt,t=this.geometry.attributes.skinWeight;for(let i=0,r=t.count;i<r;i++){e.fromBufferAttribute(t,i);let s=1/e.manhattanLength();s!==1/0?e.multiplyScalar(s):e.set(1,0,0,0),t.setXYZW(i,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode===vP?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===FW?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,t){let i=this.skeleton,r=this.geometry;yN.fromBufferAttribute(r.attributes.skinIndex,e),vN.fromBufferAttribute(r.attributes.skinWeight,e),gN.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let s=0;s<4;s++){let o=vN.getComponent(s);if(o!==0){let a=yN.getComponent(s);_N.multiplyMatrices(i.bones[a].matrixWorld,i.boneInverses[a]),t.addScaledVector(a9.copy(gN).applyMatrix4(_N),o)}}return t.applyMatrix4(this.bindMatrixInverse)}},th=class extends Un{constructor(){super(),this.isBone=!0,this.type="Bone"}},Tg=class extends ar{constructor(e=null,t=1,i=1,r,s,o,a,l,c=ei,u=ei,d,h){super(null,o,a,l,c,u,r,s,d,h),this.isDataTexture=!0,this.image={data:e,width:t,height:i},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}},EN=new lt,l9=new lt,Cg=class n{constructor(e=[],t=[]){this.uuid=Dr(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){let e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let i=0,r=this.bones.length;i<r;i++)this.boneInverses.push(new lt)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){let i=new lt;this.bones[e]&&i.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(i)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){let i=this.bones[e];i&&i.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){let i=this.bones[e];i&&(i.parent&&i.parent.isBone?(i.matrix.copy(i.parent.matrixWorld).invert(),i.matrix.multiply(i.matrixWorld)):i.matrix.copy(i.matrixWorld),i.matrix.decompose(i.position,i.quaternion,i.scale))}}update(){let e=this.bones,t=this.boneInverses,i=this.boneMatrices,r=this.boneTexture;for(let s=0,o=e.length;s<o;s++){let a=e[s]?e[s].matrixWorld:l9;EN.multiplyMatrices(a,t[s]),EN.toArray(i,s*16)}r!==null&&(r.needsUpdate=!0)}clone(){return new n(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);let t=new Float32Array(e*e*4);t.set(this.boneMatrices);let i=new Tg(t,e,e,nr,Ir);return i.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=i,this}getBoneByName(e){for(let t=0,i=this.bones.length;t<i;t++){let r=this.bones[t];if(r.name===e)return r}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let i=0,r=e.bones.length;i<r;i++){let s=e.bones[i],o=t[s];o===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",s),o=new th),this.bones.push(o),this.boneInverses.push(new lt().fromArray(e.boneInverses[i]))}return this.init(),this}toJSON(){let e={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;let t=this.bones,i=this.boneInverses;for(let r=0,s=t.length;r<s;r++){let o=t[r];e.bones.push(o.uuid);let a=i[r];e.boneInverses.push(a.toArray())}return e}},kc=class extends wn{constructor(e,t,i,r=1){super(e,t,i),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){let e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}},Ec=new lt,MN=new lt,tg=[],wN=new rr,c9=new lt,Ud=new $n,Bd=new ki,Ag=class extends $n{constructor(e,t,i){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new kc(new Float32Array(i*16),16),this.instanceColor=null,this.morphTexture=null,this.count=i,this.boundingBox=null,this.boundingSphere=null;for(let r=0;r<i;r++)this.setMatrixAt(r,c9)}computeBoundingBox(){let e=this.geometry,t=this.count;this.boundingBox===null&&(this.boundingBox=new rr),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let i=0;i<t;i++)this.getMatrixAt(i,Ec),wN.copy(e.boundingBox).applyMatrix4(Ec),this.boundingBox.union(wN)}computeBoundingSphere(){let e=this.geometry,t=this.count;this.boundingSphere===null&&(this.boundingSphere=new ki),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let i=0;i<t;i++)this.getMatrixAt(i,Ec),Bd.copy(e.boundingSphere).applyMatrix4(Ec),this.boundingSphere.union(Bd)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),e.morphTexture!==null&&(this.morphTexture=e.morphTexture.clone()),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}getMorphAt(e,t){let i=t.morphTargetInfluences,r=this.morphTexture.source.data.data,s=i.length+1,o=e*s+1;for(let a=0;a<i.length;a++)i[a]=r[o+a]}raycast(e,t){let i=this.matrixWorld,r=this.count;if(Ud.geometry=this.geometry,Ud.material=this.material,Ud.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),Bd.copy(this.boundingSphere),Bd.applyMatrix4(i),e.ray.intersectsSphere(Bd)!==!1))for(let s=0;s<r;s++){this.getMatrixAt(s,Ec),MN.multiplyMatrices(i,Ec),Ud.matrixWorld=MN,Ud.raycast(e,tg);for(let o=0,a=tg.length;o<a;o++){let l=tg[o];l.instanceId=s,l.object=this,t.push(l)}tg.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new kc(new Float32Array(this.instanceMatrix.count*3).fill(1),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}setMorphAt(e,t){let i=t.morphTargetInfluences,r=i.length+1;this.morphTexture===null&&(this.morphTexture=new Tg(new Float32Array(r*this.count),r,this.count,ew,Ir));let s=this.morphTexture.source.data.data,o=0;for(let c=0;c<i.length;c++)o+=i[c];let a=this.geometry.morphTargetsRelative?1:1-o,l=r*e;s[l]=a,s.set(i,l+1)}updateMorphTargets(){}dispose(){return this.dispatchEvent({type:"dispose"}),this.morphTexture!==null&&(this.morphTexture.dispose(),this.morphTexture=null),this}};var nh=class extends Ui{static get type(){return"LineBasicMaterial"}constructor(e){super(),this.isLineBasicMaterial=!0,this.color=new qe(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}},Ig=new N,Dg=new N,bN=new lt,Vd=new Oo,ng=new ki,LE=new N,SN=new N,Uc=class extends Un{constructor(e=new sr,t=new nh){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){let e=this.geometry;if(e.index===null){let t=e.attributes.position,i=[0];for(let r=1,s=t.count;r<s;r++)Ig.fromBufferAttribute(t,r-1),Dg.fromBufferAttribute(t,r),i[r]=i[r-1],i[r]+=Ig.distanceTo(Dg);e.setAttribute("lineDistance",new ir(i,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){let i=this.geometry,r=this.matrixWorld,s=e.params.Line.threshold,o=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),ng.copy(i.boundingSphere),ng.applyMatrix4(r),ng.radius+=s,e.ray.intersectsSphere(ng)===!1)return;bN.copy(r).invert(),Vd.copy(e.ray).applyMatrix4(bN);let a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,c=this.isLineSegments?2:1,u=i.index,h=i.attributes.position;if(u!==null){let f=Math.max(0,o.start),p=Math.min(u.count,o.start+o.count);for(let y=f,g=p-1;y<g;y+=c){let m=u.getX(y),x=u.getX(y+1),M=ig(this,e,Vd,l,m,x);M&&t.push(M)}if(this.isLineLoop){let y=u.getX(p-1),g=u.getX(f),m=ig(this,e,Vd,l,y,g);m&&t.push(m)}}else{let f=Math.max(0,o.start),p=Math.min(h.count,o.start+o.count);for(let y=f,g=p-1;y<g;y+=c){let m=ig(this,e,Vd,l,y,y+1);m&&t.push(m)}if(this.isLineLoop){let y=ig(this,e,Vd,l,p-1,f);y&&t.push(y)}}}updateMorphTargets(){let t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){let r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){let a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}};function ig(n,e,t,i,r,s){let o=n.geometry.attributes.position;if(Ig.fromBufferAttribute(o,r),Dg.fromBufferAttribute(o,s),t.distanceSqToSegment(Ig,Dg,LE,SN)>i)return;LE.applyMatrix4(n.matrixWorld);let l=e.ray.origin.distanceTo(LE);if(!(l<e.near||l>e.far))return{distance:l,point:SN.clone().applyMatrix4(n.matrixWorld),index:r,face:null,faceIndex:null,barycoord:null,object:n}}var TN=new N,CN=new N,Rg=class extends Uc{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){let e=this.geometry;if(e.index===null){let t=e.attributes.position,i=[];for(let r=0,s=t.count;r<s;r+=2)TN.fromBufferAttribute(t,r),CN.fromBufferAttribute(t,r+1),i[r]=r===0?0:i[r-1],i[r+1]=i[r]+TN.distanceTo(CN);e.setAttribute("lineDistance",new ir(i,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}},Pg=class extends Uc{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}},ih=class extends Ui{static get type(){return"PointsMaterial"}constructor(e){super(),this.isPointsMaterial=!0,this.color=new qe(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}},AN=new lt,UM=new Oo,rg=new ki,sg=new N,Ng=class extends Un{constructor(e=new sr,t=new ih){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,t){let i=this.geometry,r=this.matrixWorld,s=e.params.Points.threshold,o=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),rg.copy(i.boundingSphere),rg.applyMatrix4(r),rg.radius+=s,e.ray.intersectsSphere(rg)===!1)return;AN.copy(r).invert(),UM.copy(e.ray).applyMatrix4(AN);let a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,c=i.index,d=i.attributes.position;if(c!==null){let h=Math.max(0,o.start),f=Math.min(c.count,o.start+o.count);for(let p=h,y=f;p<y;p++){let g=c.getX(p);sg.fromBufferAttribute(d,g),IN(sg,g,l,r,e,t,this)}}else{let h=Math.max(0,o.start),f=Math.min(d.count,o.start+o.count);for(let p=h,y=f;p<y;p++)sg.fromBufferAttribute(d,p),IN(sg,p,l,r,e,t,this)}}updateMorphTargets(){let t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){let r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){let a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}};function IN(n,e,t,i,r,s,o){let a=UM.distanceSqToPoint(n);if(a<t){let l=new N;UM.closestPointToPoint(n,l),l.applyMatrix4(i);let c=r.ray.origin.distanceTo(l);if(c<r.near||c>r.far)return;s.push({distance:c,distanceToRay:Math.sqrt(a),point:l,index:e,face:null,faceIndex:null,barycoord:null,object:o})}}var Bc=class extends Ui{static get type(){return"MeshStandardMaterial"}constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.color=new qe(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new qe(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=$N,this.normalScale=new Ye(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new $a,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}},Bi=class extends Bc{static get type(){return"MeshPhysicalMaterial"}constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Ye(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return kn(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new qe(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new qe(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new qe(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get dispersion(){return this._dispersion}set dispersion(e){this._dispersion>0!=e>0&&this.version++,this._dispersion=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.dispersion=e.dispersion,this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}};function og(n,e,t){return!n||!t&&n.constructor===e?n:typeof e.BYTES_PER_ELEMENT=="number"?new e(n):Array.prototype.slice.call(n)}function u9(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function d9(n){function e(r,s){return n[r]-n[s]}let t=n.length,i=new Array(t);for(let r=0;r!==t;++r)i[r]=r;return i.sort(e),i}function DN(n,e,t){let i=n.length,r=new n.constructor(i);for(let s=0,o=0;o!==i;++s){let a=t[s]*e;for(let l=0;l!==e;++l)r[o++]=n[a+l]}return r}function iO(n,e,t,i){let r=1,s=n[0];for(;s!==void 0&&s[i]===void 0;)s=n[r++];if(s===void 0)return;let o=s[i];if(o!==void 0)if(Array.isArray(o))do o=s[i],o!==void 0&&(e.push(s.time),t.push.apply(t,o)),s=n[r++];while(s!==void 0);else if(o.toArray!==void 0)do o=s[i],o!==void 0&&(e.push(s.time),o.toArray(t,t.length)),s=n[r++];while(s!==void 0);else do o=s[i],o!==void 0&&(e.push(s.time),t.push(o)),s=n[r++];while(s!==void 0)}var Lo=class{constructor(e,t,i,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=r!==void 0?r:new t.constructor(i),this.sampleValues=t,this.valueSize=i,this.settings=null,this.DefaultSettings_={}}evaluate(e){let t=this.parameterPositions,i=this._cachedIndex,r=t[i],s=t[i-1];n:{e:{let o;t:{i:if(!(e<r)){for(let a=i+2;;){if(r===void 0){if(e<s)break i;return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}if(i===a)break;if(s=r,r=t[++i],e<r)break e}o=t.length;break t}if(!(e>=s)){let a=t[1];e<a&&(i=2,s=a);for(let l=i-2;;){if(s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===l)break;if(r=s,s=t[--i-1],e>=s)break e}o=i,i=0;break t}break n}for(;i<o;){let a=i+o>>>1;e<t[a]?o=a:i=a+1}if(r=t[i],s=t[i-1],s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===void 0)return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}this._cachedIndex=i,this.intervalChanged_(i,s,r)}return this.interpolate_(i,s,e,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){let t=this.resultBuffer,i=this.sampleValues,r=this.valueSize,s=e*r;for(let o=0;o!==r;++o)t[o]=i[s+o];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}},BM=class extends Lo{constructor(e,t,i,r){super(e,t,i,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:xP,endingEnd:xP}}intervalChanged_(e,t,i){let r=this.parameterPositions,s=e-2,o=e+1,a=r[s],l=r[o];if(a===void 0)switch(this.getSettings_().endingStart){case EP:s=e,a=2*t-i;break;case MP:s=r.length-2,a=t+r[s]-r[s+1];break;default:s=e,a=i}if(l===void 0)switch(this.getSettings_().endingEnd){case EP:o=e,l=2*i-t;break;case MP:o=1,l=i+r[1]-r[0];break;default:o=e-1,l=t}let c=(i-t)*.5,u=this.valueSize;this._weightPrev=c/(t-a),this._weightNext=c/(l-i),this._offsetPrev=s*u,this._offsetNext=o*u}interpolate_(e,t,i,r){let s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,c=l-a,u=this._offsetPrev,d=this._offsetNext,h=this._weightPrev,f=this._weightNext,p=(i-t)/(r-t),y=p*p,g=y*p,m=-h*g+2*h*y-h*p,x=(1+h)*g+(-1.5-2*h)*y+(-.5+h)*p+1,M=(-1-f)*g+(1.5+f)*y+.5*p,v=f*g-f*y;for(let S=0;S!==a;++S)s[S]=m*o[u+S]+x*o[c+S]+M*o[l+S]+v*o[d+S];return s}},VM=class extends Lo{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){let s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,c=l-a,u=(i-t)/(r-t),d=1-u;for(let h=0;h!==a;++h)s[h]=o[c+h]*d+o[l+h]*u;return s}},zM=class extends Lo{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e){return this.copySampleValue_(e-1)}},or=class{constructor(e,t,i,r){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=og(t,this.TimeBufferType),this.values=og(i,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(e){let t=e.constructor,i;if(t.toJSON!==this.toJSON)i=t.toJSON(e);else{i={name:e.name,times:og(e.times,Array),values:og(e.values,Array)};let r=e.getInterpolation();r!==e.DefaultInterpolation&&(i.interpolation=r)}return i.type=e.ValueTypeName,i}InterpolantFactoryMethodDiscrete(e){return new zM(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new VM(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new BM(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case Nc:t=this.InterpolantFactoryMethodDiscrete;break;case Oc:t=this.InterpolantFactoryMethodLinear;break;case oE:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){let i="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(i);return console.warn("THREE.KeyframeTrack:",i),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Nc;case this.InterpolantFactoryMethodLinear:return Oc;case this.InterpolantFactoryMethodSmooth:return oE}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){let t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]+=e}return this}scale(e){if(e!==1){let t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]*=e}return this}trim(e,t){let i=this.times,r=i.length,s=0,o=r-1;for(;s!==r&&i[s]<e;)++s;for(;o!==-1&&i[o]>t;)--o;if(++o,s!==0||o!==r){s>=o&&(o=Math.max(o,1),s=o-1);let a=this.getValueSize();this.times=i.slice(s,o),this.values=this.values.slice(s*a,o*a)}return this}validate(){let e=!0,t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);let i=this.times,r=this.values,s=i.length;s===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let o=null;for(let a=0;a!==s;a++){let l=i[a];if(typeof l=="number"&&isNaN(l)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,l),e=!1;break}if(o!==null&&o>l){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,l,o),e=!1;break}o=l}if(r!==void 0&&u9(r))for(let a=0,l=r.length;a!==l;++a){let c=r[a];if(isNaN(c)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,c),e=!1;break}}return e}optimize(){let e=this.times.slice(),t=this.values.slice(),i=this.getValueSize(),r=this.getInterpolation()===oE,s=e.length-1,o=1;for(let a=1;a<s;++a){let l=!1,c=e[a],u=e[a+1];if(c!==u&&(a!==1||c!==e[0]))if(r)l=!0;else{let d=a*i,h=d-i,f=d+i;for(let p=0;p!==i;++p){let y=t[d+p];if(y!==t[h+p]||y!==t[f+p]){l=!0;break}}}if(l){if(a!==o){e[o]=e[a];let d=a*i,h=o*i;for(let f=0;f!==i;++f)t[h+f]=t[d+f]}++o}}if(s>0){e[o]=e[s];for(let a=s*i,l=o*i,c=0;c!==i;++c)t[l+c]=t[a+c];++o}return o!==e.length?(this.times=e.slice(0,o),this.values=t.slice(0,o*i)):(this.times=e,this.values=t),this}clone(){let e=this.times.slice(),t=this.values.slice(),i=this.constructor,r=new i(this.name,e,t);return r.createInterpolant=this.createInterpolant,r}};or.prototype.TimeBufferType=Float32Array;or.prototype.ValueBufferType=Float32Array;or.prototype.DefaultInterpolation=Oc;var Fo=class extends or{constructor(e,t,i){super(e,t,i)}};Fo.prototype.ValueTypeName="bool";Fo.prototype.ValueBufferType=Array;Fo.prototype.DefaultInterpolation=Nc;Fo.prototype.InterpolantFactoryMethodLinear=void 0;Fo.prototype.InterpolantFactoryMethodSmooth=void 0;var Og=class extends or{};Og.prototype.ValueTypeName="color";var Fs=class extends or{};Fs.prototype.ValueTypeName="number";var HM=class extends Lo{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){let s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=(i-t)/(r-t),c=e*a;for(let u=c+a;c!==u;c+=4)pi.slerpFlat(s,0,o,c-a,o,c,l);return s}},ks=class extends or{InterpolantFactoryMethodLinear(e){return new HM(this.times,this.values,this.getValueSize(),e)}};ks.prototype.ValueTypeName="quaternion";ks.prototype.InterpolantFactoryMethodSmooth=void 0;var ko=class extends or{constructor(e,t,i){super(e,t,i)}};ko.prototype.ValueTypeName="string";ko.prototype.ValueBufferType=Array;ko.prototype.DefaultInterpolation=Nc;ko.prototype.InterpolantFactoryMethodLinear=void 0;ko.prototype.InterpolantFactoryMethodSmooth=void 0;var Us=class extends or{};Us.prototype.ValueTypeName="vector";var Lg=class{constructor(e="",t=-1,i=[],r=kW){this.name=e,this.tracks=i,this.duration=t,this.blendMode=r,this.uuid=Dr(),this.duration<0&&this.resetDuration()}static parse(e){let t=[],i=e.tracks,r=1/(e.fps||1);for(let o=0,a=i.length;o!==a;++o)t.push(f9(i[o]).scale(r));let s=new this(e.name,e.duration,t,e.blendMode);return s.uuid=e.uuid,s}static toJSON(e){let t=[],i=e.tracks,r={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let s=0,o=i.length;s!==o;++s)t.push(or.toJSON(i[s]));return r}static CreateFromMorphTargetSequence(e,t,i,r){let s=t.length,o=[];for(let a=0;a<s;a++){let l=[],c=[];l.push((a+s-1)%s,a,(a+1)%s),c.push(0,1,0);let u=d9(l);l=DN(l,1,u),c=DN(c,1,u),!r&&l[0]===0&&(l.push(s),c.push(c[0])),o.push(new Fs(".morphTargetInfluences["+t[a].name+"]",l,c).scale(1/i))}return new this(e,-1,o)}static findByName(e,t){let i=e;if(!Array.isArray(e)){let r=e;i=r.geometry&&r.geometry.animations||r.animations}for(let r=0;r<i.length;r++)if(i[r].name===t)return i[r];return null}static CreateClipsFromMorphTargetSequences(e,t,i){let r={},s=/^([\w-]*?)([\d]+)$/;for(let a=0,l=e.length;a<l;a++){let c=e[a],u=c.name.match(s);if(u&&u.length>1){let d=u[1],h=r[d];h||(r[d]=h=[]),h.push(c)}}let o=[];for(let a in r)o.push(this.CreateFromMorphTargetSequence(a,r[a],t,i));return o}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;let i=function(d,h,f,p,y){if(f.length!==0){let g=[],m=[];iO(f,g,m,p),g.length!==0&&y.push(new d(h,g,m))}},r=[],s=e.name||"default",o=e.fps||30,a=e.blendMode,l=e.length||-1,c=e.hierarchy||[];for(let d=0;d<c.length;d++){let h=c[d].keys;if(!(!h||h.length===0))if(h[0].morphTargets){let f={},p;for(p=0;p<h.length;p++)if(h[p].morphTargets)for(let y=0;y<h[p].morphTargets.length;y++)f[h[p].morphTargets[y]]=-1;for(let y in f){let g=[],m=[];for(let x=0;x!==h[p].morphTargets.length;++x){let M=h[p];g.push(M.time),m.push(M.morphTarget===y?1:0)}r.push(new Fs(".morphTargetInfluence["+y+"]",g,m))}l=f.length*o}else{let f=".bones["+t[d].name+"]";i(Us,f+".position",h,"pos",r),i(ks,f+".quaternion",h,"rot",r),i(Us,f+".scale",h,"scl",r)}}return r.length===0?null:new this(s,l,r,a)}resetDuration(){let e=this.tracks,t=0;for(let i=0,r=e.length;i!==r;++i){let s=this.tracks[i];t=Math.max(t,s.times[s.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){let e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}};function h9(n){switch(n.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Fs;case"vector":case"vector2":case"vector3":case"vector4":return Us;case"color":return Og;case"quaternion":return ks;case"bool":case"boolean":return Fo;case"string":return ko}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+n)}function f9(n){if(n.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");let e=h9(n.type);if(n.times===void 0){let t=[],i=[];iO(n.keys,t,i,"value"),n.times=t,n.values=i}return e.parse!==void 0?e.parse(n):new e(n.name,n.times,n.values,n.interpolation)}var Ro={enabled:!1,files:{},add:function(n,e){this.enabled!==!1&&(this.files[n]=e)},get:function(n){if(this.enabled!==!1)return this.files[n]},remove:function(n){delete this.files[n]},clear:function(){this.files={}}},GM=class{constructor(e,t,i){let r=this,s=!1,o=0,a=0,l,c=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=i,this.itemStart=function(u){a++,s===!1&&r.onStart!==void 0&&r.onStart(u,o,a),s=!0},this.itemEnd=function(u){o++,r.onProgress!==void 0&&r.onProgress(u,o,a),o===a&&(s=!1,r.onLoad!==void 0&&r.onLoad())},this.itemError=function(u){r.onError!==void 0&&r.onError(u)},this.resolveURL=function(u){return l?l(u):u},this.setURLModifier=function(u){return l=u,this},this.addHandler=function(u,d){return c.push(u,d),this},this.removeHandler=function(u){let d=c.indexOf(u);return d!==-1&&c.splice(d,2),this},this.getHandler=function(u){for(let d=0,h=c.length;d<h;d+=2){let f=c[d],p=c[d+1];if(f.global&&(f.lastIndex=0),f.test(u))return p}return null}}},p9=new GM,jc=(()=>{class n{constructor(t){this.manager=t!==void 0?t:p9,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(t,i){let r=this;return new Promise(function(s,o){r.load(t,s,i,o)})}parse(){}setCrossOrigin(t){return this.crossOrigin=t,this}setWithCredentials(t){return this.withCredentials=t,this}setPath(t){return this.path=t,this}setResourcePath(t){return this.resourcePath=t,this}setRequestHeader(t){return this.requestHeader=t,this}}return n.DEFAULT_MATERIAL_NAME="__DEFAULT",n})(),Is={},jM=class extends Error{constructor(e,t){super(e),this.response=t}},rh=class extends jc{constructor(e){super(e)}load(e,t,i,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);let s=Ro.get(e);if(s!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(s),this.manager.itemEnd(e)},0),s;if(Is[e]!==void 0){Is[e].push({onLoad:t,onProgress:i,onError:r});return}Is[e]=[],Is[e].push({onLoad:t,onProgress:i,onError:r});let o=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),a=this.mimeType,l=this.responseType;fetch(o).then(c=>{if(c.status===200||c.status===0){if(c.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||c.body===void 0||c.body.getReader===void 0)return c;let u=Is[e],d=c.body.getReader(),h=c.headers.get("X-File-Size")||c.headers.get("Content-Length"),f=h?parseInt(h):0,p=f!==0,y=0,g=new ReadableStream({start(m){x();function x(){d.read().then(({done:M,value:v})=>{if(M)m.close();else{y+=v.byteLength;let S=new ProgressEvent("progress",{lengthComputable:p,loaded:y,total:f});for(let T=0,A=u.length;T<A;T++){let I=u[T];I.onProgress&&I.onProgress(S)}m.enqueue(v),x()}},M=>{m.error(M)})}}});return new Response(g)}else throw new jM(`fetch for "${c.url}" responded with ${c.status}: ${c.statusText}`,c)}).then(c=>{switch(l){case"arraybuffer":return c.arrayBuffer();case"blob":return c.blob();case"document":return c.text().then(u=>new DOMParser().parseFromString(u,a));case"json":return c.json();default:if(a===void 0)return c.text();{let d=/charset="?([^;"\s]*)"?/i.exec(a),h=d&&d[1]?d[1].toLowerCase():void 0,f=new TextDecoder(h);return c.arrayBuffer().then(p=>f.decode(p))}}}).then(c=>{Ro.add(e,c);let u=Is[e];delete Is[e];for(let d=0,h=u.length;d<h;d++){let f=u[d];f.onLoad&&f.onLoad(c)}}).catch(c=>{let u=Is[e];if(u===void 0)throw this.manager.itemError(e),c;delete Is[e];for(let d=0,h=u.length;d<h;d++){let f=u[d];f.onError&&f.onError(c)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}};var WM=class extends jc{constructor(e){super(e)}load(e,t,i,r){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);let s=this,o=Ro.get(e);if(o!==void 0)return s.manager.itemStart(e),setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o;let a=Zd("img");function l(){u(),Ro.add(e,this),t&&t(this),s.manager.itemEnd(e)}function c(d){u(),r&&r(d),s.manager.itemError(e),s.manager.itemEnd(e)}function u(){a.removeEventListener("load",l,!1),a.removeEventListener("error",c,!1)}return a.addEventListener("load",l,!1),a.addEventListener("error",c,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(a.crossOrigin=this.crossOrigin),s.manager.itemStart(e),a.src=e,a}};var Fg=class extends jc{constructor(e){super(e)}load(e,t,i,r){let s=new ar,o=new WM(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,function(a){s.image=a,s.needsUpdate=!0,t!==void 0&&t(s)},i,r),s}},Vc=class extends Un{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new qe(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){let t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),this.target!==void 0&&(t.object.target=this.target.uuid),t}};var FE=new lt,RN=new N,PN=new N,sh=class{constructor(e){this.camera=e,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Ye(512,512),this.map=null,this.mapPass=null,this.matrix=new lt,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Jd,this._frameExtents=new Ye(1,1),this._viewportCount=1,this._viewports=[new kt(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){let t=this.camera,i=this.matrix;RN.setFromMatrixPosition(e.matrixWorld),t.position.copy(RN),PN.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(PN),t.updateMatrixWorld(),FE.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(FE),i.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),i.multiply(FE)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.intensity=e.intensity,this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){let e={};return this.intensity!==1&&(e.intensity=this.intensity),this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}},$M=class extends sh{constructor(){super(new sn(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){let t=this.camera,i=Lc*2*e.angle*this.focus,r=this.mapSize.width/this.mapSize.height,s=e.distance||t.far;(i!==t.fov||r!==t.aspect||s!==t.far)&&(t.fov=i,t.aspect=r,t.far=s,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}},kg=class extends Vc{constructor(e,t,i=0,r=Math.PI/3,s=0,o=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(Un.DEFAULT_UP),this.updateMatrix(),this.target=new Un,this.distance=i,this.angle=r,this.penumbra=s,this.decay=o,this.map=null,this.shadow=new $M}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}},NN=new lt,zd=new N,kE=new N,XM=class extends sh{constructor(){super(new sn(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new Ye(4,2),this._viewportCount=6,this._viewports=[new kt(2,1,1,1),new kt(0,1,1,1),new kt(3,1,1,1),new kt(1,1,1,1),new kt(3,0,1,1),new kt(1,0,1,1)],this._cubeDirections=[new N(1,0,0),new N(-1,0,0),new N(0,0,1),new N(0,0,-1),new N(0,1,0),new N(0,-1,0)],this._cubeUps=[new N(0,1,0),new N(0,1,0),new N(0,1,0),new N(0,1,0),new N(0,0,1),new N(0,0,-1)]}updateMatrices(e,t=0){let i=this.camera,r=this.matrix,s=e.distance||i.far;s!==i.far&&(i.far=s,i.updateProjectionMatrix()),zd.setFromMatrixPosition(e.matrixWorld),i.position.copy(zd),kE.copy(i.position),kE.add(this._cubeDirections[t]),i.up.copy(this._cubeUps[t]),i.lookAt(kE),i.updateMatrixWorld(),r.makeTranslation(-zd.x,-zd.y,-zd.z),NN.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),this._frustum.setFromProjectionMatrix(NN)}},Ug=class extends Vc{constructor(e,t,i=0,r=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=i,this.decay=r,this.shadow=new XM}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}},qM=class extends sh{constructor(){super(new Qr(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}},zc=class extends Vc{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Un.DEFAULT_UP),this.updateMatrix(),this.target=new Un,this.shadow=new qM}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}},Bg=class extends Vc{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}};var Uo=class{static decodeText(e){if(console.warn("THREE.LoaderUtils: decodeText() has been deprecated with r165 and will be removed with r175. Use TextDecoder instead."),typeof TextDecoder<"u")return new TextDecoder().decode(e);let t="";for(let i=0,r=e.length;i<r;i++)t+=String.fromCharCode(e[i]);try{return decodeURIComponent(escape(t))}catch{return t}}static extractUrlBase(e){let t=e.lastIndexOf("/");return t===-1?"./":e.slice(0,t+1)}static resolveURL(e,t){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}};var Vg=class extends jc{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,i,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);let s=this,o=Ro.get(e);if(o!==void 0){if(s.manager.itemStart(e),o.then){o.then(c=>{t&&t(c),s.manager.itemEnd(e)}).catch(c=>{r&&r(c)});return}return setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o}let a={};a.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",a.headers=this.requestHeader;let l=fetch(e,a).then(function(c){return c.blob()}).then(function(c){return createImageBitmap(c,Object.assign(s.options,{colorSpaceConversion:"none"}))}).then(function(c){return Ro.add(e,c),t&&t(c),s.manager.itemEnd(e),c}).catch(function(c){r&&r(c),Ro.remove(e),s.manager.itemError(e),s.manager.itemEnd(e)});Ro.add(e,l),s.manager.itemStart(e)}};var ow="\\[\\]\\.:\\/",m9=new RegExp("["+ow+"]","g"),aw="[^"+ow+"]",g9="[^"+ow.replace("\\.","")+"]",y9=/((?:WC+[\/:])*)/.source.replace("WC",aw),v9=/(WCOD+)?/.source.replace("WCOD",g9),_9=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",aw),x9=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",aw),E9=new RegExp("^"+y9+v9+_9+x9+"$"),M9=["material","materials","bones","map"],YM=class{constructor(e,t,i){let r=i||rn.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)}getValue(e,t){this.bind();let i=this._targetGroup.nCachedObjects_,r=this._bindings[i];r!==void 0&&r.getValue(e,t)}setValue(e,t){let i=this._bindings;for(let r=this._targetGroup.nCachedObjects_,s=i.length;r!==s;++r)i[r].setValue(e,t)}bind(){let e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].bind()}unbind(){let e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].unbind()}},rn=(()=>{class n{constructor(t,i,r){this.path=i,this.parsedPath=r||n.parseTrackName(i),this.node=n.findNode(t,this.parsedPath.nodeName),this.rootNode=t,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(t,i,r){return t&&t.isAnimationObjectGroup?new n.Composite(t,i,r):new n(t,i,r)}static sanitizeNodeName(t){return t.replace(/\s/g,"_").replace(m9,"")}static parseTrackName(t){let i=E9.exec(t);if(i===null)throw new Error("PropertyBinding: Cannot parse trackName: "+t);let r={nodeName:i[2],objectName:i[3],objectIndex:i[4],propertyName:i[5],propertyIndex:i[6]},s=r.nodeName&&r.nodeName.lastIndexOf(".");if(s!==void 0&&s!==-1){let o=r.nodeName.substring(s+1);M9.indexOf(o)!==-1&&(r.nodeName=r.nodeName.substring(0,s),r.objectName=o)}if(r.propertyName===null||r.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+t);return r}static findNode(t,i){if(i===void 0||i===""||i==="."||i===-1||i===t.name||i===t.uuid)return t;if(t.skeleton){let r=t.skeleton.getBoneByName(i);if(r!==void 0)return r}if(t.children){let r=function(o){for(let a=0;a<o.length;a++){let l=o[a];if(l.name===i||l.uuid===i)return l;let c=r(l.children);if(c)return c}return null},s=r(t.children);if(s)return s}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(t,i){t[i]=this.targetObject[this.propertyName]}_getValue_array(t,i){let r=this.resolvedProperty;for(let s=0,o=r.length;s!==o;++s)t[i++]=r[s]}_getValue_arrayElement(t,i){t[i]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(t,i){this.resolvedProperty.toArray(t,i)}_setValue_direct(t,i){this.targetObject[this.propertyName]=t[i]}_setValue_direct_setNeedsUpdate(t,i){this.targetObject[this.propertyName]=t[i],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(t,i){this.targetObject[this.propertyName]=t[i],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(t,i){let r=this.resolvedProperty;for(let s=0,o=r.length;s!==o;++s)r[s]=t[i++]}_setValue_array_setNeedsUpdate(t,i){let r=this.resolvedProperty;for(let s=0,o=r.length;s!==o;++s)r[s]=t[i++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(t,i){let r=this.resolvedProperty;for(let s=0,o=r.length;s!==o;++s)r[s]=t[i++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(t,i){this.resolvedProperty[this.propertyIndex]=t[i]}_setValue_arrayElement_setNeedsUpdate(t,i){this.resolvedProperty[this.propertyIndex]=t[i],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(t,i){this.resolvedProperty[this.propertyIndex]=t[i],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(t,i){this.resolvedProperty.fromArray(t,i)}_setValue_fromArray_setNeedsUpdate(t,i){this.resolvedProperty.fromArray(t,i),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(t,i){this.resolvedProperty.fromArray(t,i),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(t,i){this.bind(),this.getValue(t,i)}_setValue_unbound(t,i){this.bind(),this.setValue(t,i)}bind(){let t=this.node,i=this.parsedPath,r=i.objectName,s=i.propertyName,o=i.propertyIndex;if(t||(t=n.findNode(this.rootNode,i.nodeName),this.node=t),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!t){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(r){let u=i.objectIndex;switch(r){case"materials":if(!t.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!t.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}t=t.material.materials;break;case"bones":if(!t.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}t=t.skeleton.bones;for(let d=0;d<t.length;d++)if(t[d].name===u){u=d;break}break;case"map":if("map"in t){t=t.map;break}if(!t.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!t.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}t=t.material.map;break;default:if(t[r]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}t=t[r]}if(u!==void 0){if(t[u]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,t);return}t=t[u]}}let a=t[s];if(a===void 0){let u=i.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+u+"."+s+" but it wasn't found.",t);return}let l=this.Versioning.None;this.targetObject=t,t.needsUpdate!==void 0?l=this.Versioning.NeedsUpdate:t.matrixWorldNeedsUpdate!==void 0&&(l=this.Versioning.MatrixWorldNeedsUpdate);let c=this.BindingType.Direct;if(o!==void 0){if(s==="morphTargetInfluences"){if(!t.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!t.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}t.morphTargetDictionary[o]!==void 0&&(o=t.morphTargetDictionary[o])}c=this.BindingType.ArrayElement,this.resolvedProperty=a,this.propertyIndex=o}else a.fromArray!==void 0&&a.toArray!==void 0?(c=this.BindingType.HasFromToArray,this.resolvedProperty=a):Array.isArray(a)?(c=this.BindingType.EntireArray,this.resolvedProperty=a):this.propertyName=s;this.getValue=this.GetterByBindingType[c],this.setValue=this.SetterByBindingTypeAndVersioning[c][l]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}return n.Composite=YM,n})();rn.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};rn.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};rn.prototype.GetterByBindingType=[rn.prototype._getValue_direct,rn.prototype._getValue_array,rn.prototype._getValue_arrayElement,rn.prototype._getValue_toArray];rn.prototype.SetterByBindingTypeAndVersioning=[[rn.prototype._setValue_direct,rn.prototype._setValue_direct_setNeedsUpdate,rn.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[rn.prototype._setValue_array,rn.prototype._setValue_array_setNeedsUpdate,rn.prototype._setValue_array_setMatrixWorldNeedsUpdate],[rn.prototype._setValue_arrayElement,rn.prototype._setValue_arrayElement_setNeedsUpdate,rn.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[rn.prototype._setValue_fromArray,rn.prototype._setValue_fromArray_setNeedsUpdate,rn.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];var cre=new Float32Array(1);var oh=class{constructor(e=1,t=0,i=0){return this.radius=e,this.phi=t,this.theta=i,this}set(e,t,i){return this.radius=e,this.phi=t,this.theta=i,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,i){return this.radius=Math.sqrt(e*e+t*t+i*i),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,i),this.phi=Math.acos(kn(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}};typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:ah}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=ah);var rO=parseInt(ah.replace(/\D+/g,""));function lw(n,e){if(e===WN)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),n;if(e===ch||e===Hg){let t=n.getIndex();if(t===null){let o=[],a=n.getAttribute("position");if(a!==void 0){for(let l=0;l<a.count;l++)o.push(l);n.setIndex(o),t=n.getIndex()}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),n}let i=t.count-2,r=[];if(t)if(e===ch)for(let o=1;o<=i;o++)r.push(t.getX(0)),r.push(t.getX(o)),r.push(t.getX(o+1));else for(let o=0;o<i;o++)o%2===0?(r.push(t.getX(o)),r.push(t.getX(o+1)),r.push(t.getX(o+2))):(r.push(t.getX(o+2)),r.push(t.getX(o+1)),r.push(t.getX(o)));r.length/3!==i&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");let s=n.clone();return s.setIndex(r),s.clearGroups(),s}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",e),n}var b9=Object.defineProperty,S9=(n,e,t)=>e in n?b9(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Ve=(n,e,t)=>(S9(n,typeof e!="symbol"?e+"":e,t),t),Wg=new Oo,sO=new Tr,T9=Math.cos(70*(Math.PI/180)),oO=(n,e)=>(n%e+e)%e,uh=class extends Zr{constructor(e,t){super(),Ve(this,"object"),Ve(this,"domElement"),Ve(this,"enabled",!0),Ve(this,"target",new N),Ve(this,"minDistance",0),Ve(this,"maxDistance",1/0),Ve(this,"minZoom",0),Ve(this,"maxZoom",1/0),Ve(this,"minPolarAngle",0),Ve(this,"maxPolarAngle",Math.PI),Ve(this,"minAzimuthAngle",-1/0),Ve(this,"maxAzimuthAngle",1/0),Ve(this,"enableDamping",!1),Ve(this,"dampingFactor",.05),Ve(this,"enableZoom",!0),Ve(this,"zoomSpeed",1),Ve(this,"enableRotate",!0),Ve(this,"rotateSpeed",1),Ve(this,"enablePan",!0),Ve(this,"panSpeed",1),Ve(this,"screenSpacePanning",!0),Ve(this,"keyPanSpeed",7),Ve(this,"zoomToCursor",!1),Ve(this,"autoRotate",!1),Ve(this,"autoRotateSpeed",2),Ve(this,"reverseOrbit",!1),Ve(this,"reverseHorizontalOrbit",!1),Ve(this,"reverseVerticalOrbit",!1),Ve(this,"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),Ve(this,"mouseButtons",{LEFT:Xa.ROTATE,MIDDLE:Xa.DOLLY,RIGHT:Xa.PAN}),Ve(this,"touches",{ONE:qa.ROTATE,TWO:qa.DOLLY_PAN}),Ve(this,"target0"),Ve(this,"position0"),Ve(this,"zoom0"),Ve(this,"_domElementKeyEvents",null),Ve(this,"getPolarAngle"),Ve(this,"getAzimuthalAngle"),Ve(this,"setPolarAngle"),Ve(this,"setAzimuthalAngle"),Ve(this,"getDistance"),Ve(this,"getZoomScale"),Ve(this,"listenToKeyEvents"),Ve(this,"stopListenToKeyEvents"),Ve(this,"saveState"),Ve(this,"reset"),Ve(this,"update"),Ve(this,"connect"),Ve(this,"dispose"),Ve(this,"dollyIn"),Ve(this,"dollyOut"),Ve(this,"getScale"),Ve(this,"setScale"),this.object=e,this.domElement=t,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=()=>u.phi,this.getAzimuthalAngle=()=>u.theta,this.setPolarAngle=P=>{let K=oO(P,2*Math.PI),ve=u.phi;ve<0&&(ve+=2*Math.PI),K<0&&(K+=2*Math.PI);let R=Math.abs(K-ve);2*Math.PI-R<R&&(K<ve?K+=2*Math.PI:ve+=2*Math.PI),d.phi=K-ve,i.update()},this.setAzimuthalAngle=P=>{let K=oO(P,2*Math.PI),ve=u.theta;ve<0&&(ve+=2*Math.PI),K<0&&(K+=2*Math.PI);let R=Math.abs(K-ve);2*Math.PI-R<R&&(K<ve?K+=2*Math.PI:ve+=2*Math.PI),d.theta=K-ve,i.update()},this.getDistance=()=>i.object.position.distanceTo(i.target),this.listenToKeyEvents=P=>{P.addEventListener("keydown",ge),this._domElementKeyEvents=P},this.stopListenToKeyEvents=()=>{this._domElementKeyEvents.removeEventListener("keydown",ge),this._domElementKeyEvents=null},this.saveState=()=>{i.target0.copy(i.target),i.position0.copy(i.object.position),i.zoom0=i.object.zoom},this.reset=()=>{i.target.copy(i.target0),i.object.position.copy(i.position0),i.object.zoom=i.zoom0,i.object.updateProjectionMatrix(),i.dispatchEvent(r),i.update(),l=a.NONE},this.update=(()=>{let P=new N,K=new N(0,1,0),ve=new pi().setFromUnitVectors(e.up,K),R=ve.clone().invert(),le=new N,X=new pi,J=2*Math.PI;return function(){let _e=i.object.position;ve.setFromUnitVectors(e.up,K),R.copy(ve).invert(),P.copy(_e).sub(i.target),P.applyQuaternion(ve),u.setFromVector3(P),i.autoRotate&&l===a.NONE&&W(U()),i.enableDamping?(u.theta+=d.theta*i.dampingFactor,u.phi+=d.phi*i.dampingFactor):(u.theta+=d.theta,u.phi+=d.phi);let He=i.minAzimuthAngle,Ot=i.maxAzimuthAngle;isFinite(He)&&isFinite(Ot)&&(He<-Math.PI?He+=J:He>Math.PI&&(He-=J),Ot<-Math.PI?Ot+=J:Ot>Math.PI&&(Ot-=J),He<=Ot?u.theta=Math.max(He,Math.min(Ot,u.theta)):u.theta=u.theta>(He+Ot)/2?Math.max(He,u.theta):Math.min(Ot,u.theta)),u.phi=Math.max(i.minPolarAngle,Math.min(i.maxPolarAngle,u.phi)),u.makeSafe(),i.enableDamping===!0?i.target.addScaledVector(f,i.dampingFactor):i.target.add(f),i.zoomToCursor&&w||i.object.isOrthographicCamera?u.radius=Ie(u.radius):u.radius=Ie(u.radius*h),P.setFromSpherical(u),P.applyQuaternion(R),_e.copy(i.target).add(P),i.object.matrixAutoUpdate||i.object.updateMatrix(),i.object.lookAt(i.target),i.enableDamping===!0?(d.theta*=1-i.dampingFactor,d.phi*=1-i.dampingFactor,f.multiplyScalar(1-i.dampingFactor)):(d.set(0,0,0),f.set(0,0,0));let an=!1;if(i.zoomToCursor&&w){let St=null;if(i.object instanceof sn&&i.object.isPerspectiveCamera){let Nn=P.length();St=Ie(Nn*h);let si=Nn-St;i.object.position.addScaledVector(A,si),i.object.updateMatrixWorld()}else if(i.object.isOrthographicCamera){let Nn=new N(I.x,I.y,0);Nn.unproject(i.object),i.object.zoom=Math.max(i.minZoom,Math.min(i.maxZoom,i.object.zoom/h)),i.object.updateProjectionMatrix(),an=!0;let si=new N(I.x,I.y,0);si.unproject(i.object),i.object.position.sub(si).add(Nn),i.object.updateMatrixWorld(),St=P.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),i.zoomToCursor=!1;St!==null&&(i.screenSpacePanning?i.target.set(0,0,-1).transformDirection(i.object.matrix).multiplyScalar(St).add(i.object.position):(Wg.origin.copy(i.object.position),Wg.direction.set(0,0,-1).transformDirection(i.object.matrix),Math.abs(i.object.up.dot(Wg.direction))<T9?e.lookAt(i.target):(sO.setFromNormalAndCoplanarPoint(i.object.up,i.target),Wg.intersectPlane(sO,i.target))))}else i.object instanceof Qr&&i.object.isOrthographicCamera&&(an=h!==1,an&&(i.object.zoom=Math.max(i.minZoom,Math.min(i.maxZoom,i.object.zoom/h)),i.object.updateProjectionMatrix()));return h=1,w=!1,an||le.distanceToSquared(i.object.position)>c||8*(1-X.dot(i.object.quaternion))>c?(i.dispatchEvent(r),le.copy(i.object.position),X.copy(i.object.quaternion),an=!1,!0):!1}})(),this.connect=P=>{i.domElement=P,i.domElement.style.touchAction="none",i.domElement.addEventListener("contextmenu",ue),i.domElement.addEventListener("pointerdown",E),i.domElement.addEventListener("pointercancel",ee),i.domElement.addEventListener("wheel",De)},this.dispose=()=>{var P,K,ve,R,le,X;i.domElement&&(i.domElement.style.touchAction="auto"),(P=i.domElement)==null||P.removeEventListener("contextmenu",ue),(K=i.domElement)==null||K.removeEventListener("pointerdown",E),(ve=i.domElement)==null||ve.removeEventListener("pointercancel",ee),(R=i.domElement)==null||R.removeEventListener("wheel",De),(le=i.domElement)==null||le.ownerDocument.removeEventListener("pointermove",B),(X=i.domElement)==null||X.ownerDocument.removeEventListener("pointerup",ee),i._domElementKeyEvents!==null&&i._domElementKeyEvents.removeEventListener("keydown",ge)};let i=this,r={type:"change"},s={type:"start"},o={type:"end"},a={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6},l=a.NONE,c=1e-6,u=new oh,d=new oh,h=1,f=new N,p=new Ye,y=new Ye,g=new Ye,m=new Ye,x=new Ye,M=new Ye,v=new Ye,S=new Ye,T=new Ye,A=new N,I=new Ye,w=!1,_=[],D={};function U(){return 2*Math.PI/60/60*i.autoRotateSpeed}function L(){return Math.pow(.95,i.zoomSpeed)}function W(P){i.reverseOrbit||i.reverseHorizontalOrbit?d.theta+=P:d.theta-=P}function z(P){i.reverseOrbit||i.reverseVerticalOrbit?d.phi+=P:d.phi-=P}let $=(()=>{let P=new N;return function(ve,R){P.setFromMatrixColumn(R,0),P.multiplyScalar(-ve),f.add(P)}})(),G=(()=>{let P=new N;return function(ve,R){i.screenSpacePanning===!0?P.setFromMatrixColumn(R,1):(P.setFromMatrixColumn(R,0),P.crossVectors(i.object.up,P)),P.multiplyScalar(ve),f.add(P)}})(),V=(()=>{let P=new N;return function(ve,R){let le=i.domElement;if(le&&i.object instanceof sn&&i.object.isPerspectiveCamera){let X=i.object.position;P.copy(X).sub(i.target);let J=P.length();J*=Math.tan(i.object.fov/2*Math.PI/180),$(2*ve*J/le.clientHeight,i.object.matrix),G(2*R*J/le.clientHeight,i.object.matrix)}else le&&i.object instanceof Qr&&i.object.isOrthographicCamera?($(ve*(i.object.right-i.object.left)/i.object.zoom/le.clientWidth,i.object.matrix),G(R*(i.object.top-i.object.bottom)/i.object.zoom/le.clientHeight,i.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),i.enablePan=!1)}})();function se(P){i.object instanceof sn&&i.object.isPerspectiveCamera||i.object instanceof Qr&&i.object.isOrthographicCamera?h=P:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),i.enableZoom=!1)}function ie(P){se(h/P)}function ce(P){se(h*P)}function Se(P){if(!i.zoomToCursor||!i.domElement)return;w=!0;let K=i.domElement.getBoundingClientRect(),ve=P.clientX-K.left,R=P.clientY-K.top,le=K.width,X=K.height;I.x=ve/le*2-1,I.y=-(R/X)*2+1,A.set(I.x,I.y,1).unproject(i.object).sub(i.object.position).normalize()}function Ie(P){return Math.max(i.minDistance,Math.min(i.maxDistance,P))}function q(P){p.set(P.clientX,P.clientY)}function re(P){Se(P),v.set(P.clientX,P.clientY)}function fe(P){m.set(P.clientX,P.clientY)}function oe(P){y.set(P.clientX,P.clientY),g.subVectors(y,p).multiplyScalar(i.rotateSpeed);let K=i.domElement;K&&(W(2*Math.PI*g.x/K.clientHeight),z(2*Math.PI*g.y/K.clientHeight)),p.copy(y),i.update()}function Ae(P){S.set(P.clientX,P.clientY),T.subVectors(S,v),T.y>0?ie(L()):T.y<0&&ce(L()),v.copy(S),i.update()}function Ue(P){x.set(P.clientX,P.clientY),M.subVectors(x,m).multiplyScalar(i.panSpeed),V(M.x,M.y),m.copy(x),i.update()}function ze(P){Se(P),P.deltaY<0?ce(L()):P.deltaY>0&&ie(L()),i.update()}function It(P){let K=!1;switch(P.code){case i.keys.UP:V(0,i.keyPanSpeed),K=!0;break;case i.keys.BOTTOM:V(0,-i.keyPanSpeed),K=!0;break;case i.keys.LEFT:V(i.keyPanSpeed,0),K=!0;break;case i.keys.RIGHT:V(-i.keyPanSpeed,0),K=!0;break}K&&(P.preventDefault(),i.update())}function rt(){if(_.length==1)p.set(_[0].pageX,_[0].pageY);else{let P=.5*(_[0].pageX+_[1].pageX),K=.5*(_[0].pageY+_[1].pageY);p.set(P,K)}}function Gt(){if(_.length==1)m.set(_[0].pageX,_[0].pageY);else{let P=.5*(_[0].pageX+_[1].pageX),K=.5*(_[0].pageY+_[1].pageY);m.set(P,K)}}function O(){let P=_[0].pageX-_[1].pageX,K=_[0].pageY-_[1].pageY,ve=Math.sqrt(P*P+K*K);v.set(0,ve)}function gn(){i.enableZoom&&O(),i.enablePan&&Gt()}function dt(){i.enableZoom&&O(),i.enableRotate&&rt()}function Ke(P){if(_.length==1)y.set(P.pageX,P.pageY);else{let ve=Me(P),R=.5*(P.pageX+ve.x),le=.5*(P.pageY+ve.y);y.set(R,le)}g.subVectors(y,p).multiplyScalar(i.rotateSpeed);let K=i.domElement;K&&(W(2*Math.PI*g.x/K.clientHeight),z(2*Math.PI*g.y/K.clientHeight)),p.copy(y)}function Ce(P){if(_.length==1)x.set(P.pageX,P.pageY);else{let K=Me(P),ve=.5*(P.pageX+K.x),R=.5*(P.pageY+K.y);x.set(ve,R)}M.subVectors(x,m).multiplyScalar(i.panSpeed),V(M.x,M.y),m.copy(x)}function Dt(P){let K=Me(P),ve=P.pageX-K.x,R=P.pageY-K.y,le=Math.sqrt(ve*ve+R*R);S.set(0,le),T.set(0,Math.pow(S.y/v.y,i.zoomSpeed)),ie(T.y),v.copy(S)}function Fe(P){i.enableZoom&&Dt(P),i.enablePan&&Ce(P)}function C(P){i.enableZoom&&Dt(P),i.enableRotate&&Ke(P)}function E(P){var K,ve;i.enabled!==!1&&(_.length===0&&((K=i.domElement)==null||K.ownerDocument.addEventListener("pointermove",B),(ve=i.domElement)==null||ve.ownerDocument.addEventListener("pointerup",ee)),be(P),P.pointerType==="touch"?we(P):ne(P))}function B(P){i.enabled!==!1&&(P.pointerType==="touch"?bt(P):te(P))}function ee(P){var K,ve,R;Ge(P),_.length===0&&((K=i.domElement)==null||K.releasePointerCapture(P.pointerId),(ve=i.domElement)==null||ve.ownerDocument.removeEventListener("pointermove",B),(R=i.domElement)==null||R.ownerDocument.removeEventListener("pointerup",ee)),i.dispatchEvent(o),l=a.NONE}function ne(P){let K;switch(P.button){case 0:K=i.mouseButtons.LEFT;break;case 1:K=i.mouseButtons.MIDDLE;break;case 2:K=i.mouseButtons.RIGHT;break;default:K=-1}switch(K){case Xa.DOLLY:if(i.enableZoom===!1)return;re(P),l=a.DOLLY;break;case Xa.ROTATE:if(P.ctrlKey||P.metaKey||P.shiftKey){if(i.enablePan===!1)return;fe(P),l=a.PAN}else{if(i.enableRotate===!1)return;q(P),l=a.ROTATE}break;case Xa.PAN:if(P.ctrlKey||P.metaKey||P.shiftKey){if(i.enableRotate===!1)return;q(P),l=a.ROTATE}else{if(i.enablePan===!1)return;fe(P),l=a.PAN}break;default:l=a.NONE}l!==a.NONE&&i.dispatchEvent(s)}function te(P){if(i.enabled!==!1)switch(l){case a.ROTATE:if(i.enableRotate===!1)return;oe(P);break;case a.DOLLY:if(i.enableZoom===!1)return;Ae(P);break;case a.PAN:if(i.enablePan===!1)return;Ue(P);break}}function De(P){i.enabled===!1||i.enableZoom===!1||l!==a.NONE&&l!==a.ROTATE||(P.preventDefault(),i.dispatchEvent(s),ze(P),i.dispatchEvent(o))}function ge(P){i.enabled===!1||i.enablePan===!1||It(P)}function we(P){switch($e(P),_.length){case 1:switch(i.touches.ONE){case qa.ROTATE:if(i.enableRotate===!1)return;rt(),l=a.TOUCH_ROTATE;break;case qa.PAN:if(i.enablePan===!1)return;Gt(),l=a.TOUCH_PAN;break;default:l=a.NONE}break;case 2:switch(i.touches.TWO){case qa.DOLLY_PAN:if(i.enableZoom===!1&&i.enablePan===!1)return;gn(),l=a.TOUCH_DOLLY_PAN;break;case qa.DOLLY_ROTATE:if(i.enableZoom===!1&&i.enableRotate===!1)return;dt(),l=a.TOUCH_DOLLY_ROTATE;break;default:l=a.NONE}break;default:l=a.NONE}l!==a.NONE&&i.dispatchEvent(s)}function bt(P){switch($e(P),l){case a.TOUCH_ROTATE:if(i.enableRotate===!1)return;Ke(P),i.update();break;case a.TOUCH_PAN:if(i.enablePan===!1)return;Ce(P),i.update();break;case a.TOUCH_DOLLY_PAN:if(i.enableZoom===!1&&i.enablePan===!1)return;Fe(P),i.update();break;case a.TOUCH_DOLLY_ROTATE:if(i.enableZoom===!1&&i.enableRotate===!1)return;C(P),i.update();break;default:l=a.NONE}}function ue(P){i.enabled!==!1&&P.preventDefault()}function be(P){_.push(P)}function Ge(P){delete D[P.pointerId];for(let K=0;K<_.length;K++)if(_[K].pointerId==P.pointerId){_.splice(K,1);return}}function $e(P){let K=D[P.pointerId];K===void 0&&(K=new Ye,D[P.pointerId]=K),K.set(P.pageX,P.pageY)}function Me(P){let K=P.pointerId===_[0].pointerId?_[1]:_[0];return D[K.pointerId]}this.dollyIn=(P=L())=>{ce(P),i.update()},this.dollyOut=(P=L())=>{ie(P),i.update()},this.getScale=()=>h,this.setScale=P=>{se(P),i.update()},this.getZoomScale=()=>L(),t!==void 0&&this.connect(t),this.update()}};function dh(n){if(typeof TextDecoder<"u")return new TextDecoder().decode(n);let e="";for(let t=0,i=n.length;t<i;t++)e+=String.fromCharCode(n[t]);try{return decodeURIComponent(escape(e))}catch{return e}}var Za="srgb",Vs="srgb-linear",aO=3001,C9=3e3,fh=class extends jc{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(t){return new mw(t)}),this.register(function(t){return new gw(t)}),this.register(function(t){return new Sw(t)}),this.register(function(t){return new Tw(t)}),this.register(function(t){return new Cw(t)}),this.register(function(t){return new vw(t)}),this.register(function(t){return new _w(t)}),this.register(function(t){return new xw(t)}),this.register(function(t){return new Ew(t)}),this.register(function(t){return new pw(t)}),this.register(function(t){return new Mw(t)}),this.register(function(t){return new yw(t)}),this.register(function(t){return new bw(t)}),this.register(function(t){return new ww(t)}),this.register(function(t){return new hw(t)}),this.register(function(t){return new Aw(t)}),this.register(function(t){return new Iw(t)})}load(e,t,i,r){let s=this,o;if(this.resourcePath!=="")o=this.resourcePath;else if(this.path!==""){let c=Uo.extractUrlBase(e);o=Uo.resolveURL(c,this.path)}else o=Uo.extractUrlBase(e);this.manager.itemStart(e);let a=function(c){r?r(c):console.error(c),s.manager.itemError(e),s.manager.itemEnd(e)},l=new rh(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(e,function(c){try{s.parse(c,o,function(u){t(u),s.manager.itemEnd(e)},a)}catch(u){a(u)}},i,a)}setDRACOLoader(e){return this.dracoLoader=e,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return this.pluginCallbacks.indexOf(e)===-1&&this.pluginCallbacks.push(e),this}unregister(e){return this.pluginCallbacks.indexOf(e)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,i,r){let s,o={},a={};if(typeof e=="string")s=JSON.parse(e);else if(e instanceof ArrayBuffer)if(dh(new Uint8Array(e.slice(0,4)))===hO){try{o[Et.KHR_BINARY_GLTF]=new Dw(e)}catch(u){r&&r(u);return}s=JSON.parse(o[Et.KHR_BINARY_GLTF].content)}else s=JSON.parse(dh(new Uint8Array(e)));else s=e;if(s.asset===void 0||s.asset.version[0]<2){r&&r(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}let l=new kw(s,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});l.fileLoader.setRequestHeader(this.requestHeader);for(let c=0;c<this.pluginCallbacks.length;c++){let u=this.pluginCallbacks[c](l);u.name||console.error("THREE.GLTFLoader: Invalid plugin found: missing name"),a[u.name]=u,o[u.name]=!0}if(s.extensionsUsed)for(let c=0;c<s.extensionsUsed.length;++c){let u=s.extensionsUsed[c],d=s.extensionsRequired||[];switch(u){case Et.KHR_MATERIALS_UNLIT:o[u]=new fw;break;case Et.KHR_DRACO_MESH_COMPRESSION:o[u]=new Rw(s,this.dracoLoader);break;case Et.KHR_TEXTURE_TRANSFORM:o[u]=new Pw;break;case Et.KHR_MESH_QUANTIZATION:o[u]=new Nw;break;default:d.indexOf(u)>=0&&a[u]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+u+'".')}}l.setExtensions(o),l.setPlugins(a),l.parse(i,r)}parseAsync(e,t){let i=this;return new Promise(function(r,s){i.parse(e,t,r,s)})}};function A9(){let n={};return{get:function(e){return n[e]},add:function(e,t){n[e]=t},remove:function(e){delete n[e]},removeAll:function(){n={}}}}var Et={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_DISPERSION:"KHR_materials_dispersion",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_MATERIALS_BUMP:"EXT_materials_bump",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"},hw=class{constructor(e){this.parser=e,this.name=Et.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){let e=this.parser,t=this.parser.json.nodes||[];for(let i=0,r=t.length;i<r;i++){let s=t[i];s.extensions&&s.extensions[this.name]&&s.extensions[this.name].light!==void 0&&e._addNodeRef(this.cache,s.extensions[this.name].light)}}_loadLight(e){let t=this.parser,i="light:"+e,r=t.cache.get(i);if(r)return r;let s=t.json,l=((s.extensions&&s.extensions[this.name]||{}).lights||[])[e],c,u=new qe(16777215);l.color!==void 0&&u.setRGB(l.color[0],l.color[1],l.color[2],Vs);let d=l.range!==void 0?l.range:0;switch(l.type){case"directional":c=new zc(u),c.target.position.set(0,0,-1),c.add(c.target);break;case"point":c=new Ug(u),c.distance=d;break;case"spot":c=new kg(u),c.distance=d,l.spot=l.spot||{},l.spot.innerConeAngle=l.spot.innerConeAngle!==void 0?l.spot.innerConeAngle:0,l.spot.outerConeAngle=l.spot.outerConeAngle!==void 0?l.spot.outerConeAngle:Math.PI/4,c.angle=l.spot.outerConeAngle,c.penumbra=1-l.spot.innerConeAngle/l.spot.outerConeAngle,c.target.position.set(0,0,-1),c.add(c.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+l.type)}return c.position.set(0,0,0),c.decay=2,Bs(c,l),l.intensity!==void 0&&(c.intensity=l.intensity),c.name=t.createUniqueName(l.name||"light_"+e),r=Promise.resolve(c),t.cache.add(i,r),r}getDependency(e,t){if(e==="light")return this._loadLight(t)}createNodeAttachment(e){let t=this,i=this.parser,s=i.json.nodes[e],a=(s.extensions&&s.extensions[this.name]||{}).light;return a===void 0?null:this._loadLight(a).then(function(l){return i._getNodeRef(t.cache,a,l)})}},fw=class{constructor(){this.name=Et.KHR_MATERIALS_UNLIT}getMaterialType(){return Kr}extendParams(e,t,i){let r=[];e.color=new qe(1,1,1),e.opacity=1;let s=t.pbrMetallicRoughness;if(s){if(Array.isArray(s.baseColorFactor)){let o=s.baseColorFactor;e.color.setRGB(o[0],o[1],o[2],Vs),e.opacity=o[3]}s.baseColorTexture!==void 0&&r.push(i.assignTexture(e,"map",s.baseColorTexture,Za))}return Promise.all(r)}},pw=class{constructor(e){this.parser=e,this.name=Et.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,t){let r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();let s=r.extensions[this.name].emissiveStrength;return s!==void 0&&(t.emissiveIntensity=s),Promise.resolve()}},mw=class{constructor(e){this.parser=e,this.name=Et.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){let i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Bi}extendMaterialParams(e,t){let i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();let s=[],o=r.extensions[this.name];if(o.clearcoatFactor!==void 0&&(t.clearcoat=o.clearcoatFactor),o.clearcoatTexture!==void 0&&s.push(i.assignTexture(t,"clearcoatMap",o.clearcoatTexture)),o.clearcoatRoughnessFactor!==void 0&&(t.clearcoatRoughness=o.clearcoatRoughnessFactor),o.clearcoatRoughnessTexture!==void 0&&s.push(i.assignTexture(t,"clearcoatRoughnessMap",o.clearcoatRoughnessTexture)),o.clearcoatNormalTexture!==void 0&&(s.push(i.assignTexture(t,"clearcoatNormalMap",o.clearcoatNormalTexture)),o.clearcoatNormalTexture.scale!==void 0)){let a=o.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new Ye(a,a)}return Promise.all(s)}},gw=class{constructor(e){this.parser=e,this.name=Et.KHR_MATERIALS_DISPERSION}getMaterialType(e){let i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Bi}extendMaterialParams(e,t){let r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();let s=r.extensions[this.name];return t.dispersion=s.dispersion!==void 0?s.dispersion:0,Promise.resolve()}},yw=class{constructor(e){this.parser=e,this.name=Et.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){let i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Bi}extendMaterialParams(e,t){let i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();let s=[],o=r.extensions[this.name];return o.iridescenceFactor!==void 0&&(t.iridescence=o.iridescenceFactor),o.iridescenceTexture!==void 0&&s.push(i.assignTexture(t,"iridescenceMap",o.iridescenceTexture)),o.iridescenceIor!==void 0&&(t.iridescenceIOR=o.iridescenceIor),t.iridescenceThicknessRange===void 0&&(t.iridescenceThicknessRange=[100,400]),o.iridescenceThicknessMinimum!==void 0&&(t.iridescenceThicknessRange[0]=o.iridescenceThicknessMinimum),o.iridescenceThicknessMaximum!==void 0&&(t.iridescenceThicknessRange[1]=o.iridescenceThicknessMaximum),o.iridescenceThicknessTexture!==void 0&&s.push(i.assignTexture(t,"iridescenceThicknessMap",o.iridescenceThicknessTexture)),Promise.all(s)}},vw=class{constructor(e){this.parser=e,this.name=Et.KHR_MATERIALS_SHEEN}getMaterialType(e){let i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Bi}extendMaterialParams(e,t){let i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();let s=[];t.sheenColor=new qe(0,0,0),t.sheenRoughness=0,t.sheen=1;let o=r.extensions[this.name];if(o.sheenColorFactor!==void 0){let a=o.sheenColorFactor;t.sheenColor.setRGB(a[0],a[1],a[2],Vs)}return o.sheenRoughnessFactor!==void 0&&(t.sheenRoughness=o.sheenRoughnessFactor),o.sheenColorTexture!==void 0&&s.push(i.assignTexture(t,"sheenColorMap",o.sheenColorTexture,Za)),o.sheenRoughnessTexture!==void 0&&s.push(i.assignTexture(t,"sheenRoughnessMap",o.sheenRoughnessTexture)),Promise.all(s)}},_w=class{constructor(e){this.parser=e,this.name=Et.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){let i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Bi}extendMaterialParams(e,t){let i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();let s=[],o=r.extensions[this.name];return o.transmissionFactor!==void 0&&(t.transmission=o.transmissionFactor),o.transmissionTexture!==void 0&&s.push(i.assignTexture(t,"transmissionMap",o.transmissionTexture)),Promise.all(s)}},xw=class{constructor(e){this.parser=e,this.name=Et.KHR_MATERIALS_VOLUME}getMaterialType(e){let i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Bi}extendMaterialParams(e,t){let i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();let s=[],o=r.extensions[this.name];t.thickness=o.thicknessFactor!==void 0?o.thicknessFactor:0,o.thicknessTexture!==void 0&&s.push(i.assignTexture(t,"thicknessMap",o.thicknessTexture)),t.attenuationDistance=o.attenuationDistance||1/0;let a=o.attenuationColor||[1,1,1];return t.attenuationColor=new qe().setRGB(a[0],a[1],a[2],Vs),Promise.all(s)}},Ew=class{constructor(e){this.parser=e,this.name=Et.KHR_MATERIALS_IOR}getMaterialType(e){let i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Bi}extendMaterialParams(e,t){let r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();let s=r.extensions[this.name];return t.ior=s.ior!==void 0?s.ior:1.5,Promise.resolve()}},Mw=class{constructor(e){this.parser=e,this.name=Et.KHR_MATERIALS_SPECULAR}getMaterialType(e){let i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Bi}extendMaterialParams(e,t){let i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();let s=[],o=r.extensions[this.name];t.specularIntensity=o.specularFactor!==void 0?o.specularFactor:1,o.specularTexture!==void 0&&s.push(i.assignTexture(t,"specularIntensityMap",o.specularTexture));let a=o.specularColorFactor||[1,1,1];return t.specularColor=new qe().setRGB(a[0],a[1],a[2],Vs),o.specularColorTexture!==void 0&&s.push(i.assignTexture(t,"specularColorMap",o.specularColorTexture,Za)),Promise.all(s)}},ww=class{constructor(e){this.parser=e,this.name=Et.EXT_MATERIALS_BUMP}getMaterialType(e){let i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Bi}extendMaterialParams(e,t){let i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();let s=[],o=r.extensions[this.name];return t.bumpScale=o.bumpFactor!==void 0?o.bumpFactor:1,o.bumpTexture!==void 0&&s.push(i.assignTexture(t,"bumpMap",o.bumpTexture)),Promise.all(s)}},bw=class{constructor(e){this.parser=e,this.name=Et.KHR_MATERIALS_ANISOTROPY}getMaterialType(e){let i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Bi}extendMaterialParams(e,t){let i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();let s=[],o=r.extensions[this.name];return o.anisotropyStrength!==void 0&&(t.anisotropy=o.anisotropyStrength),o.anisotropyRotation!==void 0&&(t.anisotropyRotation=o.anisotropyRotation),o.anisotropyTexture!==void 0&&s.push(i.assignTexture(t,"anisotropyMap",o.anisotropyTexture)),Promise.all(s)}},Sw=class{constructor(e){this.parser=e,this.name=Et.KHR_TEXTURE_BASISU}loadTexture(e){let t=this.parser,i=t.json,r=i.textures[e];if(!r.extensions||!r.extensions[this.name])return null;let s=r.extensions[this.name],o=t.options.ktx2Loader;if(!o){if(i.extensionsRequired&&i.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,s.source,o)}},Tw=class{constructor(e){this.parser=e,this.name=Et.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){let t=this.name,i=this.parser,r=i.json,s=r.textures[e];if(!s.extensions||!s.extensions[t])return null;let o=s.extensions[t],a=r.images[o.source],l=i.textureLoader;if(a.uri){let c=i.options.manager.getHandler(a.uri);c!==null&&(l=c)}return this.detectSupport().then(function(c){if(c)return i.loadTextureImage(e,o.source,l);if(r.extensionsRequired&&r.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return i.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){let t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}},Cw=class{constructor(e){this.parser=e,this.name=Et.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(e){let t=this.name,i=this.parser,r=i.json,s=r.textures[e];if(!s.extensions||!s.extensions[t])return null;let o=s.extensions[t],a=r.images[o.source],l=i.textureLoader;if(a.uri){let c=i.options.manager.getHandler(a.uri);c!==null&&(l=c)}return this.detectSupport().then(function(c){if(c)return i.loadTextureImage(e,o.source,l);if(r.extensionsRequired&&r.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return i.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){let t=new Image;t.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}},Aw=class{constructor(e){this.name=Et.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){let t=this.parser.json,i=t.bufferViews[e];if(i.extensions&&i.extensions[this.name]){let r=i.extensions[this.name],s=this.parser.getDependency("buffer",r.buffer),o=this.parser.options.meshoptDecoder;if(!o||!o.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return s.then(function(a){let l=r.byteOffset||0,c=r.byteLength||0,u=r.count,d=r.byteStride,h=new Uint8Array(a,l,c);return o.decodeGltfBufferAsync?o.decodeGltfBufferAsync(u,d,h,r.mode,r.filter).then(function(f){return f.buffer}):o.ready.then(function(){let f=new ArrayBuffer(u*d);return o.decodeGltfBuffer(new Uint8Array(f),u,d,h,r.mode,r.filter),f})})}else return null}},Iw=class{constructor(e){this.name=Et.EXT_MESH_GPU_INSTANCING,this.parser=e}createNodeMesh(e){let t=this.parser.json,i=t.nodes[e];if(!i.extensions||!i.extensions[this.name]||i.mesh===void 0)return null;let r=t.meshes[i.mesh];for(let c of r.primitives)if(c.mode!==lr.TRIANGLES&&c.mode!==lr.TRIANGLE_STRIP&&c.mode!==lr.TRIANGLE_FAN&&c.mode!==void 0)return null;let o=i.extensions[this.name].attributes,a=[],l={};for(let c in o)a.push(this.parser.getDependency("accessor",o[c]).then(u=>(l[c]=u,l[c])));return a.length<1?null:(a.push(this.parser.createNodeMesh(e)),Promise.all(a).then(c=>{let u=c.pop(),d=u.isGroup?u.children:[u],h=c[0].count,f=[];for(let p of d){let y=new lt,g=new N,m=new pi,x=new N(1,1,1),M=new Ag(p.geometry,p.material,h);for(let v=0;v<h;v++)l.TRANSLATION&&g.fromBufferAttribute(l.TRANSLATION,v),l.ROTATION&&m.fromBufferAttribute(l.ROTATION,v),l.SCALE&&x.fromBufferAttribute(l.SCALE,v),M.setMatrixAt(v,y.compose(g,m,x));for(let v in l)if(v==="_COLOR_0"){let S=l[v];M.instanceColor=new kc(S.array,S.itemSize,S.normalized)}else v!=="TRANSLATION"&&v!=="ROTATION"&&v!=="SCALE"&&p.geometry.setAttribute(v,l[v]);Un.prototype.copy.call(M,p),this.parser.assignFinalMaterial(M),f.push(M)}return u.isGroup?(u.clear(),u.add(...f),u):f[0]}))}},hO="glTF",hh=12,lO={JSON:1313821514,BIN:5130562},Dw=class{constructor(e){this.name=Et.KHR_BINARY_GLTF,this.content=null,this.body=null;let t=new DataView(e,0,hh);if(this.header={magic:dh(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==hO)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");let i=this.header.length-hh,r=new DataView(e,hh),s=0;for(;s<i;){let o=r.getUint32(s,!0);s+=4;let a=r.getUint32(s,!0);if(s+=4,a===lO.JSON){let l=new Uint8Array(e,hh+s,o);this.content=dh(l)}else if(a===lO.BIN){let l=hh+s;this.body=e.slice(l,l+o)}s+=o}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}},Rw=class{constructor(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=Et.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(e,t){let i=this.json,r=this.dracoLoader,s=e.extensions[this.name].bufferView,o=e.extensions[this.name].attributes,a={},l={},c={};for(let u in o){let d=Lw[u]||u.toLowerCase();a[d]=o[u]}for(let u in e.attributes){let d=Lw[u]||u.toLowerCase();if(o[u]!==void 0){let h=i.accessors[e.attributes[u]],f=Wc[h.componentType];c[d]=f.name,l[d]=h.normalized===!0}}return t.getDependency("bufferView",s).then(function(u){return new Promise(function(d,h){r.decodeDracoFile(u,function(f){for(let p in f.attributes){let y=f.attributes[p],g=l[p];g!==void 0&&(y.normalized=g)}d(f)},a,c,Vs,h)})})}},Pw=class{constructor(){this.name=Et.KHR_TEXTURE_TRANSFORM}extendTexture(e,t){return(t.texCoord===void 0||t.texCoord===e.channel)&&t.offset===void 0&&t.rotation===void 0&&t.scale===void 0||(e=e.clone(),t.texCoord!==void 0&&(e.channel=t.texCoord),t.offset!==void 0&&e.offset.fromArray(t.offset),t.rotation!==void 0&&(e.rotation=t.rotation),t.scale!==void 0&&e.repeat.fromArray(t.scale),e.needsUpdate=!0),e}},Nw=class{constructor(){this.name=Et.KHR_MESH_QUANTIZATION}},$g=class extends Lo{constructor(e,t,i,r){super(e,t,i,r)}copySampleValue_(e){let t=this.resultBuffer,i=this.sampleValues,r=this.valueSize,s=e*r*3+r;for(let o=0;o!==r;o++)t[o]=i[s+o];return t}interpolate_(e,t,i,r){let s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=a*2,c=a*3,u=r-t,d=(i-t)/u,h=d*d,f=h*d,p=e*c,y=p-c,g=-2*f+3*h,m=f-h,x=1-g,M=m-h+d;for(let v=0;v!==a;v++){let S=o[y+v+a],T=o[y+v+l]*u,A=o[p+v+a],I=o[p+v]*u;s[v]=x*S+M*T+g*A+m*I}return s}},I9=new pi,Ow=class extends $g{interpolate_(e,t,i,r){let s=super.interpolate_(e,t,i,r);return I9.fromArray(s).normalize().toArray(s),s}},lr={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},Wc={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},cO={9728:ei,9729:Fi,9984:ZM,9985:jd,9986:Mc,9987:Xr},uO={33071:Rs,33648:qd,10497:ja},cw={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},Lw=vt(me({POSITION:"position",NORMAL:"normal",TANGENT:"tangent"},rO>=152?{TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3"}:{TEXCOORD_0:"uv",TEXCOORD_1:"uv2"}),{COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"}),Bo={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},D9={CUBICSPLINE:void 0,LINEAR:Oc,STEP:Nc},uw={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function R9(n){return n.DefaultMaterial===void 0&&(n.DefaultMaterial=new Bc({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:Yr})),n.DefaultMaterial}function Ya(n,e,t){for(let i in t.extensions)n[i]===void 0&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[i]=t.extensions[i])}function Bs(n,e){e.extras!==void 0&&(typeof e.extras=="object"?Object.assign(n.userData,e.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+e.extras))}function P9(n,e,t){let i=!1,r=!1,s=!1;for(let c=0,u=e.length;c<u;c++){let d=e[c];if(d.POSITION!==void 0&&(i=!0),d.NORMAL!==void 0&&(r=!0),d.COLOR_0!==void 0&&(s=!0),i&&r&&s)break}if(!i&&!r&&!s)return Promise.resolve(n);let o=[],a=[],l=[];for(let c=0,u=e.length;c<u;c++){let d=e[c];if(i){let h=d.POSITION!==void 0?t.getDependency("accessor",d.POSITION):n.attributes.position;o.push(h)}if(r){let h=d.NORMAL!==void 0?t.getDependency("accessor",d.NORMAL):n.attributes.normal;a.push(h)}if(s){let h=d.COLOR_0!==void 0?t.getDependency("accessor",d.COLOR_0):n.attributes.color;l.push(h)}}return Promise.all([Promise.all(o),Promise.all(a),Promise.all(l)]).then(function(c){let u=c[0],d=c[1],h=c[2];return i&&(n.morphAttributes.position=u),r&&(n.morphAttributes.normal=d),s&&(n.morphAttributes.color=h),n.morphTargetsRelative=!0,n})}function N9(n,e){if(n.updateMorphTargets(),e.weights!==void 0)for(let t=0,i=e.weights.length;t<i;t++)n.morphTargetInfluences[t]=e.weights[t];if(e.extras&&Array.isArray(e.extras.targetNames)){let t=e.extras.targetNames;if(n.morphTargetInfluences.length===t.length){n.morphTargetDictionary={};for(let i=0,r=t.length;i<r;i++)n.morphTargetDictionary[t[i]]=i}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function O9(n){let e,t=n.extensions&&n.extensions[Et.KHR_DRACO_MESH_COMPRESSION];if(t?e="draco:"+t.bufferView+":"+t.indices+":"+dw(t.attributes):e=n.indices+":"+dw(n.attributes)+":"+n.mode,n.targets!==void 0)for(let i=0,r=n.targets.length;i<r;i++)e+=":"+dw(n.targets[i]);return e}function dw(n){let e="",t=Object.keys(n).sort();for(let i=0,r=t.length;i<r;i++)e+=t[i]+":"+n[t[i]]+";";return e}function Fw(n){switch(n){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function L9(n){return n.search(/\.jpe?g($|\?)/i)>0||n.search(/^data\:image\/jpeg/)===0?"image/jpeg":n.search(/\.webp($|\?)/i)>0||n.search(/^data\:image\/webp/)===0?"image/webp":"image/png"}var F9=new lt,kw=class{constructor(e={},t={}){this.json=e,this.extensions={},this.plugins={},this.options=t,this.cache=new A9,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let i=!1,r=!1,s=-1;typeof navigator<"u"&&typeof navigator.userAgent<"u"&&(i=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)===!0,r=navigator.userAgent.indexOf("Firefox")>-1,s=r?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1),typeof createImageBitmap>"u"||i||r&&s<98?this.textureLoader=new Fg(this.options.manager):this.textureLoader=new Vg(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new rh(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,t){let i=this,r=this.json,s=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(o){return o._markDefs&&o._markDefs()}),Promise.all(this._invokeAll(function(o){return o.beforeRoot&&o.beforeRoot()})).then(function(){return Promise.all([i.getDependencies("scene"),i.getDependencies("animation"),i.getDependencies("camera")])}).then(function(o){let a={scene:o[0][r.scene||0],scenes:o[0],animations:o[1],cameras:o[2],asset:r.asset,parser:i,userData:{}};return Ya(s,a,r),Bs(a,r),Promise.all(i._invokeAll(function(l){return l.afterRoot&&l.afterRoot(a)})).then(function(){for(let l of a.scenes)l.updateMatrixWorld();e(a)})}).catch(t)}_markDefs(){let e=this.json.nodes||[],t=this.json.skins||[],i=this.json.meshes||[];for(let r=0,s=t.length;r<s;r++){let o=t[r].joints;for(let a=0,l=o.length;a<l;a++)e[o[a]].isBone=!0}for(let r=0,s=e.length;r<s;r++){let o=e[r];o.mesh!==void 0&&(this._addNodeRef(this.meshCache,o.mesh),o.skin!==void 0&&(i[o.mesh].isSkinnedMesh=!0)),o.camera!==void 0&&this._addNodeRef(this.cameraCache,o.camera)}}_addNodeRef(e,t){t!==void 0&&(e.refs[t]===void 0&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}_getNodeRef(e,t,i){if(e.refs[t]<=1)return i;let r=i.clone(),s=(o,a)=>{let l=this.associations.get(o);l!=null&&this.associations.set(a,l);for(let[c,u]of o.children.entries())s(u,a.children[c])};return s(i,r),r.name+="_instance_"+e.uses[t]++,r}_invokeOne(e){let t=Object.values(this.plugins);t.push(this);for(let i=0;i<t.length;i++){let r=e(t[i]);if(r)return r}return null}_invokeAll(e){let t=Object.values(this.plugins);t.unshift(this);let i=[];for(let r=0;r<t.length;r++){let s=e(t[r]);s&&i.push(s)}return i}getDependency(e,t){let i=e+":"+t,r=this.cache.get(i);if(!r){switch(e){case"scene":r=this.loadScene(t);break;case"node":r=this._invokeOne(function(s){return s.loadNode&&s.loadNode(t)});break;case"mesh":r=this._invokeOne(function(s){return s.loadMesh&&s.loadMesh(t)});break;case"accessor":r=this.loadAccessor(t);break;case"bufferView":r=this._invokeOne(function(s){return s.loadBufferView&&s.loadBufferView(t)});break;case"buffer":r=this.loadBuffer(t);break;case"material":r=this._invokeOne(function(s){return s.loadMaterial&&s.loadMaterial(t)});break;case"texture":r=this._invokeOne(function(s){return s.loadTexture&&s.loadTexture(t)});break;case"skin":r=this.loadSkin(t);break;case"animation":r=this._invokeOne(function(s){return s.loadAnimation&&s.loadAnimation(t)});break;case"camera":r=this.loadCamera(t);break;default:if(r=this._invokeOne(function(s){return s!=this&&s.getDependency&&s.getDependency(e,t)}),!r)throw new Error("Unknown type: "+e);break}this.cache.add(i,r)}return r}getDependencies(e){let t=this.cache.get(e);if(!t){let i=this,r=this.json[e+(e==="mesh"?"es":"s")]||[];t=Promise.all(r.map(function(s,o){return i.getDependency(e,o)})),this.cache.add(e,t)}return t}loadBuffer(e){let t=this.json.buffers[e],i=this.fileLoader;if(t.type&&t.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(t.uri===void 0&&e===0)return Promise.resolve(this.extensions[Et.KHR_BINARY_GLTF].body);let r=this.options;return new Promise(function(s,o){i.load(Uo.resolveURL(t.uri,r.path),s,void 0,function(){o(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))})})}loadBufferView(e){let t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then(function(i){let r=t.byteLength||0,s=t.byteOffset||0;return i.slice(s,s+r)})}loadAccessor(e){let t=this,i=this.json,r=this.json.accessors[e];if(r.bufferView===void 0&&r.sparse===void 0){let o=cw[r.type],a=Wc[r.componentType],l=r.normalized===!0,c=new a(r.count*o);return Promise.resolve(new wn(c,o,l))}let s=[];return r.bufferView!==void 0?s.push(this.getDependency("bufferView",r.bufferView)):s.push(null),r.sparse!==void 0&&(s.push(this.getDependency("bufferView",r.sparse.indices.bufferView)),s.push(this.getDependency("bufferView",r.sparse.values.bufferView))),Promise.all(s).then(function(o){let a=o[0],l=cw[r.type],c=Wc[r.componentType],u=c.BYTES_PER_ELEMENT,d=u*l,h=r.byteOffset||0,f=r.bufferView!==void 0?i.bufferViews[r.bufferView].byteStride:void 0,p=r.normalized===!0,y,g;if(f&&f!==d){let m=Math.floor(h/f),x="InterleavedBuffer:"+r.bufferView+":"+r.componentType+":"+m+":"+r.count,M=t.cache.get(x);M||(y=new c(a,m*f,r.count*f/u),M=new Qd(y,f/u),t.cache.add(x,M)),g=new eh(M,l,h%f/u,p)}else a===null?y=new c(r.count*l):y=new c(a,h,r.count*l),g=new wn(y,l,p);if(r.sparse!==void 0){let m=cw.SCALAR,x=Wc[r.sparse.indices.componentType],M=r.sparse.indices.byteOffset||0,v=r.sparse.values.byteOffset||0,S=new x(o[1],M,r.sparse.count*m),T=new c(o[2],v,r.sparse.count*l);a!==null&&(g=new wn(g.array.slice(),g.itemSize,g.normalized));for(let A=0,I=S.length;A<I;A++){let w=S[A];if(g.setX(w,T[A*l]),l>=2&&g.setY(w,T[A*l+1]),l>=3&&g.setZ(w,T[A*l+2]),l>=4&&g.setW(w,T[A*l+3]),l>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return g})}loadTexture(e){let t=this.json,i=this.options,s=t.textures[e].source,o=t.images[s],a=this.textureLoader;if(o.uri){let l=i.manager.getHandler(o.uri);l!==null&&(a=l)}return this.loadTextureImage(e,s,a)}loadTextureImage(e,t,i){let r=this,s=this.json,o=s.textures[e],a=s.images[t],l=(a.uri||a.bufferView)+":"+o.sampler;if(this.textureCache[l])return this.textureCache[l];let c=this.loadImageSource(t,i).then(function(u){u.flipY=!1,u.name=o.name||a.name||"",u.name===""&&typeof a.uri=="string"&&a.uri.startsWith("data:image/")===!1&&(u.name=a.uri);let h=(s.samplers||{})[o.sampler]||{};return u.magFilter=cO[h.magFilter]||Fi,u.minFilter=cO[h.minFilter]||Xr,u.wrapS=uO[h.wrapS]||ja,u.wrapT=uO[h.wrapT]||ja,r.associations.set(u,{textures:e}),u}).catch(function(){return null});return this.textureCache[l]=c,c}loadImageSource(e,t){let i=this,r=this.json,s=this.options;if(this.sourceCache[e]!==void 0)return this.sourceCache[e].then(d=>d.clone());let o=r.images[e],a=self.URL||self.webkitURL,l=o.uri||"",c=!1;if(o.bufferView!==void 0)l=i.getDependency("bufferView",o.bufferView).then(function(d){c=!0;let h=new Blob([d],{type:o.mimeType});return l=a.createObjectURL(h),l});else if(o.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");let u=Promise.resolve(l).then(function(d){return new Promise(function(h,f){let p=h;t.isImageBitmapLoader===!0&&(p=function(y){let g=new ar(y);g.needsUpdate=!0,h(g)}),t.load(Uo.resolveURL(d,s.path),p,void 0,f)})}).then(function(d){return c===!0&&a.revokeObjectURL(l),Bs(d,o),d.userData.mimeType=o.mimeType||L9(o.uri),d}).catch(function(d){throw console.error("THREE.GLTFLoader: Couldn't load texture",l),d});return this.sourceCache[e]=u,u}assignTexture(e,t,i,r){let s=this;return this.getDependency("texture",i.index).then(function(o){if(!o)return null;if(i.texCoord!==void 0&&i.texCoord>0&&(o=o.clone(),o.channel=i.texCoord),s.extensions[Et.KHR_TEXTURE_TRANSFORM]){let a=i.extensions!==void 0?i.extensions[Et.KHR_TEXTURE_TRANSFORM]:void 0;if(a){let l=s.associations.get(o);o=s.extensions[Et.KHR_TEXTURE_TRANSFORM].extendTexture(o,a),s.associations.set(o,l)}}return r!==void 0&&(typeof r=="number"&&(r=r===aO?Za:Vs),"colorSpace"in o?o.colorSpace=r:o.encoding=r===Za?aO:C9),e[t]=o,o})}assignFinalMaterial(e){let t=e.geometry,i=e.material,r=t.attributes.tangent===void 0,s=t.attributes.color!==void 0,o=t.attributes.normal===void 0;if(e.isPoints){let a="PointsMaterial:"+i.uuid,l=this.cache.get(a);l||(l=new ih,Ui.prototype.copy.call(l,i),l.color.copy(i.color),l.map=i.map,l.sizeAttenuation=!1,this.cache.add(a,l)),i=l}else if(e.isLine){let a="LineBasicMaterial:"+i.uuid,l=this.cache.get(a);l||(l=new nh,Ui.prototype.copy.call(l,i),l.color.copy(i.color),l.map=i.map,this.cache.add(a,l)),i=l}if(r||s||o){let a="ClonedMaterial:"+i.uuid+":";r&&(a+="derivative-tangents:"),s&&(a+="vertex-colors:"),o&&(a+="flat-shading:");let l=this.cache.get(a);l||(l=i.clone(),s&&(l.vertexColors=!0),o&&(l.flatShading=!0),r&&(l.normalScale&&(l.normalScale.y*=-1),l.clearcoatNormalScale&&(l.clearcoatNormalScale.y*=-1)),this.cache.add(a,l),this.associations.set(l,this.associations.get(i))),i=l}e.material=i}getMaterialType(){return Bc}loadMaterial(e){let t=this,i=this.json,r=this.extensions,s=i.materials[e],o,a={},l=s.extensions||{},c=[];if(l[Et.KHR_MATERIALS_UNLIT]){let d=r[Et.KHR_MATERIALS_UNLIT];o=d.getMaterialType(),c.push(d.extendParams(a,s,t))}else{let d=s.pbrMetallicRoughness||{};if(a.color=new qe(1,1,1),a.opacity=1,Array.isArray(d.baseColorFactor)){let h=d.baseColorFactor;a.color.setRGB(h[0],h[1],h[2],Vs),a.opacity=h[3]}d.baseColorTexture!==void 0&&c.push(t.assignTexture(a,"map",d.baseColorTexture,Za)),a.metalness=d.metallicFactor!==void 0?d.metallicFactor:1,a.roughness=d.roughnessFactor!==void 0?d.roughnessFactor:1,d.metallicRoughnessTexture!==void 0&&(c.push(t.assignTexture(a,"metalnessMap",d.metallicRoughnessTexture)),c.push(t.assignTexture(a,"roughnessMap",d.metallicRoughnessTexture))),o=this._invokeOne(function(h){return h.getMaterialType&&h.getMaterialType(e)}),c.push(Promise.all(this._invokeAll(function(h){return h.extendMaterialParams&&h.extendMaterialParams(e,a)})))}s.doubleSided===!0&&(a.side=Cr);let u=s.alphaMode||uw.OPAQUE;if(u===uw.BLEND?(a.transparent=!0,a.depthWrite=!1):(a.transparent=!1,u===uw.MASK&&(a.alphaTest=s.alphaCutoff!==void 0?s.alphaCutoff:.5)),s.normalTexture!==void 0&&o!==Kr&&(c.push(t.assignTexture(a,"normalMap",s.normalTexture)),a.normalScale=new Ye(1,1),s.normalTexture.scale!==void 0)){let d=s.normalTexture.scale;a.normalScale.set(d,d)}if(s.occlusionTexture!==void 0&&o!==Kr&&(c.push(t.assignTexture(a,"aoMap",s.occlusionTexture)),s.occlusionTexture.strength!==void 0&&(a.aoMapIntensity=s.occlusionTexture.strength)),s.emissiveFactor!==void 0&&o!==Kr){let d=s.emissiveFactor;a.emissive=new qe().setRGB(d[0],d[1],d[2],Vs)}return s.emissiveTexture!==void 0&&o!==Kr&&c.push(t.assignTexture(a,"emissiveMap",s.emissiveTexture,Za)),Promise.all(c).then(function(){let d=new o(a);return s.name&&(d.name=s.name),Bs(d,s),t.associations.set(d,{materials:e}),s.extensions&&Ya(r,d,s),d})}createUniqueName(e){let t=rn.sanitizeNodeName(e||"");return t in this.nodeNamesUsed?t+"_"+ ++this.nodeNamesUsed[t]:(this.nodeNamesUsed[t]=0,t)}loadGeometries(e){let t=this,i=this.extensions,r=this.primitiveCache;function s(a){return i[Et.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(a,t).then(function(l){return dO(l,a,t)})}let o=[];for(let a=0,l=e.length;a<l;a++){let c=e[a],u=O9(c),d=r[u];if(d)o.push(d.promise);else{let h;c.extensions&&c.extensions[Et.KHR_DRACO_MESH_COMPRESSION]?h=s(c):h=dO(new sr,c,t),r[u]={primitive:c,promise:h},o.push(h)}}return Promise.all(o)}loadMesh(e){let t=this,i=this.json,r=this.extensions,s=i.meshes[e],o=s.primitives,a=[];for(let l=0,c=o.length;l<c;l++){let u=o[l].material===void 0?R9(this.cache):this.getDependency("material",o[l].material);a.push(u)}return a.push(t.loadGeometries(o)),Promise.all(a).then(function(l){let c=l.slice(0,l.length-1),u=l[l.length-1],d=[];for(let f=0,p=u.length;f<p;f++){let y=u[f],g=o[f],m,x=c[f];if(g.mode===lr.TRIANGLES||g.mode===lr.TRIANGLE_STRIP||g.mode===lr.TRIANGLE_FAN||g.mode===void 0)m=s.isSkinnedMesh===!0?new Sg(y,x):new $n(y,x),m.isSkinnedMesh===!0&&m.normalizeSkinWeights(),g.mode===lr.TRIANGLE_STRIP?m.geometry=lw(m.geometry,Hg):g.mode===lr.TRIANGLE_FAN&&(m.geometry=lw(m.geometry,ch));else if(g.mode===lr.LINES)m=new Rg(y,x);else if(g.mode===lr.LINE_STRIP)m=new Uc(y,x);else if(g.mode===lr.LINE_LOOP)m=new Pg(y,x);else if(g.mode===lr.POINTS)m=new Ng(y,x);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+g.mode);Object.keys(m.geometry.morphAttributes).length>0&&N9(m,s),m.name=t.createUniqueName(s.name||"mesh_"+e),Bs(m,s),g.extensions&&Ya(r,m,g),t.assignFinalMaterial(m),d.push(m)}for(let f=0,p=d.length;f<p;f++)t.associations.set(d[f],{meshes:e,primitives:f});if(d.length===1)return s.extensions&&Ya(r,d[0],s),d[0];let h=new qr;s.extensions&&Ya(r,h,s),t.associations.set(h,{meshes:e});for(let f=0,p=d.length;f<p;f++)h.add(d[f]);return h})}loadCamera(e){let t,i=this.json.cameras[e],r=i[i.type];if(!r){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return i.type==="perspective"?t=new sn(qN.radToDeg(r.yfov),r.aspectRatio||1,r.znear||1,r.zfar||2e6):i.type==="orthographic"&&(t=new Qr(-r.xmag,r.xmag,r.ymag,-r.ymag,r.znear,r.zfar)),i.name&&(t.name=this.createUniqueName(i.name)),Bs(t,i),Promise.resolve(t)}loadSkin(e){let t=this.json.skins[e],i=[];for(let r=0,s=t.joints.length;r<s;r++)i.push(this._loadNodeShallow(t.joints[r]));return t.inverseBindMatrices!==void 0?i.push(this.getDependency("accessor",t.inverseBindMatrices)):i.push(null),Promise.all(i).then(function(r){let s=r.pop(),o=r,a=[],l=[];for(let c=0,u=o.length;c<u;c++){let d=o[c];if(d){a.push(d);let h=new lt;s!==null&&h.fromArray(s.array,c*16),l.push(h)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',t.joints[c])}return new Cg(a,l)})}loadAnimation(e){let t=this.json,i=this,r=t.animations[e],s=r.name?r.name:"animation_"+e,o=[],a=[],l=[],c=[],u=[];for(let d=0,h=r.channels.length;d<h;d++){let f=r.channels[d],p=r.samplers[f.sampler],y=f.target,g=y.node,m=r.parameters!==void 0?r.parameters[p.input]:p.input,x=r.parameters!==void 0?r.parameters[p.output]:p.output;y.node!==void 0&&(o.push(this.getDependency("node",g)),a.push(this.getDependency("accessor",m)),l.push(this.getDependency("accessor",x)),c.push(p),u.push(y))}return Promise.all([Promise.all(o),Promise.all(a),Promise.all(l),Promise.all(c),Promise.all(u)]).then(function(d){let h=d[0],f=d[1],p=d[2],y=d[3],g=d[4],m=[];for(let x=0,M=h.length;x<M;x++){let v=h[x],S=f[x],T=p[x],A=y[x],I=g[x];if(v===void 0)continue;v.updateMatrix&&v.updateMatrix();let w=i._createAnimationTracks(v,S,T,A,I);if(w)for(let _=0;_<w.length;_++)m.push(w[_])}return new Lg(s,void 0,m)})}createNodeMesh(e){let t=this.json,i=this,r=t.nodes[e];return r.mesh===void 0?null:i.getDependency("mesh",r.mesh).then(function(s){let o=i._getNodeRef(i.meshCache,r.mesh,s);return r.weights!==void 0&&o.traverse(function(a){if(a.isMesh)for(let l=0,c=r.weights.length;l<c;l++)a.morphTargetInfluences[l]=r.weights[l]}),o})}loadNode(e){let t=this.json,i=this,r=t.nodes[e],s=i._loadNodeShallow(e),o=[],a=r.children||[];for(let c=0,u=a.length;c<u;c++)o.push(i.getDependency("node",a[c]));let l=r.skin===void 0?Promise.resolve(null):i.getDependency("skin",r.skin);return Promise.all([s,Promise.all(o),l]).then(function(c){let u=c[0],d=c[1],h=c[2];h!==null&&u.traverse(function(f){f.isSkinnedMesh&&f.bind(h,F9)});for(let f=0,p=d.length;f<p;f++)u.add(d[f]);return u})}_loadNodeShallow(e){let t=this.json,i=this.extensions,r=this;if(this.nodeCache[e]!==void 0)return this.nodeCache[e];let s=t.nodes[e],o=s.name?r.createUniqueName(s.name):"",a=[],l=r._invokeOne(function(c){return c.createNodeMesh&&c.createNodeMesh(e)});return l&&a.push(l),s.camera!==void 0&&a.push(r.getDependency("camera",s.camera).then(function(c){return r._getNodeRef(r.cameraCache,s.camera,c)})),r._invokeAll(function(c){return c.createNodeAttachment&&c.createNodeAttachment(e)}).forEach(function(c){a.push(c)}),this.nodeCache[e]=Promise.all(a).then(function(c){let u;if(s.isBone===!0?u=new th:c.length>1?u=new qr:c.length===1?u=c[0]:u=new Un,u!==c[0])for(let d=0,h=c.length;d<h;d++)u.add(c[d]);if(s.name&&(u.userData.name=s.name,u.name=o),Bs(u,s),s.extensions&&Ya(i,u,s),s.matrix!==void 0){let d=new lt;d.fromArray(s.matrix),u.applyMatrix4(d)}else s.translation!==void 0&&u.position.fromArray(s.translation),s.rotation!==void 0&&u.quaternion.fromArray(s.rotation),s.scale!==void 0&&u.scale.fromArray(s.scale);return r.associations.has(u)||r.associations.set(u,{}),r.associations.get(u).nodes=e,u}),this.nodeCache[e]}loadScene(e){let t=this.extensions,i=this.json.scenes[e],r=this,s=new qr;i.name&&(s.name=r.createUniqueName(i.name)),Bs(s,i),i.extensions&&Ya(t,s,i);let o=i.nodes||[],a=[];for(let l=0,c=o.length;l<c;l++)a.push(r.getDependency("node",o[l]));return Promise.all(a).then(function(l){for(let u=0,d=l.length;u<d;u++)s.add(l[u]);let c=u=>{let d=new Map;for(let[h,f]of r.associations)(h instanceof Ui||h instanceof ar)&&d.set(h,f);return u.traverse(h=>{let f=r.associations.get(h);f!=null&&d.set(h,f)}),d};return r.associations=c(s),s})}_createAnimationTracks(e,t,i,r,s){let o=[],a=e.name?e.name:e.uuid,l=[];Bo[s.path]===Bo.weights?e.traverse(function(h){h.morphTargetInfluences&&l.push(h.name?h.name:h.uuid)}):l.push(a);let c;switch(Bo[s.path]){case Bo.weights:c=Fs;break;case Bo.rotation:c=ks;break;case Bo.position:case Bo.scale:c=Us;break;default:switch(i.itemSize){case 1:c=Fs;break;case 2:case 3:default:c=Us;break}break}let u=r.interpolation!==void 0?D9[r.interpolation]:Oc,d=this._getArrayFromAccessor(i);for(let h=0,f=l.length;h<f;h++){let p=new c(l[h]+"."+Bo[s.path],t.array,d,u);r.interpolation==="CUBICSPLINE"&&this._createCubicSplineTrackInterpolant(p),o.push(p)}return o}_getArrayFromAccessor(e){let t=e.array;if(e.normalized){let i=Fw(t.constructor),r=new Float32Array(t.length);for(let s=0,o=t.length;s<o;s++)r[s]=t[s]*i;t=r}return t}_createCubicSplineTrackInterpolant(e){e.createInterpolant=function(i){let r=this instanceof ks?Ow:$g;return new r(this.times,this.values,this.getValueSize()/3,i)},e.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0}};function k9(n,e,t){let i=e.attributes,r=new rr;if(i.POSITION!==void 0){let a=t.json.accessors[i.POSITION],l=a.min,c=a.max;if(l!==void 0&&c!==void 0){if(r.set(new N(l[0],l[1],l[2]),new N(c[0],c[1],c[2])),a.normalized){let u=Fw(Wc[a.componentType]);r.min.multiplyScalar(u),r.max.multiplyScalar(u)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;let s=e.targets;if(s!==void 0){let a=new N,l=new N;for(let c=0,u=s.length;c<u;c++){let d=s[c];if(d.POSITION!==void 0){let h=t.json.accessors[d.POSITION],f=h.min,p=h.max;if(f!==void 0&&p!==void 0){if(l.setX(Math.max(Math.abs(f[0]),Math.abs(p[0]))),l.setY(Math.max(Math.abs(f[1]),Math.abs(p[1]))),l.setZ(Math.max(Math.abs(f[2]),Math.abs(p[2]))),h.normalized){let y=Fw(Wc[h.componentType]);l.multiplyScalar(y)}a.max(l)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}r.expandByVector(a)}n.boundingBox=r;let o=new ki;r.getCenter(o.center),o.radius=r.min.distanceTo(r.max)/2,n.boundingSphere=o}function dO(n,e,t){let i=e.attributes,r=[];function s(o,a){return t.getDependency("accessor",o).then(function(l){n.setAttribute(a,l)})}for(let o in i){let a=Lw[o]||o.toLowerCase();a in n.attributes||r.push(s(i[o],a))}if(e.indices!==void 0&&!n.index){let o=t.getDependency("accessor",e.indices).then(function(a){n.setIndex(a)});r.push(o)}return Bs(n,e),k9(n,e,t),Promise.all(r).then(function(){return e.targets!==void 0?P9(n,e.targets,t):n})}var U9=["glbContainer"],Xg=class n{constructor(e){this.renderer2=e}glbContainer;renderer;animationFrameId;scene;camera;controls;ngAfterViewInit(){typeof window<"u"&&this.glbContainer&&this.initThreeJS()}ngOnDestroy(){this.animationFrameId&&cancelAnimationFrame(this.animationFrameId),this.renderer&&this.renderer.dispose()}initThreeJS(){let e=this.glbContainer.nativeElement.clientWidth,t=this.glbContainer.nativeElement.clientHeight;this.scene=new bg,this.scene.background=new qe(16316922),this.camera=new sn(75,e/t,.1,1e3),this.camera.position.z=5,this.renderer=new wg,this.renderer.setSize(e,t),this.glbContainer.nativeElement.appendChild(this.renderer.domElement);let i=new zc(16777215,1);i.position.set(1,1,1).normalize(),this.scene.add(i);let r=new Bg(4210752);this.scene.add(r),new fh().load("ThreeJs/final_house.glb",o=>{let a=o.scene;this.scene.add(a),a.position.set(-.1,-.3,0),a.scale.set(.1,.1,.1)},void 0,o=>{console.error("An error happened while loading the GLB model:",o)}),this.controls=new uh(this.camera,this.renderer.domElement),this.controls.enableDamping=!0,this.controls.dampingFactor=.25,this.controls.screenSpacePanning=!1,this.controls.minDistance=1,this.controls.maxDistance=100,this.controls.maxPolarAngle=Math.PI/2,this.camera.position.set(2,0,1),this.animate()}animate(){this.animationFrameId=requestAnimationFrame(()=>this.animate()),this.controls.update(),this.renderer.render(this.scene,this.camera)}static \u0275fac=function(t){return new(t||n)(xt(Ji))};static \u0275cmp=pn({type:n,selectors:[["app-glb-viewer"]],viewQuery:function(t,i){if(t&1&&u1(U9,7),t&2){let r;Y0(r=Z0())&&(i.glbContainer=r.first)}},decls:2,vars:0,consts:[["glbContainer",""],[1,"glb-container"]],template:function(t,i){t&1&&tt(0,"div",1,0)},dependencies:[Er],styles:[".glb-container[_ngcontent-%COMP%]{width:100%;height:100%;position:relative}"]})};var zs={_origin:"https://api.emailjs.com"};var fO=(n,e="https://api.emailjs.com")=>{zs._userID=n,zs._origin=e};var qg=(n,e,t)=>{if(!n)throw"The user ID is required. Visit https://dashboard.emailjs.com/admin/integration";if(!e)throw"The service ID is required. Visit https://dashboard.emailjs.com/admin";if(!t)throw"The template ID is required. Visit https://dashboard.emailjs.com/admin/templates";return!0};var ph=class{constructor(e){this.status=e.status,this.text=e.responseText}};var Yg=(n,e,t={})=>new Promise((i,r)=>{let s=new XMLHttpRequest;s.addEventListener("load",({target:o})=>{let a=new ph(o);a.status===200||a.text==="OK"?i(a):r(a)}),s.addEventListener("error",({target:o})=>{r(new ph(o))}),s.open("POST",zs._origin+n,!0),Object.keys(t).forEach(o=>{s.setRequestHeader(o,t[o])}),s.send(e)});var pO=(n,e,t,i)=>{let r=i||zs._userID;return qg(r,n,e),Yg("/api/v1.0/email/send",JSON.stringify({lib_version:"3.2.0",user_id:r,service_id:n,template_id:e,template_params:t}),{"Content-type":"application/json"})};var B9=n=>{let e;if(typeof n=="string"?e=document.querySelector(n):e=n,!e||e.nodeName!=="FORM")throw"The 3rd parameter is expected to be the HTML form element or the style selector of form";return e},mO=(n,e,t,i)=>{let r=i||zs._userID,s=B9(t);qg(r,n,e);let o=new FormData(s);return o.append("lib_version","3.2.0"),o.append("service_id",n),o.append("template_id",e),o.append("user_id",r),Yg("/api/v1.0/email/send-form",o)};var gO={init:fO,send:pO,sendForm:mO};function V9(n,e){n&1&&(Y(0,"div",26),tt(1,"app-glb-viewer"),Q())}function z9(n,e){n&1&&(Y(0,"div",27),tt(1,"img",28),Q())}var Zg=class n{isImg=!1;is3DHouse=!0;formData={name:"",email:"",phone:"",address:"",service:""};isBrowser;constructor(){this.isBrowser=typeof window<"u"}ngOnInit(){this.isBrowser&&(this.checkWindowSize(),window.addEventListener("resize",this.checkWindowSize))}ngOnDestroy(){this.isBrowser&&window.removeEventListener("resize",this.checkWindowSize)}checkWindowSize=()=>{this.isBrowser&&window.innerWidth<=750&&(this.isImg=!0,this.is3DHouse=!1)};onSubmit(e){e.preventDefault();let t=/^[^\s@]+@[^\s@]+\.[^\s@]+$/,i=/^\(\d{3}\) \d{3}-\d{4}$/;if(this.formData.name.trim()===""){alert("Please enter your name.");return}if(!t.test(this.formData.email)){alert("Please enter a valid email address.");return}if(!i.test(this.formData.phone)){alert("Please enter a valid phone number.");return}if(this.formData.address.trim()===""){alert("Please enter your address.");return}if(this.formData.service.trim()===""){alert("Please enter the service.");return}this.sendEmail(e)}sendEmail(e){e.preventDefault();let t={to_name:this.formData.name,from_name:this.formData.email,message:`Phone: ${this.formData.phone}
Address: ${this.formData.address}
Service: ${this.formData.service}`};gO.send("service_2fe41s6","template_ops2zhd",t,"NLp8B7MBBxfBdH-bU").then(i=>{alert("Form submitted successfully!"),console.log(i.text)},i=>{alert("An error occurred, Please try again"),console.log(i.text)})}formatPhoneNumber(e){let t=e.target.value.replace(/\D/g,"");t.length>10&&(t=t.substring(0,10));let i=t.substring(0,3),r=t.substring(3,6),s=t.substring(6,10);t.length>6?e.target.value=`(${i}) ${r}-${s}`:t.length>3?e.target.value=`(${i}) ${r}`:t.length>0&&(e.target.value=`(${i}`),this.formData.phone=e.target.value}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=pn({type:n,selectors:[["app-form"]],decls:45,vars:7,consts:[["id","form-section",1,"containerForms","navbar-light","bg-light"],["style","overflow: hidden;",4,"ngIf"],["class","containerIMG",4,"ngIf"],[3,"ngSubmit"],[1,"text-center","mb-5",2,"font-family","'Bebas Neue', sans-serif"],[1,"mb-3"],["for","name",1,"form-label"],["type","text","id","name","name","name","aria-describedby","nameHelp","placeholder","Enter your name",1,"form-control",3,"ngModelChange","ngModel"],["for","email",1,"form-label"],["type","email","id","email","name","email","aria-describedby","emailHelp","placeholder","Enter your email",1,"form-control",3,"ngModelChange","ngModel"],["id","emailHelp",1,"form-text"],["for","phone",1,"form-label"],["type","text","id","phone","name","phone","placeholder","Enter your phone number",1,"form-control",3,"ngModelChange","input","ngModel"],["for","address",1,"form-label"],["type","text","id","address","name","address","placeholder","Enter your address",1,"form-control",3,"ngModelChange","ngModel"],["for","service",1,"form-label"],["id","service","name","service",1,"form-control",3,"ngModelChange","ngModel"],["value","","disabled","","selected",""],["value","cabinets"],["value","decks"],["value","paintings"],["value","sidings"],["value","stairs"],["value","windows-door"],["value","roofing-replace"],["type","submit",1,"btn","btn-primary",2,"background-color","#3db1c0","border","#3db1c0"],[2,"overflow","hidden"],[1,"containerIMG"],["src","img/depoimento.png",2,"width","80%"]],template:function(t,i){t&1&&(Y(0,"div",0),Ln(1,V9,2,0,"div",1)(2,z9,2,0,"div",2),Y(3,"form",3),At("ngSubmit",function(s){return i.onSubmit(s)}),Y(4,"h2",4),he(5,"Request Free Estimate"),Q(),Y(6,"div",5)(7,"label",6),he(8,"Name"),Q(),Y(9,"input",7),Ta("ngModelChange",function(s){return jl(i.formData.name,s)||(i.formData.name=s),s}),Q()(),Y(10,"div",5)(11,"label",8),he(12,"Email"),Q(),Y(13,"input",9),Ta("ngModelChange",function(s){return jl(i.formData.email,s)||(i.formData.email=s),s}),Q(),tt(14,"div",10),Q(),Y(15,"div",5)(16,"label",11),he(17,"Phone"),Q(),Y(18,"input",12),Ta("ngModelChange",function(s){return jl(i.formData.phone,s)||(i.formData.phone=s),s}),At("input",function(s){return i.formatPhoneNumber(s)}),Q()(),Y(19,"div",5)(20,"label",13),he(21,"Address"),Q(),Y(22,"input",14),Ta("ngModelChange",function(s){return jl(i.formData.address,s)||(i.formData.address=s),s}),Q()(),Y(23,"div",5)(24,"label",15),he(25,"Service"),Q(),Y(26,"select",16),Ta("ngModelChange",function(s){return jl(i.formData.service,s)||(i.formData.service=s),s}),Y(27,"option",17),he(28,"Select a service"),Q(),Y(29,"option",18),he(30,"Cabinets"),Q(),Y(31,"option",19),he(32,"Decks"),Q(),Y(33,"option",20),he(34,"Paintings"),Q(),Y(35,"option",21),he(36,"Sidings"),Q(),Y(37,"option",22),he(38,"Stairs"),Q(),Y(39,"option",23),he(40,"Windows & Door"),Q(),Y(41,"option",24),he(42,"Roofing\xA0Replace"),Q()()(),Y(43,"button",25),he(44,"Submit"),Q()()()),t&2&&(et(),Zt("ngIf",i.is3DHouse),et(),Zt("ngIf",i.isImg),et(7),Sa("ngModel",i.formData.name),et(4),Sa("ngModel",i.formData.email),et(5),Sa("ngModel",i.formData.phone),et(4),Sa("ngModel",i.formData.address),et(4),Sa("ngModel",i.formData.service))},dependencies:[Er,$l,fP,lP,uP,hP,Rm,Nm,tP,nP,sE,rE,Xg],styles:[".containerForms[_ngcontent-%COMP%]{display:flex;flex-direction:row;width:100%;height:auto;padding:40px 20px 100px}.containerForms[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child{width:50%}.containerForms[_ngcontent-%COMP%]   .containerIMG[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;margin:50px 0}.containerForms[_ngcontent-%COMP%] > form[_ngcontent-%COMP%]:nth-child(2){width:50%}@media screen and (max-width: 768px){.containerForms[_ngcontent-%COMP%]{flex-direction:column}.containerForms[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child{width:100%}.containerForms[_ngcontent-%COMP%] > form[_ngcontent-%COMP%]:nth-child(2){width:100%}}"]})};var Kg=class n{static \u0275fac=function(t){return new(t||n)};static \u0275cmp=pn({type:n,selectors:[["app-footer"]],decls:80,vars:0,consts:[["href","sms:+1 (857) 707-2631","target","_blank",1,"message-float"],[1,"fas","fa-sms"],["id","footer-section",1,"site-footer"],[1,"container"],[1,"row"],[1,"col-sm-12","col-md-6"],[1,"text-justify"],[2,"color","#fff","text-decoration","none"],["href","mailto:clcontracting1010@outlook.com",2,"color","#fff","text-decoration","none"],["href","tel:+18577072631",2,"color","#fff","text-decoration","none"],[1,"col-xs-6","col-md-3"],[1,"footer-links"],[1,"col-xs-6","col-md-3",2,"display","none"],["href","https://scanfcode.com/about/"],["href","https://scanfcode.com/contact/"],["href","https://scanfcode.com/contribute-at-scanfcode/"],["href","https://scanfcode.com/privacy-policy/"],["href","https://scanfcode.com/sitemap/"],[1,"col-md-8","col-sm-6","col-xs-12"],[1,"copyright-text"],["href","#"],[1,"col-md-4","col-sm-6","col-xs-12",2,"display","none"],[1,"social-icons"],["href","#",1,"facebook"],[1,"fa","fa-facebook"],["href","#",1,"twitter"],[1,"fa","fa-twitter"],["href","#",1,"dribbble"],[1,"fa","fa-dribbble"],["href","#",1,"linkedin"],[1,"fa","fa-linkedin"]],template:function(t,i){t&1&&(Y(0,"a",0),tt(1,"i",1),Q(),Y(2,"footer",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"h6"),he(7,"About"),Q(),Y(8,"p",6),he(9,"About CL Contracting At CL Contracting, we specialize in high-quality carpentry services with over five years of experience. Since 2019, we have been proudly serving the Boston area and its surroundings, providing a range of expert services that include:. Our team is committed to delivering exceptional craftsmanship and outstanding customer satisfaction. Whether you're remodeling your home or completing a new construction project, we ensure every detail is handled with care and precision. Feel free to get in touch with us through our contact form, email, phone, or via WhatsApp. We look forward to bringing your vision to life!"),Q(),Y(10,"p",7)(11,"strong"),he(12,"E-mail:"),Q(),Y(13,"a",8),he(14,"clcontracting1010@outlook.com"),Q()(),Y(15,"p",7)(16,"strong"),he(17,"Phone:"),Q(),Y(18,"a",9),he(19,"+1 (857) 707-2631"),Q()()(),Y(20,"div",10)(21,"h6"),he(22,"Services"),Q(),Y(23,"ul",11)(24,"li"),he(25,"Custom Cabinets"),Q(),Y(26,"li"),he(27,"Decks"),Q(),Y(28,"li"),he(29,"Paintings"),Q(),Y(30,"li"),he(31,"Siding Installation"),Q(),Y(32,"li"),he(33,"Stairs"),Q(),Y(34,"li"),he(35,"Windows & Doors"),Q(),Y(36,"li"),he(37,"Roofing\xA0Replace"),Q()()(),Y(38,"div",12)(39,"h6"),he(40,"Quick Links"),Q(),Y(41,"ul",11)(42,"li")(43,"a",13),he(44,"About Us"),Q()(),Y(45,"li")(46,"a",14),he(47,"Contact Us"),Q()(),Y(48,"li")(49,"a",15),he(50,"Contribute"),Q()(),Y(51,"li")(52,"a",16),he(53,"Privacy Policy"),Q()(),Y(54,"li")(55,"a",17),he(56,"Sitemap"),Q()()()()(),tt(57,"hr"),Q(),Y(58,"div",3)(59,"div",4)(60,"div",18)(61,"p",19),he(62,"Copyright \xA9 2024 All Rights Reserved by "),Y(63,"a",20),he(64,"Contracting .Inc"),Q(),he(65,". "),Q()(),Y(66,"div",21)(67,"ul",22)(68,"li")(69,"a",23),tt(70,"i",24),Q()(),Y(71,"li")(72,"a",25),tt(73,"i",26),Q()(),Y(74,"li")(75,"a",27),tt(76,"i",28),Q()(),Y(77,"li")(78,"a",29),tt(79,"i",30),Q()()()()()()())},styles:[".message-float[_ngcontent-%COMP%]{position:fixed;width:60px;height:60px;bottom:40px;right:40px;background-color:#fff;border-radius:50px;text-align:center;font-size:30px;box-shadow:2px 2px 3px #999;z-index:1000}.message-float[_ngcontent-%COMP%] > i[_ngcontent-%COMP%]{margin-top:15px}.whatsapp-float[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-top:16px}.site-footer[_ngcontent-%COMP%]{background-color:#3db1c0;padding:45px 0 20px;font-size:15px;line-height:24px;color:#ffffffa6}.site-footer[_ngcontent-%COMP%]   hr[_ngcontent-%COMP%]{border-top-color:#bbb;opacity:.5}.site-footer[_ngcontent-%COMP%]   hr.small[_ngcontent-%COMP%]{margin:20px 0}.site-footer[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{color:#fff;font-size:16px;text-transform:uppercase;margin-top:5px;letter-spacing:2px}.site-footer[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#ffffffa6}.site-footer[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#36c;text-decoration:none}.footer-links[_ngcontent-%COMP%]{padding-left:0;list-style:none}.footer-links[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:block}.footer-links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#ffffffa6}.footer-links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:active, .footer-links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:focus, .footer-links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#36c;text-decoration:none}.footer-links.inline[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:inline-block}.site-footer[_ngcontent-%COMP%]   .social-icons[_ngcontent-%COMP%]{text-align:right}.site-footer[_ngcontent-%COMP%]   .social-icons[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{width:40px;height:40px;line-height:40px;margin-left:6px;margin-right:0;border-radius:100%;background-color:#33353d}.copyright-text[_ngcontent-%COMP%]{margin:0}@media (max-width: 991px){.site-footer[_ngcontent-%COMP%]   [class^=col-][_ngcontent-%COMP%]{margin-bottom:30px}}@media (max-width: 767px){.site-footer[_ngcontent-%COMP%]{padding-bottom:0}.site-footer[_ngcontent-%COMP%]   .copyright-text[_ngcontent-%COMP%], .site-footer[_ngcontent-%COMP%]   .social-icons[_ngcontent-%COMP%]{text-align:center}}.social-icons[_ngcontent-%COMP%]{padding-left:0;margin-bottom:0;list-style:none}.social-icons[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:inline-block;margin-bottom:4px}.social-icons[_ngcontent-%COMP%]   li.title[_ngcontent-%COMP%]{margin-right:15px;text-transform:uppercase;color:#96a2b2;font-weight:700;font-size:13px}.social-icons[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{background-color:#eceeef;color:#818a91;font-size:16px;display:inline-block;line-height:44px;width:44px;height:44px;text-align:center;margin-right:8px;border-radius:100%;-webkit-transition:all .2s linear;-o-transition:all .2s linear;transition:all .2s linear}.social-icons[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:active, .social-icons[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:focus, .social-icons[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#fff;background-color:#29aafe}.social-icons.size-sm[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{line-height:34px;height:34px;width:34px;font-size:14px}.social-icons[_ngcontent-%COMP%]   a.facebook[_ngcontent-%COMP%]:hover{background-color:#3b5998}.social-icons[_ngcontent-%COMP%]   a.twitter[_ngcontent-%COMP%]:hover{background-color:#00aced}.social-icons[_ngcontent-%COMP%]   a.linkedin[_ngcontent-%COMP%]:hover{background-color:#007bb6}.social-icons[_ngcontent-%COMP%]   a.dribbble[_ngcontent-%COMP%]:hover{background-color:#ea4c89}@media (max-width: 767px){.social-icons[_ngcontent-%COMP%]   li.title[_ngcontent-%COMP%]{display:block;margin-right:0;font-weight:600}}"]})};var Uw=class{constructor(e){this.propagationStopped,this.defaultPrevented,this.type=e,this.target=null}preventDefault(){this.defaultPrevented=!0}stopPropagation(){this.propagationStopped=!0}};var Xn=Uw;var Hs={PROPERTYCHANGE:"propertychange"};var Bw=class{constructor(){this.disposed=!1}dispose(){this.disposed||(this.disposed=!0,this.disposeInternal())}disposeInternal(){}},Vo=Bw;function Ka(n,e){return n>e?1:n<e?-1:0}function $c(n,e,t){if(n[0]<=e)return 0;let i=n.length;if(e<=n[i-1])return i-1;if(typeof t=="function"){for(let r=1;r<i;++r){let s=n[r];if(s===e)return r;if(s<e)return t(e,n[r-1],s)>0?r-1:r}return i-1}if(t>0){for(let r=1;r<i;++r)if(n[r]<e)return r-1;return i-1}if(t<0){for(let r=1;r<i;++r)if(n[r]<=e)return r;return i-1}for(let r=1;r<i;++r){if(n[r]==e)return r;if(n[r]<e)return n[r-1]-e<e-n[r]?r-1:r}return i-1}function yO(n,e){let t=Array.isArray(e)?e:[e],i=t.length;for(let r=0;r<i;r++)n[n.length]=t[r]}function zo(n,e){let t=n.length;if(t!==e.length)return!1;for(let i=0;i<t;i++)if(n[i]!==e[i])return!1;return!0}function vO(n,e,t){let i=e||Ka;return n.every(function(r,s){if(s===0)return!0;let o=i(n[s-1],r);return!(o>0||t&&o===0)})}function Ja(){return!0}function Gs(){return!1}function Qa(){}function _O(n){let e,t,i;return function(){let r=Array.prototype.slice.call(arguments);return(!t||this!==i||!zo(r,t))&&(i=this,t=r,e=n.apply(this,arguments)),e}}function xO(n){function e(){let t;try{t=n()}catch(i){return Promise.reject(i)}return t instanceof Promise?t:Promise.resolve(t)}return e()}function es(n){for(let e in n)delete n[e]}function Jg(n){let e;for(e in n)return!1;return!e}var Vw=class extends Vo{constructor(e){super(),this.eventTarget_=e,this.pendingRemovals_=null,this.dispatching_=null,this.listeners_=null}addEventListener(e,t){if(!e||!t)return;let i=this.listeners_||(this.listeners_={}),r=i[e]||(i[e]=[]);r.includes(t)||r.push(t)}dispatchEvent(e){let t=typeof e=="string",i=t?e:e.type,r=this.listeners_&&this.listeners_[i];if(!r)return;let s=t?new Xn(e):e;s.target||(s.target=this.eventTarget_||this);let o=this.dispatching_||(this.dispatching_={}),a=this.pendingRemovals_||(this.pendingRemovals_={});i in o||(o[i]=0,a[i]=0),++o[i];let l;for(let c=0,u=r.length;c<u;++c)if("handleEvent"in r[c]?l=r[c].handleEvent(s):l=r[c].call(this,s),l===!1||s.propagationStopped){l=!1;break}if(--o[i]===0){let c=a[i];for(delete a[i];c--;)this.removeEventListener(i,Qa);delete o[i]}return l}disposeInternal(){this.listeners_&&es(this.listeners_)}getListeners(e){return this.listeners_&&this.listeners_[e]||void 0}hasListener(e){return this.listeners_?e?e in this.listeners_:Object.keys(this.listeners_).length>0:!1}removeEventListener(e,t){if(!this.listeners_)return;let i=this.listeners_[e];if(!i)return;let r=i.indexOf(t);r!==-1&&(this.pendingRemovals_&&e in this.pendingRemovals_?(i[r]=Qa,++this.pendingRemovals_[e]):(i.splice(r,1),i.length===0&&delete this.listeners_[e]))}},Ho=Vw;var Te={CHANGE:"change",ERROR:"error",BLUR:"blur",CLEAR:"clear",CONTEXTMENU:"contextmenu",CLICK:"click",DBLCLICK:"dblclick",DRAGENTER:"dragenter",DRAGOVER:"dragover",DROP:"drop",FOCUS:"focus",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",RESIZE:"resize",TOUCHMOVE:"touchmove",WHEEL:"wheel"};function yt(n,e,t,i,r){if(r){let o=t;t=function(){n.removeEventListener(e,t),o.apply(i??this,arguments)}}else i&&i!==n&&(t=t.bind(i));let s={target:n,type:e,listener:t};return n.addEventListener(e,t),s}function Xc(n,e,t,i){return yt(n,e,t,i,!0)}function Nt(n){n&&n.target&&(n.target.removeEventListener(n.type,n.listener),es(n))}var qc=class extends Ho{constructor(){super(),this.on=this.onInternal,this.once=this.onceInternal,this.un=this.unInternal,this.revision_=0}changed(){++this.revision_,this.dispatchEvent(Te.CHANGE)}getRevision(){return this.revision_}onInternal(e,t){if(Array.isArray(e)){let i=e.length,r=new Array(i);for(let s=0;s<i;++s)r[s]=yt(this,e[s],t);return r}return yt(this,e,t)}onceInternal(e,t){let i;if(Array.isArray(e)){let r=e.length;i=new Array(r);for(let s=0;s<r;++s)i[s]=Xc(this,e[s],t)}else i=Xc(this,e,t);return t.ol_key=i,i}unInternal(e,t){let i=t.ol_key;if(i)H9(i);else if(Array.isArray(e))for(let r=0,s=e.length;r<s;++r)this.removeEventListener(e[r],t);else this.removeEventListener(e,t)}};qc.prototype.on;qc.prototype.once;qc.prototype.un;function H9(n){if(Array.isArray(n))for(let e=0,t=n.length;e<t;++e)Nt(n[e]);else Nt(n)}var Qg=qc;function ft(){throw new Error("Unimplemented abstract method.")}var G9=0;function en(n){return n.ol_uid||(n.ol_uid=String(++G9))}var ey=class extends Xn{constructor(e,t,i){super(e),this.key=t,this.oldValue=i}},zw=class extends Qg{constructor(e){super(),this.on,this.once,this.un,en(this),this.values_=null,e!==void 0&&this.setProperties(e)}get(e){let t;return this.values_&&this.values_.hasOwnProperty(e)&&(t=this.values_[e]),t}getKeys(){return this.values_&&Object.keys(this.values_)||[]}getProperties(){return this.values_&&Object.assign({},this.values_)||{}}getPropertiesInternal(){return this.values_}hasProperties(){return!!this.values_}notify(e,t){let i;i=`change:${e}`,this.hasListener(i)&&this.dispatchEvent(new ey(i,e,t)),i=Hs.PROPERTYCHANGE,this.hasListener(i)&&this.dispatchEvent(new ey(i,e,t))}addChangeListener(e,t){this.addEventListener(`change:${e}`,t)}removeChangeListener(e,t){this.removeEventListener(`change:${e}`,t)}set(e,t,i){let r=this.values_||(this.values_={});if(i)r[e]=t;else{let s=r[e];r[e]=t,s!==t&&this.notify(e,s)}}setProperties(e,t){for(let i in e)this.set(i,e[i],t)}applyProperties(e){e.values_&&Object.assign(this.values_||(this.values_={}),e.values_)}unset(e,t){if(this.values_&&e in this.values_){let i=this.values_[e];delete this.values_[e],Jg(this.values_)&&(this.values_=null),t||this.notify(e,i)}}},Dn=zw;var ti={ADD:"add",REMOVE:"remove"};var EO={LENGTH:"length"},Yc=class extends Xn{constructor(e,t,i){super(e),this.element=t,this.index=i}},Hw=class extends Dn{constructor(e,t){if(super(),this.on,this.once,this.un,t=t||{},this.unique_=!!t.unique,this.array_=e||[],this.unique_)for(let i=0,r=this.array_.length;i<r;++i)this.assertUnique_(this.array_[i],i);this.updateLength_()}clear(){for(;this.getLength()>0;)this.pop()}extend(e){for(let t=0,i=e.length;t<i;++t)this.push(e[t]);return this}forEach(e){let t=this.array_;for(let i=0,r=t.length;i<r;++i)e(t[i],i,t)}getArray(){return this.array_}item(e){return this.array_[e]}getLength(){return this.get(EO.LENGTH)}insertAt(e,t){if(e<0||e>this.getLength())throw new Error("Index out of bounds: "+e);this.unique_&&this.assertUnique_(t),this.array_.splice(e,0,t),this.updateLength_(),this.dispatchEvent(new Yc(ti.ADD,t,e))}pop(){return this.removeAt(this.getLength()-1)}push(e){this.unique_&&this.assertUnique_(e);let t=this.getLength();return this.insertAt(t,e),this.getLength()}remove(e){let t=this.array_;for(let i=0,r=t.length;i<r;++i)if(t[i]===e)return this.removeAt(i)}removeAt(e){if(e<0||e>=this.getLength())return;let t=this.array_[e];return this.array_.splice(e,1),this.updateLength_(),this.dispatchEvent(new Yc(ti.REMOVE,t,e)),t}setAt(e,t){let i=this.getLength();if(e>=i){this.insertAt(e,t);return}if(e<0)throw new Error("Index out of bounds: "+e);this.unique_&&this.assertUnique_(t,e);let r=this.array_[e];this.array_[e]=t,this.dispatchEvent(new Yc(ti.REMOVE,r,e)),this.dispatchEvent(new Yc(ti.ADD,t,e))}updateLength_(){this.set(EO.LENGTH,this.array_.length)}assertUnique_(e,t){for(let i=0,r=this.array_.length;i<r;++i)if(this.array_[i]===e&&i!==t)throw new Error("Duplicate item added to a unique collection")}},Vi=Hw;var Ut={OPACITY:"opacity",VISIBLE:"visible",EXTENT:"extent",Z_INDEX:"zIndex",MAX_RESOLUTION:"maxResolution",MIN_RESOLUTION:"minResolution",MAX_ZOOM:"maxZoom",MIN_ZOOM:"minZoom",SOURCE:"source",MAP:"map"};function pt(n,e){if(!n)throw new Error(e)}function Wt(n,e,t){return Math.min(Math.max(n,e),t)}function MO(n,e,t,i,r,s){let o=r-t,a=s-i;if(o!==0||a!==0){let l=((n-t)*o+(e-i)*a)/(o*o+a*a);l>1?(t=r,i=s):l>0&&(t+=o*l,i+=a*l)}return js(n,e,t,i)}function js(n,e,t,i){let r=t-n,s=i-e;return r*r+s*s}function wO(n){let e=n.length;for(let i=0;i<e;i++){let r=i,s=Math.abs(n[i][i]);for(let a=i+1;a<e;a++){let l=Math.abs(n[a][i]);l>s&&(s=l,r=a)}if(s===0)return null;let o=n[r];n[r]=n[i],n[i]=o;for(let a=i+1;a<e;a++){let l=-n[a][i]/n[i][i];for(let c=i;c<e+1;c++)i==c?n[a][c]=0:n[a][c]+=l*n[i][c]}}let t=new Array(e);for(let i=e-1;i>=0;i--){t[i]=n[i][e]/n[i][i];for(let r=i-1;r>=0;r--)n[r][e]-=n[r][i]*t[i]}return t}function ty(n){return n*180/Math.PI}function Rr(n){return n*Math.PI/180}function Ws(n,e){let t=n%e;return t*e<0?t+e:t}function bO(n,e,t){return n+t*(e-n)}function SO(n,e){let t=Math.pow(10,e);return Math.round(n*t)/t}function mh(n,e){return Math.floor(SO(n,e))}function gh(n,e){return Math.ceil(SO(n,e))}function ny(n,e,t){if(n>=e&&n<t)return n;let i=t-e;return((n-e)%i+i)%i+e}var Gw=class extends Dn{constructor(e){super(),this.on,this.once,this.un,this.background_=e.background;let t=Object.assign({},e);typeof e.properties=="object"&&(delete t.properties,Object.assign(t,e.properties)),t[Ut.OPACITY]=e.opacity!==void 0?e.opacity:1,pt(typeof t[Ut.OPACITY]=="number","Layer opacity must be a number"),t[Ut.VISIBLE]=e.visible!==void 0?e.visible:!0,t[Ut.Z_INDEX]=e.zIndex,t[Ut.MAX_RESOLUTION]=e.maxResolution!==void 0?e.maxResolution:1/0,t[Ut.MIN_RESOLUTION]=e.minResolution!==void 0?e.minResolution:0,t[Ut.MIN_ZOOM]=e.minZoom!==void 0?e.minZoom:-1/0,t[Ut.MAX_ZOOM]=e.maxZoom!==void 0?e.maxZoom:1/0,this.className_=t.className!==void 0?t.className:"ol-layer",delete t.className,this.setProperties(t),this.state_=null}getBackground(){return this.background_}getClassName(){return this.className_}getLayerState(e){let t=this.state_||{layer:this,managed:e===void 0?!0:e},i=this.getZIndex();return t.opacity=Wt(Math.round(this.getOpacity()*100)/100,0,1),t.visible=this.getVisible(),t.extent=this.getExtent(),t.zIndex=i===void 0&&!t.managed?1/0:i,t.maxResolution=this.getMaxResolution(),t.minResolution=Math.max(this.getMinResolution(),0),t.minZoom=this.getMinZoom(),t.maxZoom=this.getMaxZoom(),this.state_=t,t}getLayersArray(e){return ft()}getLayerStatesArray(e){return ft()}getExtent(){return this.get(Ut.EXTENT)}getMaxResolution(){return this.get(Ut.MAX_RESOLUTION)}getMinResolution(){return this.get(Ut.MIN_RESOLUTION)}getMinZoom(){return this.get(Ut.MIN_ZOOM)}getMaxZoom(){return this.get(Ut.MAX_ZOOM)}getOpacity(){return this.get(Ut.OPACITY)}getSourceState(){return ft()}getVisible(){return this.get(Ut.VISIBLE)}getZIndex(){return this.get(Ut.Z_INDEX)}setBackground(e){this.background_=e,this.changed()}setExtent(e){this.set(Ut.EXTENT,e)}setMaxResolution(e){this.set(Ut.MAX_RESOLUTION,e)}setMinResolution(e){this.set(Ut.MIN_RESOLUTION,e)}setMaxZoom(e){this.set(Ut.MAX_ZOOM,e)}setMinZoom(e){this.set(Ut.MIN_ZOOM,e)}setOpacity(e){pt(typeof e=="number","Layer opacity must be a number"),this.set(Ut.OPACITY,e)}setVisible(e){this.set(Ut.VISIBLE,e)}setZIndex(e){this.set(Ut.Z_INDEX,e)}disposeInternal(){this.state_&&(this.state_.layer=null,this.state_=null),super.disposeInternal()}},iy=Gw;var mi={PRERENDER:"prerender",POSTRENDER:"postrender",PRECOMPOSE:"precompose",POSTCOMPOSE:"postcompose",RENDERCOMPLETE:"rendercomplete"};var gi={ANIMATING:0,INTERACTING:1};var cr={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"};var $s={radians:6370997/(2*Math.PI),degrees:2*Math.PI*6370997/360,ft:.3048,m:1,"us-ft":1200/3937};var jw=class{constructor(e){this.code_=e.code,this.units_=e.units,this.extent_=e.extent!==void 0?e.extent:null,this.worldExtent_=e.worldExtent!==void 0?e.worldExtent:null,this.axisOrientation_=e.axisOrientation!==void 0?e.axisOrientation:"enu",this.global_=e.global!==void 0?e.global:!1,this.canWrapX_=!!(this.global_&&this.extent_),this.getPointResolutionFunc_=e.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=e.metersPerUnit}canWrapX(){return this.canWrapX_}getCode(){return this.code_}getExtent(){return this.extent_}getUnits(){return this.units_}getMetersPerUnit(){return this.metersPerUnit_||$s[this.units_]}getWorldExtent(){return this.worldExtent_}getAxisOrientation(){return this.axisOrientation_}isGlobal(){return this.global_}setGlobal(e){this.global_=e,this.canWrapX_=!!(e&&this.extent_)}getDefaultTileGrid(){return this.defaultTileGrid_}setDefaultTileGrid(e){this.defaultTileGrid_=e}setExtent(e){this.extent_=e,this.canWrapX_=!!(this.global_&&e)}setWorldExtent(e){this.worldExtent_=e}setGetPointResolution(e){this.getPointResolutionFunc_=e}getPointResolutionFunc(){return this.getPointResolutionFunc_}},Zc=jw;var yh=6378137,Kc=Math.PI*yh,j9=[-Kc,-Kc,Kc,Kc],W9=[-180,-85,180,85],ry=yh*Math.log(Math.tan(Math.PI/2)),Go=class extends Zc{constructor(e){super({code:e,units:"m",extent:j9,global:!0,worldExtent:W9,getPointResolution:function(t,i){return t/Math.cosh(i[1]/yh)}})}},Ww=[new Go("EPSG:3857"),new Go("EPSG:102100"),new Go("EPSG:102113"),new Go("EPSG:900913"),new Go("http://www.opengis.net/def/crs/EPSG/0/3857"),new Go("http://www.opengis.net/gml/srs/epsg.xml#3857")];function TO(n,e,t,i){let r=n.length;t=t>1?t:2,i=i??t,e===void 0&&(t>2?e=n.slice():e=new Array(r));for(let s=0;s<r;s+=i){e[s]=Kc*n[s]/180;let o=yh*Math.log(Math.tan(Math.PI*(+n[s+1]+90)/360));o>ry?o=ry:o<-ry&&(o=-ry),e[s+1]=o}return e}function CO(n,e,t,i){let r=n.length;t=t>1?t:2,i=i??t,e===void 0&&(t>2?e=n.slice():e=new Array(r));for(let s=0;s<r;s+=i)e[s]=180*n[s]/Kc,e[s+1]=360*Math.atan(Math.exp(n[s+1]/yh))/Math.PI-90;return e}var $9=6378137,AO=[-180,-90,180,90],X9=Math.PI*$9/180,Xs=class extends Zc{constructor(e,t){super({code:e,units:"degrees",extent:AO,axisOrientation:t,global:!0,metersPerUnit:X9,worldExtent:AO})}},$w=[new Xs("CRS:84"),new Xs("EPSG:4326","neu"),new Xs("urn:ogc:def:crs:OGC:1.3:CRS84"),new Xs("urn:ogc:def:crs:OGC:2:84"),new Xs("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new Xs("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new Xs("http://www.opengis.net/def/crs/EPSG/0/4326","neu")];var Xw={};function IO(n){return Xw[n]||Xw[n.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null}function DO(n,e){Xw[n]=e}var Jc={};function Qc(n,e,t){let i=n.getCode(),r=e.getCode();i in Jc||(Jc[i]={}),Jc[i][r]=t}function sy(n,e){return n in Jc&&e in Jc[n]?Jc[n][e]:null}var Rn={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16};function qw(n){let e=yi();for(let t=0,i=n.length;t<i;++t)_h(e,n[t]);return e}function q9(n,e,t){let i=Math.min.apply(null,n),r=Math.min.apply(null,e),s=Math.max.apply(null,n),o=Math.max.apply(null,e);return jo(i,r,s,o,t)}function PO(n,e){return e?(e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e):n.slice()}function oy(n,e,t){let i,r;return e<n[0]?i=n[0]-e:n[2]<e?i=e-n[2]:i=0,t<n[1]?r=n[1]-t:n[3]<t?r=t-n[3]:r=0,i*i+r*r}function eu(n,e){return Yw(n,e[0],e[1])}function NO(n,e){return n[0]<=e[0]&&e[2]<=n[2]&&n[1]<=e[1]&&e[3]<=n[3]}function Yw(n,e,t){return n[0]<=e&&e<=n[2]&&n[1]<=t&&t<=n[3]}function RO(n,e){let t=n[0],i=n[1],r=n[2],s=n[3],o=e[0],a=e[1],l=Rn.UNKNOWN;return o<t?l=l|Rn.LEFT:o>r&&(l=l|Rn.RIGHT),a<i?l=l|Rn.BELOW:a>s&&(l=l|Rn.ABOVE),l===Rn.UNKNOWN&&(l=Rn.INTERSECTING),l}function yi(){return[1/0,1/0,-1/0,-1/0]}function jo(n,e,t,i,r){return r?(r[0]=n,r[1]=e,r[2]=t,r[3]=i,r):[n,e,t,i]}function el(n){return jo(1/0,1/0,-1/0,-1/0,n)}function OO(n,e){let t=n[0],i=n[1];return jo(t,i,t,i,e)}function LO(n,e,t,i,r){let s=el(r);return Zw(s,n,e,t,i)}function vh(n,e){return n[0]==e[0]&&n[2]==e[2]&&n[1]==e[1]&&n[3]==e[3]}function ay(n,e){return e[0]<n[0]&&(n[0]=e[0]),e[2]>n[2]&&(n[2]=e[2]),e[1]<n[1]&&(n[1]=e[1]),e[3]>n[3]&&(n[3]=e[3]),n}function _h(n,e){e[0]<n[0]&&(n[0]=e[0]),e[0]>n[2]&&(n[2]=e[0]),e[1]<n[1]&&(n[1]=e[1]),e[1]>n[3]&&(n[3]=e[1])}function Zw(n,e,t,i,r){for(;t<i;t+=r)Y9(n,e[t],e[t+1]);return n}function Y9(n,e,t){n[0]=Math.min(n[0],e),n[1]=Math.min(n[1],t),n[2]=Math.max(n[2],e),n[3]=Math.max(n[3],t)}function ly(n,e){let t;return t=e(tu(n)),t||(t=e(nu(n)),t)||(t=e(iu(n)),t)||(t=e(ii(n)),t)?t:!1}function Wo(n){let e=0;return $o(n)||(e=ct(n)*on(n)),e}function tu(n){return[n[0],n[1]]}function nu(n){return[n[2],n[1]]}function ts(n){return[(n[0]+n[2])/2,(n[1]+n[3])/2]}function FO(n,e){let t;if(e==="bottom-left")t=tu(n);else if(e==="bottom-right")t=nu(n);else if(e==="top-left")t=ii(n);else if(e==="top-right")t=iu(n);else throw new Error("Invalid corner");return t}function xh(n,e,t,i,r){let[s,o,a,l,c,u,d,h]=Z9(n,e,t,i);return jo(Math.min(s,a,c,d),Math.min(o,l,u,h),Math.max(s,a,c,d),Math.max(o,l,u,h),r)}function Z9(n,e,t,i){let r=e*i[0]/2,s=e*i[1]/2,o=Math.cos(t),a=Math.sin(t),l=r*o,c=r*a,u=s*o,d=s*a,h=n[0],f=n[1];return[h-l+d,f-c-u,h-l-d,f-c+u,h+l-d,f+c+u,h+l+d,f+c-u,h-l+d,f-c-u]}function on(n){return n[3]-n[1]}function ni(n,e,t){let i=t||yi();return qs(n,e)?(n[0]>e[0]?i[0]=n[0]:i[0]=e[0],n[1]>e[1]?i[1]=n[1]:i[1]=e[1],n[2]<e[2]?i[2]=n[2]:i[2]=e[2],n[3]<e[3]?i[3]=n[3]:i[3]=e[3]):el(i),i}function ii(n){return[n[0],n[3]]}function iu(n){return[n[2],n[3]]}function ct(n){return n[2]-n[0]}function qs(n,e){return n[0]<=e[2]&&n[2]>=e[0]&&n[1]<=e[3]&&n[3]>=e[1]}function $o(n){return n[2]<n[0]||n[3]<n[1]}function kO(n,e){return e?(e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e):n}function UO(n,e,t){let i=!1,r=RO(n,e),s=RO(n,t);if(r===Rn.INTERSECTING||s===Rn.INTERSECTING)i=!0;else{let o=n[0],a=n[1],l=n[2],c=n[3],u=e[0],d=e[1],h=t[0],f=t[1],p=(f-d)/(h-u),y,g;s&Rn.ABOVE&&!(r&Rn.ABOVE)&&(y=h-(f-c)/p,i=y>=o&&y<=l),!i&&s&Rn.RIGHT&&!(r&Rn.RIGHT)&&(g=f-(h-l)*p,i=g>=a&&g<=c),!i&&s&Rn.BELOW&&!(r&Rn.BELOW)&&(y=h-(f-a)/p,i=y>=o&&y<=l),!i&&s&Rn.LEFT&&!(r&Rn.LEFT)&&(g=f-(h-o)*p,i=g>=a&&g<=c)}return i}function BO(n,e,t,i){if($o(n))return el(t);let r=[];if(i>1){let a=n[2]-n[0],l=n[3]-n[1];for(let c=0;c<i;++c)r.push(n[0]+a*c/i,n[1],n[2],n[1]+l*c/i,n[2]-a*c/i,n[3],n[0],n[3]-l*c/i)}else r=[n[0],n[1],n[2],n[1],n[2],n[3],n[0],n[3]];e(r,r,2);let s=[],o=[];for(let a=0,l=r.length;a<l;a+=2)s.push(r[a]),o.push(r[a+1]);return q9(s,o,t)}function K9(n,e){let t=e.getExtent(),i=ts(n);if(e.canWrapX()&&(i[0]<t[0]||i[0]>=t[2])){let r=ct(t),o=Math.floor((i[0]-t[0])/r)*r;n[0]-=o,n[2]-=o}return n}function cy(n,e,t){if(e.canWrapX()){let i=e.getExtent();if(!isFinite(n[0])||!isFinite(n[2]))return[[i[0],n[1],i[2],n[3]]];K9(n,e);let r=ct(i);if(ct(n)>r&&!t)return[[i[0],n[1],i[2],n[3]]];if(n[0]<i[0])return[[n[0]+r,n[1],i[2],n[3]],[i[0],n[1],n[2],n[3]]];if(n[2]>i[2])return[[n[0],n[1],i[2],n[3]],[i[0],n[1],n[2]-r,n[3]]]}return[n]}function VO(n,e){return n[0]+=+e[0],n[1]+=+e[1],n}function tl(n,e){let t=!0;for(let i=n.length-1;i>=0;--i)if(n[i]!=e[i]){t=!1;break}return t}function ru(n,e){let t=Math.cos(e),i=Math.sin(e),r=n[0]*t-n[1]*i,s=n[1]*t+n[0]*i;return n[0]=r,n[1]=s,n}function zO(n,e){return n[0]*=e,n[1]*=e,n}function HO(n,e){if(e.canWrapX()){let t=ct(e.getExtent()),i=GO(n,e,t);i&&(n[0]-=i*t)}return n}function GO(n,e,t){let i=e.getExtent(),r=0;return e.canWrapX()&&(n[0]<i[0]||n[0]>i[2])&&(t=t||ct(i),r=Math.floor((n[0]-i[0])/t)),r}var J9=63710088e-1;function Kw(n,e,t){t=t||J9;let i=Rr(n[1]),r=Rr(e[1]),s=(r-i)/2,o=Rr(e[0]-n[0])/2,a=Math.sin(s)*Math.sin(s)+Math.sin(o)*Math.sin(o)*Math.cos(i)*Math.cos(r);return 2*t*Math.atan2(Math.sqrt(a),Math.sqrt(1-a))}var uy=.9996,ur=.00669438,hy=ur*ur,fy=hy*ur,nl=ur/(1-ur),jO=Math.sqrt(1-ur),su=(1-jO)/(1+jO),qO=su*su,Jw=qO*su,Qw=Jw*su,YO=Qw*su,ZO=1-ur/4-3*hy/64-5*fy/256,Q9=3*ur/8+3*hy/32+45*fy/1024,eY=15*hy/256+45*fy/1024,tY=35*fy/3072,nY=3/2*su-27/32*Jw+269/512*YO,iY=21/16*qO-55/32*Qw,rY=151/96*Jw-417/128*YO,sY=1097/512*Qw,dy=6378137;function oY(n,e,t){let i=n-5e5,o=(t.north?e:e-1e7)/uy/(dy*ZO),a=o+nY*Math.sin(2*o)+iY*Math.sin(4*o)+rY*Math.sin(6*o)+sY*Math.sin(8*o),l=Math.sin(a),c=l*l,u=Math.cos(a),d=l/u,h=d*d,f=h*h,p=1-ur*c,y=Math.sqrt(1-ur*c),g=dy/y,m=(1-ur)/p,x=nl*u**2,M=x*x,v=i/(g*uy),S=v*v,T=S*v,A=T*v,I=A*v,w=I*v,_=a-d/m*(S/2-A/24*(5+3*h+10*x-4*M-9*nl))+w/720*(61+90*h+298*x+45*f-252*nl-3*M),D=(v-T/6*(1+2*h+x)+I/120*(5-2*x+28*h-3*M+8*nl+24*f))/u;return D=ny(D+Rr(KO(t.number)),-Math.PI,Math.PI),[ty(D),ty(_)]}var WO=-80,$O=84,aY=-180,lY=180;function cY(n,e,t){n=ny(n,aY,lY),e<WO?e=WO:e>$O&&(e=$O);let i=Rr(e),r=Math.sin(i),s=Math.cos(i),o=r/s,a=o*o,l=a*a,c=Rr(n),u=KO(t.number),d=Rr(u),h=dy/Math.sqrt(1-ur*r**2),f=nl*s**2,p=s*ny(c-d,-Math.PI,Math.PI),y=p*p,g=y*p,m=g*p,x=m*p,M=x*p,v=dy*(ZO*i-Q9*Math.sin(2*i)+eY*Math.sin(4*i)-tY*Math.sin(6*i)),S=uy*h*(p+g/6*(1-a+f)+x/120*(5-18*a+l+72*f-58*nl))+5e5,T=uy*(v+h*o*(y/2+m/24*(5-a+9*f+4*f**2)+M/720*(61-58*a+l+600*f-330*nl)));return t.north||(T+=1e7),[S,T]}function KO(n){return(n-1)*6-180+3}var uY=[/^EPSG:(\d+)$/,/^urn:ogc:def:crs:EPSG::(\d+)$/,/^http:\/\/www\.opengis\.net\/def\/crs\/EPSG\/0\/(\d+)$/];function JO(n){let e=0;for(let r of uY){let s=n.match(r);if(s){e=parseInt(s[1]);break}}if(!e)return null;let t=0,i=!1;return e>32700&&e<32761?t=e-32700:e>32600&&e<32661&&(i=!0,t=e-32600),t?{number:t,north:i}:null}function XO(n,e){return function(t,i,r,s){let o=t.length;r=r>1?r:2,s=s??r,i||(r>2?i=t.slice():i=new Array(o));for(let a=0;a<o;a+=s){let l=t[a],c=t[a+1],u=n(l,c,e);i[a]=u[0],i[a+1]=u[1]}return i}}function QO(n){return JO(n)?new Zc({code:n,units:"m"}):null}function eL(n){let e=JO(n.getCode());return e?{forward:XO(cY,e),inverse:XO(oY,e)}:null}var tL={info:1,warn:2,error:3,none:4},dY=tL.info;function py(...n){dY>tL.warn||console.warn(...n)}var hY=[eL],fY=[QO];var tb=!0;function iL(n){tb=!(n===void 0?!0:n)}function ib(n,e){if(e!==void 0){for(let t=0,i=n.length;t<i;++t)e[t]=n[t];e=e}else e=n.slice();return e}function nb(n){DO(n.getCode(),n),Qc(n,n,ib)}function pY(n){n.forEach(nb)}function Bn(n){if(typeof n!="string")return n;let e=IO(n);if(e)return e;for(let t of fY){let i=t(n);if(i)return i}return null}function rb(n,e,t,i){n=Bn(n);let r,s=n.getPointResolutionFunc();if(s){if(r=s(e,t),i&&i!==n.getUnits()){let o=n.getMetersPerUnit();o&&(r=r*o/$s[i])}}else{let o=n.getUnits();if(o=="degrees"&&!i||i=="degrees")r=e;else{let a=sb(n,Bn("EPSG:4326"));if(!a&&o!=="degrees")r=e*n.getMetersPerUnit();else{let c=[t[0]-e/2,t[1],t[0]+e/2,t[1],t[0],t[1]-e/2,t[0],t[1]+e/2];c=a(c,c,2);let u=Kw(c.slice(0,2),c.slice(2,4)),d=Kw(c.slice(4,6),c.slice(6,8));r=(u+d)/2}let l=i?$s[i]:n.getMetersPerUnit();l!==void 0&&(r/=l)}}return r}function nL(n){pY(n),n.forEach(function(e){n.forEach(function(t){e!==t&&Qc(e,t,ib)})})}function mY(n,e,t,i){n.forEach(function(r){e.forEach(function(s){Qc(r,s,t),Qc(s,r,i)})})}function my(n,e){return n?typeof n=="string"?Bn(n):n:Bn(e)}function rL(n){return function(e,t,i,r){let s=e.length;i=i!==void 0?i:2,r=r??i,t=t!==void 0?t:new Array(s);for(let o=0;o<s;o+=r){let a=n(e.slice(o,o+i)),l=a.length;for(let c=0,u=r;c<u;++c)t[o+c]=c>=l?e[o+c]:a[c]}return t}}function gy(n,e){if(n===e)return!0;let t=n.getUnits()===e.getUnits();return(n.getCode()===e.getCode()||sb(n,e)===ib)&&t}function sb(n,e){let t=n.getCode(),i=e.getCode(),r=sy(t,i);if(r)return r;let s=null,o=null;for(let l of hY)s||(s=l(n)),o||(o=l(e));if(!s&&!o)return null;let a="EPSG:4326";if(o)if(s)r=eb(s.inverse,o.forward);else{let l=sy(t,a);l&&(r=eb(l,o.forward))}else{let l=sy(a,i);l&&(r=eb(s.inverse,l))}return r&&(nb(n),nb(e),Qc(n,e,r)),r}function eb(n,e){return function(t,i,r,s){return i=n(t,i,r,s),e(i,i,r,s)}}function il(n,e){let t=Bn(n),i=Bn(e);return sb(t,i)}function ou(n,e,t){let i=il(e,t);if(!i){let r=Bn(e).getCode(),s=Bn(t).getCode();throw new Error(`No transform available between ${r} and ${s}`)}return i(n,void 0,n.length)}function sL(n,e,t,i){let r=il(e,t);return BO(n,r,void 0,i)}var Ys=null;function oL(){return Ys}function Eh(n,e){return Ys?ou(n,e,Ys):n}function Pr(n,e){return Ys?ou(n,Ys,e):(tb&&!tl(n,[0,0])&&n[0]>=-180&&n[0]<=180&&n[1]>=-90&&n[1]<=90&&(tb=!1,py("Call useGeographic() from ol/proj once to work with [longitude, latitude] coordinates.")),n)}function aL(n,e){return Ys?sL(n,e,Ys):n}function Zs(n,e){return Ys?sL(n,Ys,e):n}function gY(){nL(Ww),nL($w),mY($w,Ww,TO,CO)}gY();function ob(n,e,t){return function(i,r,s,o,a){if(!i)return;if(!r&&!e)return i;let l=e?0:s[0]*r,c=e?0:s[1]*r,u=a?a[0]:0,d=a?a[1]:0,h=n[0]+l/2+u,f=n[2]-l/2+u,p=n[1]+c/2+d,y=n[3]-c/2+d;h>f&&(h=(f+h)/2,f=h),p>y&&(p=(y+p)/2,y=p);let g=Wt(i[0],h,f),m=Wt(i[1],p,y);if(o&&t&&r){let x=30*r;g+=-x*Math.log(1+Math.max(0,h-i[0])/x)+x*Math.log(1+Math.max(0,i[0]-f)/x),m+=-x*Math.log(1+Math.max(0,p-i[1])/x)+x*Math.log(1+Math.max(0,i[1]-y)/x)}return[g,m]}}function lL(n){return n}function ab(n,e,t,i){let r=ct(e)/t[0],s=on(e)/t[1];return i?Math.min(n,Math.max(r,s)):Math.min(n,Math.min(r,s))}function lb(n,e,t){let i=Math.min(n,e),r=50;return i*=Math.log(1+r*Math.max(0,n/e-1))/r+1,t&&(i=Math.max(i,t),i/=Math.log(1+r*Math.max(0,t/n-1))/r+1),Wt(i,t/2,e*2)}function cL(n,e,t,i){return e=e!==void 0?e:!0,function(r,s,o,a){if(r!==void 0){let l=n[0],c=n[n.length-1],u=t?ab(l,t,o,i):l;if(a)return e?lb(r,u,c):Wt(r,c,u);let d=Math.min(u,r),h=Math.floor($c(n,d,s));return n[h]>u&&h<n.length-1?n[h+1]:n[h]}}}function uL(n,e,t,i,r,s){return i=i!==void 0?i:!0,t=t!==void 0?t:0,function(o,a,l,c){if(o!==void 0){let u=r?ab(e,r,l,s):e;if(c)return i?lb(o,u,t):Wt(o,t,u);let d=1e-9,h=Math.ceil(Math.log(e/u)/Math.log(n)-d),f=-a*(.5-d)+.5,p=Math.min(u,o),y=Math.floor(Math.log(e/p)/Math.log(n)+f),g=Math.max(h,y),m=e/Math.pow(n,g);return Wt(m,t,u)}}}function cb(n,e,t,i,r){return t=t!==void 0?t:!0,function(s,o,a,l){if(s!==void 0){let c=i?ab(n,i,a,r):n;return!t||!l?Wt(s,e,c):lb(s,c,e)}}}function au(n){if(n!==void 0)return 0}function ub(n){if(n!==void 0)return n}function dL(n){let e=2*Math.PI/n;return function(t,i){if(i)return t;if(t!==void 0)return t=Math.floor(t/e+.5)*e,t}}function hL(n){let e=n===void 0?Rr(5):n;return function(t,i){return i||t===void 0?t:Math.abs(t)<=e?0:t}}function db(n){return Math.pow(n,3)}function dr(n){return 1-db(1-n)}function fL(n){return 3*n*n-2*n*n*n}function pL(n){return n}var koe=new Array(6);function Ks(){return[1,0,0,1,0,0]}function Vn(n,e){let t=e[0],i=e[1];return e[0]=n[0]*t+n[2]*i+n[4],e[1]=n[1]*t+n[3]*i+n[5],e}function Js(n,e,t,i,r,s,o,a){let l=Math.sin(s),c=Math.cos(s);return n[0]=i*c,n[1]=r*l,n[2]=-i*l,n[3]=r*c,n[4]=o*i*c-a*i*l+e,n[5]=o*r*l+a*r*c+t,n}function yy(n,e){let t=yY(e);pt(t!==0,"Transformation matrix cannot be inverted");let i=e[0],r=e[1],s=e[2],o=e[3],a=e[4],l=e[5];return n[0]=o/t,n[1]=-r/t,n[2]=-s/t,n[3]=i/t,n[4]=(s*l-o*a)/t,n[5]=-(i*l-r*a)/t,n}function yY(n){return n[0]*n[3]-n[1]*n[2]}var mL=[1e6,1e6,1e6,1e6,2,2];function gL(n){return"matrix("+n.map((t,i)=>Math.round(t*mL[i])/mL[i]).join(", ")+")"}function hb(n,e,t,i,r,s,o){s=s||[],o=o||2;let a=0;for(let l=e;l<t;l+=i){let c=n[l],u=n[l+1];s[a++]=r[0]*c+r[2]*u+r[4],s[a++]=r[1]*c+r[3]*u+r[5];for(let d=2;d<o;d++)s[a++]=n[l+d]}return s&&s.length!=a&&(s.length=a),s}function yL(n,e,t,i,r,s,o){o=o||[];let a=Math.cos(r),l=Math.sin(r),c=s[0],u=s[1],d=0;for(let h=e;h<t;h+=i){let f=n[h]-c,p=n[h+1]-u;o[d++]=c+f*a-p*l,o[d++]=u+f*l+p*a;for(let y=h+2;y<h+i;++y)o[d++]=n[y]}return o&&o.length!=d&&(o.length=d),o}function vL(n,e,t,i,r,s,o,a){a=a||[];let l=o[0],c=o[1],u=0;for(let d=e;d<t;d+=i){let h=n[d]-l,f=n[d+1]-c;a[u++]=l+r*h,a[u++]=c+s*f;for(let p=d+2;p<d+i;++p)a[u++]=n[p]}return a&&a.length!=u&&(a.length=u),a}function _L(n,e,t,i,r,s,o){o=o||[];let a=0;for(let l=e;l<t;l+=i){o[a++]=n[l]+r,o[a++]=n[l+1]+s;for(let c=l+2;c<l+i;++c)o[a++]=n[c]}return o&&o.length!=a&&(o.length=a),o}var xL=Ks(),fb=class extends Dn{constructor(){super(),this.extent_=yi(),this.extentRevision_=-1,this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=0,this.simplifyTransformedInternal=_O((e,t,i)=>{if(!i)return this.getSimplifiedGeometry(t);let r=this.clone();return r.applyTransform(i),r.getSimplifiedGeometry(t)})}simplifyTransformed(e,t){return this.simplifyTransformedInternal(this.getRevision(),e,t)}clone(){return ft()}closestPointXY(e,t,i,r){return ft()}containsXY(e,t){let i=this.getClosestPoint([e,t]);return i[0]===e&&i[1]===t}getClosestPoint(e,t){return t=t||[NaN,NaN],this.closestPointXY(e[0],e[1],t,1/0),t}intersectsCoordinate(e){return this.containsXY(e[0],e[1])}computeExtent(e){return ft()}getExtent(e){if(this.extentRevision_!=this.getRevision()){let t=this.computeExtent(this.extent_);(isNaN(t[0])||isNaN(t[1]))&&el(t),this.extentRevision_=this.getRevision()}return kO(this.extent_,e)}rotate(e,t){ft()}scale(e,t,i){ft()}simplify(e){return this.getSimplifiedGeometry(e*e)}getSimplifiedGeometry(e){return ft()}getType(){return ft()}applyTransform(e){ft()}intersectsExtent(e){return ft()}translate(e,t){ft()}transform(e,t){let i=Bn(e),r=i.getUnits()=="tile-pixels"?function(s,o,a){let l=i.getExtent(),c=i.getWorldExtent(),u=on(c)/on(l);Js(xL,c[0],c[3],u,-u,0,0,0);let d=hb(s,0,s.length,a,xL,o),h=il(i,t);return h?h(d,d,a):d}:il(i,t);return this.applyTransform(r),this}},EL=fb;var pb=class extends EL{constructor(){super(),this.layout="XY",this.stride=2,this.flatCoordinates}computeExtent(e){return LO(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}getCoordinates(){return ft()}getFirstCoordinate(){return this.flatCoordinates.slice(0,this.stride)}getFlatCoordinates(){return this.flatCoordinates}getLastCoordinate(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)}getLayout(){return this.layout}getSimplifiedGeometry(e){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),e<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&e<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;let t=this.getSimplifiedGeometryInternal(e);return t.getFlatCoordinates().length<this.flatCoordinates.length?t:(this.simplifiedGeometryMaxMinSquaredTolerance=e,this)}getSimplifiedGeometryInternal(e){return this}getStride(){return this.stride}setFlatCoordinates(e,t){this.stride=ML(e),this.layout=e,this.flatCoordinates=t}setCoordinates(e,t){ft()}setLayout(e,t,i){let r;if(e)r=ML(e);else{for(let s=0;s<i;++s){if(t.length===0){this.layout="XY",this.stride=2;return}t=t[0]}r=t.length,e=vY(r)}this.layout=e,this.stride=r}applyTransform(e){this.flatCoordinates&&(e(this.flatCoordinates,this.flatCoordinates,this.layout.startsWith("XYZ")?3:2,this.stride),this.changed())}rotate(e,t){let i=this.getFlatCoordinates();if(i){let r=this.getStride();yL(i,0,i.length,r,e,t,i),this.changed()}}scale(e,t,i){t===void 0&&(t=e),i||(i=ts(this.getExtent()));let r=this.getFlatCoordinates();if(r){let s=this.getStride();vL(r,0,r.length,s,e,t,i,r),this.changed()}}translate(e,t){let i=this.getFlatCoordinates();if(i){let r=this.getStride();_L(i,0,i.length,r,e,t,i),this.changed()}}};function vY(n){let e;return n==2?e="XY":n==3?e="XYZ":n==4&&(e="XYZM"),e}function ML(n){let e;return n=="XY"?e=2:n=="XYZ"||n=="XYM"?e=3:n=="XYZM"&&(e=4),e}var lu=pb;function wL(n,e,t,i,r,s,o){let a=n[e],l=n[e+1],c=n[t]-a,u=n[t+1]-l,d;if(c===0&&u===0)d=e;else{let h=((r-a)*c+(s-l)*u)/(c*c+u*u);if(h>1)d=t;else if(h>0){for(let f=0;f<i;++f)o[f]=bO(n[e+f],n[t+f],h);o.length=i;return}else d=e}for(let h=0;h<i;++h)o[h]=n[d+h];o.length=i}function mb(n,e,t,i,r){let s=n[e],o=n[e+1];for(e+=i;e<t;e+=i){let a=n[e],l=n[e+1],c=js(s,o,a,l);c>r&&(r=c),s=a,o=l}return r}function bL(n,e,t,i,r){for(let s=0,o=t.length;s<o;++s){let a=t[s];r=mb(n,e,a,i,r),e=a}return r}function gb(n,e,t,i,r,s,o,a,l,c,u){if(e==t)return c;let d,h;if(r===0){if(h=js(o,a,n[e],n[e+1]),h<c){for(d=0;d<i;++d)l[d]=n[e+d];return l.length=i,h}return c}u=u||[NaN,NaN];let f=e+i;for(;f<t;)if(wL(n,f-i,f,i,o,a,u),h=js(o,a,u[0],u[1]),h<c){for(c=h,d=0;d<i;++d)l[d]=u[d];l.length=i,f+=i}else f+=i*Math.max((Math.sqrt(h)-Math.sqrt(c))/r|0,1);if(s&&(wL(n,t-i,e,i,o,a,u),h=js(o,a,u[0],u[1]),h<c)){for(c=h,d=0;d<i;++d)l[d]=u[d];l.length=i}return c}function SL(n,e,t,i,r,s,o,a,l,c,u){u=u||[NaN,NaN];for(let d=0,h=t.length;d<h;++d){let f=t[d];c=gb(n,e,f,i,r,s,o,a,l,c,u),e=f}return c}function TL(n,e,t,i){for(let r=0,s=t.length;r<s;++r)n[e++]=t[r];return e}function yb(n,e,t,i){for(let r=0,s=t.length;r<s;++r){let o=t[r];for(let a=0;a<i;++a)n[e++]=o[a]}return e}function CL(n,e,t,i,r){r=r||[];let s=0;for(let o=0,a=t.length;o<a;++o){let l=yb(n,e,t[o],i);r[s++]=l,e=l}return r.length=s,r}function AL(n,e,t,i,r,s,o){let a=(t-e)/i;if(a<3){for(;e<t;e+=i)s[o++]=n[e],s[o++]=n[e+1];return o}let l=new Array(a);l[0]=1,l[a-1]=1;let c=[e,t-i],u=0;for(;c.length>0;){let d=c.pop(),h=c.pop(),f=0,p=n[h],y=n[h+1],g=n[d],m=n[d+1];for(let x=h+i;x<d;x+=i){let M=n[x],v=n[x+1],S=MO(M,v,p,y,g,m);S>f&&(u=x,f=S)}f>r&&(l[(u-e)/i]=1,h+i<u&&c.push(h,u),u+i<d&&c.push(u,d))}for(let d=0;d<a;++d)l[d]&&(s[o++]=n[e+d*i],s[o++]=n[e+d*i+1]);return o}function cu(n,e){return e*Math.round(n/e)}function _Y(n,e,t,i,r,s,o){if(e==t)return o;let a=cu(n[e],r),l=cu(n[e+1],r);e+=i,s[o++]=a,s[o++]=l;let c,u;do if(c=cu(n[e],r),u=cu(n[e+1],r),e+=i,e==t)return s[o++]=c,s[o++]=u,o;while(c==a&&u==l);for(;e<t;){let d=cu(n[e],r),h=cu(n[e+1],r);if(e+=i,d==c&&h==u)continue;let f=c-a,p=u-l,y=d-a,g=h-l;if(f*g==p*y&&(f<0&&y<f||f==y||f>0&&y>f)&&(p<0&&g<p||p==g||p>0&&g>p)){c=d,u=h;continue}s[o++]=c,s[o++]=u,a=c,l=u,c=d,u=h}return s[o++]=c,s[o++]=u,o}function IL(n,e,t,i,r,s,o,a){for(let l=0,c=t.length;l<c;++l){let u=t[l];o=_Y(n,e,u,i,r,s,o),a.push(o),e=u}return o}function vb(n,e,t,i,r){r=r!==void 0?r:[];let s=0;for(let o=e;o<t;o+=i)r[s++]=n.slice(o,o+i);return r.length=s,r}function DL(n,e,t,i,r){r=r!==void 0?r:[];let s=0;for(let o=0,a=t.length;o<a;++o){let l=t[o];r[s++]=vb(n,e,l,i,r[s]),e=l}return r.length=s,r}function _b(n,e,t,i){let r=0,s=n[t-i],o=n[t-i+1],a=0,l=0;for(;e<t;e+=i){let c=n[e]-s,u=n[e+1]-o;r+=l*c-a*u,a=c,l=u}return r/2}function RL(n,e,t,i){let r=0;for(let s=0,o=t.length;s<o;++s){let a=t[s];r+=_b(n,e,a,i),e=a}return r}var xb=class n extends lu{constructor(e,t){super(),this.maxDelta_=-1,this.maxDeltaRevision_=-1,t!==void 0&&!Array.isArray(e[0])?this.setFlatCoordinates(t,e):this.setCoordinates(e,t)}clone(){return new n(this.flatCoordinates.slice(),this.layout)}closestPointXY(e,t,i,r){return r<oy(this.getExtent(),e,t)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(mb(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),gb(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,e,t,i,r))}getArea(){return _b(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinates(){return vb(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getSimplifiedGeometryInternal(e){let t=[];return t.length=AL(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,0),new n(t,"XY")}getType(){return"LinearRing"}intersectsExtent(e){return!1}setCoordinates(e,t){this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=yb(this.flatCoordinates,0,e,this.stride),this.changed()}},Eb=xb;var Mb=class n extends lu{constructor(e,t){super(),this.setCoordinates(e,t)}clone(){let e=new n(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,t,i,r){let s=this.flatCoordinates,o=js(e,t,s[0],s[1]);if(o<r){let a=this.stride;for(let l=0;l<a;++l)i[l]=s[l];return i.length=a,o}return r}getCoordinates(){return this.flatCoordinates.slice()}computeExtent(e){return OO(this.flatCoordinates,e)}getType(){return"Point"}intersectsExtent(e){return Yw(e,this.flatCoordinates[0],this.flatCoordinates[1])}setCoordinates(e,t){this.setLayout(t,e,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=TL(this.flatCoordinates,0,e,this.stride),this.changed()}},PL=Mb;function NL(n,e,t,i,r){return!ly(r,function(o){return!Xo(n,e,t,i,o[0],o[1])})}function Xo(n,e,t,i,r,s){let o=0,a=n[t-i],l=n[t-i+1];for(;e<t;e+=i){let c=n[e],u=n[e+1];l<=s?u>s&&(c-a)*(s-l)-(r-a)*(u-l)>0&&o++:u<=s&&(c-a)*(s-l)-(r-a)*(u-l)<0&&o--,a=c,l=u}return o!==0}function vy(n,e,t,i,r,s){if(t.length===0||!Xo(n,e,t[0],i,r,s))return!1;for(let o=1,a=t.length;o<a;++o)if(Xo(n,t[o-1],t[o],i,r,s))return!1;return!0}function OL(n,e,t,i,r,s,o){let a,l,c,u,d,h,f,p=r[s+1],y=[];for(let x=0,M=t.length;x<M;++x){let v=t[x];for(u=n[v-i],h=n[v-i+1],a=e;a<v;a+=i)d=n[a],f=n[a+1],(p<=h&&f<=p||h<=p&&p<=f)&&(c=(p-h)/(f-h)*(d-u)+u,y.push(c)),u=d,h=f}let g=NaN,m=-1/0;for(y.sort(Ka),u=y[0],a=1,l=y.length;a<l;++a){d=y[a];let x=Math.abs(d-u);x>m&&(c=(u+d)/2,vy(n,e,t,i,c,p)&&(g=c,m=x)),u=d}return isNaN(g)&&(g=r[s]),o?(o.push(g,p,m),o):[g,p,m]}function LL(n,e,t,i,r){let s;for(e+=i;e<t;e+=i)if(s=r(n.slice(e-i,e),n.slice(e,e+i)),s)return s;return!1}function FL(n,e,t,i,r){let s=Zw(yi(),n,e,t,i);return qs(r,s)?NO(r,s)||s[0]>=r[0]&&s[2]<=r[2]||s[1]>=r[1]&&s[3]<=r[3]?!0:LL(n,e,t,i,function(o,a){return UO(r,o,a)}):!1}function wb(n,e,t,i,r){return!!(FL(n,e,t,i,r)||Xo(n,e,t,i,r[0],r[1])||Xo(n,e,t,i,r[0],r[3])||Xo(n,e,t,i,r[2],r[1])||Xo(n,e,t,i,r[2],r[3]))}function kL(n,e,t,i,r){if(!wb(n,e,t[0],i,r))return!1;if(t.length===1)return!0;for(let s=1,o=t.length;s<o;++s)if(NL(n,t[s-1],t[s],i,r)&&!FL(n,t[s-1],t[s],i,r))return!1;return!0}function UL(n,e,t,i){for(;e<t-i;){for(let r=0;r<i;++r){let s=n[e+r];n[e+r]=n[t-i+r],n[t-i+r]=s}e+=i,t-=i}}function BL(n,e,t,i){let r=0,s=n[t-i],o=n[t-i+1];for(;e<t;e+=i){let a=n[e],l=n[e+1];r+=(a-s)*(l+o),s=a,o=l}return r===0?void 0:r>0}function VL(n,e,t,i,r){r=r!==void 0?r:!1;for(let s=0,o=t.length;s<o;++s){let a=t[s],l=BL(n,e,a,i);if(s===0){if(r&&l||!r&&!l)return!1}else if(r&&!l||!r&&l)return!1;e=a}return!0}function bb(n,e,t,i,r){r=r!==void 0?r:!1;for(let s=0,o=t.length;s<o;++s){let a=t[s],l=BL(n,e,a,i);(s===0?r&&l||!r&&!l:r&&!l||!r&&l)&&UL(n,e,a,i),e=a}return e}var _y=class n extends lu{constructor(e,t,i){super(),this.ends_=[],this.flatInteriorPointRevision_=-1,this.flatInteriorPoint_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,t!==void 0&&i?(this.setFlatCoordinates(t,e),this.ends_=i):this.setCoordinates(e,t)}appendLinearRing(e){this.flatCoordinates?yO(this.flatCoordinates,e.getFlatCoordinates()):this.flatCoordinates=e.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){let e=new n(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return e.applyProperties(this),e}closestPointXY(e,t,i,r){return r<oy(this.getExtent(),e,t)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(bL(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),SL(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,e,t,i,r))}containsXY(e,t){return vy(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,t)}getArea(){return RL(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)}getCoordinates(e){let t;return e!==void 0?(t=this.getOrientedFlatCoordinates().slice(),bb(t,0,this.ends_,this.stride,e)):t=this.flatCoordinates,DL(t,0,this.ends_,this.stride)}getEnds(){return this.ends_}getFlatInteriorPoint(){if(this.flatInteriorPointRevision_!=this.getRevision()){let e=ts(this.getExtent());this.flatInteriorPoint_=OL(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_}getInteriorPoint(){return new PL(this.getFlatInteriorPoint(),"XYM")}getLinearRingCount(){return this.ends_.length}getLinearRing(e){return e<0||this.ends_.length<=e?null:new Eb(this.flatCoordinates.slice(e===0?0:this.ends_[e-1],this.ends_[e]),this.layout)}getLinearRings(){let e=this.layout,t=this.flatCoordinates,i=this.ends_,r=[],s=0;for(let o=0,a=i.length;o<a;++o){let l=i[o],c=new Eb(t.slice(s,l),e);r.push(c),s=l}return r}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){let e=this.flatCoordinates;VL(e,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=e:(this.orientedFlatCoordinates_=e.slice(),this.orientedFlatCoordinates_.length=bb(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(e){let t=[],i=[];return t.length=IL(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(e),t,0,i),new n(t,"XY",i)}getType(){return"Polygon"}intersectsExtent(e){return kL(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,2),this.flatCoordinates||(this.flatCoordinates=[]);let i=CL(this.flatCoordinates,0,e,this.stride,this.ends_);this.flatCoordinates.length=i.length===0?0:i[i.length-1],this.changed()}},zL=_y;function Sb(n){if($o(n))throw new Error("Cannot create polygon from empty extent");let e=n[0],t=n[1],i=n[2],r=n[3],s=[e,t,e,r,i,r,i,t,e,t];return new _y(s,"XY",[s.length])}var Tb=0,Ab=class extends Dn{constructor(e){super(),this.on,this.once,this.un,e=Object.assign({},e),this.hints_=[0,0],this.animations_=[],this.updateAnimationKey_,this.projection_=my(e.projection,"EPSG:3857"),this.viewportSize_=[100,100],this.targetCenter_=null,this.targetResolution_,this.targetRotation_,this.nextCenter_=null,this.nextResolution_,this.nextRotation_,this.cancelAnchor_=void 0,e.projection&&iL(),e.center&&(e.center=Pr(e.center,this.projection_)),e.extent&&(e.extent=Zs(e.extent,this.projection_)),this.applyOptions_(e)}applyOptions_(e){let t=Object.assign({},e);for(let a in cr)delete t[a];this.setProperties(t,!0);let i=EY(e);this.maxResolution_=i.maxResolution,this.minResolution_=i.minResolution,this.zoomFactor_=i.zoomFactor,this.resolutions_=e.resolutions,this.padding_=e.padding,this.minZoom_=i.minZoom;let r=xY(e),s=i.constraint,o=MY(e);this.constraints_={center:r,resolution:s,rotation:o},this.setRotation(e.rotation!==void 0?e.rotation:0),this.setCenterInternal(e.center!==void 0?e.center:null),e.resolution!==void 0?this.setResolution(e.resolution):e.zoom!==void 0&&this.setZoom(e.zoom)}get padding(){return this.padding_}set padding(e){let t=this.padding_;this.padding_=e;let i=this.getCenterInternal();if(i){let r=e||[0,0,0,0];t=t||[0,0,0,0];let s=this.getResolution(),o=s/2*(r[3]-t[3]+t[1]-r[1]),a=s/2*(r[0]-t[0]+t[2]-r[2]);this.setCenterInternal([i[0]+o,i[1]-a])}}getUpdatedOptions_(e){let t=this.getProperties();return t.resolution!==void 0?t.resolution=this.getResolution():t.zoom=this.getZoom(),t.center=this.getCenterInternal(),t.rotation=this.getRotation(),Object.assign({},t,e)}animate(e){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);let t=new Array(arguments.length);for(let i=0;i<t.length;++i){let r=arguments[i];r.center&&(r=Object.assign({},r),r.center=Pr(r.center,this.getProjection())),r.anchor&&(r=Object.assign({},r),r.anchor=Pr(r.anchor,this.getProjection())),t[i]=r}this.animateInternal.apply(this,t)}animateInternal(e){let t=arguments.length,i;t>1&&typeof arguments[t-1]=="function"&&(i=arguments[t-1],--t);let r=0;for(;r<t&&!this.isDef();++r){let u=arguments[r];u.center&&this.setCenterInternal(u.center),u.zoom!==void 0?this.setZoom(u.zoom):u.resolution&&this.setResolution(u.resolution),u.rotation!==void 0&&this.setRotation(u.rotation)}if(r===t){i&&xy(i,!0);return}let s=Date.now(),o=this.targetCenter_.slice(),a=this.targetResolution_,l=this.targetRotation_,c=[];for(;r<t;++r){let u=arguments[r],d={start:s,complete:!1,anchor:u.anchor,duration:u.duration!==void 0?u.duration:1e3,easing:u.easing||fL,callback:i};if(u.center&&(d.sourceCenter=o,d.targetCenter=u.center.slice(),o=d.targetCenter),u.zoom!==void 0?(d.sourceResolution=a,d.targetResolution=this.getResolutionForZoom(u.zoom),a=d.targetResolution):u.resolution&&(d.sourceResolution=a,d.targetResolution=u.resolution,a=d.targetResolution),u.rotation!==void 0){d.sourceRotation=l;let h=Ws(u.rotation-l+Math.PI,2*Math.PI)-Math.PI;d.targetRotation=l+h,l=d.targetRotation}wY(d)?d.complete=!0:s+=d.duration,c.push(d)}this.animations_.push(c),this.setHint(gi.ANIMATING,1),this.updateAnimations_()}getAnimating(){return this.hints_[gi.ANIMATING]>0}getInteracting(){return this.hints_[gi.INTERACTING]>0}cancelAnimations(){this.setHint(gi.ANIMATING,-this.hints_[gi.ANIMATING]);let e;for(let t=0,i=this.animations_.length;t<i;++t){let r=this.animations_[t];if(r[0].callback&&xy(r[0].callback,!1),!e)for(let s=0,o=r.length;s<o;++s){let a=r[s];if(!a.complete){e=a.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=e,this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN}updateAnimations_(){if(this.updateAnimationKey_!==void 0&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),!this.getAnimating())return;let e=Date.now(),t=!1;for(let i=this.animations_.length-1;i>=0;--i){let r=this.animations_[i],s=!0;for(let o=0,a=r.length;o<a;++o){let l=r[o];if(l.complete)continue;let c=e-l.start,u=l.duration>0?c/l.duration:1;u>=1?(l.complete=!0,u=1):s=!1;let d=l.easing(u);if(l.sourceCenter){let h=l.sourceCenter[0],f=l.sourceCenter[1],p=l.targetCenter[0],y=l.targetCenter[1];this.nextCenter_=l.targetCenter;let g=h+d*(p-h),m=f+d*(y-f);this.targetCenter_=[g,m]}if(l.sourceResolution&&l.targetResolution){let h=d===1?l.targetResolution:l.sourceResolution+d*(l.targetResolution-l.sourceResolution);if(l.anchor){let f=this.getViewportSize_(this.getRotation()),p=this.constraints_.resolution(h,0,f,!0);this.targetCenter_=this.calculateCenterZoom(p,l.anchor)}this.nextResolution_=l.targetResolution,this.targetResolution_=h,this.applyTargetState_(!0)}if(l.sourceRotation!==void 0&&l.targetRotation!==void 0){let h=d===1?Ws(l.targetRotation+Math.PI,2*Math.PI)-Math.PI:l.sourceRotation+d*(l.targetRotation-l.sourceRotation);if(l.anchor){let f=this.constraints_.rotation(h,!0);this.targetCenter_=this.calculateCenterRotate(f,l.anchor)}this.nextRotation_=l.targetRotation,this.targetRotation_=h}if(this.applyTargetState_(!0),t=!0,!l.complete)break}if(s){this.animations_[i]=null,this.setHint(gi.ANIMATING,-1),this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN;let o=r[0].callback;o&&xy(o,!0)}}this.animations_=this.animations_.filter(Boolean),t&&this.updateAnimationKey_===void 0&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}calculateCenterRotate(e,t){let i,r=this.getCenterInternal();return r!==void 0&&(i=[r[0]-t[0],r[1]-t[1]],ru(i,e-this.getRotation()),VO(i,t)),i}calculateCenterZoom(e,t){let i,r=this.getCenterInternal(),s=this.getResolution();if(r!==void 0&&s!==void 0){let o=t[0]-e*(t[0]-r[0])/s,a=t[1]-e*(t[1]-r[1])/s;i=[o,a]}return i}getViewportSize_(e){let t=this.viewportSize_;if(e){let i=t[0],r=t[1];return[Math.abs(i*Math.cos(e))+Math.abs(r*Math.sin(e)),Math.abs(i*Math.sin(e))+Math.abs(r*Math.cos(e))]}return t}setViewportSize(e){this.viewportSize_=Array.isArray(e)?e.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)}getCenter(){let e=this.getCenterInternal();return e&&Eh(e,this.getProjection())}getCenterInternal(){return this.get(cr.CENTER)}getConstraints(){return this.constraints_}getConstrainResolution(){return this.get("constrainResolution")}getHints(e){return e!==void 0?(e[0]=this.hints_[0],e[1]=this.hints_[1],e):this.hints_.slice()}calculateExtent(e){let t=this.calculateExtentInternal(e);return aL(t,this.getProjection())}calculateExtentInternal(e){e=e||this.getViewportSizeMinusPadding_();let t=this.getCenterInternal();pt(t,"The view center is not defined");let i=this.getResolution();pt(i!==void 0,"The view resolution is not defined");let r=this.getRotation();return pt(r!==void 0,"The view rotation is not defined"),xh(t,i,r,e)}getMaxResolution(){return this.maxResolution_}getMinResolution(){return this.minResolution_}getMaxZoom(){return this.getZoomForResolution(this.minResolution_)}setMaxZoom(e){this.applyOptions_(this.getUpdatedOptions_({maxZoom:e}))}getMinZoom(){return this.getZoomForResolution(this.maxResolution_)}setMinZoom(e){this.applyOptions_(this.getUpdatedOptions_({minZoom:e}))}setConstrainResolution(e){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:e}))}getProjection(){return this.projection_}getResolution(){return this.get(cr.RESOLUTION)}getResolutions(){return this.resolutions_}getResolutionForExtent(e,t){return this.getResolutionForExtentInternal(Zs(e,this.getProjection()),t)}getResolutionForExtentInternal(e,t){t=t||this.getViewportSizeMinusPadding_();let i=ct(e)/t[0],r=on(e)/t[1];return Math.max(i,r)}getResolutionForValueFunction(e){e=e||2;let t=this.getConstrainedResolution(this.maxResolution_),i=this.minResolution_,r=Math.log(t/i)/Math.log(e);return function(s){return t/Math.pow(e,s*r)}}getRotation(){return this.get(cr.ROTATION)}getValueForResolutionFunction(e){let t=Math.log(e||2),i=this.getConstrainedResolution(this.maxResolution_),r=this.minResolution_,s=Math.log(i/r)/t;return function(o){return Math.log(i/o)/t/s}}getViewportSizeMinusPadding_(e){let t=this.getViewportSize_(e),i=this.padding_;return i&&(t=[t[0]-i[1]-i[3],t[1]-i[0]-i[2]]),t}getState(){let e=this.getProjection(),t=this.getResolution(),i=this.getRotation(),r=this.getCenterInternal(),s=this.padding_;if(s){let o=this.getViewportSizeMinusPadding_();r=Cb(r,this.getViewportSize_(),[o[0]/2+s[3],o[1]/2+s[0]],t,i)}return{center:r.slice(0),projection:e!==void 0?e:null,resolution:t,nextCenter:this.nextCenter_,nextResolution:this.nextResolution_,nextRotation:this.nextRotation_,rotation:i,zoom:this.getZoom()}}getViewStateAndExtent(){return{viewState:this.getState(),extent:this.calculateExtent()}}getZoom(){let e,t=this.getResolution();return t!==void 0&&(e=this.getZoomForResolution(t)),e}getZoomForResolution(e){let t=this.minZoom_||0,i,r;if(this.resolutions_){let s=$c(this.resolutions_,e,1);t=s,i=this.resolutions_[s],s==this.resolutions_.length-1?r=2:r=i/this.resolutions_[s+1]}else i=this.maxResolution_,r=this.zoomFactor_;return t+Math.log(i/e)/Math.log(r)}getResolutionForZoom(e){if(this.resolutions_?.length){if(this.resolutions_.length===1)return this.resolutions_[0];let t=Wt(Math.floor(e),0,this.resolutions_.length-2),i=this.resolutions_[t]/this.resolutions_[t+1];return this.resolutions_[t]/Math.pow(i,Wt(e-t,0,1))}return this.maxResolution_/Math.pow(this.zoomFactor_,e-this.minZoom_)}fit(e,t){let i;if(pt(Array.isArray(e)||typeof e.getSimplifiedGeometry=="function","Invalid extent or geometry provided as `geometry`"),Array.isArray(e)){pt(!$o(e),"Cannot fit empty extent provided as `geometry`");let r=Zs(e,this.getProjection());i=Sb(r)}else if(e.getType()==="Circle"){let r=Zs(e.getExtent(),this.getProjection());i=Sb(r),i.rotate(this.getRotation(),ts(r))}else{let r=oL();r?i=e.clone().transform(r,this.getProjection()):i=e}this.fitInternal(i,t)}rotatedExtentForGeometry(e){let t=this.getRotation(),i=Math.cos(t),r=Math.sin(-t),s=e.getFlatCoordinates(),o=e.getStride(),a=1/0,l=1/0,c=-1/0,u=-1/0;for(let d=0,h=s.length;d<h;d+=o){let f=s[d]*i-s[d+1]*r,p=s[d]*r+s[d+1]*i;a=Math.min(a,f),l=Math.min(l,p),c=Math.max(c,f),u=Math.max(u,p)}return[a,l,c,u]}fitInternal(e,t){t=t||{};let i=t.size;i||(i=this.getViewportSizeMinusPadding_());let r=t.padding!==void 0?t.padding:[0,0,0,0],s=t.nearest!==void 0?t.nearest:!1,o;t.minResolution!==void 0?o=t.minResolution:t.maxZoom!==void 0?o=this.getResolutionForZoom(t.maxZoom):o=0;let a=this.rotatedExtentForGeometry(e),l=this.getResolutionForExtentInternal(a,[i[0]-r[1]-r[3],i[1]-r[0]-r[2]]);l=isNaN(l)?o:Math.max(l,o),l=this.getConstrainedResolution(l,s?0:1);let c=this.getRotation(),u=Math.sin(c),d=Math.cos(c),h=ts(a);h[0]+=(r[1]-r[3])/2*l,h[1]+=(r[0]-r[2])/2*l;let f=h[0]*d-h[1]*u,p=h[1]*d+h[0]*u,y=this.getConstrainedCenter([f,p],l),g=t.callback?t.callback:Qa;t.duration!==void 0?this.animateInternal({resolution:l,center:y,duration:t.duration,easing:t.easing},g):(this.targetResolution_=l,this.targetCenter_=y,this.applyTargetState_(!1,!0),xy(g,!0))}centerOn(e,t,i){this.centerOnInternal(Pr(e,this.getProjection()),t,i)}centerOnInternal(e,t,i){this.setCenterInternal(Cb(e,t,i,this.getResolution(),this.getRotation()))}calculateCenterShift(e,t,i,r){let s,o=this.padding_;if(o&&e){let a=this.getViewportSizeMinusPadding_(-i),l=Cb(e,r,[a[0]/2+o[3],a[1]/2+o[0]],t,i);s=[e[0]-l[0],e[1]-l[1]]}return s}isDef(){return!!this.getCenterInternal()&&this.getResolution()!==void 0}adjustCenter(e){let t=Eh(this.targetCenter_,this.getProjection());this.setCenter([t[0]+e[0],t[1]+e[1]])}adjustCenterInternal(e){let t=this.targetCenter_;this.setCenterInternal([t[0]+e[0],t[1]+e[1]])}adjustResolution(e,t){t=t&&Pr(t,this.getProjection()),this.adjustResolutionInternal(e,t)}adjustResolutionInternal(e,t){let i=this.getAnimating()||this.getInteracting(),r=this.getViewportSize_(this.getRotation()),s=this.constraints_.resolution(this.targetResolution_*e,0,r,i);t&&(this.targetCenter_=this.calculateCenterZoom(s,t)),this.targetResolution_*=e,this.applyTargetState_()}adjustZoom(e,t){this.adjustResolution(Math.pow(this.zoomFactor_,-e),t)}adjustRotation(e,t){t&&(t=Pr(t,this.getProjection())),this.adjustRotationInternal(e,t)}adjustRotationInternal(e,t){let i=this.getAnimating()||this.getInteracting(),r=this.constraints_.rotation(this.targetRotation_+e,i);t&&(this.targetCenter_=this.calculateCenterRotate(r,t)),this.targetRotation_+=e,this.applyTargetState_()}setCenter(e){this.setCenterInternal(e&&Pr(e,this.getProjection()))}setCenterInternal(e){this.targetCenter_=e,this.applyTargetState_()}setHint(e,t){return this.hints_[e]+=t,this.changed(),this.hints_[e]}setResolution(e){this.targetResolution_=e,this.applyTargetState_()}setRotation(e){this.targetRotation_=e,this.applyTargetState_()}setZoom(e){this.setResolution(this.getResolutionForZoom(e))}applyTargetState_(e,t){let i=this.getAnimating()||this.getInteracting()||t,r=this.constraints_.rotation(this.targetRotation_,i),s=this.getViewportSize_(r),o=this.constraints_.resolution(this.targetResolution_,0,s,i),a=this.constraints_.center(this.targetCenter_,o,s,i,this.calculateCenterShift(this.targetCenter_,o,r,s));this.get(cr.ROTATION)!==r&&this.set(cr.ROTATION,r),this.get(cr.RESOLUTION)!==o&&(this.set(cr.RESOLUTION,o),this.set("zoom",this.getZoom(),!0)),(!a||!this.get(cr.CENTER)||!tl(this.get(cr.CENTER),a))&&this.set(cr.CENTER,a),this.getAnimating()&&!e&&this.cancelAnimations(),this.cancelAnchor_=void 0}resolveConstraints(e,t,i){e=e!==void 0?e:200;let r=t||0,s=this.constraints_.rotation(this.targetRotation_),o=this.getViewportSize_(s),a=this.constraints_.resolution(this.targetResolution_,r,o),l=this.constraints_.center(this.targetCenter_,a,o,!1,this.calculateCenterShift(this.targetCenter_,a,s,o));if(e===0&&!this.cancelAnchor_){this.targetResolution_=a,this.targetRotation_=s,this.targetCenter_=l,this.applyTargetState_();return}i=i||(e===0?this.cancelAnchor_:void 0),this.cancelAnchor_=void 0,(this.getResolution()!==a||this.getRotation()!==s||!this.getCenterInternal()||!tl(this.getCenterInternal(),l))&&(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:s,center:l,resolution:a,duration:e,easing:dr,anchor:i}))}beginInteraction(){this.resolveConstraints(0),this.setHint(gi.INTERACTING,1)}endInteraction(e,t,i){i=i&&Pr(i,this.getProjection()),this.endInteractionInternal(e,t,i)}endInteractionInternal(e,t,i){this.getInteracting()&&(this.setHint(gi.INTERACTING,-1),this.resolveConstraints(e,t,i))}getConstrainedCenter(e,t){let i=this.getViewportSize_(this.getRotation());return this.constraints_.center(e,t||this.getResolution(),i)}getConstrainedZoom(e,t){let i=this.getResolutionForZoom(e);return this.getZoomForResolution(this.getConstrainedResolution(i,t))}getConstrainedResolution(e,t){t=t||0;let i=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(e,t,i)}};function xy(n,e){setTimeout(function(){n(e)},0)}function xY(n){if(n.extent!==void 0){let t=n.smoothExtentConstraint!==void 0?n.smoothExtentConstraint:!0;return ob(n.extent,n.constrainOnlyCenter,t)}let e=my(n.projection,"EPSG:3857");if(n.multiWorld!==!0&&e.isGlobal()){let t=e.getExtent().slice();return t[0]=-1/0,t[2]=1/0,ob(t,!1,!1)}return lL}function EY(n){let e,t,i,o=n.minZoom!==void 0?n.minZoom:Tb,a=n.maxZoom!==void 0?n.maxZoom:28,l=n.zoomFactor!==void 0?n.zoomFactor:2,c=n.multiWorld!==void 0?n.multiWorld:!1,u=n.smoothResolutionConstraint!==void 0?n.smoothResolutionConstraint:!0,d=n.showFullExtent!==void 0?n.showFullExtent:!1,h=my(n.projection,"EPSG:3857"),f=h.getExtent(),p=n.constrainOnlyCenter,y=n.extent;if(!c&&!y&&h.isGlobal()&&(p=!1,y=f),n.resolutions!==void 0){let g=n.resolutions;t=g[o],i=g[a]!==void 0?g[a]:g[g.length-1],n.constrainResolution?e=cL(g,u,!p&&y,d):e=cb(t,i,u,!p&&y,d)}else{let m=(f?Math.max(ct(f),on(f)):360*$s.degrees/h.getMetersPerUnit())/256/Math.pow(2,Tb),x=m/Math.pow(2,28-Tb);t=n.maxResolution,t!==void 0?o=0:t=m/Math.pow(l,o),i=n.minResolution,i===void 0&&(n.maxZoom!==void 0?n.maxResolution!==void 0?i=t/Math.pow(l,a):i=m/Math.pow(l,a):i=x),a=o+Math.floor(Math.log(t/i)/Math.log(l)),i=t/Math.pow(l,a-o),n.constrainResolution?e=uL(l,t,i,u,!p&&y,d):e=cb(t,i,u,!p&&y,d)}return{constraint:e,maxResolution:t,minResolution:i,minZoom:o,zoomFactor:l}}function MY(n){if(n.enableRotation!==void 0?n.enableRotation:!0){let t=n.constrainRotation;return t===void 0||t===!0?hL():t===!1?ub:typeof t=="number"?dL(t):ub}return au}function wY(n){return!(n.sourceCenter&&n.targetCenter&&!tl(n.sourceCenter,n.targetCenter)||n.sourceResolution!==n.targetResolution||n.sourceRotation!==n.targetRotation)}function Cb(n,e,t,i,r){let s=Math.cos(-r),o=Math.sin(-r),a=n[0]*s-n[1]*o,l=n[1]*s+n[0]*o;a+=(e[0]/2-t[0])*i,l+=(t[1]-e[1]/2)*i,o=-o;let c=a*s-l*o,u=l*s+a*o;return[c,u]}var zi=Ab;var Ib=class extends iy{constructor(e){let t=Object.assign({},e);delete t.source,super(t),this.on,this.once,this.un,this.mapPrecomposeKey_=null,this.mapRenderKey_=null,this.sourceChangeKey_=null,this.renderer_=null,this.sourceReady_=!1,this.rendered=!1,e.render&&(this.render=e.render),e.map&&this.setMap(e.map),this.addChangeListener(Ut.SOURCE,this.handleSourcePropertyChange_);let i=e.source?e.source:null;this.setSource(i)}getLayersArray(e){return e=e||[],e.push(this),e}getLayerStatesArray(e){return e=e||[],e.push(this.getLayerState()),e}getSource(){return this.get(Ut.SOURCE)||null}getRenderSource(){return this.getSource()}getSourceState(){let e=this.getSource();return e?e.getState():"undefined"}handleSourceChange_(){this.changed(),!(this.sourceReady_||this.getSource().getState()!=="ready")&&(this.sourceReady_=!0,this.dispatchEvent("sourceready"))}handleSourcePropertyChange_(){this.sourceChangeKey_&&(Nt(this.sourceChangeKey_),this.sourceChangeKey_=null),this.sourceReady_=!1;let e=this.getSource();e&&(this.sourceChangeKey_=yt(e,Te.CHANGE,this.handleSourceChange_,this),e.getState()==="ready"&&(this.sourceReady_=!0,setTimeout(()=>{this.dispatchEvent("sourceready")},0))),this.changed()}getFeatures(e){return this.renderer_?this.renderer_.getFeatures(e):Promise.resolve([])}getData(e){return!this.renderer_||!this.rendered?null:this.renderer_.getData(e)}isVisible(e){let t,i=this.getMapInternal();!e&&i&&(e=i.getView()),e instanceof zi?t={viewState:e.getState(),extent:e.calculateExtent()}:t=e,!t.layerStatesArray&&i&&(t.layerStatesArray=i.getLayerGroup().getLayerStatesArray());let r;if(t.layerStatesArray){if(r=t.layerStatesArray.find(o=>o.layer===this),!r)return!1}else r=this.getLayerState();let s=this.getExtent();return Mh(r,t.viewState)&&(!s||qs(s,t.extent))}getAttributions(e){if(!this.isVisible(e))return[];let t=this.getSource()?.getAttributions();if(!t)return[];let i=e instanceof zi?e.getViewStateAndExtent():e,r=t(i);return Array.isArray(r)||(r=[r]),r}render(e,t){let i=this.getRenderer();return i.prepareFrame(e)?(this.rendered=!0,i.renderFrame(e,t)):null}unrender(){this.rendered=!1}getDeclutter(){}renderDeclutter(e,t){}renderDeferred(e){let t=this.getRenderer();t&&t.renderDeferred(e)}setMapInternal(e){e||this.unrender(),this.set(Ut.MAP,e)}getMapInternal(){return this.get(Ut.MAP)}setMap(e){this.mapPrecomposeKey_&&(Nt(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),e||this.changed(),this.mapRenderKey_&&(Nt(this.mapRenderKey_),this.mapRenderKey_=null),e&&(this.mapPrecomposeKey_=yt(e,mi.PRECOMPOSE,this.handlePrecompose_,this),this.mapRenderKey_=yt(this,Te.CHANGE,e.render,e),this.changed())}handlePrecompose_(e){let t=e.frameState.layerStatesArray,i=this.getLayerState(!1);pt(!t.some(r=>r.layer===i.layer),"A layer can only be added to the map once. Use either `layer.setMap()` or `map.addLayer()`, not both."),t.push(i)}setSource(e){this.set(Ut.SOURCE,e)}getRenderer(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_}hasRenderer(){return!!this.renderer_}createRenderer(){return null}clearRenderer(){this.renderer_&&(this.renderer_.dispose(),delete this.renderer_)}disposeInternal(){this.clearRenderer(),this.setSource(null),super.disposeInternal()}};function Mh(n,e){if(!n.visible)return!1;let t=e.resolution;if(t<n.minResolution||t>=n.maxResolution)return!1;let i=e.zoom;return i>n.minZoom&&i<=n.maxZoom}var rl=Ib;function Ey(n,e,t=0,i=n.length-1,r=bY){for(;i>t;){if(i-t>600){let l=i-t+1,c=e-t+1,u=Math.log(l),d=.5*Math.exp(2*u/3),h=.5*Math.sqrt(u*d*(l-d)/l)*(c-l/2<0?-1:1),f=Math.max(t,Math.floor(e-c*d/l+h)),p=Math.min(i,Math.floor(e+(l-c)*d/l+h));Ey(n,e,f,p,r)}let s=n[e],o=t,a=i;for(wh(n,t,e),r(n[i],s)>0&&wh(n,t,i);o<a;){for(wh(n,o,a),o++,a--;r(n[o],s)<0;)o++;for(;r(n[a],s)>0;)a--}r(n[t],s)===0?wh(n,t,a):(a++,wh(n,a,i)),a<=e&&(t=a+1),e<=a&&(i=a-1)}}function wh(n,e,t){let i=n[e];n[e]=n[t],n[t]=i}function bY(n,e){return n<e?-1:n>e?1:0}var by=class{constructor(e=9){this._maxEntries=Math.max(4,e),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),this.clear()}all(){return this._all(this.data,[])}search(e){let t=this.data,i=[];if(!wy(e,t))return i;let r=this.toBBox,s=[];for(;t;){for(let o=0;o<t.children.length;o++){let a=t.children[o],l=t.leaf?r(a):a;wy(e,l)&&(t.leaf?i.push(a):Rb(e,l)?this._all(a,i):s.push(a))}t=s.pop()}return i}collides(e){let t=this.data;if(!wy(e,t))return!1;let i=[];for(;t;){for(let r=0;r<t.children.length;r++){let s=t.children[r],o=t.leaf?this.toBBox(s):s;if(wy(e,o)){if(t.leaf||Rb(e,o))return!0;i.push(s)}}t=i.pop()}return!1}load(e){if(!(e&&e.length))return this;if(e.length<this._minEntries){for(let i=0;i<e.length;i++)this.insert(e[i]);return this}let t=this._build(e.slice(),0,e.length-1,0);if(!this.data.children.length)this.data=t;else if(this.data.height===t.height)this._splitRoot(this.data,t);else{if(this.data.height<t.height){let i=this.data;this.data=t,t=i}this._insert(t,this.data.height-t.height-1,!0)}return this}insert(e){return e&&this._insert(e,this.data.height-1),this}clear(){return this.data=du([]),this}remove(e,t){if(!e)return this;let i=this.data,r=this.toBBox(e),s=[],o=[],a,l,c;for(;i||s.length;){if(i||(i=s.pop(),l=s[s.length-1],a=o.pop(),c=!0),i.leaf){let u=SY(e,i.children,t);if(u!==-1)return i.children.splice(u,1),s.push(i),this._condense(s),this}!c&&!i.leaf&&Rb(i,r)?(s.push(i),o.push(a),a=0,l=i,i=i.children[0]):l?(a++,i=l.children[a],c=!1):i=null}return this}toBBox(e){return e}compareMinX(e,t){return e.minX-t.minX}compareMinY(e,t){return e.minY-t.minY}toJSON(){return this.data}fromJSON(e){return this.data=e,this}_all(e,t){let i=[];for(;e;)e.leaf?t.push(...e.children):i.push(...e.children),e=i.pop();return t}_build(e,t,i,r){let s=i-t+1,o=this._maxEntries,a;if(s<=o)return a=du(e.slice(t,i+1)),uu(a,this.toBBox),a;r||(r=Math.ceil(Math.log(s)/Math.log(o)),o=Math.ceil(s/Math.pow(o,r-1))),a=du([]),a.leaf=!1,a.height=r;let l=Math.ceil(s/o),c=l*Math.ceil(Math.sqrt(o));GL(e,t,i,c,this.compareMinX);for(let u=t;u<=i;u+=c){let d=Math.min(u+c-1,i);GL(e,u,d,l,this.compareMinY);for(let h=u;h<=d;h+=l){let f=Math.min(h+l-1,d);a.children.push(this._build(e,h,f,r-1))}}return uu(a,this.toBBox),a}_chooseSubtree(e,t,i,r){for(;r.push(t),!(t.leaf||r.length-1===i);){let s=1/0,o=1/0,a;for(let l=0;l<t.children.length;l++){let c=t.children[l],u=Db(c),d=AY(e,c)-u;d<o?(o=d,s=u<s?u:s,a=c):d===o&&u<s&&(s=u,a=c)}t=a||t.children[0]}return t}_insert(e,t,i){let r=i?e:this.toBBox(e),s=[],o=this._chooseSubtree(r,this.data,t,s);for(o.children.push(e),Sh(o,r);t>=0&&s[t].children.length>this._maxEntries;)this._split(s,t),t--;this._adjustParentBBoxes(r,s,t)}_split(e,t){let i=e[t],r=i.children.length,s=this._minEntries;this._chooseSplitAxis(i,s,r);let o=this._chooseSplitIndex(i,s,r),a=du(i.children.splice(o,i.children.length-o));a.height=i.height,a.leaf=i.leaf,uu(i,this.toBBox),uu(a,this.toBBox),t?e[t-1].children.push(a):this._splitRoot(i,a)}_splitRoot(e,t){this.data=du([e,t]),this.data.height=e.height+1,this.data.leaf=!1,uu(this.data,this.toBBox)}_chooseSplitIndex(e,t,i){let r,s=1/0,o=1/0;for(let a=t;a<=i-t;a++){let l=bh(e,0,a,this.toBBox),c=bh(e,a,i,this.toBBox),u=IY(l,c),d=Db(l)+Db(c);u<s?(s=u,r=a,o=d<o?d:o):u===s&&d<o&&(o=d,r=a)}return r||i-t}_chooseSplitAxis(e,t,i){let r=e.leaf?this.compareMinX:TY,s=e.leaf?this.compareMinY:CY,o=this._allDistMargin(e,t,i,r),a=this._allDistMargin(e,t,i,s);o<a&&e.children.sort(r)}_allDistMargin(e,t,i,r){e.children.sort(r);let s=this.toBBox,o=bh(e,0,t,s),a=bh(e,i-t,i,s),l=My(o)+My(a);for(let c=t;c<i-t;c++){let u=e.children[c];Sh(o,e.leaf?s(u):u),l+=My(o)}for(let c=i-t-1;c>=t;c--){let u=e.children[c];Sh(a,e.leaf?s(u):u),l+=My(a)}return l}_adjustParentBBoxes(e,t,i){for(let r=i;r>=0;r--)Sh(t[r],e)}_condense(e){for(let t=e.length-1,i;t>=0;t--)e[t].children.length===0?t>0?(i=e[t-1].children,i.splice(i.indexOf(e[t]),1)):this.clear():uu(e[t],this.toBBox)}};function SY(n,e,t){if(!t)return e.indexOf(n);for(let i=0;i<e.length;i++)if(t(n,e[i]))return i;return-1}function uu(n,e){bh(n,0,n.children.length,e,n)}function bh(n,e,t,i,r){r||(r=du(null)),r.minX=1/0,r.minY=1/0,r.maxX=-1/0,r.maxY=-1/0;for(let s=e;s<t;s++){let o=n.children[s];Sh(r,n.leaf?i(o):o)}return r}function Sh(n,e){return n.minX=Math.min(n.minX,e.minX),n.minY=Math.min(n.minY,e.minY),n.maxX=Math.max(n.maxX,e.maxX),n.maxY=Math.max(n.maxY,e.maxY),n}function TY(n,e){return n.minX-e.minX}function CY(n,e){return n.minY-e.minY}function Db(n){return(n.maxX-n.minX)*(n.maxY-n.minY)}function My(n){return n.maxX-n.minX+(n.maxY-n.minY)}function AY(n,e){return(Math.max(e.maxX,n.maxX)-Math.min(e.minX,n.minX))*(Math.max(e.maxY,n.maxY)-Math.min(e.minY,n.minY))}function IY(n,e){let t=Math.max(n.minX,e.minX),i=Math.max(n.minY,e.minY),r=Math.min(n.maxX,e.maxX),s=Math.min(n.maxY,e.maxY);return Math.max(0,r-t)*Math.max(0,s-i)}function Rb(n,e){return n.minX<=e.minX&&n.minY<=e.minY&&e.maxX<=n.maxX&&e.maxY<=n.maxY}function wy(n,e){return e.minX<=n.maxX&&e.minY<=n.maxY&&e.maxX>=n.minX&&e.maxY>=n.minY}function du(n){return{children:n,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function GL(n,e,t,i,r){let s=[e,t];for(;s.length;){if(t=s.pop(),e=s.pop(),t-e<=i)continue;let o=e+Math.ceil((t-e)/i/2)*i;Ey(n,o,e,t,r),s.push(e,o,o,t)}}var it={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};var Qs={name:"rgb",min:[0,0,0],max:[255,255,255],channel:["red","green","blue"],alias:["RGB"]};var sl={name:"xyz",min:[0,0,0],channel:["X","Y","Z"],alias:["XYZ","ciexyz","cie1931"]};sl.whitepoint={2:{A:[109.85,100,35.585],C:[98.074,100,118.232],D50:[96.422,100,82.521],D55:[95.682,100,92.149],D65:[95.045592705167,100,108.9057750759878],D75:[94.972,100,122.638],F2:[99.187,100,67.395],F7:[95.044,100,108.755],F11:[100.966,100,64.37],E:[100,100,100]},10:{A:[111.144,100,35.2],C:[97.285,100,116.145],D50:[96.72,100,81.427],D55:[95.799,100,90.926],D65:[94.811,100,107.304],D75:[94.416,100,120.641],F2:[103.28,100,69.026],F7:[95.792,100,107.687],F11:[103.866,100,65.627],E:[100,100,100]}};sl.max=sl.whitepoint[2].D65;sl.rgb=function(n,e){e=e||sl.whitepoint[2].E;var t=n[0]/e[0],i=n[1]/e[1],r=n[2]/e[2],s,o,a;return s=t*3.240969941904521+i*-1.537383177570093+r*-.498610760293,o=t*-.96924363628087+i*1.87596750150772+r*.041555057407175,a=t*.055630079696993+i*-.20397695888897+r*1.056971514242878,s=s>.0031308?1.055*Math.pow(s,1/2.4)-.055:s=s*12.92,o=o>.0031308?1.055*Math.pow(o,1/2.4)-.055:o=o*12.92,a=a>.0031308?1.055*Math.pow(a,1/2.4)-.055:a=a*12.92,s=Math.min(Math.max(0,s),1),o=Math.min(Math.max(0,o),1),a=Math.min(Math.max(0,a),1),[s*255,o*255,a*255]};Qs.xyz=function(n,e){var t=n[0]/255,i=n[1]/255,r=n[2]/255;t=t>.04045?Math.pow((t+.055)/1.055,2.4):t/12.92,i=i>.04045?Math.pow((i+.055)/1.055,2.4):i/12.92,r=r>.04045?Math.pow((r+.055)/1.055,2.4):r/12.92;var s=t*.41239079926595+i*.35758433938387+r*.18048078840183,o=t*.21263900587151+i*.71516867876775+r*.072192315360733,a=t*.019330818715591+i*.11919477979462+r*.95053215224966;return e=e||sl.whitepoint[2].E,[s*e[0],o*e[1],a*e[2]]};var vi=sl;var Sy={name:"luv",min:[0,-134,-140],max:[100,224,122],channel:["lightness","u","v"],alias:["LUV","cieluv","cie1976"],xyz:function(n,e,t){var i,r,s,o,a,l,c,u,d,h,f,p,y;if(s=n[0],o=n[1],a=n[2],s===0)return[0,0,0];var g=.0011070564598794539;return e=e||"D65",t=t||2,d=vi.whitepoint[t][e][0],h=vi.whitepoint[t][e][1],f=vi.whitepoint[t][e][2],p=4*d/(d+15*h+3*f),y=9*h/(d+15*h+3*f),i=o/(13*s)+p||0,r=a/(13*s)+y||0,c=s>8?h*Math.pow((s+16)/116,3):h*s*g,l=c*9*i/(4*r)||0,u=c*(12-3*i-20*r)/(4*r)||0,[l,c,u]}};vi.luv=function(n,e,t){var i,r,s,o,a,l,c,u,d,h,f,p,y,g=.008856451679035631,m=903.2962962962961;e=e||"D65",t=t||2,d=vi.whitepoint[t][e][0],h=vi.whitepoint[t][e][1],f=vi.whitepoint[t][e][2],p=4*d/(d+15*h+3*f),y=9*h/(d+15*h+3*f),l=n[0],c=n[1],u=n[2],i=4*l/(l+15*c+3*u)||0,r=9*c/(l+15*c+3*u)||0;var x=c/h;return s=x<=g?m*x:116*Math.pow(x,1/3)-16,o=13*s*(i-p),a=13*s*(r-y),[s,o,a]};var jL={name:"lchuv",channel:["lightness","chroma","hue"],alias:["LCHuv","cielchuv"],min:[0,0,0],max:[100,100,360],luv:function(n){var e=n[0],t=n[1],i=n[2],r,s,o;return o=i/360*2*Math.PI,r=t*Math.cos(o),s=t*Math.sin(o),[e,r,s]},xyz:function(n){return Sy.xyz(jL.luv(n))}},WL=jL;Sy.lchuv=function(n){var e=n[0],t=n[1],i=n[2],r=Math.sqrt(t*t+i*i),s=Math.atan2(i,t),o=s*360/2/Math.PI;return o<0&&(o+=360),[e,r,o]};vi.lchuv=function(n){return Sy.lchuv(vi.luv(n))};var Pb={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};var XL=DY,$L={red:0,orange:60,yellow:120,green:180,blue:240,purple:300};function DY(n){var e,t=[],i=1,r;if(typeof n=="number")return{space:"rgb",values:[n>>>16,(n&65280)>>>8,n&255],alpha:1};if(typeof n=="number")return{space:"rgb",values:[n>>>16,(n&65280)>>>8,n&255],alpha:1};if(n=String(n).toLowerCase(),Pb[n])t=Pb[n].slice(),r="rgb";else if(n==="transparent")i=0,r="rgb",t=[0,0,0];else if(n[0]==="#"){var s=n.slice(1),o=s.length,a=o<=4;i=1,a?(t=[parseInt(s[0]+s[0],16),parseInt(s[1]+s[1],16),parseInt(s[2]+s[2],16)],o===4&&(i=parseInt(s[3]+s[3],16)/255)):(t=[parseInt(s[0]+s[1],16),parseInt(s[2]+s[3],16),parseInt(s[4]+s[5],16)],o===8&&(i=parseInt(s[6]+s[7],16)/255)),t[0]||(t[0]=0),t[1]||(t[1]=0),t[2]||(t[2]=0),r="rgb"}else if(e=/^((?:rgba?|hs[lvb]a?|hwba?|cmyk?|xy[zy]|gray|lab|lchu?v?|[ly]uv|lms|oklch|oklab|color))\s*\(([^\)]*)\)/.exec(n)){var l=e[1];r=l.replace(/a$/,"");var c=r==="cmyk"?4:r==="gray"?1:3;t=e[2].trim().split(/\s*[,\/]\s*|\s+/),r==="color"&&(r=t.shift()),t=t.map(function(u,d){if(u[u.length-1]==="%")return u=parseFloat(u)/100,d===3?u:r==="rgb"?u*255:r[0]==="h"||r[0]==="l"&&!d?u*100:r==="lab"?u*125:r==="lch"?d<2?u*150:u*360:r[0]==="o"&&!d?u:r==="oklab"?u*.4:r==="oklch"?d<2?u*.4:u*360:u;if(r[d]==="h"||d===2&&r[r.length-1]==="h"){if($L[u]!==void 0)return $L[u];if(u.endsWith("deg"))return parseFloat(u);if(u.endsWith("turn"))return parseFloat(u)*360;if(u.endsWith("grad"))return parseFloat(u)*360/400;if(u.endsWith("rad"))return parseFloat(u)*180/Math.PI}return u==="none"?0:parseFloat(u)}),i=t.length>c?t.pop():1}else/[0-9](?:\s|\/|,)/.test(n)&&(t=n.match(/([0-9]+)/g).map(function(u){return parseFloat(u)}),r=n.match(/([a-z])/ig)?.join("")?.toLowerCase()||"rgb");return{space:r,values:t,alpha:i}}var Ty={name:"hsl",min:[0,0,0],max:[360,100,100],channel:["hue","saturation","lightness"],alias:["HSL"],rgb:function(n){var e=n[0]/360,t=n[1]/100,i=n[2]/100,r,s,o,a,l,c=0;if(t===0)return l=i*255,[l,l,l];for(s=i<.5?i*(1+t):i+t-i*t,r=2*i-s,a=[0,0,0];c<3;)o=e+1/3*-(c-1),o<0?o++:o>1&&o--,l=6*o<1?r+(s-r)*6*o:2*o<1?s:3*o<2?r+(s-r)*(2/3-o)*6:r,a[c++]=l*255;return a}};Qs.hsl=function(n){var e=n[0]/255,t=n[1]/255,i=n[2]/255,r=Math.min(e,t,i),s=Math.max(e,t,i),o=s-r,a,l,c;return s===r?a=0:e===s?a=(t-i)/o:t===s?a=2+(i-e)/o:i===s&&(a=4+(e-t)/o),a=Math.min(a*60,360),a<0&&(a+=360),c=(r+s)/2,s===r?l=0:c<=.5?l=o/(s+r):l=o/(2-s-r),[a,l*100,c*100]};function Nb(n){Array.isArray(n)&&n.raw&&(n=String.raw(...arguments)),n instanceof Number&&(n=+n);var e,t,i,r=XL(n);if(!r.space)return[];let s=r.space[0]==="h"?Ty.min:Qs.min,o=r.space[0]==="h"?Ty.max:Qs.max;return e=Array(3),e[0]=Math.min(Math.max(r.values[0],s[0]),o[0]),e[1]=Math.min(Math.max(r.values[1],s[1]),o[1]),e[2]=Math.min(Math.max(r.values[2],s[2]),o[2]),r.space[0]==="h"&&(e=Ty.rgb(e)),e.push(Math.min(Math.max(r.alpha,0),1)),e}var Cy=[NaN,NaN,NaN,0];function qL(n){return typeof n=="string"?n:Ah(n)}var RY=1024,Th={},Ob=0;function YL(n){if(n.length===4)return n;let e=n.slice();return e[3]=1,e}function Lb(n){let e=vi.lchuv(Qs.xyz(n));return e[3]=n[3],e}function ZL(n){let e=vi.rgb(WL.xyz(n));return e[3]=n[3],e}function Ch(n){if(n==="none")return Cy;if(Th.hasOwnProperty(n))return Th[n];if(Ob>=RY){let t=0;for(let i in Th)t++&3||(delete Th[i],--Ob)}let e=Nb(n);if(e.length!==4)throw new Error('failed to parse "'+n+'" as color');for(let t of e)if(isNaN(t))throw new Error('failed to parse "'+n+'" as color');return Fb(e),Th[n]=e,++Ob,e}function Nr(n){return Array.isArray(n)?n:Ch(n)}function Fb(n){return n[0]=Wt(n[0]+.5|0,0,255),n[1]=Wt(n[1]+.5|0,0,255),n[2]=Wt(n[2]+.5|0,0,255),n[3]=Wt(n[3],0,1),n}function Ah(n){let e=n[0];e!=(e|0)&&(e=e+.5|0);let t=n[1];t!=(t|0)&&(t=t+.5|0);let i=n[2];i!=(i|0)&&(i=i+.5|0);let r=n[3]===void 0?1:Math.round(n[3]*1e3)/1e3;return"rgba("+e+","+t+","+i+","+r+")"}var qo=typeof navigator<"u"&&typeof navigator.userAgent<"u"?navigator.userAgent.toLowerCase():"",KL=qo.includes("firefox"),PY=qo.includes("safari")&&!qo.includes("chrom"),Wle=PY&&(qo.includes("version/15.4")||/cpu (os|iphone os) 15_4 like mac os x/.test(qo)),JL=qo.includes("webkit")&&!qo.includes("edge"),kb=qo.includes("macintosh"),Ay=typeof devicePixelRatio<"u"?devicePixelRatio:1,Iy=typeof WorkerGlobalScope<"u"&&typeof OffscreenCanvas<"u"&&self instanceof WorkerGlobalScope,Ub=typeof Image<"u"&&Image.prototype.decode;var Dy=function(){let n=!1;try{let e=Object.defineProperty({},"passive",{get:function(){n=!0}});window.addEventListener("_",null,e),window.removeEventListener("_",null,e)}catch{}return n}();function tn(n,e,t,i){let r;return t&&t.length?r=t.shift():Iy?r=new OffscreenCanvas(n||300,e||300):r=document.createElement("canvas"),n&&(r.width=n),e&&(r.height=e),r.getContext("2d",i)}var Bb;function hu(){return Bb||(Bb=tn(1,1)),Bb}function Ih(n){let e=n.canvas;e.width=1,e.height=1,n.clearRect(0,0,1,1)}function Vb(n,e){let t=e.parentNode;t&&t.replaceChild(n,e)}function QL(n){for(;n.lastChild;)n.lastChild.remove()}function eF(n,e){let t=n.childNodes;for(let i=0;;++i){let r=t[i],s=e[i];if(!r&&!s)break;if(r!==s){if(!r){n.appendChild(s);continue}if(!s){n.removeChild(r),--i;continue}n.insertBefore(s,r)}}}function tF(n,e,t){let i=n,r=!0,s=!1,o=!1,a=[Xc(i,Te.LOAD,function(){o=!0,s||e()})];return i.src&&Ub?(s=!0,i.decode().then(function(){r&&e()}).catch(function(l){r&&(o?e():t())})):a.push(Xc(i,Te.ERROR,t)),function(){r=!1,a.forEach(Nt)}}function NY(n,e){return new Promise((t,i)=>{function r(){o(),t(n)}function s(){o(),i(new Error("Image load error"))}function o(){n.removeEventListener("load",r),n.removeEventListener("error",s)}n.addEventListener("load",r),n.addEventListener("error",s),e&&(n.src=e)})}function nF(n,e){return e&&(n.src=e),n.src&&Ub?new Promise((t,i)=>n.decode().then(()=>t(n)).catch(r=>n.complete&&n.width?t(n):i(r))):NY(n)}var Hb=class{constructor(){this.cache_={},this.patternCache_={},this.cacheSize_=0,this.maxCacheSize_=1024}clear(){this.cache_={},this.patternCache_={},this.cacheSize_=0}canExpireCache(){return this.cacheSize_>this.maxCacheSize_}expire(){if(this.canExpireCache()){let e=0;for(let t in this.cache_){let i=this.cache_[t];!(e++&3)&&!i.hasListener()&&(delete this.cache_[t],delete this.patternCache_[t],--this.cacheSize_)}}}get(e,t,i){let r=zb(e,t,i);return r in this.cache_?this.cache_[r]:null}getPattern(e,t,i){let r=zb(e,t,i);return r in this.patternCache_?this.patternCache_[r]:null}set(e,t,i,r,s){let o=zb(e,t,i),a=o in this.cache_;this.cache_[o]=r,s&&(r.getImageState()===it.IDLE&&r.load(),r.getImageState()===it.LOADING?r.ready().then(()=>{this.patternCache_[o]=hu().createPattern(r.getImage(1),"repeat")}):this.patternCache_[o]=hu().createPattern(r.getImage(1),"repeat")),a||++this.cacheSize_}setSize(e){this.maxCacheSize_=e,this.expire()}};function zb(n,e,t){let i=t?Nr(t):"null";return e+":"+n+":"+i}var qn=new Hb;var Dh=null,Ry=class extends Ho{constructor(e,t,i,r,s){super(),this.hitDetectionImage_=null,this.image_=e,this.crossOrigin_=i,this.canvas_={},this.color_=s,this.imageState_=r===void 0?it.IDLE:r,this.size_=e&&e.width&&e.height?[e.width,e.height]:null,this.src_=t,this.tainted_,this.ready_=null}initializeImage_(){this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)}isTainted_(){if(this.tainted_===void 0&&this.imageState_===it.LOADED){Dh||(Dh=tn(1,1,void 0,{willReadFrequently:!0})),Dh.drawImage(this.image_,0,0);try{Dh.getImageData(0,0,1,1),this.tainted_=!1}catch{Dh=null,this.tainted_=!0}}return this.tainted_===!0}dispatchChangeEvent_(){this.dispatchEvent(Te.CHANGE)}handleImageError_(){this.imageState_=it.ERROR,this.dispatchChangeEvent_()}handleImageLoad_(){this.imageState_=it.LOADED,this.size_=[this.image_.width,this.image_.height],this.dispatchChangeEvent_()}getImage(e){return this.image_||this.initializeImage_(),this.replaceColor_(e),this.canvas_[e]?this.canvas_[e]:this.image_}getPixelRatio(e){return this.replaceColor_(e),this.canvas_[e]?e:1}getImageState(){return this.imageState_}getHitDetectionImage(){if(this.image_||this.initializeImage_(),!this.hitDetectionImage_)if(this.isTainted_()){let e=this.size_[0],t=this.size_[1],i=tn(e,t);i.fillRect(0,0,e,t),this.hitDetectionImage_=i.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_}getSize(){return this.size_}getSrc(){return this.src_}load(){if(this.imageState_===it.IDLE){this.image_||this.initializeImage_(),this.imageState_=it.LOADING;try{this.src_!==void 0&&(this.image_.src=this.src_)}catch{this.handleImageError_()}this.image_ instanceof HTMLImageElement&&nF(this.image_,this.src_).then(e=>{this.image_=e,this.handleImageLoad_()}).catch(this.handleImageError_.bind(this))}}replaceColor_(e){if(!this.color_||this.canvas_[e]||this.imageState_!==it.LOADED)return;let t=this.image_,i=tn(Math.ceil(t.width*e),Math.ceil(t.height*e)),r=i.canvas;i.scale(e,e),i.drawImage(t,0,0),i.globalCompositeOperation="multiply",i.fillStyle=qL(this.color_),i.fillRect(0,0,r.width/e,r.height/e),i.globalCompositeOperation="destination-in",i.drawImage(t,0,0),this.canvas_[e]=r}ready(){return this.ready_||(this.ready_=new Promise(e=>{if(this.imageState_===it.LOADED||this.imageState_===it.ERROR)e();else{let t=()=>{(this.imageState_===it.LOADED||this.imageState_===it.ERROR)&&(this.removeEventListener(Te.CHANGE,t),e())};this.addEventListener(Te.CHANGE,t)}})),this.ready_}};function fu(n,e,t,i,r,s){let o=e===void 0?void 0:qn.get(e,t,r);return o||(o=new Ry(n,n&&"src"in n?n.src||void 0:e,t,i,r),qn.set(e,t,r,o,s)),s&&o&&!qn.getPattern(e,t,r)&&qn.set(e,t,r,o,s),o}var iF=Ry;function Gb(n){return n[0]>0&&n[1]>0}function rF(n,e,t){return t===void 0&&(t=[0,0]),t[0]=n[0]*e+.5|0,t[1]=n[1]*e+.5|0,t}function cn(n,e){return Array.isArray(n)?n:(e===void 0?e=[n,n]:(e[0]=n,e[1]=n),e)}var jb=class n{constructor(e){this.opacity_=e.opacity,this.rotateWithView_=e.rotateWithView,this.rotation_=e.rotation,this.scale_=e.scale,this.scaleArray_=cn(e.scale),this.displacement_=e.displacement,this.declutterMode_=e.declutterMode}clone(){let e=this.getScale();return new n({opacity:this.getOpacity(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getOpacity(){return this.opacity_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getDisplacement(){return this.displacement_}getDeclutterMode(){return this.declutterMode_}getAnchor(){return ft()}getImage(e){return ft()}getHitDetectionImage(){return ft()}getPixelRatio(e){return 1}getImageState(){return ft()}getImageSize(){return ft()}getOrigin(){return ft()}getSize(){return ft()}setDisplacement(e){this.displacement_=e}setOpacity(e){this.opacity_=e}setRotateWithView(e){this.rotateWithView_=e}setRotation(e){this.rotation_=e}setScale(e){this.scale_=e,this.scaleArray_=cn(e)}listenImageChange(e){ft()}load(){ft()}unlistenImageChange(e){ft()}ready(){return Promise.resolve()}},Py=jb;function Wb(n){return n?Array.isArray(n)?Ah(n):typeof n=="object"&&"src"in n?OY(n):n:null}function OY(n){if(!n.offset||!n.size)return qn.getPattern(n.src,"anonymous",n.color);let e=n.src+":"+n.offset,t=qn.getPattern(e,void 0,n.color);if(t)return t;let i=qn.get(n.src,"anonymous",null);if(i.getImageState()!==it.LOADED)return null;let r=tn(n.size[0],n.size[1]);return r.drawImage(i.getImage(1),n.offset[0],n.offset[1],n.size[0],n.size[1],0,0,n.size[0],n.size[1]),fu(r.canvas,e,void 0,it.LOADED,n.color,!0),qn.getPattern(e,void 0,n.color)}var Rh="ol-hidden";var Yo="ol-unselectable";var pu="ol-control",$b="ol-collapsed",LY=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))",`?\\s*([-,\\"\\'\\sa-z]+?)\\s*$`].join(""),"i"),sF=["style","variant","weight","size","lineHeight","family"],oF=function(n){let e=n.match(LY);if(!e)return null;let t={lineHeight:"normal",size:"1.2em",style:"normal",weight:"normal",variant:"normal"};for(let i=0,r=sF.length;i<r;++i){let s=e[i+1];s!==void 0&&(t[sF[i]]=s)}return t.families=t.family.split(/,\s?/),t};var qb="#000",Yb="round";var Zb="round",lF=10,cF="#000";var uF=1,ns=new Dn,mu=null,Xb,FY={},Cce=function(){let e="32px ",t=["monospace","serif"],i=t.length,r="wmytzilWMYTZIL@#/&?$%10\uF013",s,o;function a(c,u,d){let h=!0;for(let f=0;f<i;++f){let p=t[f];if(o=aF(c+" "+u+" "+e+p,r),d!=p){let y=aF(c+" "+u+" "+e+d+","+p,r);h=h&&y!=o}}return!!h}function l(){let c=!0,u=ns.getKeys();for(let d=0,h=u.length;d<h;++d){let f=u[d];if(ns.get(f)<100){let[p,y,g]=f.split(`
`);a(p,y,g)?(es(FY),mu=null,Xb=void 0,ns.set(f,100)):(ns.set(f,ns.get(f)+1,!0),c=!1)}}c&&(clearInterval(s),s=void 0)}return function(c){let u=oF(c);if(!u)return;let d=u.families;for(let h=0,f=d.length;h<f;++h){let p=d[h],y=u.style+`
`+u.weight+`
`+p;ns.get(y)===void 0&&(ns.set(y,100,!0),a(u.style,u.weight,p)||(ns.set(y,0,!0),s===void 0&&(s=setInterval(l,32))))}}}();function kY(n,e){return mu||(mu=tn(1,1)),n!=Xb&&(mu.font=n,Xb=mu.font),mu.measureText(e)}function aF(n,e){return kY(n,e).width}var Kb=class n extends Py{constructor(e){super({opacity:1,rotateWithView:e.rotateWithView!==void 0?e.rotateWithView:!1,rotation:e.rotation!==void 0?e.rotation:0,scale:e.scale!==void 0?e.scale:1,displacement:e.displacement!==void 0?e.displacement:[0,0],declutterMode:e.declutterMode}),this.hitDetectionCanvas_=null,this.fill_=e.fill!==void 0?e.fill:null,this.origin_=[0,0],this.points_=e.points,this.radius=e.radius,this.radius2_=e.radius2,this.angle_=e.angle!==void 0?e.angle:0,this.stroke_=e.stroke!==void 0?e.stroke:null,this.size_,this.renderOptions_,this.imageState_=this.fill_&&this.fill_.loading()?it.LOADING:it.LOADED,this.imageState_===it.LOADING&&this.ready().then(()=>this.imageState_=it.LOADED),this.render()}clone(){let e=this.getScale(),t=new n({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(e)?e.slice():e,displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return t.setOpacity(this.getOpacity()),t}getAnchor(){let e=this.size_,t=this.getDisplacement(),i=this.getScaleArray();return[e[0]/2-t[0]/i[0],e[1]/2+t[1]/i[1]]}getAngle(){return this.angle_}getFill(){return this.fill_}setFill(e){this.fill_=e,this.render()}getHitDetectionImage(){return this.hitDetectionCanvas_||(this.hitDetectionCanvas_=this.createHitDetectionCanvas_(this.renderOptions_)),this.hitDetectionCanvas_}getImage(e){let t=this.fill_?.getKey(),i=`${e},${this.angle_},${this.radius},${this.radius2_},${this.points_},${t}`+Object.values(this.renderOptions_).join(","),r=qn.get(i,null,null)?.getImage(1);if(!r){let s=this.renderOptions_,o=Math.ceil(s.size*e),a=tn(o,o);this.draw_(s,a,e),r=a.canvas,qn.set(i,null,null,new iF(r,void 0,null,it.LOADED,null))}return r}getPixelRatio(e){return e}getImageSize(){return this.size_}getImageState(){return this.imageState_}getOrigin(){return this.origin_}getPoints(){return this.points_}getRadius(){return this.radius}getRadius2(){return this.radius2_}getSize(){return this.size_}getStroke(){return this.stroke_}setStroke(e){this.stroke_=e,this.render()}listenImageChange(e){}load(){}unlistenImageChange(e){}calculateLineJoinSize_(e,t,i){if(t===0||this.points_===1/0||e!=="bevel"&&e!=="miter")return t;let r=this.radius,s=this.radius2_===void 0?r:this.radius2_;if(r<s){let T=r;r=s,s=T}let o=this.radius2_===void 0?this.points_:this.points_*2,a=2*Math.PI/o,l=s*Math.sin(a),c=Math.sqrt(s*s-l*l),u=r-c,d=Math.sqrt(l*l+u*u),h=d/l;if(e==="miter"&&h<=i)return h*t;let f=t/2/h,p=t/2*(u/d),g=Math.sqrt((r+f)*(r+f)+p*p)-r;if(this.radius2_===void 0||e==="bevel")return g*2;let m=r*Math.sin(a),x=Math.sqrt(r*r-m*m),M=s-x,S=Math.sqrt(m*m+M*M)/m;if(S<=i){let T=S*t/2-s-r;return 2*Math.max(g,T)}return g*2}createRenderOptions(){let e=Yb,t=Zb,i=0,r=null,s=0,o,a=0;this.stroke_&&(o=Wb(this.stroke_.getColor()??cF),a=this.stroke_.getWidth()??uF,r=this.stroke_.getLineDash(),s=this.stroke_.getLineDashOffset()??0,t=this.stroke_.getLineJoin()??Zb,e=this.stroke_.getLineCap()??Yb,i=this.stroke_.getMiterLimit()??lF);let l=this.calculateLineJoinSize_(t,a,i),c=Math.max(this.radius,this.radius2_||0),u=Math.ceil(2*c+l);return{strokeStyle:o,strokeWidth:a,size:u,lineCap:e,lineDash:r,lineDashOffset:s,lineJoin:t,miterLimit:i}}render(){this.renderOptions_=this.createRenderOptions();let e=this.renderOptions_.size;this.hitDetectionCanvas_=null,this.size_=[e,e]}draw_(e,t,i){if(t.scale(i,i),t.translate(e.size/2,e.size/2),this.createPath_(t),this.fill_){let r=this.fill_.getColor();r===null&&(r=qb),t.fillStyle=Wb(r),t.fill()}e.strokeStyle&&(t.strokeStyle=e.strokeStyle,t.lineWidth=e.strokeWidth,e.lineDash&&(t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset),t.lineCap=e.lineCap,t.lineJoin=e.lineJoin,t.miterLimit=e.miterLimit,t.stroke())}createHitDetectionCanvas_(e){let t;if(this.fill_){let i=this.fill_.getColor(),r=0;typeof i=="string"&&(i=Nr(i)),i===null?r=1:Array.isArray(i)&&(r=i.length===4?i[3]:1),r===0&&(t=tn(e.size,e.size),this.drawHitDetectionCanvas_(e,t))}return t?t.canvas:this.getImage(1)}createPath_(e){let t=this.points_,i=this.radius;if(t===1/0)e.arc(0,0,i,0,2*Math.PI);else{let r=this.radius2_===void 0?i:this.radius2_;this.radius2_!==void 0&&(t*=2);let s=this.angle_-Math.PI/2,o=2*Math.PI/t;for(let a=0;a<t;a++){let l=s+a*o,c=a%2===0?i:r;e.lineTo(c*Math.cos(l),c*Math.sin(l))}e.closePath()}}drawHitDetectionCanvas_(e,t){t.translate(e.size/2,e.size/2),this.createPath_(t),t.fillStyle=qb,t.fill(),e.strokeStyle&&(t.strokeStyle=e.strokeStyle,t.lineWidth=e.strokeWidth,e.lineDash&&(t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset),t.lineJoin=e.lineJoin,t.miterLimit=e.miterLimit,t.stroke())}ready(){return this.fill_?this.fill_.ready():Promise.resolve()}},Ny=Kb;var Jb=class n extends Ny{constructor(e){e=e||{radius:5},super({points:1/0,fill:e.fill,radius:e.radius,stroke:e.stroke,scale:e.scale!==void 0?e.scale:1,rotation:e.rotation!==void 0?e.rotation:0,rotateWithView:e.rotateWithView!==void 0?e.rotateWithView:!1,displacement:e.displacement!==void 0?e.displacement:[0,0],declutterMode:e.declutterMode})}clone(){let e=this.getScale(),t=new n({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return t.setOpacity(this.getOpacity()),t}setRadius(e){this.radius=e,this.render()}},Oy=Jb;var Qb=class n{constructor(e){e=e||{},this.patternImage_=null,this.color_=null,e.color!==void 0&&this.setColor(e.color)}clone(){let e=this.getColor();return new n({color:Array.isArray(e)?e.slice():e||void 0})}getColor(){return this.color_}setColor(e){if(e!==null&&typeof e=="object"&&"src"in e){let t=fu(null,e.src,"anonymous",void 0,e.offset?null:e.color?e.color:null,!(e.offset&&e.size));t.ready().then(()=>{this.patternImage_=null}),t.getImageState()===it.IDLE&&t.load(),t.getImageState()===it.LOADING&&(this.patternImage_=t)}this.color_=e}getKey(){let e=this.getColor();return e?e instanceof CanvasPattern||e instanceof CanvasGradient?en(e):typeof e=="object"&&"src"in e?e.src+":"+e.offset:Nr(e).toString():""}loading(){return!!this.patternImage_}ready(){return this.patternImage_?this.patternImage_.ready():Promise.resolve()}},gu=Qb;var eS=class n{constructor(e){e=e||{},this.color_=e.color!==void 0?e.color:null,this.lineCap_=e.lineCap,this.lineDash_=e.lineDash!==void 0?e.lineDash:null,this.lineDashOffset_=e.lineDashOffset,this.lineJoin_=e.lineJoin,this.miterLimit_=e.miterLimit,this.width_=e.width}clone(){let e=this.getColor();return new n({color:Array.isArray(e)?e.slice():e||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})}getColor(){return this.color_}getLineCap(){return this.lineCap_}getLineDash(){return this.lineDash_}getLineDashOffset(){return this.lineDashOffset_}getLineJoin(){return this.lineJoin_}getMiterLimit(){return this.miterLimit_}getWidth(){return this.width_}setColor(e){this.color_=e}setLineCap(e){this.lineCap_=e}setLineDash(e){this.lineDash_=e}setLineDashOffset(e){this.lineDashOffset_=e}setLineJoin(e){this.lineJoin_=e}setMiterLimit(e){this.miterLimit_=e}setWidth(e){this.width_=e}},Ly=eS;var Fy=class n{constructor(e){e=e||{},this.geometry_=null,this.geometryFunction_=dF,e.geometry!==void 0&&this.setGeometry(e.geometry),this.fill_=e.fill!==void 0?e.fill:null,this.image_=e.image!==void 0?e.image:null,this.renderer_=e.renderer!==void 0?e.renderer:null,this.hitDetectionRenderer_=e.hitDetectionRenderer!==void 0?e.hitDetectionRenderer:null,this.stroke_=e.stroke!==void 0?e.stroke:null,this.text_=e.text!==void 0?e.text:null,this.zIndex_=e.zIndex}clone(){let e=this.getGeometry();return e&&typeof e=="object"&&(e=e.clone()),new n({geometry:e??void 0,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer()??void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})}getRenderer(){return this.renderer_}setRenderer(e){this.renderer_=e}setHitDetectionRenderer(e){this.hitDetectionRenderer_=e}getHitDetectionRenderer(){return this.hitDetectionRenderer_}getGeometry(){return this.geometry_}getGeometryFunction(){return this.geometryFunction_}getFill(){return this.fill_}setFill(e){this.fill_=e}getImage(){return this.image_}setImage(e){this.image_=e}getStroke(){return this.stroke_}setStroke(e){this.stroke_=e}getText(){return this.text_}setText(e){this.text_=e}getZIndex(){return this.zIndex_}setGeometry(e){typeof e=="function"?this.geometryFunction_=e:typeof e=="string"?this.geometryFunction_=function(t){return t.get(e)}:e?e!==void 0&&(this.geometryFunction_=function(){return e}):this.geometryFunction_=dF,this.geometry_=e}setZIndex(e){this.zIndex_=e}};function hF(n){let e;if(typeof n=="function")e=n;else{let t;Array.isArray(n)?t=n:(pt(typeof n.getZIndex=="function","Expected an `Style` or an array of `Style`"),t=[n]),e=function(){return t}}return e}var tS=null;function nS(n,e){if(!tS){let t=new gu({color:"rgba(255,255,255,0.4)"}),i=new Ly({color:"#3399CC",width:1.25});tS=[new Fy({image:new Oy({fill:t,stroke:i,radius:5}),fill:t,stroke:i})]}return tS}function dF(n){return n.getGeometry()}var yu=Fy;function fF(n,e,t,i){return t!==void 0&&i!==void 0?[t/n,i/e]:t!==void 0?t/n:i!==void 0?i/e:1}var iS=class n extends Py{constructor(e){e=e||{};let t=e.opacity!==void 0?e.opacity:1,i=e.rotation!==void 0?e.rotation:0,r=e.scale!==void 0?e.scale:1,s=e.rotateWithView!==void 0?e.rotateWithView:!1;super({opacity:t,rotation:i,scale:r,displacement:e.displacement!==void 0?e.displacement:[0,0],rotateWithView:s,declutterMode:e.declutterMode}),this.anchor_=e.anchor!==void 0?e.anchor:[.5,.5],this.normalizedAnchor_=null,this.anchorOrigin_=e.anchorOrigin!==void 0?e.anchorOrigin:"top-left",this.anchorXUnits_=e.anchorXUnits!==void 0?e.anchorXUnits:"fraction",this.anchorYUnits_=e.anchorYUnits!==void 0?e.anchorYUnits:"fraction",this.crossOrigin_=e.crossOrigin!==void 0?e.crossOrigin:null;let o=e.img!==void 0?e.img:null,a=e.src;pt(!(a!==void 0&&o),"`image` and `src` cannot be provided at the same time"),(a===void 0||a.length===0)&&o&&(a=o.src||en(o)),pt(a!==void 0&&a.length>0,"A defined and non-empty `src` or `image` must be provided"),pt(!((e.width!==void 0||e.height!==void 0)&&e.scale!==void 0),"`width` or `height` cannot be provided together with `scale`");let l;if(e.src!==void 0?l=it.IDLE:o!==void 0&&("complete"in o?o.complete?l=o.src?it.LOADED:it.IDLE:l=it.LOADING:l=it.LOADED),this.color_=e.color!==void 0?Nr(e.color):null,this.iconImage_=fu(o,a,this.crossOrigin_,l,this.color_),this.offset_=e.offset!==void 0?e.offset:[0,0],this.offsetOrigin_=e.offsetOrigin!==void 0?e.offsetOrigin:"top-left",this.origin_=null,this.size_=e.size!==void 0?e.size:null,this.initialOptions_,e.width!==void 0||e.height!==void 0){let c,u;if(e.size)[c,u]=e.size;else{let d=this.getImage(1);if(d.width&&d.height)c=d.width,u=d.height;else if(d instanceof HTMLImageElement){this.initialOptions_=e;let h=()=>{if(this.unlistenImageChange(h),!this.initialOptions_)return;let f=this.iconImage_.getSize();this.setScale(fF(f[0],f[1],e.width,e.height))};this.listenImageChange(h);return}}c!==void 0&&this.setScale(fF(c,u,e.width,e.height))}}clone(){let e,t,i;return this.initialOptions_?(t=this.initialOptions_.width,i=this.initialOptions_.height):(e=this.getScale(),e=Array.isArray(e)?e.slice():e),new n({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,crossOrigin:this.crossOrigin_,offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,opacity:this.getOpacity(),rotateWithView:this.getRotateWithView(),rotation:this.getRotation(),scale:e,width:t,height:i,size:this.size_!==null?this.size_.slice():void 0,src:this.getSrc(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getAnchor(){let e=this.normalizedAnchor_;if(!e){e=this.anchor_;let r=this.getSize();if(this.anchorXUnits_=="fraction"||this.anchorYUnits_=="fraction"){if(!r)return null;e=this.anchor_.slice(),this.anchorXUnits_=="fraction"&&(e[0]*=r[0]),this.anchorYUnits_=="fraction"&&(e[1]*=r[1])}if(this.anchorOrigin_!="top-left"){if(!r)return null;e===this.anchor_&&(e=this.anchor_.slice()),(this.anchorOrigin_=="top-right"||this.anchorOrigin_=="bottom-right")&&(e[0]=-e[0]+r[0]),(this.anchorOrigin_=="bottom-left"||this.anchorOrigin_=="bottom-right")&&(e[1]=-e[1]+r[1])}this.normalizedAnchor_=e}let t=this.getDisplacement(),i=this.getScaleArray();return[e[0]-t[0]/i[0],e[1]+t[1]/i[1]]}setAnchor(e){this.anchor_=e,this.normalizedAnchor_=null}getColor(){return this.color_}getImage(e){return this.iconImage_.getImage(e)}getPixelRatio(e){return this.iconImage_.getPixelRatio(e)}getImageSize(){return this.iconImage_.getSize()}getImageState(){return this.iconImage_.getImageState()}getHitDetectionImage(){return this.iconImage_.getHitDetectionImage()}getOrigin(){if(this.origin_)return this.origin_;let e=this.offset_;if(this.offsetOrigin_!="top-left"){let t=this.getSize(),i=this.iconImage_.getSize();if(!t||!i)return null;e=e.slice(),(this.offsetOrigin_=="top-right"||this.offsetOrigin_=="bottom-right")&&(e[0]=i[0]-t[0]-e[0]),(this.offsetOrigin_=="bottom-left"||this.offsetOrigin_=="bottom-right")&&(e[1]=i[1]-t[1]-e[1])}return this.origin_=e,this.origin_}getSrc(){return this.iconImage_.getSrc()}getSize(){return this.size_?this.size_:this.iconImage_.getSize()}getWidth(){let e=this.getScaleArray();if(this.size_)return this.size_[0]*e[0];if(this.iconImage_.getImageState()==it.LOADED)return this.iconImage_.getSize()[0]*e[0]}getHeight(){let e=this.getScaleArray();if(this.size_)return this.size_[1]*e[1];if(this.iconImage_.getImageState()==it.LOADED)return this.iconImage_.getSize()[1]*e[1]}setScale(e){delete this.initialOptions_,super.setScale(e)}listenImageChange(e){this.iconImage_.addEventListener(Te.CHANGE,e)}load(){this.iconImage_.load()}unlistenImageChange(e){this.iconImage_.removeEventListener(Te.CHANGE,e)}ready(){return this.iconImage_.ready()}},pF=iS;var UY="#333",rS=class n{constructor(e){e=e||{},this.font_=e.font,this.rotation_=e.rotation,this.rotateWithView_=e.rotateWithView,this.keepUpright_=e.keepUpright,this.scale_=e.scale,this.scaleArray_=cn(e.scale!==void 0?e.scale:1),this.text_=e.text,this.textAlign_=e.textAlign,this.justify_=e.justify,this.repeat_=e.repeat,this.textBaseline_=e.textBaseline,this.fill_=e.fill!==void 0?e.fill:new gu({color:UY}),this.maxAngle_=e.maxAngle!==void 0?e.maxAngle:Math.PI/4,this.placement_=e.placement!==void 0?e.placement:"point",this.overflow_=!!e.overflow,this.stroke_=e.stroke!==void 0?e.stroke:null,this.offsetX_=e.offsetX!==void 0?e.offsetX:0,this.offsetY_=e.offsetY!==void 0?e.offsetY:0,this.backgroundFill_=e.backgroundFill?e.backgroundFill:null,this.backgroundStroke_=e.backgroundStroke?e.backgroundStroke:null,this.padding_=e.padding===void 0?null:e.padding,this.declutterMode_=e.declutterMode}clone(){let e=this.getScale();return new n({font:this.getFont(),placement:this.getPlacement(),repeat:this.getRepeat(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),keepUpright:this.getKeepUpright(),scale:Array.isArray(e)?e.slice():e,text:this.getText(),textAlign:this.getTextAlign(),justify:this.getJustify(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()||void 0,declutterMode:this.getDeclutterMode()})}getOverflow(){return this.overflow_}getFont(){return this.font_}getMaxAngle(){return this.maxAngle_}getPlacement(){return this.placement_}getRepeat(){return this.repeat_}getOffsetX(){return this.offsetX_}getOffsetY(){return this.offsetY_}getFill(){return this.fill_}getRotateWithView(){return this.rotateWithView_}getKeepUpright(){return this.keepUpright_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getStroke(){return this.stroke_}getText(){return this.text_}getTextAlign(){return this.textAlign_}getJustify(){return this.justify_}getTextBaseline(){return this.textBaseline_}getBackgroundFill(){return this.backgroundFill_}getBackgroundStroke(){return this.backgroundStroke_}getPadding(){return this.padding_}getDeclutterMode(){return this.declutterMode_}setOverflow(e){this.overflow_=e}setFont(e){this.font_=e}setMaxAngle(e){this.maxAngle_=e}setOffsetX(e){this.offsetX_=e}setOffsetY(e){this.offsetY_=e}setPlacement(e){this.placement_=e}setRepeat(e){this.repeat_=e}setRotateWithView(e){this.rotateWithView_=e}setKeepUpright(e){this.keepUpright_=e}setFill(e){this.fill_=e}setRotation(e){this.rotation_=e}setScale(e){this.scale_=e,this.scaleArray_=cn(e!==void 0?e:1)}setStroke(e){this.stroke_=e}setText(e){this.text_=e}setTextAlign(e){this.textAlign_=e}setJustify(e){this.justify_=e}setTextBaseline(e){this.textBaseline_=e}setBackgroundFill(e){this.backgroundFill_=e}setBackgroundStroke(e){this.backgroundStroke_=e}setPadding(e){this.padding_=e}},mF=rS;var ol=0;var Yn=1<<ol++,wt=1<<ol++,ri=1<<ol++,Hi=1<<ol++,Ko=1<<ol++,Ph=1<<ol++,ky=Math.pow(2,ol)-1,oS={[Yn]:"boolean",[wt]:"number",[ri]:"string",[Hi]:"color",[Ko]:"number[]",[Ph]:"size"},BY=Object.keys(oS).map(Number).sort(Ka);function VY(n){return n in oS}function Nh(n){let e=[];for(let t of BY)Oh(n,t)&&e.push(oS[t]);return e.length===0?"untyped":e.length<3?e.join(" or "):e.slice(0,-1).join(", ")+", or "+e[e.length-1]}function Oh(n,e){return(n&e)===e}function Zo(n,e){return n===e}var un=class{constructor(e,t){if(!VY(e))throw new Error(`literal expressions must have a specific type, got ${Nh(e)}`);this.type=e,this.value=t}},sS=class{constructor(e,t,...i){this.type=e,this.operator=t,this.args=i}};function aS(){return{variables:new Set,properties:new Set,featureId:!1,geometryType:!1}}function Pn(n,e,t){switch(typeof n){case"boolean":{if(Zo(e,ri))return new un(ri,n?"true":"false");if(!Oh(e,Yn))throw new Error(`got a boolean, but expected ${Nh(e)}`);return new un(Yn,n)}case"number":{if(Zo(e,Ph))return new un(Ph,cn(n));if(Zo(e,Yn))return new un(Yn,!!n);if(Zo(e,ri))return new un(ri,n.toString());if(!Oh(e,wt))throw new Error(`got a number, but expected ${Nh(e)}`);return new un(wt,n)}case"string":{if(Zo(e,Hi))return new un(Hi,Ch(n));if(Zo(e,Yn))return new un(Yn,!!n);if(!Oh(e,ri))throw new Error(`got a string, but expected ${Nh(e)}`);return new un(ri,n)}default:}if(!Array.isArray(n))throw new Error("expression must be an array or a primitive value");if(n.length===0)throw new Error("empty expression");if(typeof n[0]=="string")return KY(n,e,t);for(let i of n)if(typeof i!="number")throw new Error("expected an array of numbers");if(Zo(e,Ph)){if(n.length!==2)throw new Error(`expected an array of two values for a size, got ${n.length}`);return new un(Ph,n)}if(Zo(e,Hi)){if(n.length===3)return new un(Hi,[...n,1]);if(n.length===4)return new un(Hi,n);throw new Error(`expected an array of 3 or 4 values for a color, got ${n.length}`)}if(!Oh(e,Ko))throw new Error(`got an array of numbers, but expected ${Nh(e)}`);return new un(Ko,n)}var Z={Get:"get",Var:"var",Concat:"concat",GeometryType:"geometry-type",LineMetric:"line-metric",Any:"any",All:"all",Not:"!",Resolution:"resolution",Zoom:"zoom",Time:"time",Equal:"==",NotEqual:"!=",GreaterThan:">",GreaterThanOrEqualTo:">=",LessThan:"<",LessThanOrEqualTo:"<=",Multiply:"*",Divide:"/",Add:"+",Subtract:"-",Clamp:"clamp",Mod:"%",Pow:"^",Abs:"abs",Floor:"floor",Ceil:"ceil",Round:"round",Sin:"sin",Cos:"cos",Atan:"atan",Sqrt:"sqrt",Match:"match",Between:"between",Interpolate:"interpolate",Coalesce:"coalesce",Case:"case",In:"in",Number:"number",String:"string",Array:"array",Color:"color",Id:"id",Band:"band",Palette:"palette",ToString:"to-string",Has:"has"},zY={[Z.Get]:Ze(ut(1,1/0),gF),[Z.Var]:Ze(ut(1,1),HY),[Z.Has]:Ze(ut(1,1/0),gF),[Z.Id]:Ze(GY,vu),[Z.Concat]:Ze(ut(2,1/0),Bt(ri)),[Z.GeometryType]:Ze(jY,vu),[Z.LineMetric]:Ze(vu),[Z.Resolution]:Ze(vu),[Z.Zoom]:Ze(vu),[Z.Time]:Ze(vu),[Z.Any]:Ze(ut(2,1/0),Bt(Yn)),[Z.All]:Ze(ut(2,1/0),Bt(Yn)),[Z.Not]:Ze(ut(1,1),Bt(Yn)),[Z.Equal]:Ze(ut(2,2),Bt(ky)),[Z.NotEqual]:Ze(ut(2,2),Bt(ky)),[Z.GreaterThan]:Ze(ut(2,2),Bt(wt)),[Z.GreaterThanOrEqualTo]:Ze(ut(2,2),Bt(wt)),[Z.LessThan]:Ze(ut(2,2),Bt(wt)),[Z.LessThanOrEqualTo]:Ze(ut(2,2),Bt(wt)),[Z.Multiply]:Ze(ut(2,1/0),yF),[Z.Coalesce]:Ze(ut(2,1/0),yF),[Z.Divide]:Ze(ut(2,2),Bt(wt)),[Z.Add]:Ze(ut(2,1/0),Bt(wt)),[Z.Subtract]:Ze(ut(2,2),Bt(wt)),[Z.Clamp]:Ze(ut(3,3),Bt(wt)),[Z.Mod]:Ze(ut(2,2),Bt(wt)),[Z.Pow]:Ze(ut(2,2),Bt(wt)),[Z.Abs]:Ze(ut(1,1),Bt(wt)),[Z.Floor]:Ze(ut(1,1),Bt(wt)),[Z.Ceil]:Ze(ut(1,1),Bt(wt)),[Z.Round]:Ze(ut(1,1),Bt(wt)),[Z.Sin]:Ze(ut(1,1),Bt(wt)),[Z.Cos]:Ze(ut(1,1),Bt(wt)),[Z.Atan]:Ze(ut(1,2),Bt(wt)),[Z.Sqrt]:Ze(ut(1,1),Bt(wt)),[Z.Match]:Ze(ut(4,1/0),vF,$Y),[Z.Between]:Ze(ut(3,3),Bt(wt)),[Z.Interpolate]:Ze(ut(6,1/0),vF,XY),[Z.Case]:Ze(ut(3,1/0),WY,qY),[Z.In]:Ze(ut(2,2),YY),[Z.Number]:Ze(ut(1,1/0),Bt(ky)),[Z.String]:Ze(ut(1,1/0),Bt(ky)),[Z.Array]:Ze(ut(1,1/0),Bt(wt)),[Z.Color]:Ze(ut(1,4),Bt(wt)),[Z.Band]:Ze(ut(1,3),Bt(wt)),[Z.Palette]:Ze(ut(2,2),ZY),[Z.ToString]:Ze(ut(1,1),Bt(Yn|wt|ri|Hi))};function gF(n,e,t){let i=n.length-1,r=new Array(i);for(let s=0;s<i;++s){let o=n[s+1];switch(typeof o){case"number":{r[s]=new un(wt,o);break}case"string":{r[s]=new un(ri,o);break}default:throw new Error(`expected a string key or numeric array index for a get operation, got ${o}`)}s===0&&t.properties.add(String(o))}return r}function HY(n,e,t){let i=n[1];if(typeof i!="string")throw new Error("expected a string argument for var operation");return t.variables.add(i),[new un(ri,i)]}function GY(n,e,t){t.featureId=!0}function jY(n,e,t){t.geometryType=!0}function vu(n,e,t){let i=n[0];if(n.length!==1)throw new Error(`expected no arguments for ${i} operation`);return[]}function ut(n,e){return function(t,i,r){let s=t[0],o=t.length-1;if(n===e){if(o!==n){let a=n===1?"":"s";throw new Error(`expected ${n} argument${a} for ${s}, got ${o}`)}}else if(o<n||o>e){let a=e===1/0?`${n} or more`:`${n} to ${e}`;throw new Error(`expected ${a} arguments for ${s}, got ${o}`)}}}function yF(n,e,t){let i=n.length-1,r=new Array(i);for(let s=0;s<i;++s){let o=Pn(n[s+1],e,t);r[s]=o}return r}function Bt(n){return function(e,t,i){let r=e.length-1,s=new Array(r);for(let o=0;o<r;++o){let a=Pn(e[o+1],n,i);s[o]=a}return s}}function WY(n,e,t){let i=n[0],r=n.length-1;if(r%2===0)throw new Error(`expected an odd number of arguments for ${i}, got ${r} instead`)}function vF(n,e,t){let i=n[0],r=n.length-1;if(r%2===1)throw new Error(`expected an even number of arguments for operation ${i}, got ${r} instead`)}function $Y(n,e,t){let i=n.length-1,r=ri|wt|Yn,s=Pn(n[1],r,t),o=Pn(n[n.length-1],e,t),a=new Array(i-2);for(let l=0;l<i-2;l+=2){try{let c=Pn(n[l+2],s.type,t);a[l]=c}catch(c){throw new Error(`failed to parse argument ${l+1} of match expression: ${c.message}`)}try{let c=Pn(n[l+3],o.type,t);a[l+1]=c}catch(c){throw new Error(`failed to parse argument ${l+2} of match expression: ${c.message}`)}}return[s,...a,o]}function XY(n,e,t){let i=n[1],r;switch(i[0]){case"linear":r=1;break;case"exponential":let l=i[1];if(typeof l!="number"||l<=0)throw new Error(`expected a number base for exponential interpolation, got ${JSON.stringify(l)} instead`);r=l;break;default:throw new Error(`invalid interpolation type: ${JSON.stringify(i)}`)}let s=new un(wt,r),o;try{o=Pn(n[2],wt,t)}catch(l){throw new Error(`failed to parse argument 1 in interpolate expression: ${l.message}`)}let a=new Array(n.length-3);for(let l=0;l<a.length;l+=2){try{let c=Pn(n[l+3],wt,t);a[l]=c}catch(c){throw new Error(`failed to parse argument ${l+2} for interpolate expression: ${c.message}`)}try{let c=Pn(n[l+4],e,t);a[l+1]=c}catch(c){throw new Error(`failed to parse argument ${l+3} for interpolate expression: ${c.message}`)}}return[s,o,...a]}function qY(n,e,t){let i=Pn(n[n.length-1],e,t),r=new Array(n.length-1);for(let s=0;s<r.length-1;s+=2){try{let o=Pn(n[s+1],Yn,t);r[s]=o}catch(o){throw new Error(`failed to parse argument ${s} of case expression: ${o.message}`)}try{let o=Pn(n[s+2],i.type,t);r[s+1]=o}catch(o){throw new Error(`failed to parse argument ${s+1} of case expression: ${o.message}`)}}return r[r.length-1]=i,r}function YY(n,e,t){let i=n[2];if(!Array.isArray(i))throw new Error('the second argument for the "in" operator must be an array');let r;if(typeof i[0]=="string"){if(i[0]!=="literal")throw new Error('for the "in" operator, a string array should be wrapped in a "literal" operator to disambiguate from expressions');if(!Array.isArray(i[1]))throw new Error('failed to parse "in" expression: the literal operator must be followed by an array');i=i[1],r=ri}else r=wt;let s=new Array(i.length);for(let a=0;a<s.length;a++)try{let l=Pn(i[a],r,t);s[a]=l}catch(l){throw new Error(`failed to parse haystack item ${a} for "in" expression: ${l.message}`)}return[Pn(n[1],r,t),...s]}function ZY(n,e,t){let i;try{i=Pn(n[1],wt,t)}catch(o){throw new Error(`failed to parse first argument in palette expression: ${o.message}`)}let r=n[2];if(!Array.isArray(r))throw new Error("the second argument of palette must be an array");let s=new Array(r.length);for(let o=0;o<s.length;o++){let a;try{a=Pn(r[o],Hi,t)}catch(l){throw new Error(`failed to parse color at index ${o} in palette expression: ${l.message}`)}if(!(a instanceof un))throw new Error(`the palette color at index ${o} must be a literal value`);s[o]=a}return[i,...s]}function Ze(...n){return function(e,t,i){let r=e[0],s;for(let o=0;o<n.length;o++){let a=n[o](e,t,i);if(o==n.length-1){if(!a)throw new Error("expected last argument validator to return the parsed args");s=a}}return new sS(t,r,...s)}}function KY(n,e,t){let i=n[0],r=zY[i];if(!r)throw new Error(`unknown operator: ${i}`);return r(n,e,t)}function lS(n){if(!n)return"";let e=n.getType();switch(e){case"Point":case"LineString":case"Polygon":return e;case"MultiPoint":case"MultiLineString":case"MultiPolygon":return e.substring(5);case"Circle":return"Polygon";case"GeometryCollection":return lS(n.getGeometries()[0]);default:return""}}function cS(){return{variables:{},properties:{},resolution:NaN,featureId:null,geometryType:""}}function is(n,e,t){let i=Pn(n,e,t);return Or(i,t)}function Or(n,e){if(n instanceof un){if(n.type===Hi&&typeof n.value=="string"){let i=Ch(n.value);return function(){return i}}return function(){return n.value}}let t=n.operator;switch(t){case Z.Number:case Z.String:case Z.Coalesce:return JY(n,e);case Z.Get:case Z.Var:case Z.Has:return QY(n,e);case Z.Id:return i=>i.featureId;case Z.GeometryType:return i=>i.geometryType;case Z.Concat:{let i=n.args.map(r=>Or(r,e));return r=>"".concat(...i.map(s=>s(r).toString()))}case Z.Resolution:return i=>i.resolution;case Z.Any:case Z.All:case Z.Between:case Z.In:case Z.Not:return t7(n,e);case Z.Equal:case Z.NotEqual:case Z.LessThan:case Z.LessThanOrEqualTo:case Z.GreaterThan:case Z.GreaterThanOrEqualTo:return e7(n,e);case Z.Multiply:case Z.Divide:case Z.Add:case Z.Subtract:case Z.Clamp:case Z.Mod:case Z.Pow:case Z.Abs:case Z.Floor:case Z.Ceil:case Z.Round:case Z.Sin:case Z.Cos:case Z.Atan:case Z.Sqrt:return n7(n,e);case Z.Case:return i7(n,e);case Z.Match:return r7(n,e);case Z.Interpolate:return s7(n,e);case Z.ToString:return o7(n,e);default:throw new Error(`Unsupported operator ${t}`)}}function JY(n,e){let t=n.operator,i=n.args.length,r=new Array(i);for(let s=0;s<i;++s)r[s]=Or(n.args[s],e);switch(t){case Z.Coalesce:return s=>{for(let o=0;o<i;++o){let a=r[o](s);if(typeof a<"u"&&a!==null)return a}throw new Error("Expected one of the values to be non-null")};case Z.Number:case Z.String:return s=>{for(let o=0;o<i;++o){let a=r[o](s);if(typeof a===t)return a}throw new Error(`Expected one of the values to be a ${t}`)};default:throw new Error(`Unsupported assertion operator ${t}`)}}function QY(n,e){let i=n.args[0].value;switch(n.operator){case Z.Get:return r=>{let s=n.args,o=r.properties[i];for(let a=1,l=s.length;a<l;++a){let u=s[a].value;o=o[u]}return o};case Z.Var:return r=>r.variables[i];case Z.Has:return r=>{let s=n.args;if(!(i in r.properties))return!1;let o=r.properties[i];for(let a=1,l=s.length;a<l;++a){let u=s[a].value;if(!o||!Object.hasOwn(o,u))return!1;o=o[u]}return!0};default:throw new Error(`Unsupported accessor operator ${n.operator}`)}}function e7(n,e){let t=n.operator,i=Or(n.args[0],e),r=Or(n.args[1],e);switch(t){case Z.Equal:return s=>i(s)===r(s);case Z.NotEqual:return s=>i(s)!==r(s);case Z.LessThan:return s=>i(s)<r(s);case Z.LessThanOrEqualTo:return s=>i(s)<=r(s);case Z.GreaterThan:return s=>i(s)>r(s);case Z.GreaterThanOrEqualTo:return s=>i(s)>=r(s);default:throw new Error(`Unsupported comparison operator ${t}`)}}function t7(n,e){let t=n.operator,i=n.args.length,r=new Array(i);for(let s=0;s<i;++s)r[s]=Or(n.args[s],e);switch(t){case Z.Any:return s=>{for(let o=0;o<i;++o)if(r[o](s))return!0;return!1};case Z.All:return s=>{for(let o=0;o<i;++o)if(!r[o](s))return!1;return!0};case Z.Between:return s=>{let o=r[0](s),a=r[1](s),l=r[2](s);return o>=a&&o<=l};case Z.In:return s=>{let o=r[0](s);for(let a=1;a<i;++a)if(o===r[a](s))return!0;return!1};case Z.Not:return s=>!r[0](s);default:throw new Error(`Unsupported logical operator ${t}`)}}function n7(n,e){let t=n.operator,i=n.args.length,r=new Array(i);for(let s=0;s<i;++s)r[s]=Or(n.args[s],e);switch(t){case Z.Multiply:return s=>{let o=1;for(let a=0;a<i;++a)o*=r[a](s);return o};case Z.Divide:return s=>r[0](s)/r[1](s);case Z.Add:return s=>{let o=0;for(let a=0;a<i;++a)o+=r[a](s);return o};case Z.Subtract:return s=>r[0](s)-r[1](s);case Z.Clamp:return s=>{let o=r[0](s),a=r[1](s);if(o<a)return a;let l=r[2](s);return o>l?l:o};case Z.Mod:return s=>r[0](s)%r[1](s);case Z.Pow:return s=>Math.pow(r[0](s),r[1](s));case Z.Abs:return s=>Math.abs(r[0](s));case Z.Floor:return s=>Math.floor(r[0](s));case Z.Ceil:return s=>Math.ceil(r[0](s));case Z.Round:return s=>Math.round(r[0](s));case Z.Sin:return s=>Math.sin(r[0](s));case Z.Cos:return s=>Math.cos(r[0](s));case Z.Atan:return i===2?s=>Math.atan2(r[0](s),r[1](s)):s=>Math.atan(r[0](s));case Z.Sqrt:return s=>Math.sqrt(r[0](s));default:throw new Error(`Unsupported numeric operator ${t}`)}}function i7(n,e){let t=n.args.length,i=new Array(t);for(let r=0;r<t;++r)i[r]=Or(n.args[r],e);return r=>{for(let s=0;s<t-1;s+=2)if(i[s](r))return i[s+1](r);return i[t-1](r)}}function r7(n,e){let t=n.args.length,i=new Array(t);for(let r=0;r<t;++r)i[r]=Or(n.args[r],e);return r=>{let s=i[0](r);for(let o=1;o<t;o+=2)if(s===i[o](r))return i[o+1](r);return i[t-1](r)}}function s7(n,e){let t=n.args.length,i=new Array(t);for(let r=0;r<t;++r)i[r]=Or(n.args[r],e);return r=>{let s=i[0](r),o=i[1](r),a,l;for(let c=2;c<t;c+=2){let u=i[c](r),d=i[c+1](r),h=Array.isArray(d);if(h&&(d=YL(d)),u>=o)return c===2?d:h?a7(s,o,a,l,u,d):Lh(s,o,a,l,u,d);a=u,l=d}return l}}function o7(n,e){let t=n.operator,i=n.args.length,r=new Array(i);for(let s=0;s<i;++s)r[s]=Or(n.args[s],e);switch(t){case Z.ToString:return s=>{let o=r[0](s);return n.args[0].type===Hi?Ah(o):o.toString()};default:throw new Error(`Unsupported convert operator ${t}`)}}function Lh(n,e,t,i,r,s){let o=r-t;if(o===0)return i;let a=e-t,l=n===1?a/o:(Math.pow(n,a)-1)/(Math.pow(n,o)-1);return i+l*(s-i)}function a7(n,e,t,i,r,s){if(r-t===0)return i;let a=Lb(i),l=Lb(s),c=l[2]-a[2];c>180?c-=360:c<-180&&(c+=360);let u=[Lh(n,e,t,a[0],r,l[0]),Lh(n,e,t,a[1],r,l[1]),a[2]+Lh(n,e,t,0,r,c),Lh(n,e,t,i[3],r,s[3])];return Fb(ZL(u))}function l7(n){return!0}function MF(n){let e=aS(),t=c7(n,e),i=cS();return function(r,s){if(i.properties=r.getPropertiesInternal(),i.resolution=s,e.featureId){let o=r.getId();o!==void 0?i.featureId=o:i.featureId=null}return e.geometryType&&(i.geometryType=lS(r.getGeometry())),t(i)}}function hS(n){let e=aS(),t=n.length,i=new Array(t);for(let o=0;o<t;++o)i[o]=uS(n[o],e);let r=cS(),s=new Array(t);return function(o,a){if(r.properties=o.getPropertiesInternal(),r.resolution=a,e.featureId){let c=o.getId();c!==void 0?r.featureId=c:r.featureId=null}let l=0;for(let c=0;c<t;++c){let u=i[c](r);u&&(s[l]=u,l+=1)}return s.length=l,s}}function c7(n,e){let t=n.length,i=new Array(t);for(let r=0;r<t;++r){let s=n[r],o="filter"in s?is(s.filter,Yn,e):l7,a;if(Array.isArray(s.style)){let l=s.style.length;a=new Array(l);for(let c=0;c<l;++c)a[c]=uS(s.style[c],e)}else a=[uS(s.style,e)];i[r]={filter:o,styles:a}}return function(r){let s=[],o=!1;for(let a=0;a<t;++a){let l=i[a].filter;if(l(r)&&!(n[a].else&&o)){o=!0;for(let c of i[a].styles){let u=c(r);u&&s.push(u)}}}return s}}function uS(n,e){let t=Fh(n,"",e),i=kh(n,"",e),r=u7(n,e),s=d7(n,e),o=_i(n,"z-index",e);if(!t&&!i&&!r&&!s&&!Jg(n))throw new Error("No fill, stroke, point, or text symbolizer properties in style: "+JSON.stringify(n));let a=new yu;return function(l){let c=!0;if(t){let u=t(l);u&&(c=!1),a.setFill(u)}if(i){let u=i(l);u&&(c=!1),a.setStroke(u)}if(r){let u=r(l);u&&(c=!1),a.setText(u)}if(s){let u=s(l);u&&(c=!1),a.setImage(u)}return o&&a.setZIndex(o(l)),c?null:a}}function Fh(n,e,t){let i;if(e+"fill-pattern-src"in n)i=m7(n,e+"fill-",t);else{if(n[e+"fill-color"]==="none")return s=>null;i=fS(n,e+"fill-color",t)}if(!i)return null;let r=new gu;return function(s){let o=i(s);return o===Cy?null:(r.setColor(o),r)}}function kh(n,e,t){let i=_i(n,e+"stroke-width",t),r=fS(n,e+"stroke-color",t);if(!i&&!r)return null;let s=eo(n,e+"stroke-line-cap",t),o=eo(n,e+"stroke-line-join",t),a=wF(n,e+"stroke-line-dash",t),l=_i(n,e+"stroke-line-dash-offset",t),c=_i(n,e+"stroke-miter-limit",t),u=new Ly;return function(d){if(r){let h=r(d);if(h===Cy)return null;u.setColor(h)}if(i&&u.setWidth(i(d)),s){let h=s(d);if(h!=="butt"&&h!=="round"&&h!=="square")throw new Error("Expected butt, round, or square line cap");u.setLineCap(h)}if(o){let h=o(d);if(h!=="bevel"&&h!=="round"&&h!=="miter")throw new Error("Expected bevel, round, or miter line join");u.setLineJoin(h)}return a&&u.setLineDash(a(d)),l&&u.setLineDashOffset(l(d)),c&&u.setMiterLimit(c(d)),u}}function u7(n,e){let t="text-",i=eo(n,t+"value",e);if(!i)return null;let r=Fh(n,t,e),s=Fh(n,t+"background-",e),o=kh(n,t,e),a=kh(n,t+"background-",e),l=eo(n,t+"font",e),c=_i(n,t+"max-angle",e),u=_i(n,t+"offset-x",e),d=_i(n,t+"offset-y",e),h=_u(n,t+"overflow",e),f=eo(n,t+"placement",e),p=_i(n,t+"repeat",e),y=Vy(n,t+"scale",e),g=_u(n,t+"rotate-with-view",e),m=_i(n,t+"rotation",e),x=eo(n,t+"align",e),M=eo(n,t+"justify",e),v=eo(n,t+"baseline",e),S=_u(n,t+"keep-upright",e),T=wF(n,t+"padding",e),A=zy(n,t+"declutter-mode"),I=new mF({declutterMode:A});return function(w){if(I.setText(i(w)),r&&I.setFill(r(w)),s&&I.setBackgroundFill(s(w)),o&&I.setStroke(o(w)),a&&I.setBackgroundStroke(a(w)),l&&I.setFont(l(w)),c&&I.setMaxAngle(c(w)),u&&I.setOffsetX(u(w)),d&&I.setOffsetY(d(w)),h&&I.setOverflow(h(w)),f){let _=f(w);if(_!=="point"&&_!=="line")throw new Error("Expected point or line for text-placement");I.setPlacement(_)}if(p&&I.setRepeat(p(w)),y&&I.setScale(y(w)),g&&I.setRotateWithView(g(w)),m&&I.setRotation(m(w)),x){let _=x(w);if(_!=="left"&&_!=="center"&&_!=="right"&&_!=="end"&&_!=="start")throw new Error("Expected left, right, center, start, or end for text-align");I.setTextAlign(_)}if(M){let _=M(w);if(_!=="left"&&_!=="right"&&_!=="center")throw new Error("Expected left, right, or center for text-justify");I.setJustify(_)}if(v){let _=v(w);if(_!=="bottom"&&_!=="top"&&_!=="middle"&&_!=="alphabetic"&&_!=="hanging")throw new Error("Expected bottom, top, middle, alphabetic, or hanging for text-baseline");I.setTextBaseline(_)}return T&&I.setPadding(T(w)),S&&I.setKeepUpright(S(w)),I}}function d7(n,e){return"icon-src"in n?h7(n,e):"shape-points"in n?f7(n,e):"circle-radius"in n?p7(n,e):null}function h7(n,e){let t="icon-",i=t+"src",r=bF(n[i],i),s=Uy(n,t+"anchor",e),o=Vy(n,t+"scale",e),a=_i(n,t+"opacity",e),l=Uy(n,t+"displacement",e),c=_i(n,t+"rotation",e),u=_u(n,t+"rotate-with-view",e),d=xF(n,t+"anchor-origin"),h=EF(n,t+"anchor-x-units"),f=EF(n,t+"anchor-y-units"),p=_7(n,t+"color"),y=y7(n,t+"cross-origin"),g=v7(n,t+"offset"),m=xF(n,t+"offset-origin"),x=By(n,t+"width"),M=By(n,t+"height"),v=g7(n,t+"size"),S=zy(n,t+"declutter-mode"),T=new pF({src:r,anchorOrigin:d,anchorXUnits:h,anchorYUnits:f,color:p,crossOrigin:y,offset:g,offsetOrigin:m,height:M,width:x,size:v,declutterMode:S});return function(A){return a&&T.setOpacity(a(A)),l&&T.setDisplacement(l(A)),c&&T.setRotation(c(A)),u&&T.setRotateWithView(u(A)),o&&T.setScale(o(A)),s&&T.setAnchor(s(A)),T}}function f7(n,e){let t="shape-",i=t+"points",r=t+"radius",s=dS(n[i],i),o=dS(n[r],r),a=Fh(n,t,e),l=kh(n,t,e),c=Vy(n,t+"scale",e),u=Uy(n,t+"displacement",e),d=_i(n,t+"rotation",e),h=_u(n,t+"rotate-with-view",e),f=By(n,t+"radius2"),p=By(n,t+"angle"),y=zy(n,t+"declutter-mode"),g=new Ny({points:s,radius:o,radius2:f,angle:p,declutterMode:y});return function(m){return a&&g.setFill(a(m)),l&&g.setStroke(l(m)),u&&g.setDisplacement(u(m)),d&&g.setRotation(d(m)),h&&g.setRotateWithView(h(m)),c&&g.setScale(c(m)),g}}function p7(n,e){let t="circle-",i=Fh(n,t,e),r=kh(n,t,e),s=_i(n,t+"radius",e),o=Vy(n,t+"scale",e),a=Uy(n,t+"displacement",e),l=_i(n,t+"rotation",e),c=_u(n,t+"rotate-with-view",e),u=zy(n,t+"declutter-mode"),d=new Oy({radius:5,declutterMode:u});return function(h){return s&&d.setRadius(s(h)),i&&d.setFill(i(h)),r&&d.setStroke(r(h)),a&&d.setDisplacement(a(h)),l&&d.setRotation(l(h)),c&&d.setRotateWithView(c(h)),o&&d.setScale(o(h)),d}}function _i(n,e,t){if(!(e in n))return;let i=is(n[e],wt,t);return function(r){return dS(i(r),e)}}function eo(n,e,t){if(!(e in n))return null;let i=is(n[e],ri,t);return function(r){return bF(i(r),e)}}function m7(n,e,t){let i=eo(n,e+"pattern-src",t),r=_F(n,e+"pattern-offset",t),s=_F(n,e+"pattern-size",t),o=fS(n,e+"color",t);return function(a){return{src:i(a),offset:r&&r(a),size:s&&s(a),color:o&&o(a)}}}function _u(n,e,t){if(!(e in n))return null;let i=is(n[e],Yn,t);return function(r){let s=i(r);if(typeof s!="boolean")throw new Error(`Expected a boolean for ${e}`);return s}}function fS(n,e,t){if(!(e in n))return null;let i=is(n[e],Hi,t);return function(r){return SF(i(r),e)}}function wF(n,e,t){if(!(e in n))return null;let i=is(n[e],Ko,t);return function(r){return Uh(i(r),e)}}function Uy(n,e,t){if(!(e in n))return null;let i=is(n[e],Ko,t);return function(r){let s=Uh(i(r),e);if(s.length!==2)throw new Error(`Expected two numbers for ${e}`);return s}}function _F(n,e,t){if(!(e in n))return null;let i=is(n[e],Ko,t);return function(r){return TF(i(r),e)}}function Vy(n,e,t){if(!(e in n))return null;let i=is(n[e],Ko|wt,t);return function(r){return x7(i(r),e)}}function By(n,e){let t=n[e];if(t!==void 0){if(typeof t!="number")throw new Error(`Expected a number for ${e}`);return t}}function g7(n,e){let t=n[e];if(t!==void 0){if(typeof t=="number")return cn(t);if(!Array.isArray(t))throw new Error(`Expected a number or size array for ${e}`);if(t.length!==2||typeof t[0]!="number"||typeof t[1]!="number")throw new Error(`Expected a number or size array for ${e}`);return t}}function y7(n,e){let t=n[e];if(t!==void 0){if(typeof t!="string")throw new Error(`Expected a string for ${e}`);return t}}function xF(n,e){let t=n[e];if(t!==void 0){if(t!=="bottom-left"&&t!=="bottom-right"&&t!=="top-left"&&t!=="top-right")throw new Error(`Expected bottom-left, bottom-right, top-left, or top-right for ${e}`);return t}}function EF(n,e){let t=n[e];if(t!==void 0){if(t!=="pixels"&&t!=="fraction")throw new Error(`Expected pixels or fraction for ${e}`);return t}}function v7(n,e){let t=n[e];if(t!==void 0)return Uh(t,e)}function zy(n,e){let t=n[e];if(t!==void 0){if(typeof t!="string")throw new Error(`Expected a string for ${e}`);if(t!=="declutter"&&t!=="obstacle"&&t!=="none")throw new Error(`Expected declutter, obstacle, or none for ${e}`);return t}}function _7(n,e){let t=n[e];if(t!==void 0)return SF(t,e)}function Uh(n,e){if(!Array.isArray(n))throw new Error(`Expected an array for ${e}`);let t=n.length;for(let i=0;i<t;++i)if(typeof n[i]!="number")throw new Error(`Expected an array of numbers for ${e}`);return n}function bF(n,e){if(typeof n!="string")throw new Error(`Expected a string for ${e}`);return n}function dS(n,e){if(typeof n!="number")throw new Error(`Expected a number for ${e}`);return n}function SF(n,e){if(typeof n=="string")return n;let t=Uh(n,e),i=t.length;if(i<3||i>4)throw new Error(`Expected a color with 3 or 4 values for ${e}`);return t}function TF(n,e){let t=Uh(n,e);if(t.length!==2)throw new Error(`Expected an array of two numbers for ${e}`);return t}function x7(n,e){return typeof n=="number"?n:TF(n,e)}var CF={RENDER_ORDER:"renderOrder"},pS=class extends rl{constructor(e){e=e||{};let t=Object.assign({},e);delete t.style,delete t.renderBuffer,delete t.updateWhileAnimating,delete t.updateWhileInteracting,super(t),this.declutter_=e.declutter?String(e.declutter):void 0,this.renderBuffer_=e.renderBuffer!==void 0?e.renderBuffer:100,this.style_=null,this.styleFunction_=void 0,this.setStyle(e.style),this.updateWhileAnimating_=e.updateWhileAnimating!==void 0?e.updateWhileAnimating:!1,this.updateWhileInteracting_=e.updateWhileInteracting!==void 0?e.updateWhileInteracting:!1}getDeclutter(){return this.declutter_}getFeatures(e){return super.getFeatures(e)}getRenderBuffer(){return this.renderBuffer_}getRenderOrder(){return this.get(CF.RENDER_ORDER)}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}getUpdateWhileAnimating(){return this.updateWhileAnimating_}getUpdateWhileInteracting(){return this.updateWhileInteracting_}renderDeclutter(e,t){let i=this.getDeclutter();i in e.declutter||(e.declutter[i]=new by(9)),this.getRenderer().renderDeclutter(e,t)}setRenderOrder(e){this.set(CF.RENDER_ORDER,e)}setStyle(e){this.style_=e===void 0?nS:e;let t=E7(e);this.styleFunction_=e===null?void 0:hF(t),this.changed()}setDeclutter(e){this.declutter_=e?String(e):void 0,this.changed()}};function E7(n){if(n===void 0)return nS;if(!n)return null;if(typeof n=="function"||n instanceof yu)return n;if(!Array.isArray(n))return hS([n]);if(n.length===0)return[];let e=n.length,t=n[0];if(t instanceof yu){let r=new Array(e);for(let s=0;s<e;++s){let o=n[s];if(!(o instanceof yu))throw new Error("Expected a list of style instances");r[s]=o}return r}if("style"in t){let r=new Array(e);for(let s=0;s<e;++s){let o=n[s];if(!("style"in o))throw new Error("Expected a list of rules with a style property");r[s]=o}return MF(r)}return hS(n)}var AF=pS;var mS=class extends Vo{constructor(e){super(),this.map_=e}dispatchRenderEvent(e,t){ft()}calculateMatrices2D(e){let t=e.viewState,i=e.coordinateToPixelTransform,r=e.pixelToCoordinateTransform;Js(i,e.size[0]/2,e.size[1]/2,1/t.resolution,-1/t.resolution,-t.rotation,-t.center[0],-t.center[1]),yy(r,i)}forEachFeatureAtCoordinate(e,t,i,r,s,o,a,l){let c,u=t.viewState;function d(v,S,T,A){return s.call(o,S,v?T:null,A)}let h=u.projection,f=HO(e.slice(),h),p=[[0,0]];if(h.canWrapX()&&r){let v=h.getExtent(),S=ct(v);p.push([-S,0],[S,0])}let y=t.layerStatesArray,g=y.length,m=[],x=[];for(let v=0;v<p.length;v++)for(let S=g-1;S>=0;--S){let T=y[S],A=T.layer;if(A.hasRenderer()&&Mh(T,u)&&a.call(l,A)){let I=A.getRenderer(),w=A.getSource();if(I&&w){let _=w.getWrapX()?f:e,D=d.bind(null,T.managed);x[0]=_[0]+p[v][0],x[1]=_[1]+p[v][1],c=I.forEachFeatureAtCoordinate(x,t,i,D,m)}if(c)return c}}if(m.length===0)return;let M=1/m.length;return m.forEach((v,S)=>v.distanceSq+=S*M),m.sort((v,S)=>v.distanceSq-S.distanceSq),m.some(v=>c=v.callback(v.feature,v.layer,v.geometry)),c}hasFeatureAtCoordinate(e,t,i,r,s,o){return this.forEachFeatureAtCoordinate(e,t,i,r,Ja,this,s,o)!==void 0}getMap(){return this.map_}renderFrame(e){ft()}scheduleExpireIconCache(e){qn.canExpireCache()&&e.postRenderFunctions.push(M7)}};function M7(n,e){qn.expire()}var IF=mS;var gS=class extends Xn{constructor(e,t,i,r){super(e),this.inversePixelTransform=t,this.frameState=i,this.context=r}},Hy=gS;var yS=class extends IF{constructor(e){super(e),this.fontChangeListenerKey_=yt(ns,Hs.PROPERTYCHANGE,e.redrawText,e),this.element_=document.createElement("div");let t=this.element_.style;t.position="absolute",t.width="100%",t.height="100%",t.zIndex="0",this.element_.className=Yo+" ol-layers";let i=e.getViewport();i.insertBefore(this.element_,i.firstChild||null),this.children_=[],this.renderedVisible_=!0}dispatchRenderEvent(e,t){let i=this.getMap();if(i.hasListener(e)){let r=new Hy(e,void 0,t);i.dispatchEvent(r)}}disposeInternal(){Nt(this.fontChangeListenerKey_),this.element_.remove(),super.disposeInternal()}renderFrame(e){if(!e){this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1);return}this.calculateMatrices2D(e),this.dispatchRenderEvent(mi.PRECOMPOSE,e);let t=e.layerStatesArray.sort((a,l)=>a.zIndex-l.zIndex);t.some(a=>a.layer instanceof AF&&a.layer.getDeclutter())&&(e.declutter={});let r=e.viewState;this.children_.length=0;let s=[],o=null;for(let a=0,l=t.length;a<l;++a){let c=t[a];e.layerIndex=a;let u=c.layer,d=u.getSourceState();if(!Mh(c,r)||d!="ready"&&d!="undefined"){u.unrender();continue}let h=u.render(e,o);h&&(h!==o&&(this.children_.push(h),o=h),s.push(c))}this.declutter(e,s),eF(this.element_,this.children_),this.dispatchRenderEvent(mi.POSTCOMPOSE,e),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(e)}declutter(e,t){if(e.declutter){for(let i=t.length-1;i>=0;--i){let r=t[i],s=r.layer;s.getDeclutter()&&s.renderDeclutter(e,r)}t.forEach(i=>i.layer.renderDeferred(e))}}},DF=yS;var Lr=class extends Xn{constructor(e,t){super(e),this.layer=t}},vS={LAYERS:"layers"},_S=class n extends iy{constructor(e){e=e||{};let t=Object.assign({},e);delete t.layers;let i=e.layers;super(t),this.on,this.once,this.un,this.layersListenerKeys_=[],this.listenerKeys_={},this.addChangeListener(vS.LAYERS,this.handleLayersChanged_),i?Array.isArray(i)?i=new Vi(i.slice(),{unique:!0}):pt(typeof i.getArray=="function","Expected `layers` to be an array or a `Collection`"):i=new Vi(void 0,{unique:!0}),this.setLayers(i)}handleLayerChange_(){this.changed()}handleLayersChanged_(){this.layersListenerKeys_.forEach(Nt),this.layersListenerKeys_.length=0;let e=this.getLayers();this.layersListenerKeys_.push(yt(e,ti.ADD,this.handleLayersAdd_,this),yt(e,ti.REMOVE,this.handleLayersRemove_,this));for(let i in this.listenerKeys_)this.listenerKeys_[i].forEach(Nt);es(this.listenerKeys_);let t=e.getArray();for(let i=0,r=t.length;i<r;i++){let s=t[i];this.registerLayerListeners_(s),this.dispatchEvent(new Lr("addlayer",s))}this.changed()}registerLayerListeners_(e){let t=[yt(e,Hs.PROPERTYCHANGE,this.handleLayerChange_,this),yt(e,Te.CHANGE,this.handleLayerChange_,this)];e instanceof n&&t.push(yt(e,"addlayer",this.handleLayerGroupAdd_,this),yt(e,"removelayer",this.handleLayerGroupRemove_,this)),this.listenerKeys_[en(e)]=t}handleLayerGroupAdd_(e){this.dispatchEvent(new Lr("addlayer",e.layer))}handleLayerGroupRemove_(e){this.dispatchEvent(new Lr("removelayer",e.layer))}handleLayersAdd_(e){let t=e.element;this.registerLayerListeners_(t),this.dispatchEvent(new Lr("addlayer",t)),this.changed()}handleLayersRemove_(e){let t=e.element,i=en(t);this.listenerKeys_[i].forEach(Nt),delete this.listenerKeys_[i],this.dispatchEvent(new Lr("removelayer",t)),this.changed()}getLayers(){return this.get(vS.LAYERS)}setLayers(e){let t=this.getLayers();if(t){let i=t.getArray();for(let r=0,s=i.length;r<s;++r)this.dispatchEvent(new Lr("removelayer",i[r]))}this.set(vS.LAYERS,e)}getLayersArray(e){return e=e!==void 0?e:[],this.getLayers().forEach(function(t){t.getLayersArray(e)}),e}getLayerStatesArray(e){let t=e!==void 0?e:[],i=t.length;this.getLayers().forEach(function(o){o.getLayerStatesArray(t)});let r=this.getLayerState(),s=r.zIndex;!e&&r.zIndex===void 0&&(s=0);for(let o=i,a=t.length;o<a;o++){let l=t[o];l.opacity*=r.opacity,l.visible=l.visible&&r.visible,l.maxResolution=Math.min(l.maxResolution,r.maxResolution),l.minResolution=Math.max(l.minResolution,r.minResolution),l.minZoom=Math.max(l.minZoom,r.minZoom),l.maxZoom=Math.min(l.maxZoom,r.maxZoom),r.extent!==void 0&&(l.extent!==void 0?l.extent=ni(l.extent,r.extent):l.extent=r.extent),l.zIndex===void 0&&(l.zIndex=s)}return t}getSourceState(){return"ready"}},Bh=_S;var xS=class extends Xn{constructor(e,t,i){super(e),this.map=t,this.frameState=i!==void 0?i:null}},Jo=xS;var ES=class extends Jo{constructor(e,t,i,r,s,o){super(e,t,s),this.originalEvent=i,this.pixel_=null,this.coordinate_=null,this.dragging=r!==void 0?r:!1,this.activePointers=o}get pixel(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_}set pixel(e){this.pixel_=e}get coordinate(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_}set coordinate(e){this.coordinate_=e}preventDefault(){super.preventDefault(),"preventDefault"in this.originalEvent&&this.originalEvent.preventDefault()}stopPropagation(){super.stopPropagation(),"stopPropagation"in this.originalEvent&&this.originalEvent.stopPropagation()}},rs=ES;var Kt={SINGLECLICK:"singleclick",CLICK:Te.CLICK,DBLCLICK:Te.DBLCLICK,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"};var Vh={POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"};var MS=class extends Ho{constructor(e,t){super(e),this.map_=e,this.clickTimeoutId_,this.emulateClicks_=!1,this.dragging_=!1,this.dragListenerKeys_=[],this.moveTolerance_=t===void 0?1:t,this.down_=null;let i=this.map_.getViewport();this.activePointers_=[],this.trackedTouches_={},this.element_=i,this.pointerdownListenerKey_=yt(i,Vh.POINTERDOWN,this.handlePointerDown_,this),this.originalPointerMoveEvent_,this.relayedListenerKey_=yt(i,Vh.POINTERMOVE,this.relayMoveEvent_,this),this.boundHandleTouchMove_=this.handleTouchMove_.bind(this),this.element_.addEventListener(Te.TOUCHMOVE,this.boundHandleTouchMove_,Dy?{passive:!1}:!1)}emulateClick_(e){let t=new rs(Kt.CLICK,this.map_,e);this.dispatchEvent(t),this.clickTimeoutId_!==void 0?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,t=new rs(Kt.DBLCLICK,this.map_,e),this.dispatchEvent(t)):this.clickTimeoutId_=setTimeout(()=>{this.clickTimeoutId_=void 0;let i=new rs(Kt.SINGLECLICK,this.map_,e);this.dispatchEvent(i)},250)}updateActivePointers_(e){let t=e,i=t.pointerId;if(t.type==Kt.POINTERUP||t.type==Kt.POINTERCANCEL){delete this.trackedTouches_[i];for(let r in this.trackedTouches_)if(this.trackedTouches_[r].target!==t.target){delete this.trackedTouches_[r];break}}else(t.type==Kt.POINTERDOWN||t.type==Kt.POINTERMOVE)&&(this.trackedTouches_[i]=t);this.activePointers_=Object.values(this.trackedTouches_)}handlePointerUp_(e){this.updateActivePointers_(e);let t=new rs(Kt.POINTERUP,this.map_,e,void 0,void 0,this.activePointers_);this.dispatchEvent(t),this.emulateClicks_&&!t.defaultPrevented&&!this.dragging_&&this.isMouseActionButton_(e)&&this.emulateClick_(this.down_),this.activePointers_.length===0&&(this.dragListenerKeys_.forEach(Nt),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)}isMouseActionButton_(e){return e.button===0}handlePointerDown_(e){this.emulateClicks_=this.activePointers_.length===0,this.updateActivePointers_(e);let t=new rs(Kt.POINTERDOWN,this.map_,e,void 0,void 0,this.activePointers_);if(this.dispatchEvent(t),this.down_=new PointerEvent(e.type,e),Object.defineProperty(this.down_,"target",{writable:!1,value:e.target}),this.dragListenerKeys_.length===0){let i=this.map_.getOwnerDocument();this.dragListenerKeys_.push(yt(i,Kt.POINTERMOVE,this.handlePointerMove_,this),yt(i,Kt.POINTERUP,this.handlePointerUp_,this),yt(this.element_,Kt.POINTERCANCEL,this.handlePointerUp_,this)),this.element_.getRootNode&&this.element_.getRootNode()!==i&&this.dragListenerKeys_.push(yt(this.element_.getRootNode(),Kt.POINTERUP,this.handlePointerUp_,this))}}handlePointerMove_(e){if(this.isMoving_(e)){this.updateActivePointers_(e),this.dragging_=!0;let t=new rs(Kt.POINTERDRAG,this.map_,e,this.dragging_,void 0,this.activePointers_);this.dispatchEvent(t)}}relayMoveEvent_(e){this.originalPointerMoveEvent_=e;let t=!!(this.down_&&this.isMoving_(e));this.dispatchEvent(new rs(Kt.POINTERMOVE,this.map_,e,t))}handleTouchMove_(e){let t=this.originalPointerMoveEvent_;(!t||t.defaultPrevented)&&(typeof e.cancelable!="boolean"||e.cancelable===!0)&&e.preventDefault()}isMoving_(e){return this.dragging_||Math.abs(e.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(e.clientY-this.down_.clientY)>this.moveTolerance_}disposeInternal(){this.relayedListenerKey_&&(Nt(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener(Te.TOUCHMOVE,this.boundHandleTouchMove_),this.pointerdownListenerKey_&&(Nt(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(Nt),this.dragListenerKeys_.length=0,this.element_=null,super.disposeInternal()}},RF=MS;var ss={POSTRENDER:"postrender",MOVESTART:"movestart",MOVEEND:"moveend",LOADSTART:"loadstart",LOADEND:"loadend"};var zn={LAYERGROUP:"layergroup",SIZE:"size",TARGET:"target",VIEW:"view"};var zh=1/0,wS=class{constructor(e,t){this.priorityFunction_=e,this.keyFunction_=t,this.elements_=[],this.priorities_=[],this.queuedElements_={}}clear(){this.elements_.length=0,this.priorities_.length=0,es(this.queuedElements_)}dequeue(){let e=this.elements_,t=this.priorities_,i=e[0];e.length==1?(e.length=0,t.length=0):(e[0]=e.pop(),t[0]=t.pop(),this.siftUp_(0));let r=this.keyFunction_(i);return delete this.queuedElements_[r],i}enqueue(e){pt(!(this.keyFunction_(e)in this.queuedElements_),"Tried to enqueue an `element` that was already added to the queue");let t=this.priorityFunction_(e);return t!=zh?(this.elements_.push(e),this.priorities_.push(t),this.queuedElements_[this.keyFunction_(e)]=!0,this.siftDown_(0,this.elements_.length-1),!0):!1}getCount(){return this.elements_.length}getLeftChildIndex_(e){return e*2+1}getRightChildIndex_(e){return e*2+2}getParentIndex_(e){return e-1>>1}heapify_(){let e;for(e=(this.elements_.length>>1)-1;e>=0;e--)this.siftUp_(e)}isEmpty(){return this.elements_.length===0}isKeyQueued(e){return e in this.queuedElements_}isQueued(e){return this.isKeyQueued(this.keyFunction_(e))}siftUp_(e){let t=this.elements_,i=this.priorities_,r=t.length,s=t[e],o=i[e],a=e;for(;e<r>>1;){let l=this.getLeftChildIndex_(e),c=this.getRightChildIndex_(e),u=c<r&&i[c]<i[l]?c:l;t[e]=t[u],i[e]=i[u],e=u}t[e]=s,i[e]=o,this.siftDown_(a,e)}siftDown_(e,t){let i=this.elements_,r=this.priorities_,s=i[t],o=r[t];for(;t>e;){let a=this.getParentIndex_(t);if(r[a]>o)i[t]=i[a],r[t]=r[a],t=a;else break}i[t]=s,r[t]=o}reprioritize(){let e=this.priorityFunction_,t=this.elements_,i=this.priorities_,r=0,s=t.length,o,a,l;for(a=0;a<s;++a)o=t[a],l=e(o),l==zh?delete this.queuedElements_[this.keyFunction_(o)]:(i[r]=l,t[r++]=o);t.length=r,i.length=r,this.heapify_()}},PF=wS;var pe={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};var bS=class extends PF{constructor(e,t){super(function(i){return e.apply(null,i)},function(i){return i[0].getKey()}),this.boundHandleTileChange_=this.handleTileChange.bind(this),this.tileChangeCallback_=t,this.tilesLoading_=0,this.tilesLoadingKeys_={}}enqueue(e){let t=super.enqueue(e);return t&&e[0].addEventListener(Te.CHANGE,this.boundHandleTileChange_),t}getTilesLoading(){return this.tilesLoading_}handleTileChange(e){let t=e.target,i=t.getState();if(i===pe.LOADED||i===pe.ERROR||i===pe.EMPTY){i!==pe.ERROR&&t.removeEventListener(Te.CHANGE,this.boundHandleTileChange_);let r=t.getKey();r in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[r],--this.tilesLoading_),this.tileChangeCallback_()}}loadMoreTiles(e,t){let i=0;for(;this.tilesLoading_<e&&i<t&&this.getCount()>0;){let r=this.dequeue()[0],s=r.getKey();r.getState()===pe.IDLE&&!(s in this.tilesLoadingKeys_)&&(this.tilesLoadingKeys_[s]=!0,++this.tilesLoading_,++i,r.load())}}},NF=bS;function OF(n,e,t,i,r){if(!n||!(t in n.wantedTiles))return zh;if(!n.wantedTiles[t][e.getKey()])return zh;let s=n.viewState.center,o=i[0]-s[0],a=i[1]-s[1];return 65536*Math.log(r)+Math.sqrt(o*o+a*a)/r}var SS=class extends Dn{constructor(e){super();let t=e.element;t&&!e.target&&!t.style.pointerEvents&&(t.style.pointerEvents="auto"),this.element=t||null,this.target_=null,this.map_=null,this.listenerKeys=[],e.render&&(this.render=e.render),e.target&&this.setTarget(e.target)}disposeInternal(){this.element?.remove(),super.disposeInternal()}getMap(){return this.map_}setMap(e){this.map_&&this.element?.remove();for(let t=0,i=this.listenerKeys.length;t<i;++t)Nt(this.listenerKeys[t]);if(this.listenerKeys.length=0,this.map_=e,e){let t=this.target_??e.getOverlayContainerStopEvent();this.element&&t.appendChild(this.element),this.render!==Qa&&this.listenerKeys.push(yt(e,ss.POSTRENDER,this.render,this)),e.render()}}render(e){}setTarget(e){this.target_=typeof e=="string"?document.getElementById(e):e}},xu=SS;var TS=class extends xu{constructor(e){e=e||{},super({element:document.createElement("div"),render:e.render,target:e.target}),this.ulElement_=document.createElement("ul"),this.collapsed_=e.collapsed!==void 0?e.collapsed:!0,this.userCollapsed_=this.collapsed_,this.overrideCollapsible_=e.collapsible!==void 0,this.collapsible_=e.collapsible!==void 0?e.collapsible:!0,this.collapsible_||(this.collapsed_=!1),this.attributions_=e.attributions;let t=e.className!==void 0?e.className:"ol-attribution",i=e.tipLabel!==void 0?e.tipLabel:"Attributions",r=e.expandClassName!==void 0?e.expandClassName:t+"-expand",s=e.collapseLabel!==void 0?e.collapseLabel:"\u203A",o=e.collapseClassName!==void 0?e.collapseClassName:t+"-collapse";typeof s=="string"?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=s,this.collapseLabel_.className=o):this.collapseLabel_=s;let a=e.label!==void 0?e.label:"i";typeof a=="string"?(this.label_=document.createElement("span"),this.label_.textContent=a,this.label_.className=r):this.label_=a;let l=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_;this.toggleButton_=document.createElement("button"),this.toggleButton_.setAttribute("type","button"),this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_)),this.toggleButton_.title=i,this.toggleButton_.appendChild(l),this.toggleButton_.addEventListener(Te.CLICK,this.handleClick_.bind(this),!1);let c=t+" "+Yo+" "+pu+(this.collapsed_&&this.collapsible_?" "+$b:"")+(this.collapsible_?"":" ol-uncollapsible"),u=this.element;u.className=c,u.appendChild(this.toggleButton_),u.appendChild(this.ulElement_),this.renderedAttributions_=[],this.renderedVisible_=!0}collectSourceAttributions_(e){let t=this.getMap().getAllLayers(),i=new Set(t.flatMap(r=>r.getAttributions(e)));if(this.attributions_!==void 0&&(Array.isArray(this.attributions_)?this.attributions_.forEach(r=>i.add(r)):i.add(this.attributions_)),!this.overrideCollapsible_){let r=!t.some(s=>s.getSource()?.getAttributionsCollapsible()===!1);this.setCollapsible(r)}return Array.from(i)}updateElement_(e){return ji(this,null,function*(){if(!e){this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1);return}let t=yield Promise.all(this.collectSourceAttributions_(e).map(r=>xO(()=>r))),i=t.length>0;if(this.renderedVisible_!=i&&(this.element.style.display=i?"":"none",this.renderedVisible_=i),!zo(t,this.renderedAttributions_)){QL(this.ulElement_);for(let r=0,s=t.length;r<s;++r){let o=document.createElement("li");o.innerHTML=t[r],this.ulElement_.appendChild(o)}this.renderedAttributions_=t}})}handleClick_(e){e.preventDefault(),this.handleToggle_(),this.userCollapsed_=this.collapsed_}handleToggle_(){this.element.classList.toggle($b),this.collapsed_?Vb(this.collapseLabel_,this.label_):Vb(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_,this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_))}getCollapsible(){return this.collapsible_}setCollapsible(e){this.collapsible_!==e&&(this.collapsible_=e,this.element.classList.toggle("ol-uncollapsible"),this.userCollapsed_&&this.handleToggle_())}setCollapsed(e){this.userCollapsed_=e,!(!this.collapsible_||this.collapsed_===e)&&this.handleToggle_()}getCollapsed(){return this.collapsed_}render(e){this.updateElement_(e.frameState)}},LF=TS;var CS=class extends xu{constructor(e){e=e||{},super({element:document.createElement("div"),render:e.render,target:e.target});let t=e.className!==void 0?e.className:"ol-rotate",i=e.label!==void 0?e.label:"\u21E7",r=e.compassClassName!==void 0?e.compassClassName:"ol-compass";this.label_=null,typeof i=="string"?(this.label_=document.createElement("span"),this.label_.className=r,this.label_.textContent=i):(this.label_=i,this.label_.classList.add(r));let s=e.tipLabel?e.tipLabel:"Reset rotation",o=document.createElement("button");o.className=t+"-reset",o.setAttribute("type","button"),o.title=s,o.appendChild(this.label_),o.addEventListener(Te.CLICK,this.handleClick_.bind(this),!1);let a=t+" "+Yo+" "+pu,l=this.element;l.className=a,l.appendChild(o),this.callResetNorth_=e.resetNorth?e.resetNorth:void 0,this.duration_=e.duration!==void 0?e.duration:250,this.autoHide_=e.autoHide!==void 0?e.autoHide:!0,this.rotation_=void 0,this.autoHide_&&this.element.classList.add(Rh)}handleClick_(e){e.preventDefault(),this.callResetNorth_!==void 0?this.callResetNorth_():this.resetNorth_()}resetNorth_(){let t=this.getMap().getView();if(!t)return;let i=t.getRotation();i!==void 0&&(this.duration_>0&&i%(2*Math.PI)!==0?t.animate({rotation:0,duration:this.duration_,easing:dr}):t.setRotation(0))}render(e){let t=e.frameState;if(!t)return;let i=t.viewState.rotation;if(i!=this.rotation_){let r="rotate("+i+"rad)";if(this.autoHide_){let s=this.element.classList.contains(Rh);!s&&i===0?this.element.classList.add(Rh):s&&i!==0&&this.element.classList.remove(Rh)}this.label_.style.transform=r}this.rotation_=i}},FF=CS;var AS=class extends xu{constructor(e){e=e||{},super({element:document.createElement("div"),target:e.target});let t=e.className!==void 0?e.className:"ol-zoom",i=e.delta!==void 0?e.delta:1,r=e.zoomInClassName!==void 0?e.zoomInClassName:t+"-in",s=e.zoomOutClassName!==void 0?e.zoomOutClassName:t+"-out",o=e.zoomInLabel!==void 0?e.zoomInLabel:"+",a=e.zoomOutLabel!==void 0?e.zoomOutLabel:"\u2013",l=e.zoomInTipLabel!==void 0?e.zoomInTipLabel:"Zoom in",c=e.zoomOutTipLabel!==void 0?e.zoomOutTipLabel:"Zoom out",u=document.createElement("button");u.className=r,u.setAttribute("type","button"),u.title=l,u.appendChild(typeof o=="string"?document.createTextNode(o):o),u.addEventListener(Te.CLICK,this.handleClick_.bind(this,i),!1);let d=document.createElement("button");d.className=s,d.setAttribute("type","button"),d.title=c,d.appendChild(typeof a=="string"?document.createTextNode(a):a),d.addEventListener(Te.CLICK,this.handleClick_.bind(this,-i),!1);let h=t+" "+Yo+" "+pu,f=this.element;f.className=h,f.appendChild(u),f.appendChild(d),this.duration_=e.duration!==void 0?e.duration:250}handleClick_(e,t){t.preventDefault(),this.zoomByDelta_(e)}zoomByDelta_(e){let i=this.getMap().getView();if(!i)return;let r=i.getZoom();if(r!==void 0){let s=i.getConstrainedZoom(r+e);this.duration_>0?(i.getAnimating()&&i.cancelAnimations(),i.animate({zoom:s,duration:this.duration_,easing:dr})):i.setZoom(s)}}},kF=AS;function UF(n){n=n||{};let e=new Vi;return(n.zoom!==void 0?n.zoom:!0)&&e.push(new kF(n.zoomOptions)),(n.rotate!==void 0?n.rotate:!0)&&e.push(new FF(n.rotateOptions)),(n.attribution!==void 0?n.attribution:!0)&&e.push(new LF(n.attributionOptions)),e}var IS={ACTIVE:"active"};var DS=class extends Dn{constructor(e){super(),this.on,this.once,this.un,e&&e.handleEvent&&(this.handleEvent=e.handleEvent),this.map_=null,this.setActive(!0)}getActive(){return this.get(IS.ACTIVE)}getMap(){return this.map_}handleEvent(e){return!0}setActive(e){this.set(IS.ACTIVE,e)}setMap(e){this.map_=e}};function BF(n,e,t){let i=n.getCenterInternal();if(i){let r=[i[0]+e[0],i[1]+e[1]];n.animateInternal({duration:t!==void 0?t:250,easing:pL,center:n.getConstrainedCenter(r)})}}function Eu(n,e,t,i){let r=n.getZoom();if(r===void 0)return;let s=n.getConstrainedZoom(r+e),o=n.getResolutionForZoom(s);n.getAnimating()&&n.cancelAnimations(),n.animate({resolution:o,anchor:t,duration:i!==void 0?i:250,easing:dr})}var os=DS;var RS=class extends os{constructor(e){super(),e=e||{},this.delta_=e.delta?e.delta:1,this.duration_=e.duration!==void 0?e.duration:250}handleEvent(e){let t=!1;if(e.type==Kt.DBLCLICK){let i=e.originalEvent,r=e.map,s=e.coordinate,o=i.shiftKey?-this.delta_:this.delta_,a=r.getView();Eu(a,o,s,this.duration_),i.preventDefault(),t=!0}return!t}},VF=RS;var PS=class extends os{constructor(e){e=e||{},super(e),e.handleDownEvent&&(this.handleDownEvent=e.handleDownEvent),e.handleDragEvent&&(this.handleDragEvent=e.handleDragEvent),e.handleMoveEvent&&(this.handleMoveEvent=e.handleMoveEvent),e.handleUpEvent&&(this.handleUpEvent=e.handleUpEvent),e.stopDown&&(this.stopDown=e.stopDown),this.handlingDownUpSequence=!1,this.targetPointers=[]}getPointerCount(){return this.targetPointers.length}handleDownEvent(e){return!1}handleDragEvent(e){}handleEvent(e){if(!e.originalEvent)return!0;let t=!1;if(this.updateTrackedPointers_(e),this.handlingDownUpSequence){if(e.type==Kt.POINTERDRAG)this.handleDragEvent(e),e.originalEvent.preventDefault();else if(e.type==Kt.POINTERUP){let i=this.handleUpEvent(e);this.handlingDownUpSequence=i&&this.targetPointers.length>0}}else if(e.type==Kt.POINTERDOWN){let i=this.handleDownEvent(e);this.handlingDownUpSequence=i,t=this.stopDown(i)}else e.type==Kt.POINTERMOVE&&this.handleMoveEvent(e);return!t}handleMoveEvent(e){}handleUpEvent(e){return!1}stopDown(e){return e}updateTrackedPointers_(e){e.activePointers&&(this.targetPointers=e.activePointers)}};function Mu(n){let e=n.length,t=0,i=0;for(let r=0;r<e;r++)t+=n[r].clientX,i+=n[r].clientY;return{clientX:t/e,clientY:i/e}}var as=PS;function Hh(n){let e=arguments;return function(t){let i=!0;for(let r=0,s=e.length;r<s&&(i=i&&e[r](t),!!i);++r);return i}}var zF=function(n){let e=n.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},w7=function(n){let e=n.map.getTargetElement(),t=e.getRootNode(),i=n.map.getOwnerDocument().activeElement;return t instanceof ShadowRoot?t.host.contains(i):e.contains(i)},Gy=function(n){let e=n.map.getTargetElement(),t=e.getRootNode();return(t instanceof ShadowRoot?t.host:e).hasAttribute("tabindex")?w7(n):!0},HF=Ja;var jy=function(n){let e=n.originalEvent;return e.button==0&&!(JL&&kb&&e.ctrlKey)};var Wy=function(n){let e=n.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey};var GF=function(n){let e=n.originalEvent;return kb?e.metaKey:e.ctrlKey},jF=function(n){let e=n.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},$y=function(n){let e=n.originalEvent,t=e.target.tagName;return t!=="INPUT"&&t!=="SELECT"&&t!=="TEXTAREA"&&!e.target.isContentEditable},Xy=function(n){let e=n.originalEvent;return pt(e!==void 0,"mapBrowserEvent must originate from a pointer event"),e.pointerType=="mouse"};var WF=function(n){let e=n.originalEvent;return pt(e!==void 0,"mapBrowserEvent must originate from a pointer event"),e.isPrimary&&e.button===0};var NS=class extends as{constructor(e){super({stopDown:Gs}),e=e||{},this.kinetic_=e.kinetic,this.lastCentroid=null,this.lastPointersCount_,this.panning_=!1;let t=e.condition?e.condition:Hh(Wy,WF);this.condition_=e.onFocusOnly?Hh(Gy,t):t,this.noKinetic_=!1}handleDragEvent(e){let t=e.map;this.panning_||(this.panning_=!0,t.getView().beginInteraction());let i=this.targetPointers,r=t.getEventPixel(Mu(i));if(i.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(r[0],r[1]),this.lastCentroid){let s=[this.lastCentroid[0]-r[0],r[1]-this.lastCentroid[1]],a=e.map.getView();zO(s,a.getResolution()),ru(s,a.getRotation()),a.adjustCenterInternal(s)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=r,this.lastPointersCount_=i.length,e.originalEvent.preventDefault()}handleUpEvent(e){let t=e.map,i=t.getView();if(this.targetPointers.length===0){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){let r=this.kinetic_.getDistance(),s=this.kinetic_.getAngle(),o=i.getCenterInternal(),a=t.getPixelFromCoordinateInternal(o),l=t.getCoordinateFromPixelInternal([a[0]-r*Math.cos(s),a[1]-r*Math.sin(s)]);i.animateInternal({center:i.getConstrainedCenter(l),duration:500,easing:dr})}return this.panning_&&(this.panning_=!1,i.endInteraction()),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0}handleDownEvent(e){if(this.targetPointers.length>0&&this.condition_(e)){let i=e.map.getView();return this.lastCentroid=null,i.getAnimating()&&i.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1}},$F=NS;var OS=class extends as{constructor(e){e=e||{},super({stopDown:Gs}),this.condition_=e.condition?e.condition:zF,this.lastAngle_=void 0,this.duration_=e.duration!==void 0?e.duration:250}handleDragEvent(e){if(!Xy(e))return;let t=e.map,i=t.getView();if(i.getConstraints().rotation===au)return;let r=t.getSize(),s=e.pixel,o=Math.atan2(r[1]/2-s[1],s[0]-r[0]/2);if(this.lastAngle_!==void 0){let a=o-this.lastAngle_;i.adjustRotationInternal(-a)}this.lastAngle_=o}handleUpEvent(e){return Xy(e)?(e.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(e){return Xy(e)&&jy(e)&&this.condition_(e)?(e.map.getView().beginInteraction(),this.lastAngle_=void 0,!0):!1}},XF=OS;var LS=class extends Vo{constructor(e){super(),this.geometry_=null,this.element_=document.createElement("div"),this.element_.style.position="absolute",this.element_.style.pointerEvents="auto",this.element_.className="ol-box "+e,this.map_=null,this.startPixel_=null,this.endPixel_=null}disposeInternal(){this.setMap(null)}render_(){let e=this.startPixel_,t=this.endPixel_,i="px",r=this.element_.style;r.left=Math.min(e[0],t[0])+i,r.top=Math.min(e[1],t[1])+i,r.width=Math.abs(t[0]-e[0])+i,r.height=Math.abs(t[1]-e[1])+i}setMap(e){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);let t=this.element_.style;t.left="inherit",t.top="inherit",t.width="inherit",t.height="inherit"}this.map_=e,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)}setPixels(e,t){this.startPixel_=e,this.endPixel_=t,this.createOrUpdateGeometry(),this.render_()}createOrUpdateGeometry(){if(!this.map_)return;let e=this.startPixel_,t=this.endPixel_,r=[e,[e[0],t[1]],t,[t[0],e[1]]].map(this.map_.getCoordinateFromPixelInternal,this.map_);r[4]=r[0].slice(),this.geometry_?this.geometry_.setCoordinates([r]):this.geometry_=new zL([r])}getGeometry(){return this.geometry_}},qF=LS;var wu={BOXSTART:"boxstart",BOXDRAG:"boxdrag",BOXEND:"boxend",BOXCANCEL:"boxcancel"},al=class extends Xn{constructor(e,t,i){super(e),this.coordinate=t,this.mapBrowserEvent=i}},FS=class extends as{constructor(e){super(),this.on,this.once,this.un,e=e??{},this.box_=new qF(e.className||"ol-dragbox"),this.minArea_=e.minArea??64,e.onBoxEnd&&(this.onBoxEnd=e.onBoxEnd),this.startPixel_=null,this.condition_=e.condition??jy,this.boxEndCondition_=e.boxEndCondition??this.defaultBoxEndCondition}defaultBoxEndCondition(e,t,i){let r=i[0]-t[0],s=i[1]-t[1];return r*r+s*s>=this.minArea_}getGeometry(){return this.box_.getGeometry()}handleDragEvent(e){this.startPixel_&&(this.box_.setPixels(this.startPixel_,e.pixel),this.dispatchEvent(new al(wu.BOXDRAG,e.coordinate,e)))}handleUpEvent(e){if(!this.startPixel_)return!1;let t=this.boxEndCondition_(e,this.startPixel_,e.pixel);return t&&this.onBoxEnd(e),this.dispatchEvent(new al(t?wu.BOXEND:wu.BOXCANCEL,e.coordinate,e)),this.box_.setMap(null),this.startPixel_=null,!1}handleDownEvent(e){return this.condition_(e)?(this.startPixel_=e.pixel,this.box_.setMap(e.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new al(wu.BOXSTART,e.coordinate,e)),!0):!1}onBoxEnd(e){}setActive(e){e||(this.box_.setMap(null),this.startPixel_&&(this.dispatchEvent(new al(wu.BOXCANCEL,this.startPixel_,null)),this.startPixel_=null)),super.setActive(e)}setMap(e){this.getMap()&&(this.box_.setMap(null),this.startPixel_&&(this.dispatchEvent(new al(wu.BOXCANCEL,this.startPixel_,null)),this.startPixel_=null)),super.setMap(e)}},YF=FS;var kS=class extends YF{constructor(e){e=e||{};let t=e.condition?e.condition:jF;super({condition:t,className:e.className||"ol-dragzoom",minArea:e.minArea}),this.duration_=e.duration!==void 0?e.duration:200,this.out_=e.out!==void 0?e.out:!1}onBoxEnd(e){let i=this.getMap().getView(),r=this.getGeometry();if(this.out_){let s=i.rotatedExtentForGeometry(r),o=i.getResolutionForExtentInternal(s),a=i.getResolution()/o;r=r.clone(),r.scale(a*a)}i.fitInternal(r,{duration:this.duration_,easing:dr})}},ZF=kS;var Qo={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",DOWN:"ArrowDown"};var US=class extends os{constructor(e){super(),e=e||{},this.defaultCondition_=function(t){return Wy(t)&&$y(t)},this.condition_=e.condition!==void 0?e.condition:this.defaultCondition_,this.duration_=e.duration!==void 0?e.duration:100,this.pixelDelta_=e.pixelDelta!==void 0?e.pixelDelta:128}handleEvent(e){let t=!1;if(e.type==Te.KEYDOWN){let i=e.originalEvent,r=i.key;if(this.condition_(e)&&(r==Qo.DOWN||r==Qo.LEFT||r==Qo.RIGHT||r==Qo.UP)){let o=e.map.getView(),a=o.getResolution()*this.pixelDelta_,l=0,c=0;r==Qo.DOWN?c=-a:r==Qo.LEFT?l=-a:r==Qo.RIGHT?l=a:c=a;let u=[l,c];ru(u,o.getRotation()),BF(o,u,this.duration_),i.preventDefault(),t=!0}}return!t}},KF=US;var BS=class extends os{constructor(e){super(),e=e||{},this.condition_=e.condition?e.condition:function(t){return!GF(t)&&$y(t)},this.delta_=e.delta?e.delta:1,this.duration_=e.duration!==void 0?e.duration:100}handleEvent(e){let t=!1;if(e.type==Te.KEYDOWN||e.type==Te.KEYPRESS){let i=e.originalEvent,r=i.key;if(this.condition_(e)&&(r==="+"||r==="-")){let s=e.map,o=r==="+"?this.delta_:-this.delta_,a=s.getView();Eu(a,o,void 0,this.duration_),i.preventDefault(),t=!0}}return!t}},JF=BS;var VS=class{constructor(e,t,i){this.decay_=e,this.minVelocity_=t,this.delay_=i,this.points_=[],this.angle_=0,this.initialVelocity_=0}begin(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0}update(e,t){this.points_.push(e,t,Date.now())}end(){if(this.points_.length<6)return!1;let e=Date.now()-this.delay_,t=this.points_.length-3;if(this.points_[t+2]<e)return!1;let i=t-3;for(;i>0&&this.points_[i+2]>e;)i-=3;let r=this.points_[t+2]-this.points_[i+2];if(r<1e3/60)return!1;let s=this.points_[t]-this.points_[i],o=this.points_[t+1]-this.points_[i+1];return this.angle_=Math.atan2(o,s),this.initialVelocity_=Math.sqrt(s*s+o*o)/r,this.initialVelocity_>this.minVelocity_}getDistance(){return(this.minVelocity_-this.initialVelocity_)/this.decay_}getAngle(){return this.angle_}},QF=VS;var zS=class extends os{constructor(e){e=e||{},super(e),this.totalDelta_=0,this.lastDelta_=0,this.maxDelta_=e.maxDelta!==void 0?e.maxDelta:1,this.duration_=e.duration!==void 0?e.duration:250,this.timeout_=e.timeout!==void 0?e.timeout:80,this.useAnchor_=e.useAnchor!==void 0?e.useAnchor:!0,this.constrainResolution_=e.constrainResolution!==void 0?e.constrainResolution:!1;let t=e.condition?e.condition:HF;this.condition_=e.onFocusOnly?Hh(Gy,t):t,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_,this.mode_=void 0,this.trackpadEventGap_=400,this.trackpadTimeoutId_,this.deltaPerZoom_=300}endInteraction_(){this.trackpadTimeoutId_=void 0;let e=this.getMap();if(!e)return;e.getView().endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_?e.getCoordinateFromPixel(this.lastAnchor_):null)}handleEvent(e){if(!this.condition_(e)||e.type!==Te.WHEEL)return!0;let i=e.map,r=e.originalEvent;r.preventDefault(),this.useAnchor_&&(this.lastAnchor_=e.pixel);let s;if(e.type==Te.WHEEL&&(s=r.deltaY,KL&&r.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(s/=Ay),r.deltaMode===WheelEvent.DOM_DELTA_LINE&&(s*=40)),s===0)return!1;this.lastDelta_=s;let o=Date.now();this.startTime_===void 0&&(this.startTime_=o),(!this.mode_||o-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(s)<4?"trackpad":"wheel");let a=i.getView();if(this.mode_==="trackpad"&&!(a.getConstrainResolution()||this.constrainResolution_))return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(a.getAnimating()&&a.cancelAnimations(),a.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),a.adjustZoom(-s/this.deltaPerZoom_,this.lastAnchor_?i.getCoordinateFromPixel(this.lastAnchor_):null),this.startTime_=o,!1;this.totalDelta_+=s;let l=Math.max(this.timeout_-(o-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,i),l),!1}handleWheelZoom_(e){let t=e.getView();t.getAnimating()&&t.cancelAnimations();let i=-Wt(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;(t.getConstrainResolution()||this.constrainResolution_)&&(i=i?i>0?1:-1:0),Eu(t,i,this.lastAnchor_?e.getCoordinateFromPixel(this.lastAnchor_):null,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0}setMouseAnchor(e){this.useAnchor_=e,e||(this.lastAnchor_=null)}},e2=zS;var HS=class extends as{constructor(e){e=e||{};let t=e;t.stopDown||(t.stopDown=Gs),super(t),this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.threshold_=e.threshold!==void 0?e.threshold:.3,this.duration_=e.duration!==void 0?e.duration:250}handleDragEvent(e){let t=0,i=this.targetPointers[0],r=this.targetPointers[1],s=Math.atan2(r.clientY-i.clientY,r.clientX-i.clientX);if(this.lastAngle_!==void 0){let l=s-this.lastAngle_;this.rotationDelta_+=l,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),t=l}this.lastAngle_=s;let o=e.map,a=o.getView();a.getConstraints().rotation!==au&&(this.anchor_=o.getCoordinateFromPixelInternal(o.getEventPixel(Mu(this.targetPointers))),this.rotating_&&(o.render(),a.adjustRotationInternal(t,this.anchor_)))}handleUpEvent(e){return this.targetPointers.length<2?(e.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(e){if(this.targetPointers.length>=2){let t=e.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||t.getView().beginInteraction(),!0}return!1}},t2=HS;var GS=class extends as{constructor(e){e=e||{};let t=e;t.stopDown||(t.stopDown=Gs),super(t),this.anchor_=null,this.duration_=e.duration!==void 0?e.duration:400,this.lastDistance_=void 0,this.lastScaleDelta_=1}handleDragEvent(e){let t=1,i=this.targetPointers[0],r=this.targetPointers[1],s=i.clientX-r.clientX,o=i.clientY-r.clientY,a=Math.sqrt(s*s+o*o);this.lastDistance_!==void 0&&(t=this.lastDistance_/a),this.lastDistance_=a;let l=e.map,c=l.getView();t!=1&&(this.lastScaleDelta_=t),this.anchor_=l.getCoordinateFromPixelInternal(l.getEventPixel(Mu(this.targetPointers))),l.render(),c.adjustResolutionInternal(t,this.anchor_)}handleUpEvent(e){if(this.targetPointers.length<2){let i=e.map.getView(),r=this.lastScaleDelta_>1?1:-1;return i.endInteraction(this.duration_,r),!1}return!0}handleDownEvent(e){if(this.targetPointers.length>=2){let t=e.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||t.getView().beginInteraction(),!0}return!1}},n2=GS;function i2(n){n=n||{};let e=new Vi,t=new QF(-.005,.05,100);return(n.altShiftDragRotate!==void 0?n.altShiftDragRotate:!0)&&e.push(new XF),(n.doubleClickZoom!==void 0?n.doubleClickZoom:!0)&&e.push(new VF({delta:n.zoomDelta,duration:n.zoomDuration})),(n.dragPan!==void 0?n.dragPan:!0)&&e.push(new $F({onFocusOnly:n.onFocusOnly,kinetic:t})),(n.pinchRotate!==void 0?n.pinchRotate:!0)&&e.push(new t2),(n.pinchZoom!==void 0?n.pinchZoom:!0)&&e.push(new n2({duration:n.zoomDuration})),(n.keyboard!==void 0?n.keyboard:!0)&&(e.push(new KF),e.push(new JF({delta:n.zoomDelta,duration:n.zoomDuration}))),(n.mouseWheelZoom!==void 0?n.mouseWheelZoom:!0)&&e.push(new e2({onFocusOnly:n.onFocusOnly,duration:n.zoomDuration})),(n.shiftDragZoom!==void 0?n.shiftDragZoom:!0)&&e.push(new ZF({duration:n.zoomDuration})),e}function r2(n){if(n instanceof rl){n.setMapInternal(null);return}n instanceof Bh&&n.getLayers().forEach(r2)}function s2(n,e){if(n instanceof rl){n.setMapInternal(e);return}if(n instanceof Bh){let t=n.getLayers().getArray();for(let i=0,r=t.length;i<r;++i)s2(t[i],e)}}var jS=class extends Dn{constructor(e){super(),e=e||{},this.on,this.once,this.un;let t=b7(e);this.renderComplete_=!1,this.loaded_=!0,this.boundHandleBrowserEvent_=this.handleBrowserEvent.bind(this),this.maxTilesLoading_=e.maxTilesLoading!==void 0?e.maxTilesLoading:16,this.pixelRatio_=e.pixelRatio!==void 0?e.pixelRatio:Ay,this.postRenderTimeoutHandle_,this.animationDelayKey_,this.animationDelay_=this.animationDelay_.bind(this),this.coordinateToPixelTransform_=Ks(),this.pixelToCoordinateTransform_=Ks(),this.frameIndex_=0,this.frameState_=null,this.previousExtent_=null,this.viewPropertyListenerKey_=null,this.viewChangeListenerKey_=null,this.layerGroupPropertyListenerKeys_=null,this.viewport_=document.createElement("div"),this.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),this.viewport_.style.position="relative",this.viewport_.style.overflow="hidden",this.viewport_.style.width="100%",this.viewport_.style.height="100%",this.overlayContainer_=document.createElement("div"),this.overlayContainer_.style.position="absolute",this.overlayContainer_.style.zIndex="0",this.overlayContainer_.style.width="100%",this.overlayContainer_.style.height="100%",this.overlayContainer_.style.pointerEvents="none",this.overlayContainer_.className="ol-overlaycontainer",this.viewport_.appendChild(this.overlayContainer_),this.overlayContainerStopEvent_=document.createElement("div"),this.overlayContainerStopEvent_.style.position="absolute",this.overlayContainerStopEvent_.style.zIndex="0",this.overlayContainerStopEvent_.style.width="100%",this.overlayContainerStopEvent_.style.height="100%",this.overlayContainerStopEvent_.style.pointerEvents="none",this.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",this.viewport_.appendChild(this.overlayContainerStopEvent_),this.mapBrowserEventHandler_=null,this.moveTolerance_=e.moveTolerance,this.keyboardEventTarget_=t.keyboardEventTarget,this.targetChangeHandlerKeys_=null,this.targetElement_=null,this.resizeObserver_=new ResizeObserver(()=>this.updateSize()),this.controls=t.controls||UF(),this.interactions=t.interactions||i2({onFocusOnly:!0}),this.overlays_=t.overlays,this.overlayIdIndex_={},this.renderer_=null,this.postRenderFunctions_=[],this.tileQueue_=new NF(this.getTilePriority.bind(this),this.handleTileChange_.bind(this)),this.addChangeListener(zn.LAYERGROUP,this.handleLayerGroupChanged_),this.addChangeListener(zn.VIEW,this.handleViewChanged_),this.addChangeListener(zn.SIZE,this.handleSizeChanged_),this.addChangeListener(zn.TARGET,this.handleTargetChanged_),this.setProperties(t.values);let i=this;e.view&&!(e.view instanceof zi)&&e.view.then(function(r){i.setView(new zi(r))}),this.controls.addEventListener(ti.ADD,r=>{r.element.setMap(this)}),this.controls.addEventListener(ti.REMOVE,r=>{r.element.setMap(null)}),this.interactions.addEventListener(ti.ADD,r=>{r.element.setMap(this)}),this.interactions.addEventListener(ti.REMOVE,r=>{r.element.setMap(null)}),this.overlays_.addEventListener(ti.ADD,r=>{this.addOverlayInternal_(r.element)}),this.overlays_.addEventListener(ti.REMOVE,r=>{let s=r.element.getId();s!==void 0&&delete this.overlayIdIndex_[s.toString()],r.element.setMap(null)}),this.controls.forEach(r=>{r.setMap(this)}),this.interactions.forEach(r=>{r.setMap(this)}),this.overlays_.forEach(this.addOverlayInternal_.bind(this))}addControl(e){this.getControls().push(e)}addInteraction(e){this.getInteractions().push(e)}addLayer(e){this.getLayerGroup().getLayers().push(e)}handleLayerAdd_(e){s2(e.layer,this)}addOverlay(e){this.getOverlays().push(e)}addOverlayInternal_(e){let t=e.getId();t!==void 0&&(this.overlayIdIndex_[t.toString()]=e),e.setMap(this)}disposeInternal(){this.controls.clear(),this.interactions.clear(),this.overlays_.clear(),this.resizeObserver_.disconnect(),this.setTarget(null),super.disposeInternal()}forEachFeatureAtPixel(e,t,i){if(!this.frameState_||!this.renderer_)return;let r=this.getCoordinateFromPixelInternal(e);i=i!==void 0?i:{};let s=i.hitTolerance!==void 0?i.hitTolerance:0,o=i.layerFilter!==void 0?i.layerFilter:Ja,a=i.checkWrapped!==!1;return this.renderer_.forEachFeatureAtCoordinate(r,this.frameState_,s,a,t,null,o,null)}getFeaturesAtPixel(e,t){let i=[];return this.forEachFeatureAtPixel(e,function(r){i.push(r)},t),i}getAllLayers(){let e=[];function t(i){i.forEach(function(r){r instanceof Bh?t(r.getLayers()):e.push(r)})}return t(this.getLayers()),e}hasFeatureAtPixel(e,t){if(!this.frameState_||!this.renderer_)return!1;let i=this.getCoordinateFromPixelInternal(e);t=t!==void 0?t:{};let r=t.layerFilter!==void 0?t.layerFilter:Ja,s=t.hitTolerance!==void 0?t.hitTolerance:0,o=t.checkWrapped!==!1;return this.renderer_.hasFeatureAtCoordinate(i,this.frameState_,s,o,r,null)}getEventCoordinate(e){return this.getCoordinateFromPixel(this.getEventPixel(e))}getEventCoordinateInternal(e){return this.getCoordinateFromPixelInternal(this.getEventPixel(e))}getEventPixel(e){let i=this.viewport_.getBoundingClientRect(),r=this.getSize(),s=i.width/r[0],o=i.height/r[1],a="changedTouches"in e?e.changedTouches[0]:e;return[(a.clientX-i.left)/s,(a.clientY-i.top)/o]}getTarget(){return this.get(zn.TARGET)}getTargetElement(){return this.targetElement_}getCoordinateFromPixel(e){return Eh(this.getCoordinateFromPixelInternal(e),this.getView().getProjection())}getCoordinateFromPixelInternal(e){let t=this.frameState_;return t?Vn(t.pixelToCoordinateTransform,e.slice()):null}getControls(){return this.controls}getOverlays(){return this.overlays_}getOverlayById(e){let t=this.overlayIdIndex_[e.toString()];return t!==void 0?t:null}getInteractions(){return this.interactions}getLayerGroup(){return this.get(zn.LAYERGROUP)}setLayers(e){let t=this.getLayerGroup();if(e instanceof Vi){t.setLayers(e);return}let i=t.getLayers();i.clear(),i.extend(e)}getLayers(){return this.getLayerGroup().getLayers()}getLoadingOrNotReady(){let e=this.getLayerGroup().getLayerStatesArray();for(let t=0,i=e.length;t<i;++t){let r=e[t];if(!r.visible)continue;let s=r.layer.getRenderer();if(s&&!s.ready)return!0;let o=r.layer.getSource();if(o&&o.loading)return!0}return!1}getPixelFromCoordinate(e){let t=Pr(e,this.getView().getProjection());return this.getPixelFromCoordinateInternal(t)}getPixelFromCoordinateInternal(e){let t=this.frameState_;return t?Vn(t.coordinateToPixelTransform,e.slice(0,2)):null}getRenderer(){return this.renderer_}getSize(){return this.get(zn.SIZE)}getView(){return this.get(zn.VIEW)}getViewport(){return this.viewport_}getOverlayContainer(){return this.overlayContainer_}getOverlayContainerStopEvent(){return this.overlayContainerStopEvent_}getOwnerDocument(){let e=this.getTargetElement();return e?e.ownerDocument:document}getTilePriority(e,t,i,r){return OF(this.frameState_,e,t,i,r)}handleBrowserEvent(e,t){t=t||e.type;let i=new rs(t,this,e);this.handleMapBrowserEvent(i)}handleMapBrowserEvent(e){if(!this.frameState_)return;let t=e.originalEvent,i=t.type;if(i===Vh.POINTERDOWN||i===Te.WHEEL||i===Te.KEYDOWN){let r=this.getOwnerDocument(),s=this.viewport_.getRootNode?this.viewport_.getRootNode():r,o=t.target,a=s instanceof ShadowRoot?s.host===o?s.host.ownerDocument:s:s===r?r.documentElement:s;if(this.overlayContainerStopEvent_.contains(o)||!a.contains(o))return}if(e.frameState=this.frameState_,this.dispatchEvent(e)!==!1){let r=this.getInteractions().getArray().slice();for(let s=r.length-1;s>=0;s--){let o=r[s];if(o.getMap()!==this||!o.getActive()||!this.getTargetElement())continue;if(!o.handleEvent(e)||e.propagationStopped)break}}}handlePostRender(){let e=this.frameState_,t=this.tileQueue_;if(!t.isEmpty()){let r=this.maxTilesLoading_,s=r;if(e){let o=e.viewHints;if(o[gi.ANIMATING]||o[gi.INTERACTING]){let a=Date.now()-e.time>8;r=a?0:8,s=a?0:2}}t.getTilesLoading()<r&&(t.reprioritize(),t.loadMoreTiles(r,s))}e&&this.renderer_&&!e.animate&&(this.renderComplete_?(this.hasListener(mi.RENDERCOMPLETE)&&this.renderer_.dispatchRenderEvent(mi.RENDERCOMPLETE,e),this.loaded_===!1&&(this.loaded_=!0,this.dispatchEvent(new Jo(ss.LOADEND,this,e)))):this.loaded_===!0&&(this.loaded_=!1,this.dispatchEvent(new Jo(ss.LOADSTART,this,e))));let i=this.postRenderFunctions_;if(e)for(let r=0,s=i.length;r<s;++r)i[r](this,e);i.length=0}handleSizeChanged_(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()}handleTargetChanged_(){if(this.mapBrowserEventHandler_){for(let i=0,r=this.targetChangeHandlerKeys_.length;i<r;++i)Nt(this.targetChangeHandlerKeys_[i]);this.targetChangeHandlerKeys_=null,this.viewport_.removeEventListener(Te.CONTEXTMENU,this.boundHandleBrowserEvent_),this.viewport_.removeEventListener(Te.WHEEL,this.boundHandleBrowserEvent_),this.mapBrowserEventHandler_.dispose(),this.mapBrowserEventHandler_=null,this.viewport_.remove()}if(this.targetElement_){this.resizeObserver_.unobserve(this.targetElement_);let i=this.targetElement_.getRootNode();i instanceof ShadowRoot&&this.resizeObserver_.unobserve(i.host),this.setSize(void 0)}let e=this.getTarget(),t=typeof e=="string"?document.getElementById(e):e;if(this.targetElement_=t,!t)this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderTimeoutHandle_=void 0,this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0);else{t.appendChild(this.viewport_),this.renderer_||(this.renderer_=new DF(this)),this.mapBrowserEventHandler_=new RF(this,this.moveTolerance_);for(let s in Kt)this.mapBrowserEventHandler_.addEventListener(Kt[s],this.handleMapBrowserEvent.bind(this));this.viewport_.addEventListener(Te.CONTEXTMENU,this.boundHandleBrowserEvent_,!1),this.viewport_.addEventListener(Te.WHEEL,this.boundHandleBrowserEvent_,Dy?{passive:!1}:!1);let i;if(this.keyboardEventTarget_)i=this.keyboardEventTarget_;else{let s=t.getRootNode();i=s instanceof ShadowRoot?s.host:t}this.targetChangeHandlerKeys_=[yt(i,Te.KEYDOWN,this.handleBrowserEvent,this),yt(i,Te.KEYPRESS,this.handleBrowserEvent,this)];let r=t.getRootNode();r instanceof ShadowRoot&&this.resizeObserver_.observe(r.host),this.resizeObserver_.observe(t)}this.updateSize()}handleTileChange_(){this.render()}handleViewPropertyChanged_(){this.render()}handleViewChanged_(){this.viewPropertyListenerKey_&&(Nt(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(Nt(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);let e=this.getView();e&&(this.updateViewportSize_(this.getSize()),this.viewPropertyListenerKey_=yt(e,Hs.PROPERTYCHANGE,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=yt(e,Te.CHANGE,this.handleViewPropertyChanged_,this),e.resolveConstraints(0)),this.render()}handleLayerGroupChanged_(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(Nt),this.layerGroupPropertyListenerKeys_=null);let e=this.getLayerGroup();e&&(this.handleLayerAdd_(new Lr("addlayer",e)),this.layerGroupPropertyListenerKeys_=[yt(e,Hs.PROPERTYCHANGE,this.render,this),yt(e,Te.CHANGE,this.render,this),yt(e,"addlayer",this.handleLayerAdd_,this),yt(e,"removelayer",this.handleLayerRemove_,this)]),this.render()}isRendered(){return!!this.frameState_}animationDelay_(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}renderSync(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()}redrawText(){let e=this.getLayerGroup().getLayerStatesArray();for(let t=0,i=e.length;t<i;++t){let r=e[t].layer;r.hasRenderer()&&r.getRenderer().handleFontsChanged()}}render(){this.renderer_&&this.animationDelayKey_===void 0&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))}removeControl(e){return this.getControls().remove(e)}removeInteraction(e){return this.getInteractions().remove(e)}removeLayer(e){return this.getLayerGroup().getLayers().remove(e)}handleLayerRemove_(e){r2(e.layer)}removeOverlay(e){return this.getOverlays().remove(e)}renderFrame_(e){let t=this.getSize(),i=this.getView(),r=this.frameState_,s=null;if(t!==void 0&&Gb(t)&&i&&i.isDef()){let o=i.getHints(this.frameState_?this.frameState_.viewHints:void 0),a=i.getState();if(s={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutter:null,extent:xh(a.center,a.resolution,a.rotation,t),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:t,tileQueue:this.tileQueue_,time:e,usedTiles:{},viewState:a,viewHints:o,wantedTiles:{},mapId:en(this),renderTargets:{}},a.nextCenter&&a.nextResolution){let l=isNaN(a.nextRotation)?a.rotation:a.nextRotation;s.nextExtent=xh(a.nextCenter,a.nextResolution,l,t)}}this.frameState_=s,this.renderer_.renderFrame(s),s&&(s.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,s.postRenderFunctions),r&&(!this.previousExtent_||!$o(this.previousExtent_)&&!vh(s.extent,this.previousExtent_))&&(this.dispatchEvent(new Jo(ss.MOVESTART,this,r)),this.previousExtent_=el(this.previousExtent_)),this.previousExtent_&&!s.viewHints[gi.ANIMATING]&&!s.viewHints[gi.INTERACTING]&&!vh(s.extent,this.previousExtent_)&&(this.dispatchEvent(new Jo(ss.MOVEEND,this,s)),PO(s.extent,this.previousExtent_))),this.dispatchEvent(new Jo(ss.POSTRENDER,this,s)),this.renderComplete_=(this.hasListener(ss.LOADSTART)||this.hasListener(ss.LOADEND)||this.hasListener(mi.RENDERCOMPLETE))&&!this.tileQueue_.getTilesLoading()&&!this.tileQueue_.getCount()&&!this.getLoadingOrNotReady(),this.postRenderTimeoutHandle_||(this.postRenderTimeoutHandle_=setTimeout(()=>{this.postRenderTimeoutHandle_=void 0,this.handlePostRender()},0))}setLayerGroup(e){let t=this.getLayerGroup();t&&this.handleLayerRemove_(new Lr("removelayer",t)),this.set(zn.LAYERGROUP,e)}setSize(e){this.set(zn.SIZE,e)}setTarget(e){this.set(zn.TARGET,e)}setView(e){if(!e||e instanceof zi){this.set(zn.VIEW,e);return}this.set(zn.VIEW,new zi);let t=this;e.then(function(i){t.setView(new zi(i))})}updateSize(){let e=this.getTargetElement(),t;if(e){let r=getComputedStyle(e),s=e.offsetWidth-parseFloat(r.borderLeftWidth)-parseFloat(r.paddingLeft)-parseFloat(r.paddingRight)-parseFloat(r.borderRightWidth),o=e.offsetHeight-parseFloat(r.borderTopWidth)-parseFloat(r.paddingTop)-parseFloat(r.paddingBottom)-parseFloat(r.borderBottomWidth);!isNaN(s)&&!isNaN(o)&&(t=[Math.max(0,s),Math.max(0,o)],!Gb(t)&&(e.offsetWidth||e.offsetHeight||e.getClientRects().length)&&py("No map visible because the map container's width or height are 0."))}let i=this.getSize();t&&(!i||!zo(t,i))&&(this.setSize(t),this.updateViewportSize_(t))}updateViewportSize_(e){let t=this.getView();t&&t.setViewportSize(e)}};function b7(n){let e=null;n.keyboardEventTarget!==void 0&&(e=typeof n.keyboardEventTarget=="string"?document.getElementById(n.keyboardEventTarget):n.keyboardEventTarget);let t={},i=n.layers&&typeof n.layers.getLayers=="function"?n.layers:new Bh({layers:n.layers});t[zn.LAYERGROUP]=i,t[zn.TARGET]=n.target,t[zn.VIEW]=n.view instanceof zi?n.view:new zi;let r;n.controls!==void 0&&(Array.isArray(n.controls)?r=new Vi(n.controls.slice()):(pt(typeof n.controls.getArray=="function","Expected `controls` to be an array or an `ol/Collection.js`"),r=n.controls));let s;n.interactions!==void 0&&(Array.isArray(n.interactions)?s=new Vi(n.interactions.slice()):(pt(typeof n.interactions.getArray=="function","Expected `interactions` to be an array or an `ol/Collection.js`"),s=n.interactions));let o;return n.overlays!==void 0?Array.isArray(n.overlays)?o=new Vi(n.overlays.slice()):(pt(typeof n.overlays.getArray=="function","Expected `overlays` to be an array or an `ol/Collection.js`"),o=n.overlays):o=new Vi,{controls:r,interactions:s,keyboardEventTarget:e,overlays:o,values:t}}var o2=jS;var Gh={PRELOAD:"preload",USE_INTERIM_TILES_ON_ERROR:"useInterimTilesOnError"};var WS=class extends rl{constructor(e){e=e||{};let t=Object.assign({},e),i=e.cacheSize;delete e.cacheSize,delete t.preload,delete t.useInterimTilesOnError,super(t),this.on,this.once,this.un,this.cacheSize_=i,this.setPreload(e.preload!==void 0?e.preload:0),this.setUseInterimTilesOnError(e.useInterimTilesOnError!==void 0?e.useInterimTilesOnError:!0)}getCacheSize(){return this.cacheSize_}getPreload(){return this.get(Gh.PRELOAD)}setPreload(e){this.set(Gh.PRELOAD,e)}getUseInterimTilesOnError(){return this.get(Gh.USE_INTERIM_TILES_ON_ERROR)}setUseInterimTilesOnError(e){this.set(Gh.USE_INTERIM_TILES_ON_ERROR,e)}getData(e){return super.getData(e)}},a2=WS;var S7=5,$S=class extends Qg{constructor(e){super(),this.ready=!0,this.boundHandleImageChange_=this.handleImageChange_.bind(this),this.layer_=e,this.staleKeys_=new Array,this.maxStaleKeys=S7}getStaleKeys(){return this.staleKeys_}prependStaleKey(e){this.staleKeys_.unshift(e),this.staleKeys_.length>this.maxStaleKeys&&(this.staleKeys_.length=this.maxStaleKeys)}getFeatures(e){return ft()}getData(e){return null}prepareFrame(e){return ft()}renderFrame(e,t){return ft()}forEachFeatureAtCoordinate(e,t,i,r,s){}getLayer(){return this.layer_}handleFontsChanged(){}handleImageChange_(e){let t=e.target;(t.getState()===it.LOADED||t.getState()===it.ERROR)&&this.renderIfReadyAndVisible()}loadImage(e){let t=e.getState();return t!=it.LOADED&&t!=it.ERROR&&e.addEventListener(Te.CHANGE,this.boundHandleImageChange_),t==it.IDLE&&(e.load(),t=e.getState()),t==it.LOADED}renderIfReadyAndVisible(){let e=this.getLayer();e&&e.getVisible()&&e.getSourceState()==="ready"&&e.changed()}renderDeferred(e){}disposeInternal(){delete this.layer_,super.disposeInternal()}},l2=$S;var XS=class{constructor(){this.instructions_=[],this.zIndex=0,this.offset_=0,this.context_=new Proxy(hu(),{get:(e,t)=>{if(typeof hu()[t]=="function")return this.instructions_[this.zIndex+this.offset_]||(this.instructions_[this.zIndex+this.offset_]=[]),this.instructions_[this.zIndex+this.offset_].push(t),this.pushMethodArgs_},set:(e,t,i)=>(this.instructions_[this.zIndex+this.offset_]||(this.instructions_[this.zIndex+this.offset_]=[]),this.instructions_[this.zIndex+this.offset_].push(t,i),!0)})}pushMethodArgs_=(...e)=>(this.instructions_[this.zIndex+this.offset_].push(e),this);pushFunction(e){this.instructions_[this.zIndex+this.offset_].push(e)}getContext(){return this.context_}draw(e){this.instructions_.forEach(t=>{for(let i=0,r=t.length;i<r;++i){let s=t[i];if(typeof s=="function"){s(e);continue}let o=t[++i];if(typeof e[s]=="function")e[s](...o);else{if(typeof o=="function"){e[s]=o(e);continue}e[s]=o}}})}clear(){this.instructions_.length=0,this.zIndex=0,this.offset_=0}offset(){this.offset_=this.instructions_.length,this.zIndex=0}},c2=XS;var bu=null;function T7(){bu=tn(1,1,void 0,{willReadFrequently:!0})}var qS=class extends l2{constructor(e){super(e),this.container=null,this.renderedResolution,this.tempTransform=Ks(),this.pixelTransform=Ks(),this.inversePixelTransform=Ks(),this.context=null,this.deferredContext_=null,this.containerReused=!1,this.frameState=null}getImageData(e,t,i){bu||T7(),bu.clearRect(0,0,1,1);let r;try{bu.drawImage(e,t,i,1,1,0,0,1,1),r=bu.getImageData(0,0,1,1).data}catch{return bu=null,null}return r}getBackground(e){let i=this.getLayer().getBackground();return typeof i=="function"&&(i=i(e.viewState.resolution)),i||void 0}useContainer(e,t,i){let r=this.getLayer().getClassName(),s,o;if(e&&e.className===r&&(!i||e&&e.style.backgroundColor&&zo(Nr(e.style.backgroundColor),Nr(i)))){let a=e.firstElementChild;a instanceof HTMLCanvasElement&&(o=a.getContext("2d"))}if(o&&o.canvas.style.transform===t?(this.container=e,this.context=o,this.containerReused=!0):this.containerReused?(this.container=null,this.context=null,this.containerReused=!1):this.container&&(this.container.style.backgroundColor=null),!this.container){s=document.createElement("div"),s.className=r;let a=s.style;a.position="absolute",a.width="100%",a.height="100%",o=tn();let l=o.canvas;s.appendChild(l),a=l.style,a.position="absolute",a.left="0",a.transformOrigin="top left",this.container=s,this.context=o}!this.containerReused&&i&&!this.container.style.backgroundColor&&(this.container.style.backgroundColor=i)}clipUnrotated(e,t,i){let r=ii(i),s=iu(i),o=nu(i),a=tu(i);Vn(t.coordinateToPixelTransform,r),Vn(t.coordinateToPixelTransform,s),Vn(t.coordinateToPixelTransform,o),Vn(t.coordinateToPixelTransform,a);let l=this.inversePixelTransform;Vn(l,r),Vn(l,s),Vn(l,o),Vn(l,a),e.save(),e.beginPath(),e.moveTo(Math.round(r[0]),Math.round(r[1])),e.lineTo(Math.round(s[0]),Math.round(s[1])),e.lineTo(Math.round(o[0]),Math.round(o[1])),e.lineTo(Math.round(a[0]),Math.round(a[1])),e.clip()}prepareContainer(e,t){let i=e.extent,r=e.viewState.resolution,s=e.viewState.rotation,o=e.pixelRatio,a=Math.round(ct(i)/r*o),l=Math.round(on(i)/r*o);Js(this.pixelTransform,e.size[0]/2,e.size[1]/2,1/o,1/o,s,-a/2,-l/2),yy(this.inversePixelTransform,this.pixelTransform);let c=gL(this.pixelTransform);if(this.useContainer(t,c,this.getBackground(e)),!this.containerReused){let u=this.context.canvas;u.width!=a||u.height!=l?(u.width=a,u.height=l):this.context.clearRect(0,0,a,l),c!==u.style.transform&&(u.style.transform=c)}}dispatchRenderEvent_(e,t,i){let r=this.getLayer();if(r.hasListener(e)){let s=new Hy(e,this.inversePixelTransform,i,t);r.dispatchEvent(s)}}preRender(e,t){this.frameState=t,!t.declutter&&this.dispatchRenderEvent_(mi.PRERENDER,e,t)}postRender(e,t){t.declutter||this.dispatchRenderEvent_(mi.POSTRENDER,e,t)}renderDeferredInternal(e){}getRenderContext(e){return e.declutter&&!this.deferredContext_&&(this.deferredContext_=new c2),e.declutter?this.deferredContext_.getContext():this.context}renderDeferred(e){e.declutter&&(this.dispatchRenderEvent_(mi.PRERENDER,this.context,e),e.declutter&&this.deferredContext_&&(this.deferredContext_.draw(this.context),this.deferredContext_.clear()),this.renderDeferredInternal(e),this.dispatchRenderEvent_(mi.POSTRENDER,this.context,e))}getRenderTransform(e,t,i,r,s,o,a){let l=s/2,c=o/2,u=r/t,d=-u,h=-e[0]+a,f=-e[1];return Js(this.tempTransform,l,c,u,d,-i,h,f)}disposeInternal(){delete this.frameState,super.disposeInternal()}},u2=qS;var YS=class extends Ho{constructor(e,t,i){super(),i=i||{},this.tileCoord=e,this.state=t,this.key="",this.transition_=i.transition===void 0?250:i.transition,this.transitionStarts_={},this.interpolate=!!i.interpolate}changed(){this.dispatchEvent(Te.CHANGE)}release(){this.state===pe.ERROR&&this.setState(pe.EMPTY)}getKey(){return this.key+"/"+this.tileCoord}getTileCoord(){return this.tileCoord}getState(){return this.state}setState(e){if(this.state!==pe.ERROR&&this.state>e)throw new Error("Tile load sequence violation");this.state=e,this.changed()}load(){ft()}getAlpha(e,t){if(!this.transition_)return 1;let i=this.transitionStarts_[e];if(!i)i=t,this.transitionStarts_[e]=i;else if(i===-1)return 1;let r=t-i+1e3/60;return r>=this.transition_?1:db(r/this.transition_)}inTransition(e){return this.transition_?this.transitionStarts_[e]!==-1:!1}endTransition(e){this.transition_&&(this.transitionStarts_[e]=-1)}disposeInternal(){this.release(),super.disposeInternal()}},Su=YS;function Cu(n){return n instanceof Image||n instanceof HTMLCanvasElement||n instanceof HTMLVideoElement||n instanceof ImageBitmap?n:null}function d2(n){return n instanceof Uint8Array||n instanceof Uint8ClampedArray||n instanceof Float32Array||n instanceof DataView?n:null}var C7=new Error("disposed"),Tu=null;function h2(n){Tu||(Tu=tn(n.width,n.height,void 0,{willReadFrequently:!0}));let e=Tu.canvas,t=n.width;e.width!==t&&(e.width=t);let i=n.height;return e.height!==i&&(e.height=i),Tu.clearRect(0,0,t,i),Tu.drawImage(n,0,0),Tu.getImageData(0,0,t,i).data}var A7=[256,256],ZS=class extends Su{constructor(e){let t=pe.IDLE;super(e.tileCoord,t,{transition:e.transition,interpolate:e.interpolate}),this.loader_=e.loader,this.data_=null,this.error_=null,this.size_=e.size||null,this.controller_=e.controller||null}getSize(){if(this.size_)return this.size_;let e=Cu(this.data_);return e?[e.width,e.height]:A7}getData(){return this.data_}getError(){return this.error_}load(){if(this.state!==pe.IDLE&&this.state!==pe.ERROR)return;this.state=pe.LOADING,this.changed();let e=this;this.loader_().then(function(t){e.data_=t,e.state=pe.LOADED,e.changed()}).catch(function(t){e.error_=t,e.state=pe.ERROR,e.changed()})}disposeInternal(){this.controller_&&(this.controller_.abort(C7),this.controller_=null),super.disposeInternal()}},jh=ZS;var KS=class extends Su{constructor(e,t,i,r,s,o){super(e,t,o),this.crossOrigin_=r,this.src_=i,this.key=i,this.image_=new Image,r!==null&&(this.image_.crossOrigin=r),this.unlisten_=null,this.tileLoadFunction_=s}getImage(){return this.image_}setImage(e){this.image_=e,this.state=pe.LOADED,this.unlistenImage_(),this.changed()}handleImageError_(){this.state=pe.ERROR,this.unlistenImage_(),this.image_=I7(),this.changed()}handleImageLoad_(){let e=this.image_;e.naturalWidth&&e.naturalHeight?this.state=pe.LOADED:this.state=pe.EMPTY,this.unlistenImage_(),this.changed()}load(){this.state==pe.ERROR&&(this.state=pe.IDLE,this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)),this.state==pe.IDLE&&(this.state=pe.LOADING,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=tF(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}disposeInternal(){this.unlistenImage_(),this.image_=null,super.disposeInternal()}};function I7(){let n=tn(1,1);return n.fillStyle="rgba(0,0,0,0)",n.fillRect(0,0,1,1),n.canvas}var qy=KS;var JS=class{constructor(e){this.highWaterMark=e!==void 0?e:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}deleteOldest(){let e=this.pop();e instanceof Vo&&e.dispose()}canExpireCache(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark}expireCache(e){for(;this.canExpireCache();)this.deleteOldest()}clear(){for(;this.oldest_;)this.deleteOldest()}containsKey(e){return this.entries_.hasOwnProperty(e)}forEach(e){let t=this.oldest_;for(;t;)e(t.value_,t.key_,this),t=t.newer}get(e,t){let i=this.entries_[e];return pt(i!==void 0,"Tried to get a value for a key that does not exist in the cache"),i===this.newest_||(i===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(i.newer.older=i.older,i.older.newer=i.newer),i.newer=null,i.older=this.newest_,this.newest_.newer=i,this.newest_=i),i.value_}remove(e){let t=this.entries_[e];return pt(t!==void 0,"Tried to get a value for a key that does not exist in the cache"),t===this.newest_?(this.newest_=t.older,this.newest_&&(this.newest_.newer=null)):t===this.oldest_?(this.oldest_=t.newer,this.oldest_&&(this.oldest_.older=null)):(t.newer.older=t.older,t.older.newer=t.newer),delete this.entries_[e],--this.count_,t.value_}getCount(){return this.count_}getKeys(){let e=new Array(this.count_),t=0,i;for(i=this.newest_;i;i=i.older)e[t++]=i.key_;return e}getValues(){let e=new Array(this.count_),t=0,i;for(i=this.newest_;i;i=i.older)e[t++]=i.value_;return e}peekLast(){return this.oldest_.value_}peekLastKey(){return this.oldest_.key_}peekFirstKey(){return this.newest_.key_}peek(e){return this.entries_[e]?.value_}pop(){let e=this.oldest_;return delete this.entries_[e.key_],e.newer&&(e.newer.older=null),this.oldest_=e.newer,this.oldest_||(this.newest_=null),--this.count_,e.value_}replace(e,t){this.get(e),this.entries_[e].value_=t}set(e,t){pt(!(e in this.entries_),"Tried to set a value for a key that is used already");let i={key_:e,newer:null,older:this.newest_,value_:t};this.newest_?this.newest_.newer=i:this.oldest_=i,this.newest_=i,this.entries_[e]=i,++this.count_}setSize(e){this.highWaterMark=e}},f2=JS;var D7=10,p2=.25,QS=class{constructor(e,t,i,r,s,o,a){this.sourceProj_=e,this.targetProj_=t;let l={},c=a?rL(M=>Vn(a,ou(M,this.targetProj_,this.sourceProj_))):il(this.targetProj_,this.sourceProj_);this.transformInv_=function(M){let v=M[0]+"/"+M[1];return l[v]||(l[v]=c(M)),l[v]},this.maxSourceExtent_=r,this.errorThresholdSquared_=s*s,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!r&&!!this.sourceProj_.getExtent()&&ct(r)>=ct(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?ct(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?ct(this.targetProj_.getExtent()):null;let u=ii(i),d=iu(i),h=nu(i),f=tu(i),p=this.transformInv_(u),y=this.transformInv_(d),g=this.transformInv_(h),m=this.transformInv_(f),x=D7+(o?Math.max(0,Math.ceil(Math.log2(Wo(i)/(o*o*256*256)))):0);if(this.addQuad_(u,d,h,f,p,y,g,m,x),this.wrapsXInSource_){let M=1/0;this.triangles_.forEach(function(v,S,T){M=Math.min(M,v.source[0][0],v.source[1][0],v.source[2][0])}),this.triangles_.forEach(v=>{if(Math.max(v.source[0][0],v.source[1][0],v.source[2][0])-M>this.sourceWorldWidth_/2){let S=[[v.source[0][0],v.source[0][1]],[v.source[1][0],v.source[1][1]],[v.source[2][0],v.source[2][1]]];S[0][0]-M>this.sourceWorldWidth_/2&&(S[0][0]-=this.sourceWorldWidth_),S[1][0]-M>this.sourceWorldWidth_/2&&(S[1][0]-=this.sourceWorldWidth_),S[2][0]-M>this.sourceWorldWidth_/2&&(S[2][0]-=this.sourceWorldWidth_);let T=Math.min(S[0][0],S[1][0],S[2][0]);Math.max(S[0][0],S[1][0],S[2][0])-T<this.sourceWorldWidth_/2&&(v.source=S)}})}l={}}addTriangle_(e,t,i,r,s,o){this.triangles_.push({source:[r,s,o],target:[e,t,i]})}addQuad_(e,t,i,r,s,o,a,l,c){let u=qw([s,o,a,l]),d=this.sourceWorldWidth_?ct(u)/this.sourceWorldWidth_:null,h=this.sourceWorldWidth_,f=this.sourceProj_.canWrapX()&&d>.5&&d<1,p=!1;if(c>0){if(this.targetProj_.isGlobal()&&this.targetWorldWidth_){let g=qw([e,t,i,r]);p=ct(g)/this.targetWorldWidth_>p2||p}!f&&this.sourceProj_.isGlobal()&&d&&(p=d>p2||p)}if(!p&&this.maxSourceExtent_&&isFinite(u[0])&&isFinite(u[1])&&isFinite(u[2])&&isFinite(u[3])&&!qs(u,this.maxSourceExtent_))return;let y=0;if(!p&&(!isFinite(s[0])||!isFinite(s[1])||!isFinite(o[0])||!isFinite(o[1])||!isFinite(a[0])||!isFinite(a[1])||!isFinite(l[0])||!isFinite(l[1]))){if(c>0)p=!0;else if(y=(!isFinite(s[0])||!isFinite(s[1])?8:0)+(!isFinite(o[0])||!isFinite(o[1])?4:0)+(!isFinite(a[0])||!isFinite(a[1])?2:0)+(!isFinite(l[0])||!isFinite(l[1])?1:0),y!=1&&y!=2&&y!=4&&y!=8)return}if(c>0){if(!p){let g=[(e[0]+i[0])/2,(e[1]+i[1])/2],m=this.transformInv_(g),x;f?x=(Ws(s[0],h)+Ws(a[0],h))/2-Ws(m[0],h):x=(s[0]+a[0])/2-m[0];let M=(s[1]+a[1])/2-m[1];p=x*x+M*M>this.errorThresholdSquared_}if(p){if(Math.abs(e[0]-i[0])<=Math.abs(e[1]-i[1])){let g=[(t[0]+i[0])/2,(t[1]+i[1])/2],m=this.transformInv_(g),x=[(r[0]+e[0])/2,(r[1]+e[1])/2],M=this.transformInv_(x);this.addQuad_(e,t,g,x,s,o,m,M,c-1),this.addQuad_(x,g,i,r,M,m,a,l,c-1)}else{let g=[(e[0]+t[0])/2,(e[1]+t[1])/2],m=this.transformInv_(g),x=[(i[0]+r[0])/2,(i[1]+r[1])/2],M=this.transformInv_(x);this.addQuad_(e,g,x,r,s,m,M,l,c-1),this.addQuad_(g,t,i,x,m,o,a,M,c-1)}return}}if(f){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}y&11||this.addTriangle_(e,i,r,s,a,l),y&14||this.addTriangle_(e,i,t,s,a,o),y&&(y&13||this.addTriangle_(t,r,e,o,l,s),y&7||this.addTriangle_(t,r,i,o,l,a))}calculateSourceExtent(){let e=yi();return this.triangles_.forEach(function(t,i,r){let s=t.source;_h(e,s[0]),_h(e,s[1]),_h(e,s[2])}),e}getTriangles(){return this.triangles_}},Yy=QS;var eT,ll=[];function m2(n,e,t,i,r){n.beginPath(),n.moveTo(0,0),n.lineTo(e,t),n.lineTo(i,r),n.closePath(),n.save(),n.clip(),n.fillRect(0,0,Math.max(e,i)+1,Math.max(t,r)),n.restore()}function tT(n,e){return Math.abs(n[e*4]-210)>2||Math.abs(n[e*4+3]-.75*255)>2}function R7(){if(eT===void 0){let n=tn(6,6,ll);n.globalCompositeOperation="lighter",n.fillStyle="rgba(210, 0, 0, 0.75)",m2(n,4,5,4,0),m2(n,4,5,0,5);let e=n.getImageData(0,0,3,3).data;eT=tT(e,0)||tT(e,4)||tT(e,8),Ih(n),ll.push(n.canvas)}return eT}function g2(n,e,t,i){let r=ou(t,e,n),s=rb(e,i,t),o=e.getMetersPerUnit();o!==void 0&&(s*=o);let a=n.getMetersPerUnit();a!==void 0&&(s/=a);let l=n.getExtent();if(!l||eu(l,r)){let c=rb(n,s,r)/s;isFinite(c)&&c>0&&(s/=c)}return s}function Zy(n,e,t,i){let r=ts(t),s=g2(n,e,r,i);return(!isFinite(s)||s<=0)&&ly(t,function(o){return s=g2(n,e,o,i),isFinite(s)&&s>0}),s}function y2(n,e,t,i,r,s,o,a,l,c,u,d,h,f){let p=tn(Math.round(t*n),Math.round(t*e),ll);if(d||(p.imageSmoothingEnabled=!1),l.length===0)return p.canvas;p.scale(t,t);function y(S){return Math.round(S*t)/t}p.globalCompositeOperation="lighter";let g=yi();l.forEach(function(S,T,A){ay(g,S.extent)});let m,x=t/i,M=(d?1:1+Math.pow(2,-24))/x;if(!h||l.length!==1||c!==0){if(m=tn(Math.round(ct(g)*x),Math.round(on(g)*x),ll),d||(m.imageSmoothingEnabled=!1),r&&f){let S=(r[0]-g[0])*x,T=-(r[3]-g[3])*x,A=ct(r)*x,I=on(r)*x;m.rect(S,T,A,I),m.clip()}l.forEach(function(S,T,A){if(S.image.width>0&&S.image.height>0){if(S.clipExtent){m.save();let U=(S.clipExtent[0]-g[0])*x,L=-(S.clipExtent[3]-g[3])*x,W=ct(S.clipExtent)*x,z=on(S.clipExtent)*x;m.rect(d?U:Math.round(U),d?L:Math.round(L),d?W:Math.round(U+W)-Math.round(U),d?z:Math.round(L+z)-Math.round(L)),m.clip()}let I=(S.extent[0]-g[0])*x,w=-(S.extent[3]-g[3])*x,_=ct(S.extent)*x,D=on(S.extent)*x;m.drawImage(S.image,c,c,S.image.width-2*c,S.image.height-2*c,d?I:Math.round(I),d?w:Math.round(w),d?_:Math.round(I+_)-Math.round(I),d?D:Math.round(w+D)-Math.round(w)),S.clipExtent&&m.restore()}})}let v=ii(o);return a.getTriangles().forEach(function(S,T,A){let I=S.source,w=S.target,_=I[0][0],D=I[0][1],U=I[1][0],L=I[1][1],W=I[2][0],z=I[2][1],$=y((w[0][0]-v[0])/s),G=y(-(w[0][1]-v[1])/s),V=y((w[1][0]-v[0])/s),se=y(-(w[1][1]-v[1])/s),ie=y((w[2][0]-v[0])/s),ce=y(-(w[2][1]-v[1])/s),Se=_,Ie=D;_=0,D=0,U-=Se,L-=Ie,W-=Se,z-=Ie;let q=[[U,L,0,0,V-$],[W,z,0,0,ie-$],[0,0,U,L,se-G],[0,0,W,z,ce-G]],re=wO(q);if(!re)return;if(p.save(),p.beginPath(),R7()||!d){p.moveTo(V,se);let oe=4,Ae=$-V,Ue=G-se;for(let ze=0;ze<oe;ze++)p.lineTo(V+y((ze+1)*Ae/oe),se+y(ze*Ue/(oe-1))),ze!=oe-1&&p.lineTo(V+y((ze+1)*Ae/oe),se+y((ze+1)*Ue/(oe-1)));p.lineTo(ie,ce)}else p.moveTo(V,se),p.lineTo($,G),p.lineTo(ie,ce);p.clip(),p.transform(re[0],re[2],re[1],re[3],$,G),p.translate(g[0]-Se,g[3]-Ie);let fe;if(m)fe=m.canvas,p.scale(M,-M);else{let oe=l[0],Ae=oe.extent;fe=oe.image,p.scale(ct(Ae)/fe.width,-on(Ae)/fe.height)}p.drawImage(fe,0,0),p.restore()}),m&&(Ih(m),ll.push(m.canvas)),u&&(p.save(),p.globalCompositeOperation="source-over",p.strokeStyle="black",p.lineWidth=1,a.getTriangles().forEach(function(S,T,A){let I=S.target,w=(I[0][0]-v[0])/s,_=-(I[0][1]-v[1])/s,D=(I[1][0]-v[0])/s,U=-(I[1][1]-v[1])/s,L=(I[2][0]-v[0])/s,W=-(I[2][1]-v[1])/s;p.beginPath(),p.moveTo(D,U),p.lineTo(w,_),p.lineTo(L,W),p.closePath(),p.stroke()}),p.restore()),p.canvas}function Ky(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function Wh(n,e,t,i,r,s,o){o=o??Ky();let a=1/(n-e),l=1/(t-i),c=1/(r-s);return o[0]=-2*a,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=-2*l,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=2*c,o[11]=0,o[12]=(n+e)*a,o[13]=(i+t)*l,o[14]=(s+r)*c,o[15]=1,o}function nT(n,e,t,i,r){return r=r??Ky(),r[0]=n[0]*e,r[1]=n[1]*e,r[2]=n[2]*e,r[3]=n[3]*e,r[4]=n[4]*t,r[5]=n[5]*t,r[6]=n[6]*t,r[7]=n[7]*t,r[8]=n[8]*i,r[9]=n[9]*i,r[10]=n[10]*i,r[11]=n[11]*i,r[12]=n[12],r[13]=n[13],r[14]=n[14],r[15]=n[15],r}function v2(n,e,t,i,r){r=r??Ky();let s,o,a,l,c,u,d,h,f,p,y,g;return n===r?(r[12]=n[0]*e+n[4]*t+n[8]*i+n[12],r[13]=n[1]*e+n[5]*t+n[9]*i+n[13],r[14]=n[2]*e+n[6]*t+n[10]*i+n[14],r[15]=n[3]*e+n[7]*t+n[11]*i+n[15]):(s=n[0],o=n[1],a=n[2],l=n[3],c=n[4],u=n[5],d=n[6],h=n[7],f=n[8],p=n[9],y=n[10],g=n[11],r[0]=s,r[1]=o,r[2]=a,r[3]=l,r[4]=c,r[5]=u,r[6]=d,r[7]=h,r[8]=f,r[9]=p,r[10]=y,r[11]=g,r[12]=s*e+c*t+f*i+n[12],r[13]=o*e+u*t+p*i+n[13],r[14]=a*e+d*t+y*i+n[14],r[15]=l*e+h*t+g*i+n[15]),r}function _2(n,e,t,i){return i=i??Ky(),i[0]=1,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=1,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=1,i[11]=0,i[12]=n,i[13]=e,i[14]=t,i[15]=1,i}var P7=`
  attribute vec4 a_position;
  attribute vec4 a_texcoord;

  uniform mat4 u_matrix;
  uniform mat4 u_textureMatrix;

  varying vec2 v_texcoord;

  void main() {
    gl_Position = u_matrix * a_position;
    vec2 texcoord = (u_textureMatrix * a_texcoord).xy;
    v_texcoord = texcoord;
  }
`,N7=`
  precision mediump float;

  varying vec2 v_texcoord;

  uniform sampler2D u_texture;

  void main() {
    if (
      v_texcoord.x < 0.0 ||
      v_texcoord.y < 0.0 ||
      v_texcoord.x > 1.0 ||
      v_texcoord.y > 1.0
    ) {
      discard;
    }
    gl_FragColor = texture2D(u_texture, v_texcoord);
  }
`,Jy=class{constructor(e){this.gl_=e,this.program_=Qy(e,N7,P7),this.positionLocation=e.getAttribLocation(this.program_,"a_position"),this.texcoordLocation=e.getAttribLocation(this.program_,"a_texcoord"),this.matrixLocation=e.getUniformLocation(this.program_,"u_matrix"),this.textureMatrixLocation=e.getUniformLocation(this.program_,"u_textureMatrix"),this.textureLocation=e.getUniformLocation(this.program_,"u_texture"),this.positionBuffer=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,this.positionBuffer),this.positions=[0,0,0,1,1,0,1,0,0,1,1,1],e.bufferData(e.ARRAY_BUFFER,new Float32Array(this.positions),e.STATIC_DRAW),this.texcoordBuffer=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,this.texcoordBuffer),this.texcoords=[0,0,0,1,1,0,1,0,0,1,1,1],e.bufferData(e.ARRAY_BUFFER,new Float32Array(this.texcoords),e.STATIC_DRAW)}drawImage(e,t,i,r,s,o,a,l,c,u,d,h,f){let p=this.gl_;l===void 0&&(l=r),c===void 0&&(c=s),o===void 0&&(o=t),a===void 0&&(a=i),u===void 0&&(u=o),d===void 0&&(d=a),h===void 0&&(h=p.canvas.width),f===void 0&&(f=p.canvas.height),p.bindTexture(p.TEXTURE_2D,e),p.useProgram(this.program_),p.bindBuffer(p.ARRAY_BUFFER,this.positionBuffer),p.enableVertexAttribArray(this.positionLocation),p.vertexAttribPointer(this.positionLocation,2,p.FLOAT,!1,0,0),p.bindBuffer(p.ARRAY_BUFFER,this.texcoordBuffer),p.enableVertexAttribArray(this.texcoordLocation),p.vertexAttribPointer(this.texcoordLocation,2,p.FLOAT,!1,0,0);let y=Wh(0,h,0,f,-1,1);y=v2(y,l,c,0),y=nT(y,u,d,1),p.uniformMatrix4fv(this.matrixLocation,!1,y);let g=_2(r/t,s/i,0);g=nT(g,o/t,a/i,1),p.uniformMatrix4fv(this.textureMatrixLocation,!1,g),p.uniform1i(this.textureLocation,0),p.drawArrays(p.TRIANGLES,0,this.positions.length/2)}};function E2(n,e,t){let i=n.createShader(e);if(i===null)throw new Error("Shader compilation failed");if(n.shaderSource(i,t),n.compileShader(i),!n.getShaderParameter(i,n.COMPILE_STATUS)){let r=n.getShaderInfoLog(i);throw r===null?new Error("Shader info log creation failed"):new Error(r)}return i}function Qy(n,e,t){let i=n.createProgram(),r=E2(n,n.VERTEX_SHADER,t),s=E2(n,n.FRAGMENT_SHADER,e);if(i===null)throw new Error("Program creation failed");if(n.attachShader(i,r),n.attachShader(i,s),n.linkProgram(i),!n.getProgramParameter(i,n.LINK_STATUS))throw n.getProgramInfoLog(i)===null?new Error("Program info log creation failed"):new Error;return i}var O7=`
  attribute vec4 a_position;

  uniform mat4 u_matrix;

  void main() {
     gl_Position = u_matrix * a_position;
  }
`,L7=`
  precision mediump float;

  uniform vec4 u_val;
  void main() {
     gl_FragColor = u_val;
  }
`,F7=`
  attribute vec4 a_position;
  attribute vec2 a_texcoord;

  varying vec2 v_texcoord;

  uniform mat4 u_matrix;

  void main() {
     gl_Position = u_matrix * a_position;
     v_texcoord = a_texcoord;
  }
`,k7=`
  precision mediump float;

  varying vec2 v_texcoord;

  uniform sampler2D u_texture;

  void main() {
    if (v_texcoord.x < 0.0 || v_texcoord.x > 1.0 || v_texcoord.y < 0.0 || v_texcoord.y > 1.0) {
      discard;
    }
    gl_FragColor = texture2D(u_texture, v_texcoord);
  }
`;function M2(n,e,t,i){let r;return t&&t.length?r=t.shift():Iy?r=new OffscreenCanvas(n||300,e||300):r=document.createElement("canvas"),n&&(r.width=n),e&&(r.height=e),r.getContext("webgl",i)}function w2(n){let e=n.canvas;e.width=1,e.height=1,n.clear(n.COLOR_BUFFER_BIT|n.DEPTH_BUFFER_BIT|n.STENCIL_BUFFER_BIT)}var iT=[];function b2(n,e,t,i,r,s,o,a,l,c,u,d,h,f){let p=Math.round(i*e),y=Math.round(i*t);n.canvas.width=p,n.canvas.height=y;let g,m;if(m=n.createTexture(),n.bindTexture(n.TEXTURE_2D,m),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),h?(n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.LINEAR)):(n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.NEAREST)),n.texImage2D(n.TEXTURE_2D,0,n.RGBA,p,y,0,n.RGBA,u,null),g=n.createFramebuffer(),n.bindFramebuffer(n.FRAMEBUFFER,g),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,m,0),g===null)throw new Error("Could not create framebuffer");if(m===null)throw new Error("Could not create texture");if(l.length===0)return{width:p,height:y,framebuffer:g,texture:m};let x=yi();l.forEach(function(_,D,U){ay(x,_.extent)});let M,v,S,T=1/r;if(!f||l.length!==1||c!==0){if(M=n.createTexture(),m===null)throw new Error("Could not create texture");v=Math.round(ct(x)*T),S=Math.round(on(x)*T);let _=n.getParameter(n.MAX_TEXTURE_SIZE),D=Math.max(v,S),U=D>_?_/D:1,L=Math.round(v*U),W=Math.round(S*U);n.bindTexture(n.TEXTURE_2D,M),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),h?(n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.LINEAR)):(n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.NEAREST)),n.texImage2D(n.TEXTURE_2D,0,n.RGBA,L,W,0,n.RGBA,u,null);let z=n.createFramebuffer();n.bindFramebuffer(n.FRAMEBUFFER,z),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,M,0);let $=new Jy(n);l.forEach(function(G,V,se){let ie=(G.extent[0]-x[0])*T*U,ce=-(G.extent[3]-x[3])*T*U,Se=ct(G.extent)*T*U,Ie=on(G.extent)*T*U;if(n.bindFramebuffer(n.FRAMEBUFFER,z),n.viewport(0,0,L,W),G.clipExtent){let q=(G.clipExtent[0]-x[0])*T*U,re=-(G.clipExtent[3]-x[3])*T*U,fe=ct(G.clipExtent)*T*U,oe=on(G.clipExtent)*T*U;n.enable(n.SCISSOR_TEST),n.scissor(h?q:Math.round(q),h?re:Math.round(re),h?fe:Math.round(q+fe)-Math.round(q),h?oe:Math.round(re+oe)-Math.round(re))}$.drawImage(G.texture,G.width,G.height,c,c,G.width-2*c,G.height-2*c,h?ie:Math.round(ie),h?ce:Math.round(ce),h?Se:Math.round(ie+Se)-Math.round(ie),h?Ie:Math.round(ce+Ie)-Math.round(ce),L,W),n.disable(n.SCISSOR_TEST)}),n.deleteFramebuffer(z)}else M=l[0].texture,v=l[0].width,S=l[0].width;let A=ii(o),I=ii(x),w=_=>{let D=(_[0][0]-A[0])/s*i,U=-(_[0][1]-A[1])/s*i,L=(_[1][0]-A[0])/s*i,W=-(_[1][1]-A[1])/s*i,z=(_[2][0]-A[0])/s*i,$=-(_[2][1]-A[1])/s*i;return{u1:L,v1:W,u0:D,v0:U,u2:z,v2:$}};n.bindFramebuffer(n.FRAMEBUFFER,g),n.viewport(0,0,p,y);{let _=[],D=[],U=Qy(n,k7,F7);n.useProgram(U);let L=n.getUniformLocation(U,"u_texture");n.bindTexture(n.TEXTURE_2D,M),n.uniform1i(L,0),a.getTriangles().forEach(function(ie,ce,Se){let Ie=ie.source,q=ie.target,{u1:re,v1:fe,u0:oe,v0:Ae,u2:Ue,v2:ze}=w(q),It=(Ie[0][0]-I[0])/r/v,rt=-(Ie[0][1]-I[1])/r/S,Gt=(Ie[1][0]-I[0])/r/v,O=-(Ie[1][1]-I[1])/r/S,gn=(Ie[2][0]-I[0])/r/v,dt=-(Ie[2][1]-I[1])/r/S;_.push(re,fe,oe,Ae,Ue,ze),D.push(Gt,O,It,rt,gn,dt)});let W=Wh(0,p,y,0,-1,1),z=n.getUniformLocation(U,"u_matrix");n.uniformMatrix4fv(z,!1,W);let $=n.getAttribLocation(U,"a_position"),G=n.createBuffer();n.bindBuffer(n.ARRAY_BUFFER,G),n.bufferData(n.ARRAY_BUFFER,new Float32Array(_),n.STATIC_DRAW),n.vertexAttribPointer($,2,n.FLOAT,!1,0,0),n.enableVertexAttribArray($);let V=n.getAttribLocation(U,"a_texcoord"),se=n.createBuffer();n.bindBuffer(n.ARRAY_BUFFER,se),n.bufferData(n.ARRAY_BUFFER,new Float32Array(D),n.STATIC_DRAW),n.vertexAttribPointer(V,2,n.FLOAT,!1,0,0),n.enableVertexAttribArray(V),n.drawArrays(n.TRIANGLES,0,_.length/2)}if(d){let _=Qy(n,L7,O7);n.useProgram(_);let D=Wh(0,p,y,0,-1,1),U=n.getUniformLocation(_,"u_matrix");n.uniformMatrix4fv(U,!1,D);let L=Array.isArray(d)?d:[0,0,0,255],W=n.getUniformLocation(_,"u_val");!0?n.uniform4fv(W,L):n.uniform4iv(W,L);let $=n.getAttribLocation(_,"a_position"),G=n.createBuffer();n.bindBuffer(n.ARRAY_BUFFER,G),n.vertexAttribPointer($,2,n.FLOAT,!1,0,0),n.enableVertexAttribArray($);let V=a.getTriangles().reduce(function(se,ie){let ce=ie.target,{u1:Se,v1:Ie,u0:q,v0:re,u2:fe,v2:oe}=w(ce);return se.concat([Se,Ie,q,re,q,re,fe,oe,fe,oe,Se,Ie])},[]);n.bufferData(n.ARRAY_BUFFER,new Float32Array(V),n.STATIC_DRAW),n.drawArrays(n.LINES,0,V.length/2)}return{width:p,height:y,framebuffer:g,texture:m}}var rT=class extends jh{constructor(e){super({tileCoord:e.tileCoord,loader:()=>Promise.resolve(new Uint8ClampedArray(4)),interpolate:e.interpolate,transition:e.transition}),this.renderEdges_=e.renderEdges!==void 0?e.renderEdges:!1,this.pixelRatio_=e.pixelRatio,this.gutter_=e.gutter,this.reprojData_=null,this.reprojError_=null,this.reprojSize_=void 0,this.sourceTileGrid_=e.sourceTileGrid,this.targetTileGrid_=e.targetTileGrid,this.wrappedTileCoord_=e.wrappedTileCoord||e.tileCoord,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0;let t=e.sourceProj,i=t.getExtent(),r=e.sourceTileGrid.getExtent();this.clipExtent_=t.canWrapX()?r?ni(i,r):i:r;let s=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_),o=this.targetTileGrid_.getExtent(),a=this.sourceTileGrid_.getExtent(),l=o?ni(s,o):s;if(Wo(l)===0){this.state=pe.EMPTY;return}i&&(a?a=ni(a,i):a=i);let c=this.targetTileGrid_.getResolution(this.wrappedTileCoord_[0]),u=e.targetProj,d=Zy(t,u,l,c);if(!isFinite(d)||d<=0){this.state=pe.EMPTY;return}let h=e.errorThreshold!==void 0?e.errorThreshold:.5;if(this.triangulation_=new Yy(t,u,l,a,d*h,c,e.transformMatrix),this.triangulation_.getTriangles().length===0){this.state=pe.EMPTY;return}this.sourceZ_=this.sourceTileGrid_.getZForResolution(d);let f=this.triangulation_.calculateSourceExtent();if(a&&(t.canWrapX()?(f[1]=Wt(f[1],a[1],a[3]),f[3]=Wt(f[3],a[1],a[3])):f=ni(f,a)),!Wo(f))this.state=pe.EMPTY;else{let p=0,y=0;t.canWrapX()&&(p=ct(i),y=Math.floor((f[0]-i[0])/p)),cy(f.slice(),t,!0).forEach(m=>{let x=this.sourceTileGrid_.getTileRangeForExtentAndZ(m,this.sourceZ_),M=e.getTileFunction;for(let v=x.minX;v<=x.maxX;v++)for(let S=x.minY;S<=x.maxY;S++){let T=M(this.sourceZ_,v,S,this.pixelRatio_);if(T){let A=y*p;this.sourceTiles_.push({tile:T,offset:A})}}++y}),this.sourceTiles_.length===0&&(this.state=pe.EMPTY)}}getSize(){return this.reprojSize_}getData(){return this.reprojData_}getError(){return this.reprojError_}reproject_(){let e=[],t=!1;if(this.sourceTiles_.forEach(v=>{let S=v.tile;if(!S||S.getState()!==pe.LOADED)return;let T=S.getSize(),A=this.gutter_,I,w=d2(S.getData());w?I=w:(t=!0,I=h2(Cu(S.getData())));let _=[T[0]+2*A,T[1]+2*A],D=I instanceof Float32Array,U=_[0]*_[1],L=D?Float32Array:Uint8ClampedArray,W=new L(I.buffer),z=L.BYTES_PER_ELEMENT,$=z*W.length/U,G=W.byteLength/_[1],V=Math.floor(G/z/_[0]),se=this.sourceTileGrid_.getTileCoordExtent(S.tileCoord);se[0]+=v.offset,se[2]+=v.offset;let ie=this.clipExtent_?.slice();ie&&(ie[0]+=v.offset,ie[2]+=v.offset),e.push({extent:se,clipExtent:ie,data:W,dataType:L,bytesPerPixel:$,pixelSize:_,bandCount:V})}),this.sourceTiles_.length=0,e.length===0){this.state=pe.ERROR,this.changed();return}let i=this.wrappedTileCoord_[0],r=this.targetTileGrid_.getTileSize(i),s=typeof r=="number"?r:r[0],o=typeof r=="number"?r:r[1],a=s*this.pixelRatio_,l=o*this.pixelRatio_,c=this.targetTileGrid_.getResolution(i),u=this.sourceTileGrid_.getResolution(this.sourceZ_),d=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_),h=e[0].bandCount,f=new e[0].dataType(h*a*l),p=M2(a,l,iT,{premultipliedAlpha:!1,antialias:!1}),y,g=p.RGBA,m;e[0].dataType==Float32Array?(m=p.FLOAT,p.getExtension("WEBGL_color_buffer_float"),p.getExtension("OES_texture_float"),p.getExtension("EXT_float_blend"),y=p.getExtension("OES_texture_float_linear")!==null&&this.interpolate):(m=p.UNSIGNED_BYTE,y=this.interpolate);let x=4,M=Math.ceil(h/x);for(let v=M-1;v>=0;--v){let S=[];for(let L=0,W=e.length;L<W;++L){let z=e[L],$=z.pixelSize,G=$[0],V=$[1],se=new z.dataType(x*G*V),ie=z.data,ce=v*x;for(let Ie=0,q=se.length;Ie<q;Ie+=x)se[Ie]=ie[ce],se[Ie+1]=ie[ce+1],se[Ie+2]=ie[ce+2],se[Ie+3]=ie[ce+3],ce+=h;let Se=p.createTexture();p.bindTexture(p.TEXTURE_2D,Se),y?(p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MIN_FILTER,p.LINEAR),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MAG_FILTER,p.LINEAR)):(p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MIN_FILTER,p.NEAREST),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MAG_FILTER,p.NEAREST)),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_S,p.CLAMP_TO_EDGE),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_T,p.CLAMP_TO_EDGE),p.texImage2D(p.TEXTURE_2D,0,g,G,V,0,g,m,se),S.push({extent:z.extent,clipExtent:z.clipExtent,texture:Se,width:G,height:V})}let{framebuffer:T,width:A,height:I}=b2(p,s,o,this.pixelRatio_,u,c,d,this.triangulation_,S,this.gutter_,m,this.renderEdges_,y),w=A,_=I*x,D=new e[0].dataType(w*_);p.bindFramebuffer(p.FRAMEBUFFER,T),p.readPixels(0,0,A,I,p.RGBA,m,D);let U=v*x;for(let L=0,W=D.length;L<W;L+=x){let z=(w-1-(L/_|0))*_+L%_;f[U]=D[z],f[U+1]=D[z+1],f[U+2]=D[z+2],f[U+3]=D[z+3],U+=h}}if(w2(p),iT.push(p.canvas),t){let v=tn(s,o),S=new ImageData(f,s);v.putImageData(S,0,0),this.reprojData_=v.canvas}else this.reprojData_=f;this.reprojSize_=[Math.round(a),Math.round(l)],this.state=pe.LOADED,this.changed()}load(){if(this.state!==pe.IDLE&&this.state!==pe.ERROR)return;this.state=pe.LOADING,this.changed();let e=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(({tile:t})=>{let i=t.getState();if(i!==pe.IDLE&&i!==pe.LOADING)return;e++;let r=yt(t,Te.CHANGE,()=>{let s=t.getState();(s==pe.LOADED||s==pe.ERROR||s==pe.EMPTY)&&(Nt(r),e--,e===0&&(this.unlistenSources_(),this.reproject_()))});this.sourcesListenerKeys_.push(r)}),e===0?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach(function({tile:t}){t.getState()==pe.IDLE&&t.load()})}unlistenSources_(){this.sourcesListenerKeys_.forEach(Nt),this.sourcesListenerKeys_=null}},S2=rT;var sT=class extends Su{constructor(e,t,i,r,s,o,a,l,c,u,d,h){super(s,pe.IDLE,h),this.renderEdges_=d!==void 0?d:!1,this.pixelRatio_=a,this.gutter_=l,this.canvas_=null,this.sourceTileGrid_=t,this.targetTileGrid_=r,this.wrappedTileCoord_=o||s,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0,this.clipExtent_=e.canWrapX()?e.getExtent():void 0;let f=r.getTileCoordExtent(this.wrappedTileCoord_),p=this.targetTileGrid_.getExtent(),y=this.sourceTileGrid_.getExtent(),g=p?ni(f,p):f;if(Wo(g)===0){this.state=pe.EMPTY;return}let m=e.getExtent();m&&(y?y=ni(y,m):y=m);let x=r.getResolution(this.wrappedTileCoord_[0]),M=Zy(e,i,g,x);if(!isFinite(M)||M<=0){this.state=pe.EMPTY;return}let v=u!==void 0?u:.5;if(this.triangulation_=new Yy(e,i,g,y,M*v,x),this.triangulation_.getTriangles().length===0){this.state=pe.EMPTY;return}this.sourceZ_=t.getZForResolution(M);let S=this.triangulation_.calculateSourceExtent();if(y&&(e.canWrapX()?(S[1]=Wt(S[1],y[1],y[3]),S[3]=Wt(S[3],y[1],y[3])):S=ni(S,y)),!Wo(S))this.state=pe.EMPTY;else{let T=0,A=0;e.canWrapX()&&(T=ct(m),A=Math.floor((S[0]-m[0])/T)),cy(S.slice(),e,!0).forEach(w=>{let _=t.getTileRangeForExtentAndZ(w,this.sourceZ_);for(let D=_.minX;D<=_.maxX;D++)for(let U=_.minY;U<=_.maxY;U++){let L=c(this.sourceZ_,D,U,a);if(L){let W=A*T;this.sourceTiles_.push({tile:L,offset:W})}}++A}),this.sourceTiles_.length===0&&(this.state=pe.EMPTY)}}getImage(){return this.canvas_}reproject_(){let e=[];if(this.sourceTiles_.forEach(t=>{let i=t.tile;if(i&&i.getState()==pe.LOADED){let r=this.sourceTileGrid_.getTileCoordExtent(i.tileCoord);r[0]+=t.offset,r[2]+=t.offset;let s=this.clipExtent_?.slice();s&&(s[0]+=t.offset,s[2]+=t.offset),e.push({extent:r,clipExtent:s,image:i.getImage()})}}),this.sourceTiles_.length=0,e.length===0)this.state=pe.ERROR;else{let t=this.wrappedTileCoord_[0],i=this.targetTileGrid_.getTileSize(t),r=typeof i=="number"?i:i[0],s=typeof i=="number"?i:i[1],o=this.targetTileGrid_.getResolution(t),a=this.sourceTileGrid_.getResolution(this.sourceZ_),l=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=y2(r,s,this.pixelRatio_,a,this.sourceTileGrid_.getExtent(),o,l,this.triangulation_,e,this.gutter_,this.renderEdges_,this.interpolate),this.state=pe.LOADED}this.changed()}load(){if(this.state==pe.IDLE){this.state=pe.LOADING,this.changed();let e=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(({tile:t})=>{let i=t.getState();if(i==pe.IDLE||i==pe.LOADING){e++;let r=yt(t,Te.CHANGE,s=>{let o=t.getState();(o==pe.LOADED||o==pe.ERROR||o==pe.EMPTY)&&(Nt(r),e--,e===0&&(this.unlistenSources_(),this.reproject_()))});this.sourcesListenerKeys_.push(r)}}),e===0?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach(function({tile:t},i,r){t.getState()==pe.IDLE&&t.load()})}}unlistenSources_(){this.sourcesListenerKeys_.forEach(Nt),this.sourcesListenerKeys_=null}release(){this.canvas_&&(Ih(this.canvas_.getContext("2d")),ll.push(this.canvas_),this.canvas_=null),super.release()}},$h=sT;var ev=class{constructor(e,t,i,r){this.minX=e,this.maxX=t,this.minY=i,this.maxY=r}contains(e){return this.containsXY(e[1],e[2])}containsTileRange(e){return this.minX<=e.minX&&e.maxX<=this.maxX&&this.minY<=e.minY&&e.maxY<=this.maxY}containsXY(e,t){return this.minX<=e&&e<=this.maxX&&this.minY<=t&&t<=this.maxY}equals(e){return this.minX==e.minX&&this.minY==e.minY&&this.maxX==e.maxX&&this.maxY==e.maxY}extend(e){e.minX<this.minX&&(this.minX=e.minX),e.maxX>this.maxX&&(this.maxX=e.maxX),e.minY<this.minY&&(this.minY=e.minY),e.maxY>this.maxY&&(this.maxY=e.maxY)}getHeight(){return this.maxY-this.minY+1}getSize(){return[this.getWidth(),this.getHeight()]}getWidth(){return this.maxX-this.minX+1}intersects(e){return this.minX<=e.maxX&&this.maxX>=e.minX&&this.minY<=e.maxY&&this.maxY>=e.minY}};function cl(n,e,t,i,r){return r!==void 0?(r.minX=n,r.maxX=e,r.minY=t,r.maxY=i,r):new ev(n,e,t,i)}var tv=ev;function Au(n,e,t,i){return i!==void 0?(i[0]=n,i[1]=e,i[2]=t,i):[n,e,t]}function T2(n,e,t){return n+"/"+e+"/"+t}function C2(n){return B7(n[0],n[1],n[2])}function B7(n,e,t){return(e<<n)+t}function A2(n,e){let t=n[0],i=n[1],r=n[2];if(e.getMinZoom()>t||t>e.getMaxZoom())return!1;let s=e.getFullTileRange(t);return s?s.containsXY(i,r):!0}function oT(n,e,t,i){return`${n},${T2(e,t,i)}`}function aT(n,e,t){if(!(t in n))return n[t]=new Set([e]),!0;let i=n[t],r=i.has(e);return r||i.add(e),!r}function V7(n,e,t){let i=n[t];return i?i.delete(e):!1}function I2(n,e){let t=n.layerStatesArray[n.layerIndex];t.extent&&(e=ni(e,Zs(t.extent,n.viewState.projection)));let i=t.layer.getRenderSource();if(!i.getWrapX()){let r=i.getTileGridForProjection(n.viewState.projection).getExtent();r&&(e=ni(e,r))}return e}var lT=class extends u2{constructor(e,t){super(e),t=t||{},this.extentChanged=!0,this.renderComplete=!1,this.renderedExtent_=null,this.renderedPixelRatio,this.renderedProjection=null,this.renderedRevision,this.renderedTiles=[],this.renderedSourceKey_,this.renderedSourceRevision_,this.tempExtent=yi(),this.tempTileRange_=new tv(0,0,0,0),this.tempTileCoord_=Au(0,0,0);let i=t.cacheSize!==void 0?t.cacheSize:512;this.tileCache_=new f2(i),this.maxStaleKeys=i*.5}getTileCache(){return this.tileCache_}getOrCreateTile(e,t,i,r){let s=this.tileCache_,a=this.getLayer().getSource(),l=oT(a.getKey(),e,t,i),c;if(s.containsKey(l))c=s.get(l);else{if(c=a.getTile(e,t,i,r.pixelRatio,r.viewState.projection),!c)return null;s.set(l,c)}return c}getTile(e,t,i,r){let s=this.getOrCreateTile(e,t,i,r);return s||null}getData(e){let t=this.frameState;if(!t)return null;let i=this.getLayer(),r=Vn(t.pixelToCoordinateTransform,e.slice()),s=i.getExtent();if(s&&!eu(s,r))return null;let o=t.viewState,a=i.getRenderSource(),l=a.getTileGridForProjection(o.projection),c=a.getTilePixelRatio(t.pixelRatio);for(let u=l.getZForResolution(o.resolution);u>=l.getMinZoom();--u){let d=l.getTileCoordForCoordAndZ(r,u),h=this.getTile(u,d[1],d[2],t);if(!h||h.getState()!==pe.LOADED)continue;let f=l.getOrigin(u),p=cn(l.getTileSize(u)),y=l.getResolution(u),g;if(h instanceof qy||h instanceof $h)g=h.getImage();else if(h instanceof jh){if(g=Cu(h.getData()),!g)continue}else continue;let m=Math.floor(c*((r[0]-f[0])/y-d[1]*p[0])),x=Math.floor(c*((f[1]-r[1])/y-d[2]*p[1])),M=Math.round(c*a.getGutterForProjection(o.projection));return this.getImageData(g,m+M,x+M)}return null}prepareFrame(e){this.renderedProjection?e.viewState.projection!==this.renderedProjection&&(this.tileCache_.clear(),this.renderedProjection=e.viewState.projection):this.renderedProjection=e.viewState.projection;let t=this.getLayer().getSource();if(!t)return!1;let i=t.getRevision();return this.renderedRevision_?this.renderedRevision_!==i&&(this.renderedRevision_=i,this.renderedSourceKey_===t.getKey()&&this.tileCache_.clear()):this.renderedRevision_=i,!0}enqueueTiles(e,t,i,r,s){let o=e.viewState,a=this.getLayer(),l=a.getRenderSource(),c=l.getTileGridForProjection(o.projection),u=en(l);u in e.wantedTiles||(e.wantedTiles[u]={});let d=e.wantedTiles[u],h=a.getMapInternal(),f=Math.max(i-s,c.getMinZoom(),c.getZForResolution(Math.min(a.getMaxResolution(),h?h.getView().getResolutionForZoom(Math.max(a.getMinZoom(),0)):c.getResolution(0)),l.zDirection));for(let p=i;p>=f;--p){let y=c.getTileRangeForExtentAndZ(t,p,this.tempTileRange_),g=c.getResolution(p);for(let m=y.minX;m<=y.maxX;++m)for(let x=y.minY;x<=y.maxY;++x){let M=this.getTile(p,m,x,e);if(!M||!aT(r,M,p))continue;let S=M.getKey();if(d[S]=!0,M.getState()===pe.IDLE&&!e.tileQueue.isKeyQueued(S)){let T=Au(p,m,x,this.tempTileCoord_);e.tileQueue.enqueue([M,u,c.getTileCoordCenter(T),g])}}}}findStaleTile_(e,t){let i=this.tileCache_,r=e[0],s=e[1],o=e[2],a=this.getStaleKeys();for(let l=0;l<a.length;++l){let c=oT(a[l],r,s,o);if(i.containsKey(c)){let u=i.get(c);if(u.getState()===pe.LOADED)return u.endTransition(en(this)),aT(t,u,r),!0}}return!1}findAltTiles_(e,t,i,r){let s=e.getTileRangeForTileCoordAndZ(t,i,this.tempTileRange_);if(!s)return!1;let o=!0,a=this.tileCache_,c=this.getLayer().getRenderSource().getKey();for(let u=s.minX;u<=s.maxX;++u)for(let d=s.minY;d<=s.maxY;++d){let h=oT(c,i,u,d),f=!1;if(a.containsKey(h)){let p=a.get(h);p.getState()===pe.LOADED&&(aT(r,p,i),f=!0)}f||(o=!1)}return o}renderFrame(e,t){let i=!0;this.renderComplete=!0;let r=e.layerStatesArray[e.layerIndex],s=e.viewState,o=s.projection,a=s.resolution,l=s.center,c=e.pixelRatio,u=this.getLayer(),d=u.getSource(),h=d.getRevision(),f=d.getTileGridForProjection(o),p=f.getZForResolution(a,d.zDirection),y=f.getResolution(p),g=d.getKey();this.renderedSourceKey_?this.renderedSourceKey_!==g&&(this.prependStaleKey(this.renderedSourceKey_),this.renderedSourceKey_=g):this.renderedSourceKey_=g;let m=e.extent,x=d.getTilePixelRatio(c);this.prepareContainer(e,t);let M=this.context.canvas.width,v=this.context.canvas.height,S=r.extent&&Zs(r.extent,o);S&&(m=ni(m,Zs(r.extent,o)));let T=y*M/2/x,A=y*v/2/x,I=[l[0]-T,l[1]-A,l[0]+T,l[1]+A],w={};this.renderedTiles.length=0;let _=u.getPreload();if(e.nextExtent){let ie=f.getZForResolution(s.nextResolution,d.zDirection),ce=I2(e,e.nextExtent);this.enqueueTiles(e,ce,ie,w,_)}let D=I2(e,m);if(this.enqueueTiles(e,D,p,w,0),_>0&&setTimeout(()=>{this.enqueueTiles(e,D,p-1,w,_-1)},0),!(p in w))return this.container;let U=en(this),L=e.time;for(let ie of w[p]){let ce=ie.getState();if((ie instanceof $h||ie instanceof S2)&&ce===pe.EMPTY)continue;let Se=ie.tileCoord;if(ce===pe.LOADED&&ie.getAlpha(U,L)===1){ie.endTransition(U);continue}if(ce!==pe.IDLE&&(i=!1),ce!==pe.ERROR&&(this.renderComplete=!1),this.findStaleTile_(Se,w)){V7(w,ie,p),e.animate=!0;continue}if(this.findAltTiles_(f,Se,p+1,w))continue;let re=f.getMinZoom();for(let fe=p-1;fe>=re&&!this.findAltTiles_(f,Se,fe,w);--fe);}let W=y/a*c/x,z=this.getRenderContext(e);Js(this.tempTransform,M/2,v/2,W,W,0,-M/2,-v/2),r.extent&&this.clipUnrotated(z,e,S),d.getInterpolate()||(z.imageSmoothingEnabled=!1),this.preRender(z,e);let $=Object.keys(w).map(Number);$.sort(Ka);let G,V=[],se=[];for(let ie=$.length-1;ie>=0;--ie){let ce=$[ie],Se=d.getTilePixelSize(ce,c,o),q=f.getResolution(ce)/y,re=Se[0]*q*W,fe=Se[1]*q*W,oe=f.getTileCoordForCoordAndZ(ii(I),ce),Ae=f.getTileCoordExtent(oe),Ue=Vn(this.tempTransform,[x*(Ae[0]-I[0])/y,x*(I[3]-Ae[3])/y]),ze=x*d.getGutterForProjection(o);for(let It of w[ce]){if(It.getState()!==pe.LOADED)continue;let rt=It.tileCoord,Gt=oe[1]-rt[1],O=Math.round(Ue[0]-(Gt-1)*re),gn=oe[2]-rt[2],dt=Math.round(Ue[1]-(gn-1)*fe),Ke=Math.round(Ue[0]-Gt*re),Ce=Math.round(Ue[1]-gn*fe),Dt=O-Ke,Fe=dt-Ce,C=$.length===1,E=!1;G=[Ke,Ce,Ke+Dt,Ce,Ke+Dt,Ce+Fe,Ke,Ce+Fe];for(let B=0,ee=V.length;B<ee;++B)if(!C&&ce<se[B]){let ne=V[B];qs([Ke,Ce,Ke+Dt,Ce+Fe],[ne[0],ne[3],ne[4],ne[7]])&&(E||(z.save(),E=!0),z.beginPath(),z.moveTo(G[0],G[1]),z.lineTo(G[2],G[3]),z.lineTo(G[4],G[5]),z.lineTo(G[6],G[7]),z.moveTo(ne[6],ne[7]),z.lineTo(ne[4],ne[5]),z.lineTo(ne[2],ne[3]),z.lineTo(ne[0],ne[1]),z.clip())}V.push(G),se.push(ce),this.drawTile(It,e,Ke,Ce,Dt,Fe,ze,C),E&&z.restore(),this.renderedTiles.unshift(It),this.updateUsedTiles(e.usedTiles,d,It)}}if(this.renderedRevision=h,this.renderedResolution=y,this.extentChanged=!this.renderedExtent_||!vh(this.renderedExtent_,I),this.renderedExtent_=I,this.renderedPixelRatio=c,this.postRender(this.context,e),r.extent&&z.restore(),z.imageSmoothingEnabled=!0,this.renderComplete){let ie=(ce,Se)=>{let Ie=en(d),q=Se.wantedTiles[Ie],re=q?Object.keys(q).length:0;this.updateCacheSize(re),this.tileCache_.expireCache()};e.postRenderFunctions.push(ie)}return!this.renderComplete&&!i&&(e.animate=!0),this.container}updateCacheSize(e){this.tileCache_.highWaterMark=Math.max(this.tileCache_.highWaterMark,e*2)}drawTile(e,t,i,r,s,o,a,l){let c;if(e instanceof jh){if(c=Cu(e.getData()),!c)throw new Error("Rendering array data is not yet supported")}else c=this.getTileImage(e);if(!c)return;let u=this.getRenderContext(t),d=en(this),h=t.layerStatesArray[t.layerIndex],f=h.opacity*(l?e.getAlpha(d,t.time):1),p=f!==u.globalAlpha;p&&(u.save(),u.globalAlpha=f),u.drawImage(c,a,a,c.width-2*a,c.height-2*a,i,r,s,o),p&&u.restore(),f!==h.opacity?t.animate=!0:l&&e.endTransition(d)}getImage(){let e=this.context;return e?e.canvas:null}getTileImage(e){return e.getImage()}updateUsedTiles(e,t,i){let r=en(t);r in e||(e[r]={}),e[r][i.getKey()]=!0}},D2=lT;var cT=class extends a2{constructor(e){super(e)}createRenderer(){return new D2(this,{cacheSize:this.getCacheSize()})}},R2=cT;var nv={TILELOADSTART:"tileloadstart",TILELOADEND:"tileloadend",TILELOADERROR:"tileloaderror"};var uT=class extends Dn{constructor(e){super(),this.projection=Bn(e.projection),this.attributions_=P2(e.attributions),this.attributionsCollapsible_=e.attributionsCollapsible??!0,this.loading=!1,this.state_=e.state!==void 0?e.state:"ready",this.wrapX_=e.wrapX!==void 0?e.wrapX:!1,this.interpolate_=!!e.interpolate,this.viewResolver=null,this.viewRejector=null;let t=this;this.viewPromise_=new Promise(function(i,r){t.viewResolver=i,t.viewRejector=r})}getAttributions(){return this.attributions_}getAttributionsCollapsible(){return this.attributionsCollapsible_}getProjection(){return this.projection}getResolutions(e){return null}getView(){return this.viewPromise_}getState(){return this.state_}getWrapX(){return this.wrapX_}getInterpolate(){return this.interpolate_}refresh(){this.changed()}setAttributions(e){this.attributions_=P2(e),this.changed()}setState(e){this.state_=e,this.changed()}};function P2(n){return n?typeof n=="function"?n:(Array.isArray(n)||(n=[n]),e=>n):null}var N2=uT;var Iu=[0,0,0],ea=5,dT=class{constructor(e){this.minZoom=e.minZoom!==void 0?e.minZoom:0,this.resolutions_=e.resolutions,pt(vO(this.resolutions_,(r,s)=>s-r,!0),"`resolutions` must be sorted in descending order");let t;if(!e.origins){for(let r=0,s=this.resolutions_.length-1;r<s;++r)if(!t)t=this.resolutions_[r]/this.resolutions_[r+1];else if(this.resolutions_[r]/this.resolutions_[r+1]!==t){t=void 0;break}}this.zoomFactor_=t,this.maxZoom=this.resolutions_.length-1,this.origin_=e.origin!==void 0?e.origin:null,this.origins_=null,e.origins!==void 0&&(this.origins_=e.origins,pt(this.origins_.length==this.resolutions_.length,"Number of `origins` and `resolutions` must be equal"));let i=e.extent;i!==void 0&&!this.origin_&&!this.origins_&&(this.origin_=ii(i)),pt(!this.origin_&&this.origins_||this.origin_&&!this.origins_,"Either `origin` or `origins` must be configured, never both"),this.tileSizes_=null,e.tileSizes!==void 0&&(this.tileSizes_=e.tileSizes,pt(this.tileSizes_.length==this.resolutions_.length,"Number of `tileSizes` and `resolutions` must be equal")),this.tileSize_=e.tileSize!==void 0?e.tileSize:this.tileSizes_?null:256,pt(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,"Either `tileSize` or `tileSizes` must be configured, never both"),this.extent_=i!==void 0?i:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],this.tmpExtent_=[0,0,0,0],e.sizes!==void 0?this.fullTileRanges_=e.sizes.map((r,s)=>{let o=new tv(Math.min(0,r[0]),Math.max(r[0]-1,-1),Math.min(0,r[1]),Math.max(r[1]-1,-1));if(i){let a=this.getTileRangeForExtentAndZ(i,s);o.minX=Math.max(a.minX,o.minX),o.maxX=Math.min(a.maxX,o.maxX),o.minY=Math.max(a.minY,o.minY),o.maxY=Math.min(a.maxY,o.maxY)}return o}):i&&this.calculateTileRanges_(i)}forEachTileCoord(e,t,i){let r=this.getTileRangeForExtentAndZ(e,t);for(let s=r.minX,o=r.maxX;s<=o;++s)for(let a=r.minY,l=r.maxY;a<=l;++a)i([t,s,a])}forEachTileCoordParentTileRange(e,t,i,r){let s,o,a,l=null,c=e[0]-1;for(this.zoomFactor_===2?(o=e[1],a=e[2]):l=this.getTileCoordExtent(e,r);c>=this.minZoom;){if(o!==void 0&&a!==void 0?(o=Math.floor(o/2),a=Math.floor(a/2),s=cl(o,o,a,a,i)):s=this.getTileRangeForExtentAndZ(l,c,i),t(c,s))return!0;--c}return!1}getExtent(){return this.extent_}getMaxZoom(){return this.maxZoom}getMinZoom(){return this.minZoom}getOrigin(e){return this.origin_?this.origin_:this.origins_[e]}getResolution(e){return this.resolutions_[e]}getResolutions(){return this.resolutions_}getTileCoordChildTileRange(e,t,i){if(e[0]<this.maxZoom){if(this.zoomFactor_===2){let s=e[1]*2,o=e[2]*2;return cl(s,s+1,o,o+1,t)}let r=this.getTileCoordExtent(e,i||this.tmpExtent_);return this.getTileRangeForExtentAndZ(r,e[0]+1,t)}return null}getTileRangeForTileCoordAndZ(e,t,i){if(t>this.maxZoom||t<this.minZoom)return null;let r=e[0],s=e[1],o=e[2];if(t===r)return cl(s,o,s,o,i);if(this.zoomFactor_){let l=Math.pow(this.zoomFactor_,t-r),c=Math.floor(s*l),u=Math.floor(o*l);if(t<r)return cl(c,c,u,u,i);let d=Math.floor(l*(s+1))-1,h=Math.floor(l*(o+1))-1;return cl(c,d,u,h,i)}let a=this.getTileCoordExtent(e,this.tmpExtent_);return this.getTileRangeForExtentAndZ(a,t,i)}getTileRangeForExtentAndZ(e,t,i){this.getTileCoordForXYAndZ_(e[0],e[3],t,!1,Iu);let r=Iu[1],s=Iu[2];this.getTileCoordForXYAndZ_(e[2],e[1],t,!0,Iu);let o=Iu[1],a=Iu[2];return cl(r,o,s,a,i)}getTileCoordCenter(e){let t=this.getOrigin(e[0]),i=this.getResolution(e[0]),r=cn(this.getTileSize(e[0]),this.tmpSize_);return[t[0]+(e[1]+.5)*r[0]*i,t[1]-(e[2]+.5)*r[1]*i]}getTileCoordExtent(e,t){let i=this.getOrigin(e[0]),r=this.getResolution(e[0]),s=cn(this.getTileSize(e[0]),this.tmpSize_),o=i[0]+e[1]*s[0]*r,a=i[1]-(e[2]+1)*s[1]*r,l=o+s[0]*r,c=a+s[1]*r;return jo(o,a,l,c,t)}getTileCoordForCoordAndResolution(e,t,i){return this.getTileCoordForXYAndResolution_(e[0],e[1],t,!1,i)}getTileCoordForXYAndResolution_(e,t,i,r,s){let o=this.getZForResolution(i),a=i/this.getResolution(o),l=this.getOrigin(o),c=cn(this.getTileSize(o),this.tmpSize_),u=a*(e-l[0])/i/c[0],d=a*(l[1]-t)/i/c[1];return r?(u=gh(u,ea)-1,d=gh(d,ea)-1):(u=mh(u,ea),d=mh(d,ea)),Au(o,u,d,s)}getTileCoordForXYAndZ_(e,t,i,r,s){let o=this.getOrigin(i),a=this.getResolution(i),l=cn(this.getTileSize(i),this.tmpSize_),c=(e-o[0])/a/l[0],u=(o[1]-t)/a/l[1];return r?(c=gh(c,ea)-1,u=gh(u,ea)-1):(c=mh(c,ea),u=mh(u,ea)),Au(i,c,u,s)}getTileCoordForCoordAndZ(e,t,i){return this.getTileCoordForXYAndZ_(e[0],e[1],t,!1,i)}getTileCoordResolution(e){return this.resolutions_[e[0]]}getTileSize(e){return this.tileSize_?this.tileSize_:this.tileSizes_[e]}getFullTileRange(e){return this.fullTileRanges_?this.fullTileRanges_[e]:this.extent_?this.getTileRangeForExtentAndZ(this.extent_,e):null}getZForResolution(e,t){let i=$c(this.resolutions_,e,t||0);return Wt(i,this.minZoom,this.maxZoom)}tileCoordIntersectsViewport(e,t){return wb(t,0,t.length,2,this.getTileCoordExtent(e))}calculateTileRanges_(e){let t=this.resolutions_.length,i=new Array(t);for(let r=this.minZoom;r<t;++r)i[r]=this.getTileRangeForExtentAndZ(e,r);this.fullTileRanges_=i}},hT=dT;function iv(n){let e=n.getDefaultTileGrid();return e||(e=H7(n),n.setDefaultTileGrid(e)),e}function O2(n,e,t){let i=e[0],r=n.getTileCoordCenter(e),s=rv(t);if(!eu(s,r)){let o=ct(s),a=Math.ceil((s[0]-r[0])/o);return r[0]+=o*a,n.getTileCoordForCoordAndZ(r,i)}return e}function z7(n,e,t,i){i=i!==void 0?i:"top-left";let r=F2(n,e,t);return new hT({extent:n,origin:FO(n,i),resolutions:r,tileSize:t})}function L2(n){let e=n||{},t=e.extent||Bn("EPSG:3857").getExtent(),i={extent:t,minZoom:e.minZoom,tileSize:e.tileSize,resolutions:F2(t,e.maxZoom,e.tileSize,e.maxResolution)};return new hT(i)}function F2(n,e,t,i){e=e!==void 0?e:42,t=cn(t!==void 0?t:256);let r=on(n),s=ct(n);i=i>0?i:Math.max(s/t[0],r/t[1]);let o=e+1,a=new Array(o);for(let l=0;l<o;++l)a[l]=i/Math.pow(2,l);return a}function H7(n,e,t,i){let r=rv(n);return z7(r,e,t,i)}function rv(n){n=Bn(n);let e=n.getExtent();if(!e){let t=180*$s.degrees/n.getMetersPerUnit();e=jo(-t,-t,t,t)}return e}var fT=class extends N2{constructor(e){super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,projection:e.projection,state:e.state,wrapX:e.wrapX,interpolate:e.interpolate}),this.on,this.once,this.un,this.tilePixelRatio_=e.tilePixelRatio!==void 0?e.tilePixelRatio:1,this.tileGrid=e.tileGrid!==void 0?e.tileGrid:null;let t=[256,256];this.tileGrid&&cn(this.tileGrid.getTileSize(this.tileGrid.getMinZoom()),t),this.tmpSize=[0,0],this.key_=e.key||en(this),this.tileOptions={transition:e.transition,interpolate:e.interpolate},this.zDirection=e.zDirection?e.zDirection:0}getGutterForProjection(e){return 0}getKey(){return this.key_}setKey(e){this.key_!==e&&(this.key_=e,this.changed())}getResolutions(e){let t=e?this.getTileGridForProjection(e):this.tileGrid;return t?t.getResolutions():null}getTile(e,t,i,r,s){return ft()}getTileGrid(){return this.tileGrid}getTileGridForProjection(e){return this.tileGrid?this.tileGrid:iv(e)}getTilePixelRatio(e){return this.tilePixelRatio_}getTilePixelSize(e,t,i){let r=this.getTileGridForProjection(i),s=this.getTilePixelRatio(t),o=cn(r.getTileSize(e),this.tmpSize);return s==1?o:rF(o,s,this.tmpSize)}getTileCoordForTileUrlFunction(e,t){let i=t!==void 0?t:this.getProjection(),r=t!==void 0?this.getTileGridForProjection(i):this.tileGrid||this.getTileGridForProjection(i);return this.getWrapX()&&i.isGlobal()&&(e=O2(r,e,i)),A2(e,r)?e:null}clear(){}refresh(){this.clear(),super.refresh()}},sv=class extends Xn{constructor(e,t){super(e),this.tile=t}},k2=fT;var G7=/\{z\}/g,j7=/\{x\}/g,W7=/\{y\}/g,$7=/\{-y\}/g;function U2(n,e,t,i,r){return n.replace(G7,e.toString()).replace(j7,t.toString()).replace(W7,i.toString()).replace($7,function(){if(r===void 0)throw new Error("If the URL template has a {-y} placeholder, the grid extent must be known");return(r-i).toString()})}function B2(n){let e=[],t=/\{([a-z])-([a-z])\}/.exec(n);if(t){let i=t[1].charCodeAt(0),r=t[2].charCodeAt(0),s;for(s=i;s<=r;++s)e.push(n.replace(t[0],String.fromCharCode(s)));return e}if(t=/\{(\d+)-(\d+)\}/.exec(n),t){let i=parseInt(t[2],10);for(let r=parseInt(t[1],10);r<=i;r++)e.push(n.replace(t[0],r.toString()));return e}return e.push(n),e}function X7(n,e){return function(t,i,r){if(!t)return;let s,o=t[0];if(e){let a=e.getFullTileRange(o);a&&(s=a.getHeight()-1)}return U2(n,o,t[1],t[2],s)}}function V2(n,e){let t=n.length,i=new Array(t);for(let r=0;r<t;++r)i[r]=X7(n[r],e);return q7(i)}function q7(n){return n.length===1?n[0]:function(e,t,i){if(!e)return;let r=C2(e),s=Ws(r,n.length);return n[s](e,t,i)}}var pT=class n extends k2{constructor(e){super({attributions:e.attributions,cacheSize:e.cacheSize,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tilePixelRatio:e.tilePixelRatio,wrapX:e.wrapX,transition:e.transition,interpolate:e.interpolate,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.generateTileUrlFunction_=this.tileUrlFunction===n.prototype.tileUrlFunction,this.tileLoadFunction=e.tileLoadFunction,e.tileUrlFunction&&(this.tileUrlFunction=e.tileUrlFunction),this.urls=null,e.urls?this.setUrls(e.urls):e.url&&this.setUrl(e.url),this.tileLoadingKeys_={}}getTileLoadFunction(){return this.tileLoadFunction}getTileUrlFunction(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction}getUrls(){return this.urls}handleTileChange(e){let t=e.target,i=en(t),r=t.getState(),s;r==pe.LOADING?(this.tileLoadingKeys_[i]=!0,s=nv.TILELOADSTART):i in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[i],s=r==pe.ERROR?nv.TILELOADERROR:r==pe.LOADED?nv.TILELOADEND:void 0),s!=null&&this.dispatchEvent(new sv(s,t))}setTileLoadFunction(e){this.tileLoadFunction=e,this.changed()}setTileUrlFunction(e,t){this.tileUrlFunction=e,typeof t<"u"?this.setKey(t):this.changed()}setUrl(e){let t=B2(e);this.urls=t,this.setUrls(t)}setUrls(e){this.urls=e;let t=e.join(`
`);this.generateTileUrlFunction_?this.setTileUrlFunction(V2(e,this.tileGrid),t):this.setKey(t)}tileUrlFunction(e,t,i){}},z2=pT;var mT=class extends z2{constructor(e){super({attributions:e.attributions,cacheSize:e.cacheSize,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:Y7,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX,transition:e.transition,interpolate:e.interpolate!==void 0?e.interpolate:!0,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.crossOrigin=e.crossOrigin!==void 0?e.crossOrigin:null,this.tileClass=e.tileClass!==void 0?e.tileClass:qy,this.tileGridForProjection={},this.reprojectionErrorThreshold_=e.reprojectionErrorThreshold,this.renderReprojectionEdges_=!1}getGutterForProjection(e){return this.getProjection()&&e&&!gy(this.getProjection(),e)?0:this.getGutter()}getGutter(){return 0}getKey(){let e=super.getKey();return this.getInterpolate()||(e+=":disable-interpolation"),e}getTileGridForProjection(e){let t=this.getProjection();if(this.tileGrid&&(!t||gy(t,e)))return this.tileGrid;let i=en(e);return i in this.tileGridForProjection||(this.tileGridForProjection[i]=iv(e)),this.tileGridForProjection[i]}createTile_(e,t,i,r,s,o){let a=[e,t,i],l=this.getTileCoordForTileUrlFunction(a,s),c=l?this.tileUrlFunction(l,r,s):void 0,u=new this.tileClass(a,c!==void 0?pe.IDLE:pe.EMPTY,c!==void 0?c:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return u.key=o,u.addEventListener(Te.CHANGE,this.handleTileChange.bind(this)),u}getTile(e,t,i,r,s){let o=this.getProjection();if(!o||!s||gy(o,s))return this.getTileInternal(e,t,i,r,o||s);let a=[e,t,i],l=this.getKey(),c=this.getTileGridForProjection(o),u=this.getTileGridForProjection(s),d=this.getTileCoordForTileUrlFunction(a,s),h=new $h(o,c,s,u,a,d,this.getTilePixelRatio(r),this.getGutter(),(f,p,y,g)=>this.getTileInternal(f,p,y,g,o),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_,this.tileOptions);return h.key=l,h}getTileInternal(e,t,i,r,s){let o=this.getKey();return this.createTile_(e,t,i,r,s,o)}setRenderReprojectionEdges(e){this.renderReprojectionEdges_!=e&&(this.renderReprojectionEdges_=e,this.changed())}setTileGridForProjection(e,t){let i=Bn(e);if(i){let r=en(i);r in this.tileGridForProjection||(this.tileGridForProjection[r]=t)}}};function Y7(n,e){n.getImage().src=e}var H2=mT;var gT=class extends H2{constructor(e){e=e||{};let t=e.projection!==void 0?e.projection:"EPSG:3857",i=e.tileGrid!==void 0?e.tileGrid:L2({extent:rv(t),maxResolution:e.maxResolution,maxZoom:e.maxZoom,minZoom:e.minZoom,tileSize:e.tileSize});super({attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:e.interpolate,projection:t,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileGrid:i,tileLoadFunction:e.tileLoadFunction,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX!==void 0?e.wrapX:!0,transition:e.transition,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.gutter_=e.gutter!==void 0?e.gutter:0}getGutter(){return this.gutter_}},G2=gT;var Z7='&#169; <a href="https://www.openstreetmap.org/copyright" target="_blank">OpenStreetMap</a> contributors.',yT=class extends G2{constructor(e){e=e||{};let t;e.attributions!==void 0?t=e.attributions:t=[Z7];let i=e.crossOrigin!==void 0?e.crossOrigin:"anonymous",r=e.url!==void 0?e.url:"https://tile.openstreetmap.org/{z}/{x}/{y}.png";super({attributions:t,attributionsCollapsible:!1,cacheSize:e.cacheSize,crossOrigin:i,interpolate:e.interpolate,maxZoom:e.maxZoom!==void 0?e.maxZoom:19,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileLoadFunction:e.tileLoadFunction,transition:e.transition,url:r,wrapX:e.wrapX,zDirection:e.zDirection})}},j2=yT;var ov=class n{isBrowser=!1;constructor(){this.isBrowser=typeof window<"u"}ngOnInit(){this.isBrowser&&this.initMap()}initMap(){let e=document.getElementById("map");if(!e){console.error('Elemento com ID "map" n\xE3o encontrado no DOM.');return}let t=new o2({target:e,layers:[new R2({source:new j2})],view:new zi({center:[-791e4,521e4],zoom:12})})}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=pn({type:n,selectors:[["app-map"]],decls:1,vars:0,consts:[["id","map",2,"width","100%","height","500px"]],template:function(t,i){t&1&&tt(0,"div",0)},dependencies:[Er],styles:["#map[_ngcontent-%COMP%]{height:500px;width:100%;position:relative;z-index:1}"]})};var av=class n{title="cl-contracting";static \u0275fac=function(t){return new(t||n)};static \u0275cmp=pn({type:n,selectors:[["app-root"]],decls:7,vars:0,template:function(t,i){t&1&&tt(0,"app-navigation")(1,"app-home-section")(2,"app-info-service")(3,"app-carousel")(4,"app-form")(5,"app-map")(6,"app-footer")},dependencies:[xm,Em,Mm,Zg,Kg,_m,ov],styles:["*[_ngcontent-%COMP%]{font-family:sans-serif}html[_ngcontent-%COMP%]{scroll-behavior:smooth}"]})};Z1(av,UR).catch(n=>console.error(n));
